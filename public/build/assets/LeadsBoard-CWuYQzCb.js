import{r as b,e as oe,o as Ee,f as Ne,g as c,i as m,j as a,B as $,w as u,D as V,x as p,t as y,n as le,F as Z,m as se,l as _,k as x,s as Ue,A as B,C as O,v as Y,z as ee}from"./vendor-vue-Db-AqoDh.js";import{a as h}from"./vendor-utils-Czy7fllw.js";import{t as R,c as G,a as ne}from"./App-CvgGPz_U.js";import"./app-BNf3UcIS.js";import"./vendor-ui-DEm6YKEA.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Se={class:"mb-4 flex items-center gap-3"},Ve={class:"flex items-center gap-2"},Le={class:"flex items-center gap-2"},Me={class:"flex items-center gap-2"},Ae={key:0,class:"text-sm text-gray-600 dark:text-slate-300"},Ie={key:1,class:"mb-3 text-sm text-red-600"},Te=["data-stage-id","onDrop"],je={class:"p-4 border-b border-gray-200 dark:border-slate-800"},Pe={class:"flex items-center justify-between gap-3"},qe={class:"text-sm font-semibold text-gray-900 dark:text-slate-100"},ze={class:"text-xs text-gray-600 dark:text-slate-300"},Fe={class:"p-3 space-y-3 min-h-[140px]"},$e={key:0,class:"text-sm text-gray-500 dark:text-slate-400 px-1"},Be=["data-lead-id"],Oe={key:0,class:"h-1 bg-blue-500 rounded-full mx-3 mb-2 animate-pulse transition-all duration-200"},Ye=["data-lead-id","draggable","onDragstart","onClick"],Re={class:"flex items-start justify-between gap-3"},Ge={class:"text-sm font-semibold text-gray-900 dark:text-slate-100"},Qe={key:0,class:"text-xs text-gray-600 dark:text-slate-300 mt-1"},He={key:1,class:"text-xs text-gray-600 dark:text-slate-300 mt-1"},Ke={key:0,class:"text-xs text-gray-700 dark:text-slate-200"},Je={key:0,class:"mt-2 text-xs text-gray-600 dark:text-slate-300"},We={key:0},Xe={key:1},Ze={key:1,class:"mt-3 flex justify-end"},et=["disabled","onClick"],tt={key:1,class:"h-1 bg-blue-500 rounded-full mx-3 mt-2 animate-pulse transition-all duration-200"},at={class:"relative w-full max-w-lg"},rt={class:"relative bg-white rounded-lg shadow dark:bg-slate-900"},ot={class:"grid gap-3"},lt={class:"flex gap-3"},st={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},nt=["placeholder"],dt={key:0,class:"text-sm text-red-600"},it={class:"mt-5 flex items-center justify-between"},ut=["disabled"],ct={class:"relative w-full max-w-lg"},mt={class:"relative bg-white rounded-lg shadow dark:bg-slate-900"},bt={class:"grid gap-3"},pt={class:"flex gap-3"},gt={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},vt={key:0,class:"text-sm text-red-600"},yt={class:"mt-5 flex items-center justify-between"},xt=["disabled"],ft={key:0,class:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},kt={class:"flex items-center gap-2"},_t=["disabled"],ht=["disabled"],Vt={__name:"LeadsBoard",setup(wt){const Q=b(!0),f=b([]),L=b(20),M=b(""),A=b(""),w=b(""),k=b(null),H=b(null),I=b(null),T=b(null),de=oe(()=>{const r=f.value.length||1;return r<=1?"grid-cols-1":r===2?"grid-cols-1 md:grid-cols-2":r===3?"grid-cols-1 md:grid-cols-3":"grid-cols-1 md:grid-cols-2 xl:grid-cols-4"}),ie=(r,e)=>{const t=Number(r);return Number.isNaN(t)?"":e==="USD"?`$${t.toFixed(2)}`:`S/ ${t.toFixed(2)}`},C=async({showLoading:r=!0}={})=>{var e,t,l,s;r&&(Q.value=!0);try{const o={limit:L.value||void 0,date_from:M.value||void 0,date_to:A.value||void 0},d=await h.get("/leads/board-data",{params:o});f.value=((t=(e=d==null?void 0:d.data)==null?void 0:e.data)==null?void 0:t.stages)??[]}catch(o){f.value=[];const d=((s=(l=o==null?void 0:o.response)==null?void 0:l.data)==null?void 0:s.message)??"No se pudo cargar el pipeline.";R(d),console.error("Leads board load error",o)}finally{r&&(Q.value=!1)}},ue=async()=>{await C()},ce=async()=>{L.value=100,M.value="",A.value="",await C()},j=b(new Set),E=(r,e)=>!!(r!=null&&r.archived_at||r!=null&&r.won_at||e!=null&&e.is_won),me=(r,e,t)=>{E(r,e)||(k.value=r,H.value=f.value.find(l=>l.id===r.stage_id),t!=null&&t.target&&(t.target.style.transform="scale(1.02)",t.target.style.opacity="0.7",t.target.style.transition="transform 0.1s ease"))},be=r=>{r!=null&&r.target&&(r.target.style.transform="",r.target.style.opacity="",r.target.style.transition=""),I.value=null,T.value=null,k.value=null,H.value=null},pe=r=>{if(!k.value)return;r.preventDefault();const e=r.currentTarget.closest("section[data-stage-id]");if(!e)return;const t=parseInt(e.getAttribute("data-stage-id")),l=f.value.find(o=>o.id===t);if(!l)return;I.value=t;const s=r.clientY;T.value=K(l,s,k.value.id)},ge=async(r,e)=>{if(e.preventDefault(),!k.value||!r)return;const t=k.value,l=H.value;if(E(t,l)){w.value="Este lead está bloqueado y no se puede mover.";return}if(!(r.is_won&&!t.customer_id&&!await G({title:"Confirmar GANADO",text:"¿Marcar este lead como GANADO? Esto lo convertirá en cliente automáticamente.",confirmText:"Sí, marcar como ganado",cancelText:"Cancelar",icon:"warning"}))){w.value="";try{if(l.id===r.id){const o=e.clientY,d=K(r,o,t.id);ve(r.id,t.id,d)}else{const o=e.clientY,d=K(r,o,t.id);ae(l.id,t.id),ye(r.id,{...t,stage_id:r.id},d),h.patch(`/leads/${t.id}/move-stage`,{stage_id:r.id}).then(()=>{const v=r.leads.map(g=>g.id);return h.patch("/leads/reorder",{stage_id:r.id,ordered_ids:v})}).catch(v=>{console.error("Error moving lead:",v),w.value="Error al mover el lead. Recargando...",C({showLoading:!1})})}}catch{w.value="Error al mover el lead. Inténtalo de nuevo.",await C({showLoading:!1})}}},te=new Map,K=(r,e,t=null)=>{let l=te.get(r.id);if(!l||!document.contains(l)){if(l=document.querySelector(`[data-stage-id="${r.id}"] .p-3`),!l)return 0;te.set(r.id,l)}const s=l.querySelectorAll("article[data-lead-id]");let o=0;for(let d=0;d<s.length;d++){const v=s[d],g=parseInt(v.getAttribute("data-lead-id"));if(t&&g===t)continue;const S=v.getBoundingClientRect();if(e<S.top+S.height/2)return o;o++}return o},ve=async(r,e,t)=>{const l=f.value.find(g=>g.id===r);if(!l||!Array.isArray(l.leads))return;const s=l.leads.findIndex(g=>g.id===e);if(s===-1||s===t)return;const[o]=l.leads.splice(s,1),d=Math.min(Math.max(0,t),l.leads.length);l.leads.splice(d,0,o),l.count=l.leads.length;const v=l.leads.map(g=>g.id);h.patch("/leads/reorder",{stage_id:r,ordered_ids:v}).catch(g=>{console.error("Error reordering leads:",g),C({showLoading:!1})})},ae=(r,e)=>{const t=f.value.find(s=>s.id===r);if(!(t!=null&&t.leads))return;const l=t.leads.findIndex(s=>s.id===e);l!==-1&&(t.leads.splice(l,1),t.count=t.leads.length)},ye=(r,e,t=0)=>{const l=f.value.find(d=>d.id===r);if(!l)return;Array.isArray(l.leads)||(l.leads=[]);const s=l.leads.findIndex(d=>d.id===e.id);s!==-1&&l.leads.splice(s,1);const o=Math.min(Math.max(0,t),l.leads.length);l.leads.splice(o,0,e),l.count=l.leads.length},xe=async(r,e)=>{var l,s;if(!(!(r!=null&&r.id)||!(e!=null&&e.is_won)&&!(r!=null&&r.won_at)||!await G({title:"Archivar lead",text:"Se ocultará del pipeline, pero seguirá visible en la tabla (historial).",confirmText:"Archivar",cancelText:"Cancelar",icon:"warning"}))){j.value.add(r.id),w.value="";try{await h.patch(`/leads/${r.id}/archive`);const o=ae(e.id,r.id);ne("Lead archivado")}catch(o){const d=((s=(l=o==null?void 0:o.response)==null?void 0:l.data)==null?void 0:s.message)??"No se pudo archivar el lead.";w.value=d,R(d)}finally{j.value.delete(r.id)}}},P=b(!1),q=b(!1),N=b(""),i=b({name:"",amount:null,currency:"PEN",contact_name:"",contact_phone:"",contact_email:"",company_name:"",company_address:"",document_type:"",document_number:""}),fe=oe(()=>i.value.document_type==="dni"?"Documento: DNI (8 dígitos)":i.value.document_type==="ruc"?"Documento: RUC (11 dígitos)":"Documento: Número (opcional)"),ke=()=>{N.value="",i.value={name:"",amount:null,currency:"PEN",contact_name:"",contact_phone:"",contact_email:"",company_name:"",company_address:"",document_type:"",document_number:""},P.value=!0},J=()=>{P.value=!1},z=r=>{var s,o,d;const e=(o=(s=r==null?void 0:r.response)==null?void 0:s.data)==null?void 0:o.errors;if(!e||typeof e!="object")return null;const t=Object.keys(e)[0],l=t?(d=e[t])==null?void 0:d[0]:null;return typeof l=="string"?l:null},_e=async()=>{var e,t;q.value=!0,N.value="";const r={name:i.value.name,amount:i.value.amount,currency:i.value.currency,contact_name:i.value.contact_name||null,contact_phone:i.value.contact_phone||null,contact_email:i.value.contact_email||null,company_name:i.value.company_name||null,company_address:i.value.company_address||null,document_type:i.value.document_type||null,document_number:i.value.document_number||null};try{await h.post("/leads",r),J(),await C()}catch(l){N.value=z(l)??((t=(e=l==null?void 0:l.response)==null?void 0:e.data)==null?void 0:t.message)??"No se pudo crear el lead."}finally{q.value=!1}},F=b(!1),D=b(!1),U=b(""),n=b({id:null,name:"",amount:null,currency:"PEN",contact_name:"",contact_phone:"",contact_email:"",company_name:"",company_address:"",document_type:"",document_number:"",observacion:""}),he=r=>{U.value="",n.value={id:r.id,name:r.name||"",amount:r.amount??null,currency:r.currency??"PEN",contact_name:r.contact_name??"",contact_phone:r.contact_phone??"",contact_email:r.contact_email??"",company_name:r.company_name??"",company_address:r.company_address??"",document_type:r.document_type??"",document_number:r.document_number??"",observacion:r.observacion??""},F.value=!0},we=async()=>{var e,t,l,s;if(!(!((e=n.value)!=null&&e.id)||!await G({title:"Marcar como desistido",text:"¿Estás seguro? Esto archivará el lead y lo moverá a la lista de desistidos.",confirmText:"Sí, marcar",cancelText:"Cancelar",icon:"warning"})))try{const o=await h.post(`/leads/${n.value.id}/desist`,{observacion:n.value.observacion||""}),d=((t=o==null?void 0:o.data)==null?void 0:t.location)||"/desistidos";window.location.assign(d)}catch(o){const d=z(o)??((s=(l=o==null?void 0:o.response)==null?void 0:l.data)==null?void 0:s.message)??"No se pudo marcar como desistido.";R(d)}},Ce=async()=>{var e,t,l,s;if(!(!((e=n.value)!=null&&e.id)||!await G({title:"Enviar a zona de espera",text:"¿Estás seguro? Esto archivará el lead y lo moverá a la zona de espera.",confirmText:"Sí, enviar",cancelText:"Cancelar",icon:"warning"})))try{const o=await h.post(`/leads/${n.value.id}/wait`,{observacion:n.value.observacion||""}),d=((t=o==null?void 0:o.data)==null?void 0:t.location)||"/espera";window.location.assign(d)}catch(o){const d=z(o)??((s=(l=o==null?void 0:o.response)==null?void 0:l.data)==null?void 0:s.message)??"No se pudo enviar a zona de espera.";R(d)}},W=()=>{F.value=!1},De=async()=>{var e,t,l;D.value=!0,U.value="";const r={name:n.value.name,amount:n.value.amount,currency:n.value.currency,observacion:n.value.observacion||null,contact_name:n.value.contact_name||null,contact_phone:n.value.contact_phone||null,contact_email:n.value.contact_email||null,company_name:n.value.company_name||null,company_address:n.value.company_address||null,document_type:n.value.document_type||null,document_number:n.value.document_number||null};try{const s=await h.put(`/leads/${n.value.id}`,r),o=(e=s==null?void 0:s.data)==null?void 0:e.data;if(o){applyLeadPatch(o,o);for(const d of f.value){if(!Array.isArray(d.leads))continue;const v=d.leads.findIndex(g=>g.id===o.id);if(v!==-1){d.leads.splice(v,1,o);break}}}ne("Lead actualizado"),W()}catch(s){U.value=z(s)??((l=(t=s==null?void 0:s.response)==null?void 0:t.data)==null?void 0:l.message)??"No se pudo actualizar el lead."}finally{D.value=!1}},re=()=>ke();return Ee(async()=>{window.addEventListener("leads:create-quick",re),await C()}),Ne(()=>{window.removeEventListener("leads:create-quick",re)}),(r,e)=>(m(),c(Z,null,[a("div",null,[e[28]||(e[28]=a("div",{class:"mb-4 text-sm text-gray-600 dark:text-slate-300"}," Arrastra un lead entre columnas para cambiar su etapa. ",-1)),a("div",Se,[a("div",Ve,[e[25]||(e[25]=a("label",{class:"text-xs text-gray-600 dark:text-slate-300"},"Limite:",-1)),u(a("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>L.value=t),class:"rounded-lg border border-gray-200 bg-white px-2 py-1 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-100 dark:focus:ring-blue-900/30"},[...e[24]||(e[24]=[a("option",{value:20},"20",-1),a("option",{value:50},"50",-1),a("option",{value:100},"100",-1),a("option",{value:250},"250",-1)])],512),[[V,L.value,void 0,{number:!0}]])]),a("div",Le,[e[26]||(e[26]=a("label",{class:"text-xs text-gray-600 dark:text-slate-300"},"Desde:",-1)),u(a("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>M.value=t),type:"date",class:"rounded-lg border border-gray-200 bg-white px-2 py-1 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 placeholder:text-gray-400 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-100 dark:placeholder:text-slate-500 dark:focus:ring-blue-900/30 dark:[color-scheme:dark]"},null,512),[[p,M.value]])]),a("div",Me,[e[27]||(e[27]=a("label",{class:"text-xs text-gray-600 dark:text-slate-300"},"Hasta:",-1)),u(a("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>A.value=t),type:"date",class:"rounded-lg border border-gray-200 bg-white px-2 py-1 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 placeholder:text-gray-400 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-100 dark:placeholder:text-slate-500 dark:focus:ring-blue-900/30 dark:[color-scheme:dark]"},null,512),[[p,A.value]])]),a("div",{class:"flex items-center gap-2 ms-auto"},[a("button",{onClick:ue,class:"inline-flex items-center rounded-lg bg-blue-600 px-3 py-1 text-sm text-white"},"Aplicar"),a("button",{onClick:ce,class:"inline-flex items-center rounded-lg border border-gray-200 bg-white px-3 py-1 text-sm text-gray-700 shadow-sm hover:bg-gray-50 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-200 dark:hover:bg-slate-800"}," Limpiar ")])]),Q.value?(m(),c("div",Ae,"Cargando...")):w.value?(m(),c("div",Ie,y(w.value),1)):(m(),c("div",{key:2,class:le(["grid gap-4",de.value])},[(m(!0),c(Z,null,se(f.value,t=>{var l,s;return m(),c("section",{key:t.id,"data-stage-id":t.id,class:"bg-white border border-gray-200 rounded-lg shadow-sm overflow-hidden dark:bg-slate-900 dark:border-slate-800",onDragover:_(pe,["prevent"]),onDrop:_(o=>ge(t,o),["prevent"])},[a("div",je,[a("div",Pe,[a("div",qe,y(t.name),1),a("div",ze,y(t.count),1)])]),a("div",Fe,[(((l=t.leads)==null?void 0:l.length)??0)===0?(m(),c("div",$e," Sin leads. ")):x("",!0),(m(!0),c(Z,null,se(t.leads,(o,d)=>{var v,g,S;return m(),c("div",{key:o.id,"data-lead-id":o.id},[I.value===t.id&&T.value===d&&((v=k.value)==null?void 0:v.id)!==o.id?(m(),c("div",Oe)):x("",!0),a("article",{"data-lead-id":o.id,class:le(["select-none bg-gray-50 border border-gray-200 rounded-lg p-3 mb-3 dark:bg-slate-800 dark:border-slate-700 will-change-transform",{"opacity-60 scale-95 shadow-lg":((g=k.value)==null?void 0:g.id)===o.id,"cursor-not-allowed opacity-80":E(o,t),"cursor-grab hover:bg-blue-50/30 dark:hover:bg-slate-800/50 hover:shadow-md":!E(o,t)}]),style:Ue(((S=k.value)==null?void 0:S.id)===o.id?"transition: none !important; transform: scale(1.02);":"transition: transform 0.1s ease, opacity 0.1s ease;"),draggable:!E(o,t),onDragstart:X=>me(o,t,X),onDragend:be,onClick:X=>he(o)},[a("div",Re,[a("div",null,[a("div",Ge,y(o.name),1),o.company_name?(m(),c("div",Qe,y(o.company_name),1)):o.contact_name?(m(),c("div",He,y(o.contact_name),1)):x("",!0)]),o.amount!==null&&o.amount!==void 0?(m(),c("div",Ke,y(ie(o.amount,o.currency)),1)):x("",!0)]),o.contact_phone||o.contact_email?(m(),c("div",Je,[o.contact_phone?(m(),c("div",We,y(o.contact_phone),1)):x("",!0),o.contact_email?(m(),c("div",Xe,y(o.contact_email),1)):x("",!0)])):x("",!0),t.is_won?(m(),c("div",Ze,[a("button",{type:"button",class:"inline-flex items-center rounded-lg border border-gray-200 bg-white px-3 py-1.5 text-xs font-medium text-gray-700 shadow-sm hover:bg-gray-50 disabled:opacity-60 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-200 dark:hover:bg-slate-800",disabled:j.value.has(o.id),onClick:_(X=>xe(o,t),["stop","prevent"])},y(j.value.has(o.id)?"Archivando…":"Archivar"),9,et)])):x("",!0)],46,Ye)],8,Be)}),128)),I.value===t.id&&T.value>=(((s=t.leads)==null?void 0:s.length)||0)?(m(),c("div",tt)):x("",!0)])],40,Te)}),128))],2))]),$(O,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:B(()=>[u(a("div",{class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/50",role:"dialog","aria-modal":"true",onClick:_(J,["self"])},[$(O,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:B(()=>[u(a("div",at,[a("div",rt,[e[31]||(e[31]=a("div",{class:"p-4 md:p-5 border-b rounded-t dark:border-slate-800"},[a("div",{class:"text-xs font-semibold text-gray-500 dark:text-slate-300 uppercase tracking-wider"},"Contacto inicial"),a("div",{class:"mt-1 text-sm text-gray-600 dark:text-slate-300"}," 0 Clientes potenciales: 0 S/ "),a("div",{class:"mt-3 text-lg font-semibold text-gray-900 dark:text-slate-100 text-center"},"Lead rápido")],-1)),a("form",{class:"p-4 md:p-5",onSubmit:_(_e,["prevent"])},[a("div",ot,[u(a("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>i.value.name=t),type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",placeholder:"Nombre",required:""},null,512),[[p,i.value.name,void 0,{trim:!0}]]),a("div",lt,[u(a("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>i.value.amount=t),type:"number",min:"0",step:"0.01",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",placeholder:"0"},null,512),[[p,i.value.amount,void 0,{number:!0}]]),u(a("select",{"onUpdate:modelValue":e[5]||(e[5]=t=>i.value.currency=t),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100"},[...e[29]||(e[29]=[a("option",{value:"PEN"},"S/",-1),a("option",{value:"USD"},"USD",-1)])],512),[[V,i.value.currency]])]),u(a("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>i.value.contact_name=t),type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",placeholder:"Contacto: Nombre"},null,512),[[p,i.value.contact_name,void 0,{trim:!0}]]),u(a("input",{"onUpdate:modelValue":e[7]||(e[7]=t=>i.value.contact_phone=t),type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",placeholder:"Contacto: Teléfono"},null,512),[[p,i.value.contact_phone,void 0,{trim:!0}]]),u(a("input",{"onUpdate:modelValue":e[8]||(e[8]=t=>i.value.contact_email=t),type:"email",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",placeholder:"Contacto: Correo"},null,512),[[p,i.value.contact_email,void 0,{trim:!0}]]),u(a("input",{"onUpdate:modelValue":e[9]||(e[9]=t=>i.value.company_name=t),type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",placeholder:"Compañía: Nombre"},null,512),[[p,i.value.company_name,void 0,{trim:!0}]]),u(a("input",{"onUpdate:modelValue":e[10]||(e[10]=t=>i.value.company_address=t),type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",placeholder:"Compañía: Dirección"},null,512),[[p,i.value.company_address,void 0,{trim:!0}]]),a("div",st,[u(a("select",{"onUpdate:modelValue":e[11]||(e[11]=t=>i.value.document_type=t),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100"},[...e[30]||(e[30]=[a("option",{value:""},"Documento: (opcional)",-1),a("option",{value:"dni"},"DNI",-1),a("option",{value:"ruc"},"RUC",-1)])],512),[[V,i.value.document_type]]),u(a("input",{"onUpdate:modelValue":e[12]||(e[12]=t=>i.value.document_number=t),type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",placeholder:fe.value},null,8,nt),[[p,i.value.document_number,void 0,{trim:!0}]])]),N.value?(m(),c("p",dt,y(N.value),1)):x("",!0)]),a("div",it,[a("button",{type:"submit",class:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-300",disabled:q.value},y(q.value?"Creando...":"Crear"),9,ut),a("div",{class:"flex items-center gap-3"},[a("button",{type:"button",class:"text-sm font-medium text-gray-600 hover:text-gray-900 dark:text-slate-300 dark:hover:text-slate-100",onClick:J}," Cancelar ")])])],32)])],512),[[Y,P.value]])]),_:1})],512),[[Y,P.value]])]),_:1}),$(O,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:B(()=>[u(a("div",{class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/50",role:"dialog","aria-modal":"true",onClick:_(W,["self"])},[$(O,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:B(()=>[u(a("div",ct,[a("div",mt,[e[37]||(e[37]=a("div",{class:"p-4 md:p-5 border-b rounded-t dark:border-slate-800"},[a("div",{class:"text-lg font-semibold text-gray-900 dark:text-slate-100 text-center"},"Editar lead")],-1)),a("form",{class:"p-4 md:p-5",onSubmit:_(De,["prevent"])},[a("div",bt,[u(a("input",{"onUpdate:modelValue":e[13]||(e[13]=t=>n.value.name=t),type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",placeholder:"Nombre",required:""},null,512),[[p,n.value.name,void 0,{trim:!0}]]),a("div",pt,[u(a("input",{"onUpdate:modelValue":e[14]||(e[14]=t=>n.value.amount=t),type:"number",min:"0",step:"0.01",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",placeholder:"0"},null,512),[[p,n.value.amount,void 0,{number:!0}]]),u(a("select",{"onUpdate:modelValue":e[15]||(e[15]=t=>n.value.currency=t),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100"},[...e[32]||(e[32]=[a("option",{value:"PEN"},"S/",-1),a("option",{value:"USD"},"USD",-1)])],512),[[V,n.value.currency]])]),u(a("input",{"onUpdate:modelValue":e[16]||(e[16]=t=>n.value.contact_name=t),type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",placeholder:"Contacto: Nombre"},null,512),[[p,n.value.contact_name,void 0,{trim:!0}]]),u(a("input",{"onUpdate:modelValue":e[17]||(e[17]=t=>n.value.contact_phone=t),type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",placeholder:"Contacto: Teléfono"},null,512),[[p,n.value.contact_phone,void 0,{trim:!0}]]),u(a("input",{"onUpdate:modelValue":e[18]||(e[18]=t=>n.value.contact_email=t),type:"email",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",placeholder:"Contacto: Correo"},null,512),[[p,n.value.contact_email,void 0,{trim:!0}]]),u(a("input",{"onUpdate:modelValue":e[19]||(e[19]=t=>n.value.company_name=t),type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",placeholder:"Compañía: Nombre"},null,512),[[p,n.value.company_name,void 0,{trim:!0}]]),u(a("input",{"onUpdate:modelValue":e[20]||(e[20]=t=>n.value.company_address=t),type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",placeholder:"Compañía: Dirección"},null,512),[[p,n.value.company_address,void 0,{trim:!0}]]),a("div",gt,[u(a("select",{"onUpdate:modelValue":e[21]||(e[21]=t=>n.value.document_type=t),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100"},[...e[33]||(e[33]=[a("option",{value:""},"Documento: (opcional)",-1),a("option",{value:"dni"},"DNI",-1),a("option",{value:"ruc"},"RUC",-1)])],512),[[V,n.value.document_type]]),u(a("input",{"onUpdate:modelValue":e[22]||(e[22]=t=>n.value.document_number=t),type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",placeholder:"Documento: Número (opcional)"},null,512),[[p,n.value.document_number,void 0,{trim:!0}]]),u(a("textarea",{"onUpdate:modelValue":e[23]||(e[23]=t=>n.value.observacion=t),rows:"3",placeholder:"Observación (motivo de desistimiento o notas)",class:"mt-2 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100"},null,512),[[p,n.value.observacion,void 0,{trim:!0}]])]),U.value?(m(),c("p",vt,y(U.value),1)):x("",!0)]),a("div",yt,[a("button",{type:"submit",class:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-300",disabled:D.value},[D.value?x("",!0):(m(),c("svg",ft,[...e[34]||(e[34]=[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])),ee(" "+y(D.value?"Guardando...":"Guardar"),1)],8,xt),a("div",kt,[a("button",{type:"button",class:"inline-flex items-center px-3 py-1.5 text-xs font-medium text-blue-700 bg-blue-50 border border-blue-200 rounded-lg hover:bg-blue-100 dark:border-blue-800 dark:bg-blue-950 dark:text-blue-300 dark:hover:bg-blue-900",disabled:D.value,onClick:_(Ce,["prevent"])},[...e[35]||(e[35]=[a("svg",{class:"w-3.5 h-3.5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),ee(" En Espera ",-1)])],8,_t),a("button",{type:"button",class:"inline-flex items-center px-3 py-1.5 text-xs font-medium text-red-700 bg-red-50 border border-red-200 rounded-lg hover:bg-red-100 dark:border-red-800 dark:bg-red-950 dark:text-red-300 dark:hover:bg-red-900",disabled:D.value,onClick:_(we,["prevent"])},[...e[36]||(e[36]=[a("svg",{class:"w-3.5 h-3.5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),ee(" Desistir ",-1)])],8,ht),a("button",{type:"button",class:"inline-flex items-center px-3 py-1.5 text-xs font-medium text-gray-700 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-300 dark:hover:bg-slate-700",onClick:W}," Cancelar ")])])],32)])],512),[[Y,F.value]])]),_:1})],512),[[Y,F.value]])]),_:1})],64))}};export{Vt as default};
