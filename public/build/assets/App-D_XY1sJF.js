const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/UsersTable-DN1KMz28.js","assets/vendor-vue-Db-AqoDh.js","assets/vendor-utils-Czy7fllw.js","assets/vendor-ui-DEm6YKEA.js","assets/BaseModal-DiudK4Y3.js","assets/RolesTable-DkgpdnOf.js","assets/LeadsBoard-CsJD7TYH.js","assets/app-CglYj3fU.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/LeadsTable-Da9rkPgL.js","assets/LeadsWhatsAppCampaign-CU8cUbtd.js","assets/LeadsEmailCampaign-BxbhdKc1.js","assets/CustomersTable-BibpDNyG.js","assets/CalendarView-Cb5yXk85.js","assets/notifications-Dl6xZJx9.js","assets/calendar-notifications-CrOVVuzr.js","assets/CalendarView-BFEl6N-c.css","assets/IncidenciasTable-DMQaVsvf.js","assets/IncidenciasBoard-DXbychUo.js","assets/BacklogBoard-BlcgM_kw.js","assets/PostventaCustomersTable-D-t8XMUc.js","assets/ContadoresTable-RPPuekvp.js","assets/CertificadosTable-CdItwKUd.js","assets/LostLeadsList-B9XZcuMy.js","assets/WaitingLeadsList-IAumSAEd.js","assets/SettingsView-B-e4xOJP.js","assets/SettingsView-C21dmcAW.css"])))=>i.map(i=>d[i]);
import{t as Le,_ as G}from"./app-CglYj3fU.js";import{e as L,r as I,o as me,f as _e,g as o,i as a,j as e,w as j,k as S,t as h,v as W,l as $e,F as de,m as ie,u as k,n as V,p as Ae,q as z,s as ye,T as we,x as ae,y as Te,z as Ce,A as ve,B as ne,C as xe,D as Se,b as Q}from"./vendor-vue-Db-AqoDh.js";import{a as X}from"./vendor-utils-Czy7fllw.js";import{S as Y}from"./vendor-ui-DEm6YKEA.js";import{_ as Ie}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ue=Y.mixin({buttonsStyling:!1,customClass:{popup:"rounded-xl border border-gray-200 bg-white text-gray-900 shadow-xl dark:!border-slate-800 dark:!bg-slate-900 dark:!text-slate-100",backdrop:"bg-black/60",title:"text-base font-semibold text-gray-900 dark:text-slate-100",htmlContainer:"text-sm text-gray-600 dark:text-slate-300",actions:"gap-2",confirmButton:"inline-flex items-center rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-300 disabled:opacity-60",cancelButton:"inline-flex items-center rounded-lg border border-gray-200 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-4 focus:ring-blue-100 disabled:opacity-60 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-200 dark:hover:bg-slate-800"}}),Ee=Y.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:2500,timerProgressBar:!0,didOpen:d=>{d.addEventListener("mouseenter",Y.stopTimer),d.addEventListener("mouseleave",Y.resumeTimer)},customClass:{popup:"rounded-xl border border-gray-200 bg-white text-gray-900 shadow-lg dark:!border-slate-800 dark:!bg-slate-900 dark:!text-slate-100",title:"text-sm font-medium",htmlContainer:"text-sm"}});async function Ve({title:d,text:C,confirmText:$="Aceptar",cancelText:b="Cancelar",icon:g="question"}={}){return(await ue.fire({title:d,text:C,icon:g,showCancelButton:!0,confirmButtonText:$,cancelButtonText:b})).isConfirmed===!0}function fe(d){return Ee.fire({icon:"success",title:d})}function ke(d){return Ee.fire({icon:"error",title:d})}function je(d){return Ee.fire({icon:"info",title:d})}function M(d){return String(d??"").replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;")}async function ol(d={}){const C=`
    <div class="grid gap-3 text-left">
      <div>
        <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Nombre</label>
        <input id="sw-cust-name" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(d.name)}" />
      </div>

      <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Contacto</label>
          <input id="sw-cust-contact_name" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(d.contact_name)}" />
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Empresa</label>
          <input id="sw-cust-company_name" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(d.company_name)}" />
        </div>
      </div>

      <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Teléfono</label>
          <input id="sw-cust-contact_phone" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(d.contact_phone)}" />
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Email</label>
          <input id="sw-cust-contact_email" type="email" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(d.contact_email)}" />
        </div>
      </div>

      <div>
        <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Dirección</label>
        <input id="sw-cust-company_address" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(d.company_address)}" />
      </div>

      <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Tipo doc</label>
          <select id="sw-cust-document_type" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100">
            <option value="" ${d.document_type?"":"selected"}>(opcional)</option>
            <option value="dni" ${d.document_type==="dni"?"selected":""}>DNI</option>
            <option value="ruc" ${d.document_type==="ruc"?"selected":""}>RUC</option>
          </select>
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Número doc</label>
          <input id="sw-cust-document_number" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(d.document_number)}" />
        </div>
      </div>
    </div>
  `,$=await ue.fire({title:"Editar cliente",html:C,focusConfirm:!1,showCancelButton:!0,confirmButtonText:"Guardar",cancelButtonText:"Cancelar",preConfirm:()=>{var w,f,u,y,A,R,O,c,U,N,P,x,l,t,s;const b=((f=(w=document.getElementById("sw-cust-name"))==null?void 0:w.value)==null?void 0:f.trim())??"",g=((y=(u=document.getElementById("sw-cust-contact_name"))==null?void 0:u.value)==null?void 0:y.trim())??"",i=((R=(A=document.getElementById("sw-cust-company_name"))==null?void 0:A.value)==null?void 0:R.trim())??"",n=((c=(O=document.getElementById("sw-cust-contact_phone"))==null?void 0:O.value)==null?void 0:c.trim())??"",E=((N=(U=document.getElementById("sw-cust-contact_email"))==null?void 0:U.value)==null?void 0:N.trim())??"",B=((x=(P=document.getElementById("sw-cust-company_address"))==null?void 0:P.value)==null?void 0:x.trim())??"",r=((l=document.getElementById("sw-cust-document_type"))==null?void 0:l.value)??"",v=((s=(t=document.getElementById("sw-cust-document_number"))==null?void 0:t.value)==null?void 0:s.trim())??"";return b?v&&!r?(Y.showValidationMessage("El tipo de documento es requerido si envías número de documento."),!1):r&&!v?(Y.showValidationMessage("El número de documento es requerido."),!1):{name:b,contact_name:g||null,company_name:i||null,contact_phone:n||null,contact_email:E||null,company_address:B||null,document_type:r||null,document_number:v||null}:(Y.showValidationMessage("El nombre es requerido."),!1)}});return $.isConfirmed?$.value:null}async function nl(){const d={name:"",contact_name:"",company_name:"",contact_phone:"",contact_email:"",company_address:"",document_number:""},C=`
    <div class="grid gap-3 text-left">
      <div>
        <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Nombre</label>
        <input id="sw-cust-name" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(d.name)}" />
      </div>

      <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Contacto</label>
          <input id="sw-cust-contact_name" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(d.contact_name)}" />
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Empresa</label>
          <input id="sw-cust-company_name" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(d.company_name)}" />
        </div>
      </div>

      <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Teléfono</label>
          <input id="sw-cust-contact_phone" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(d.contact_phone)}" />
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Email</label>
          <input id="sw-cust-contact_email" type="email" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(d.contact_email)}" />
        </div>
      </div>

      <div>
        <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Dirección</label>
        <input id="sw-cust-company_address" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(d.company_address)}" />
      </div>

      <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Tipo doc</label>
          <select id="sw-cust-document_type" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100">
            <option value="" selected>(opcional)</option>
            <option value="dni">DNI</option>
            <option value="ruc">RUC</option>
          </select>
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Número doc</label>
          <input id="sw-cust-document_number" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(d.document_number)}" />
        </div>
      </div>
    </div>
  `,$=await ue.fire({title:"Crear cliente",html:C,focusConfirm:!1,showCancelButton:!0,confirmButtonText:"Crear",cancelButtonText:"Cancelar",preConfirm:()=>{var w,f,u,y,A,R,O,c,U,N,P,x,l,t,s;const b=((f=(w=document.getElementById("sw-cust-name"))==null?void 0:w.value)==null?void 0:f.trim())??"",g=((y=(u=document.getElementById("sw-cust-contact_name"))==null?void 0:u.value)==null?void 0:y.trim())??"",i=((R=(A=document.getElementById("sw-cust-company_name"))==null?void 0:A.value)==null?void 0:R.trim())??"",n=((c=(O=document.getElementById("sw-cust-contact_phone"))==null?void 0:O.value)==null?void 0:c.trim())??"",E=((N=(U=document.getElementById("sw-cust-contact_email"))==null?void 0:U.value)==null?void 0:N.trim())??"",B=((x=(P=document.getElementById("sw-cust-company_address"))==null?void 0:P.value)==null?void 0:x.trim())??"",r=((l=document.getElementById("sw-cust-document_type"))==null?void 0:l.value)??"",v=((s=(t=document.getElementById("sw-cust-document_number"))==null?void 0:t.value)==null?void 0:s.trim())??"";return b?v&&!r?(Y.showValidationMessage("El tipo de documento es requerido si envías número de documento."),!1):r&&!v?(Y.showValidationMessage("El número de documento es requerido."),!1):{name:b,contact_name:g||null,company_name:i||null,contact_phone:n||null,contact_email:E||null,company_address:B||null,document_type:r||null,document_number:v||null}:(Y.showValidationMessage("El nombre es requerido."),!1)}});return $.isConfirmed?$.value:null}async function dl(d={}){const C=new Date,$=C.getFullYear(),b=String(C.getMonth()+1).padStart(2,"0"),g=String(C.getDate()).padStart(2,"0"),i=`${$}-${b}-${g}`,n=`
    <div class="grid gap-3 text-left">
      <div class="text-xs text-gray-600 dark:text-slate-300">
        Cliente: <span class="font-medium text-gray-900 dark:text-slate-100">${M(d.company_name||d.name||"Sin nombre")}</span>
      </div>

      <div>
        <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Fecha de pago</label>
        <input id="sw-pay-date" type="date" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${i}" />
      </div>

      <div>
        <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Detalle (opcional)</label>
        <textarea id="sw-pay-note" rows="3" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" placeholder="Ejemplo: pago mensual, renovación, monto, etc."></textarea>
      </div>
    </div>
  `,E=await ue.fire({title:"Agregar fecha de pago",html:n,focusConfirm:!1,showCancelButton:!0,confirmButtonText:"Agregar al calendario",cancelButtonText:"Cancelar",preConfirm:()=>{var v,w,f,u;const B=((w=(v=document.getElementById("sw-pay-date"))==null?void 0:v.value)==null?void 0:w.trim())??"",r=((u=(f=document.getElementById("sw-pay-note"))==null?void 0:f.value)==null?void 0:u.trim())??"";return B?{date:B,note:r||null}:(Y.showValidationMessage("La fecha de pago es requerida."),!1)}});return E.isConfirmed?E.value:null}async function il(){return Ne({nro:"",comercio:"",nom_contador:"",titular_tlf:"",telefono:"",telefono_actu:"",link:"",usuario:"",contrasena:"",servidor:"",customer:null},!0)}async function Ne(d={},C=!1){var g;(g=d==null?void 0:d.customer)==null||g.id;const $=`
    <div class="grid gap-3 text-left">
      <div class="grid grid-cols-1 gap-3 ${C?"":"sm:grid-cols-2"}">
        <div${C?' style="display: none;"':""}>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Nro</label>
          <input id="sw-cont-nro" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(d.nro)}"${C?"":" readonly"} />
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Comercio</label>
          <input id="sw-cont-comercio" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(d.comercio)}" />
        </div>
      </div>

      <div>
        <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Nombre del contador</label>
        <input id="sw-cont-nom_contador" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(d.nom_contador)}" />
      </div>

      <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Titular tlf</label>
          <input id="sw-cont-titular_tlf" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(d.titular_tlf)}" />
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Teléfono</label>
          <input id="sw-cont-telefono" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(d.telefono)}" />
        </div>
      </div>

      <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Teléfono act.</label>
          <input id="sw-cont-telefono_actu" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(d.telefono_actu)}" />
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Servidor</label>
          <input id="sw-cont-servidor" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(d.servidor)}" />
        </div>
      </div>

      <div>
        <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Link</label>
        <input id="sw-cont-link" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(d.link)}" />
      </div>

      <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Usuario</label>
          <input id="sw-cont-usuario" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(d.usuario)}" />
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Contraseña</label>
          <input id="sw-cont-contrasena" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(d.contrasena)}" />
        </div>
      </div>

      <div>
        <label class="block text-xs font-medium text-gray-600 dark:text-slate-300 mb-2">Clientes</label>
        <div id="sw-customers-container">
          <div class="customer-search-group mb-3" data-index="0">
            <div class="flex gap-2">
              <div class="flex-1 relative">
                <input 
                  type="text" 
                  class="customer-search-input w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" 
                  placeholder="Buscar cliente por nombre, empresa o documento..." 
                  autocomplete="off"
                />
                <div class="customer-dropdown absolute z-50 w-full mt-1 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 rounded-lg shadow-lg hidden max-h-48 overflow-y-auto"></div>
                <input type="hidden" class="customer-id-input" />
              </div>
              <button type="button" class="add-customer-btn px-3 py-2 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 focus:ring-4 focus:ring-green-300">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>
              </button>
              <button type="button" class="remove-customer-btn px-3 py-2 text-sm bg-red-600 text-white rounded-lg hover:bg-red-700 focus:ring-4 focus:ring-red-300 hidden">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
              </button>
            </div>
            <div class="selected-customer mt-2 hidden p-2 bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-800 rounded text-sm"></div>
          </div>
        </div>
        <div class="mt-1 text-xs text-gray-500 dark:text-slate-400">Busca y selecciona los clientes para asignar al contador.</div>
      </div>
    </div>
  `,b=await ue.fire({title:C?"Crear contador":"Editar contador",html:$,focusConfirm:!1,showCancelButton:!0,confirmButtonText:C?"Crear":"Guardar",cancelButtonText:"Cancelar",didOpen:i=>{De(i,d.customers||[])},preConfirm:()=>{var R,O,c,U,N,P,x,l,t,s,p,T,_,D,H,Z,F,J,ee,te;const i=((O=(R=document.getElementById("sw-cont-nro"))==null?void 0:R.value)==null?void 0:O.trim())??"",n=((U=(c=document.getElementById("sw-cont-comercio"))==null?void 0:c.value)==null?void 0:U.trim())??"",E=((P=(N=document.getElementById("sw-cont-nom_contador"))==null?void 0:N.value)==null?void 0:P.trim())??"",B=((l=(x=document.getElementById("sw-cont-titular_tlf"))==null?void 0:x.value)==null?void 0:l.trim())??"",r=((s=(t=document.getElementById("sw-cont-telefono"))==null?void 0:t.value)==null?void 0:s.trim())??"",v=((T=(p=document.getElementById("sw-cont-telefono_actu"))==null?void 0:p.value)==null?void 0:T.trim())??"",w=((D=(_=document.getElementById("sw-cont-servidor"))==null?void 0:_.value)==null?void 0:D.trim())??"",f=((Z=(H=document.getElementById("sw-cont-link"))==null?void 0:H.value)==null?void 0:Z.trim())??"",u=((J=(F=document.getElementById("sw-cont-usuario"))==null?void 0:F.value)==null?void 0:J.trim())??"",y=((te=(ee=document.getElementById("sw-cont-contrasena"))==null?void 0:ee.value)==null?void 0:te.trim())??"",A=[];if(document.querySelectorAll(".customer-id-input").forEach(le=>{var oe;const se=(oe=le.value)==null?void 0:oe.trim();se&&!A.includes(parseInt(se))&&A.push(parseInt(se))}),C){if(!n&&!E)return Y.showValidationMessage("Completa al menos Comercio o Nombre del contador."),!1}else if(!i&&!n&&!E)return Y.showValidationMessage("Completa al menos Nro, Comercio o Nombre del contador."),!1;return{nro:i||null,comercio:n||null,nom_contador:E||null,titular_tlf:B||null,telefono:r||null,telefono_actu:v||null,servidor:w||null,link:f||null,usuario:u||null,contrasena:y||null,customer_ids:A}}});return b.isConfirmed?b.value:null}async function ul(){return Pe({nombre:"",ruc:"",usuario:"",clave:"",fecha_creacion:"",fecha_vencimiento:"",estado:"activo",tipo:"",observacion:""},!0)}function Be(d){if(!d)return"";const C=String(d).trim();if(C==="")return"";const $=C.match(/^(\d{4}-\d{2}-\d{2})/);if($)return $[1];const b=C.match(/^(\d{2})\/(\d{2})\/(\d{4})$/);if(b)return`${b[3]}-${b[2]}-${b[1]}`;const g=new Date(C);if(Number.isNaN(g.getTime()))return"";const i=g.getFullYear(),n=String(g.getMonth()+1).padStart(2,"0"),E=String(g.getDate()).padStart(2,"0");return`${i}-${n}-${E}`}async function Pe(d={},C=!1){const $=Be(d.fecha_creacion),b=Be(d.fecha_vencimiento),g=`
    <div class="grid gap-3 text-left">
      <div>
        <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Nombre</label>
        <input id="sw-cert-nombre" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(d.nombre)}" />
      </div>

      <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">RUC</label>
          <input id="sw-cert-ruc" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(d.ruc)}" />
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Tipo</label>
          <select id="sw-cert-tipo" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100">
            <option value="" ${d.tipo?"":"selected"}>(opcional)</option>
            <option value="OSE" ${d.tipo==="OSE"?"selected":""}>OSE</option>
            <option value="PSE" ${d.tipo==="PSE"?"selected":""}>PSE</option>
          </select>
        </div>
      </div>

      <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Estado</label>
          <select id="sw-cert-estado" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100">
            <option value="activo" ${d.estado==="activo"||!d.estado?"selected":""}>Activo</option>
            <option value="inactivo" ${d.estado==="inactivo"?"selected":""}>Inactivo</option>
          </select>
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Fecha vencimiento</label>
          <input id="sw-cert-fecha_vencimiento" type="date" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(b)}" />
        </div>
      </div>

      <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Usuario</label>
          <input id="sw-cert-usuario" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(d.usuario)}" />
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Clave</label>
          <input id="sw-cert-clave" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(d.clave)}" />
        </div>
      </div>

      <div>
        <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Fecha creación</label>
        <input id="sw-cert-fecha_creacion" type="date" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M($)}" />
      </div>

      <div>
        <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Imagen</label>
        <input id="sw-cert-imagen" type="file" accept="image/*" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" />
        ${d.imagen?`<div class="mt-1 text-xs text-gray-500 dark:text-slate-400">Actual: ${M(d.imagen)}</div>`:""}
      </div>

      <div>
        <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Observación</label>
        <textarea id="sw-cert-observacion" rows="3" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100">${M(d.observacion)}</textarea>
      </div>
    </div>
  `,i=await ue.fire({title:C?"Crear certificado":"Editar certificado",html:g,focusConfirm:!1,showCancelButton:!0,confirmButtonText:C?"Crear":"Guardar",cancelButtonText:"Cancelar",preConfirm:()=>{var O,c,U,N,P,x,l,t,s,p,T,_,D,H,Z,F;const n=((c=(O=document.getElementById("sw-cert-nombre"))==null?void 0:O.value)==null?void 0:c.trim())??"",E=((N=(U=document.getElementById("sw-cert-ruc"))==null?void 0:U.value)==null?void 0:N.trim())??"",B=((P=document.getElementById("sw-cert-tipo"))==null?void 0:P.value)??"",r=((x=document.getElementById("sw-cert-estado"))==null?void 0:x.value)??"activo",v=((l=document.getElementById("sw-cert-fecha_vencimiento"))==null?void 0:l.value)??"",w=((s=(t=document.getElementById("sw-cert-usuario"))==null?void 0:t.value)==null?void 0:s.trim())??"",f=((T=(p=document.getElementById("sw-cert-clave"))==null?void 0:p.value)==null?void 0:T.trim())??"",u=((_=document.getElementById("sw-cert-fecha_creacion"))==null?void 0:_.value)??"",y=((H=(D=document.getElementById("sw-cert-imagen"))==null?void 0:D.files)==null?void 0:H[0])??null,A=((F=(Z=document.getElementById("sw-cert-observacion"))==null?void 0:Z.value)==null?void 0:F.trim())??"";if(!n)return Y.showValidationMessage("El nombre es requerido."),!1;const R={nombre:n,ruc:E||null,tipo:B||null,estado:r||"activo",fecha_vencimiento:v||null,usuario:w||null,clave:f||null,fecha_creacion:u||null,observacion:A||null};return y&&(R.imagen=y),R}});return i.isConfirmed?i.value:null}function De(d,C=[]){const $=d.querySelector("#sw-customers-container");let b=0;C.length>0&&($.innerHTML="",C.forEach((r,v)=>{i($,r,v),b=v+1}),n()),$.addEventListener("click",r=>{r.target.closest(".add-customer-btn")?(i($,null,b++),n()):r.target.closest(".remove-customer-btn")&&(r.target.closest(".customer-search-group").remove(),n())});let g;$.addEventListener("input",r=>{r.target.classList.contains("customer-search-input")&&(clearTimeout(g),g=setTimeout(()=>E(r.target),300))}),document.addEventListener("click",r=>{r.target.closest(".customer-search-group")||d.querySelectorAll(".customer-dropdown").forEach(v=>{v.classList.add("hidden")})});function i(r,v=null,w=0){const f=document.createElement("div");f.className="customer-search-group mb-3",f.setAttribute("data-index",w);const u=v?`${v.name}${v.company_name?" - "+v.company_name:""}`:"",y=v?v.id:"";f.innerHTML=`
      <div class="flex gap-2">
        <div class="flex-1 relative">
          <input 
            type="text" 
            class="customer-search-input w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" 
            placeholder="Buscar cliente por nombre, empresa o documento..." 
            autocomplete="off"
            value="${M(u)}"
          />
          <div class="customer-dropdown absolute z-50 w-full mt-1 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 rounded-lg shadow-lg hidden max-h-48 overflow-y-auto"></div>
          <input type="hidden" class="customer-id-input" value="${y}" />
        </div>
        <button type="button" class="add-customer-btn px-3 py-2 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 focus:ring-4 focus:ring-green-300">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>
        </button>
        <button type="button" class="remove-customer-btn px-3 py-2 text-sm bg-red-600 text-white rounded-lg hover:bg-red-700 focus:ring-4 focus:ring-red-300 hidden">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
        </button>
      </div>
      <div class="selected-customer mt-2 ${v?"":"hidden"} p-2 bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-800 rounded text-sm">
        ${v?`<strong>${M(v.name)}</strong>${v.company_name?" - "+M(v.company_name):""}<br><small class="text-gray-600">${v.document_number||"Sin documento"}</small>`:""}
      </div>
    `,r.appendChild(f)}function n(){const r=$.querySelectorAll(".customer-search-group");r.forEach((v,w)=>{v.querySelector(".remove-customer-btn").classList.toggle("hidden",r.length===1)})}async function E(r){const v=r.value.trim(),w=r.nextElementSibling;if(v.length<2){w.classList.add("hidden");return}try{const u=await(await fetch(`/customers/search?q=${encodeURIComponent(v)}`)).json();w.innerHTML="",u.customers&&u.customers.length>0?(u.customers.forEach(y=>{const A=document.createElement("div");A.className="p-3 hover:bg-gray-50 dark:hover:bg-slate-800 cursor-pointer border-b border-gray-100 dark:border-slate-700 last:border-b-0",A.innerHTML=`
            <div class="font-medium text-gray-900 dark:text-slate-100">${M(y.name)}</div>
            ${y.company_name?`<div class="text-sm text-gray-600 dark:text-slate-400">${M(y.company_name)}</div>`:""}
            <div class="text-xs text-gray-500 dark:text-slate-500">${y.document_number||"Sin documento"}</div>
          `,A.addEventListener("click",()=>{B(r,y)}),w.appendChild(A)}),w.classList.remove("hidden")):(w.innerHTML='<div class="p-3 text-gray-500 dark:text-slate-400 text-sm">No se encontraron clientes</div>',w.classList.remove("hidden"))}catch(f){console.error("Error searching customers:",f),w.classList.add("hidden")}}function B(r,v){const w=r.closest(".customer-search-group"),f=w.querySelector(".customer-id-input"),u=w.querySelector(".selected-customer"),y=r.nextElementSibling;r.value=`${v.name}${v.company_name?" - "+v.company_name:""}`,f.value=v.id,u.innerHTML=`
      <strong>${M(v.name)}</strong>${v.company_name?" - "+M(v.company_name):""}<br>
      <small class="text-gray-600">${v.document_number||"Sin documento"}</small>
    `,u.classList.remove("hidden"),y.classList.add("hidden")}}const Oe={class:"h-full px-3 lg:px-5 lg:pl-3"},Re={class:"h-full flex items-center justify-between"},He={class:"flex items-center justify-start rtl:justify-end"},Ue={key:0,class:"w-6 h-6","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},ze={key:1,class:"w-6 h-6","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},Ze={class:"flex items-center gap-2"},qe={class:"relative","data-notifications-container":""},Fe={key:0,class:"absolute -top-1 -right-1 min-w-5 h-5 px-1 rounded-full bg-white text-sky-700 text-[10px] font-semibold flex items-center justify-center ring-1 ring-sky-700"},We={class:"px-4 py-3"},Ge={class:"text-xs text-gray-500 dark:text-slate-300"},Qe={class:"py-2 max-h-72 overflow-auto"},Ye={key:0,class:"px-4 py-2 text-gray-500 dark:text-slate-300"},Ke=["onClick"],Je={class:"text-sm text-gray-900 dark:text-slate-100"},Xe={key:0,class:"text-xs text-gray-500 dark:text-slate-300"},et={class:"text-[11px] text-gray-400 dark:text-slate-400"},tt={key:0,class:"px-4 py-2 border-t border-gray-100 dark:border-slate-800"},st=["aria-label"],at={key:0,class:"w-5 h-5","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},lt={key:1,class:"w-5 h-5","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},rt={class:"relative flex items-center ms-3","data-user-dropdown-container":""},ot=["src","alt"],nt={key:1,class:"w-8 h-8 rounded-full bg-white text-sky-700 flex items-center justify-center text-xs font-semibold"},dt={class:"absolute right-0 top-12 z-50 my-4 text-base list-none bg-white divide-y divide-gray-100 rounded-lg shadow dark:bg-slate-900 dark:divide-slate-800"},it={class:"px-4 py-3"},ut={class:"text-sm text-gray-900 dark:text-slate-100"},ct={class:"text-sm font-medium text-gray-500 truncate dark:text-slate-300"},mt={class:"py-2"},bt={method:"POST",action:"/logout",class:"block"},gt=["value"],pt={__name:"Header",props:{sidebarCollapsed:{type:Boolean,default:!1}},emits:["toggle-sidebar"],setup(d){var x;const C=((x=document.querySelector('meta[name="csrf-token"]'))==null?void 0:x.getAttribute("content"))??"",$=L(()=>window.__AUTH_USER__??null),b=L(()=>{var l;return((l=$.value)==null?void 0:l.name)??"Usuario"}),g=L(()=>{var l;return((l=$.value)==null?void 0:l.email)??""}),i=L(()=>{var l;return((l=$.value)==null?void 0:l.profile_photo_url)??""}),n=L(()=>{var _;const l=String(((_=$.value)==null?void 0:_.name)??"").trim();if(!l)return"U";const t=l.split(/\s+/).map(D=>D.trim()).filter(Boolean);if(t.length===0)return"U";const s=Array.from(t[0])[0]??"",p=t.length>1?Array.from(t[t.length-1])[0]??"":"";return(`${s}${p}`.trim()||"U").toLocaleUpperCase("es-ES")}),E=I(!1),B=I(!1),r=I(!1),v=I([]),w=I(0);let f=null,u=new Set;const y=async({toastNew:l=!1}={})=>{var t,s;try{const p=await X.get("/notifications"),T=(t=p==null?void 0:p.data)==null?void 0:t.data,_=(T==null?void 0:T.notifications)??[],D=(T==null?void 0:T.count)??0;if(l){const H=_.filter(Z=>!u.has(Z.id));for(const Z of H.slice(0,2)){const F=(s=Z==null?void 0:Z.data)!=null&&s.title?`Recordatorio: ${Z.data.title}`:"Nuevo recordatorio";je(F)}}v.value=_,w.value=Number(D)||0,u=new Set(_.map(H=>H.id))}catch{}},A=async l=>{var s;if(!(l!=null&&l.id))return;try{await X.post(`/notifications/${l.id}/read`),B.value=!1}catch{}const t=(s=l==null?void 0:l.data)==null?void 0:s.url;t?window.location.assign(t):y({toastNew:!1})},R=l=>{if(!l)return"";const t=new Date(l);return Number.isNaN(t.getTime())?String(l):t.toLocaleString()},O=()=>{B.value=!B.value},c=()=>{r.value=!r.value},U=async()=>{try{await X.post("/notifications/mark-all-read"),await y({toastNew:!1}),B.value=!1,fe("Notificaciones marcadas como leídas")}catch(l){console.error("Error marking notifications as read:",l)}},N=()=>{E.value=document.documentElement.classList.contains("dark")},P=()=>{const l=Le();E.value=l==="dark"};return me(()=>{N(),window.addEventListener("theme:changed",N),y({toastNew:!1}),f=setInterval(()=>y({toastNew:!0}),3e4),document.addEventListener("click",l=>{B.value&&!l.target.closest("[data-notifications-container]")&&(B.value=!1),r.value&&!l.target.closest("[data-user-dropdown-container]")&&(r.value=!1)})}),_e(()=>{window.removeEventListener("theme:changed",N),f&&clearInterval(f)}),(l,t)=>(a(),o("nav",{class:V(["fixed top-0 right-0 z-50 h-16 bg-sky-600 border-b border-sky-700 shadow-sm",d.sidebarCollapsed?"left-0 sm:left-20":"left-0 sm:left-64"])},[e("div",Oe,[e("div",Re,[e("div",He,[t[5]||(t[5]=e("button",{"data-drawer-target":"logo-sidebar","data-drawer-toggle":"logo-sidebar","aria-controls":"logo-sidebar",type:"button",class:"inline-flex items-center p-2 text-sm text-white/90 rounded-lg sm:hidden hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-white/40"},[e("span",{class:"sr-only"},"Abrir sidebar"),e("svg",{class:"w-6 h-6","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"clip-rule":"evenodd","fill-rule":"evenodd",d:"M2 4.75A.75.75 0 0 1 2.75 4h14.5a.75.75 0 0 1 0 1.5H2.75A.75.75 0 0 1 2 4.75Zm0 10.5a.75.75 0 0 1 .75-.75h14.5a.75.75 0 0 1 0 1.5H2.75a.75.75 0 0 1-.75-.75ZM2 10a.75.75 0 0 1 .75-.75h14.5a.75.75 0 0 1 0 1.5H2.75A.75.75 0 0 1 2 10Z"})])],-1)),e("button",{type:"button",class:"hidden sm:inline-flex items-center p-2 text-sm text-white/90 rounded-lg hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-white/40",onClick:t[0]||(t[0]=s=>l.$emit("toggle-sidebar"))},[t[4]||(t[4]=e("span",{class:"sr-only"},"Contraer/expandir sidebar",-1)),d.sidebarCollapsed?(a(),o("svg",ze,[...t[3]||(t[3]=[e("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 0 1 1-1h8a1 1 0 1 1 0 2H5v10h7a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1V4Zm12.707 2.293a1 1 0 0 1 0 1.414L15.414 8H9a1 1 0 1 0 0 2h6.414l.293.293a1 1 0 0 1 0 1.414l-2 2a1 1 0 1 0 1.414 1.414l2-2a1 1 0 0 0 0-1.414L16.414 10l.707-.707a1 1 0 0 0 0-1.414l-2-2a1 1 0 0 0-1.414 1.414l2 2Z","clip-rule":"evenodd"},null,-1)])])):(a(),o("svg",Ue,[...t[2]||(t[2]=[e("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 0 1 1-1h8a1 1 0 1 1 0 2H5v10h7a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1V4Zm12.293 2.293a1 1 0 0 1 1.414 0l2 2a1 1 0 0 1 0 1.414l-2 2a1 1 0 1 1-1.414-1.414L15.586 10l-.293-.293a1 1 0 0 1 0-1.414ZM9 10a1 1 0 0 1 1-1h7a1 1 0 1 1 0 2h-7a1 1 0 0 1-1-1Z","clip-rule":"evenodd"},null,-1)])]))])]),e("div",Ze,[e("div",qe,[e("button",{type:"button",class:"inline-flex items-center justify-center w-9 h-9 text-sm text-white/90 rounded-lg hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-white/40","aria-expanded":"false","aria-label":"Notificaciones",onClick:O},[t[6]||(t[6]=e("svg",{class:"w-5 h-5","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M10 2a6 6 0 0 0-6 6v2.586l-.707.707A1 1 0 0 0 3 13h14a1 1 0 0 0 .707-1.707L17 10.586V8a6 6 0 0 0-6-6Zm0 16a2.5 2.5 0 0 0 2.45-2H7.55A2.5 2.5 0 0 0 10 18Z"})],-1)),w.value>0?(a(),o("span",Fe,h(w.value>99?"99+":w.value),1)):S("",!0)]),j(e("div",{class:"absolute right-0 z-50 mt-2 w-80 max-w-[90vw] text-sm bg-white divide-y divide-gray-100 rounded-lg shadow-lg border border-gray-200 dark:bg-slate-900 dark:divide-slate-800 dark:border-slate-700",onClick:t[1]||(t[1]=$e(()=>{},["stop"]))},[e("div",We,[t[7]||(t[7]=e("p",{class:"text-sm font-semibold text-gray-900 dark:text-slate-100"},"Notificaciones",-1)),e("p",Ge,"No leídas: "+h(w.value),1)]),e("ul",Qe,[v.value.length===0?(a(),o("li",Ye," No hay notificaciones nuevas. ")):S("",!0),(a(!0),o(de,null,ie(v.value,s=>{var p,T;return a(),o("li",{key:s.id},[e("button",{type:"button",class:"w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-slate-800",onClick:_=>A(s)},[e("p",Je,h(((p=s==null?void 0:s.data)==null?void 0:p.title)??"Notificación"),1),(T=s==null?void 0:s.data)!=null&&T.message?(a(),o("p",Xe,h(s.data.message),1)):S("",!0),e("p",et,h(R(s==null?void 0:s.created_at)),1)],8,Ke)])}),128))]),v.value.length>0?(a(),o("div",tt,[e("button",{type:"button",class:"text-xs text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",onClick:U}," Marcar todas como leídas ")])):S("",!0)],512),[[W,B.value]])]),e("button",{type:"button",class:"inline-flex items-center justify-center w-9 h-9 text-sm text-white/90 rounded-lg hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-white/40","aria-label":E.value?"Cambiar a modo claro":"Cambiar a modo oscuro",onClick:P},[E.value?(a(),o("svg",at,[...t[8]||(t[8]=[e("path",{d:"M10 2a1 1 0 0 1 1 1v1a1 1 0 1 1-2 0V3a1 1 0 0 1 1-1Zm4.95 3.05a1 1 0 0 1 0 1.41l-.7.7a1 1 0 1 1-1.41-1.41l.7-.7a1 1 0 0 1 1.41 0ZM17 9a1 1 0 1 1 0 2h-1a1 1 0 1 1 0-2h1ZM10 6a4 4 0 1 0 0 8 4 4 0 0 0 0-8ZM4 9a1 1 0 1 0 0 2H3a1 1 0 1 0 0-2h1Zm2.16-3.54a1 1 0 0 1 1.41 0l.7.7a1 1 0 0 1-1.41 1.41l-.7-.7a1 1 0 0 1 0-1.41ZM10 16a1 1 0 0 1 1 1v1a1 1 0 1 1-2 0v-1a1 1 0 0 1 1-1Zm5.54.46a1 1 0 0 1 0 1.41l-.7.7a1 1 0 1 1-1.41-1.41l.7-.7a1 1 0 0 1 1.41 0ZM6.57 15.76a1 1 0 0 1 0 1.41l-.7.7a1 1 0 1 1-1.41-1.41l.7-.7a1 1 0 0 1 1.41 0Z"},null,-1)])])):(a(),o("svg",lt,[...t[9]||(t[9]=[e("path",{d:"M17.293 13.293A8 8 0 0 1 6.707 2.707a1 1 0 0 1 1.11-1.66A10 10 0 1 0 18.953 12.183a1 1 0 0 1-1.66 1.11Z"},null,-1)])]))],8,st),e("div",rt,[e("button",{type:"button",class:"flex text-sm rounded-full ring-1 ring-sky-700 hover:ring-white/60 focus:ring-4 focus:ring-white/30","aria-expanded":"false",onClick:c},[t[10]||(t[10]=e("span",{class:"sr-only"},"Abrir menú de usuario",-1)),i.value?(a(),o("img",{key:0,src:i.value,alt:b.value,class:"w-8 h-8 rounded-full object-cover bg-white ring-1 ring-sky-700",loading:"lazy"},null,8,ot)):(a(),o("div",nt,h(n.value),1))]),j(e("div",dt,[e("div",it,[e("p",ut,h(b.value),1),e("p",ct,h(g.value),1)]),e("ul",mt,[t[12]||(t[12]=e("li",null,[e("a",{href:"/profile",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-slate-200 dark:hover:bg-slate-800"}," Perfil ")],-1)),t[13]||(t[13]=e("li",null,[e("a",{href:"/configuracion",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-slate-200 dark:hover:bg-slate-800"}," Configuración ")],-1)),e("li",null,[e("form",bt,[e("input",{type:"hidden",name:"_token",value:k(C)},null,8,gt),t[11]||(t[11]=e("button",{type:"submit",class:"w-full text-left block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-slate-200 dark:hover:bg-slate-800"}," Salir ",-1))])])])],512),[[W,r.value]])])])])])],2))}},vt="/build/assets/LOGO-cdeU89Pk.png",xt="/build/assets/LOGO_TEXTO-CJ7UpWu5.png",ft={class:"h-full flex flex-col bg-slate-900"},ht={href:"/dashboard",class:"flex items-center w-full gap-2"},yt=["src"],wt=["src"],kt={class:"flex-1 px-3 pb-4 overflow-y-auto"},_t={class:"px-2 pt-2 pb-3 text-xs font-semibold text-slate-300 uppercase tracking-wider"},$t={class:"space-y-2 font-medium"},Ct={class:"ms-3"},Et={key:0},Tt={class:"flex-1 ms-3 whitespace-nowrap"},Bt={key:1},St={class:"flex-1 ms-3 whitespace-nowrap"},It={key:2},Mt={class:"flex-1 ms-3 whitespace-nowrap"},Lt={class:"mt-2 space-y-1 pl-2"},At={key:3},Vt={class:"flex-1 ms-3 whitespace-nowrap"},jt={class:"mt-2 space-y-1 pl-2"},Nt={key:0},Pt={key:1},Dt={key:4},Ot={class:"flex-1 ms-3 whitespace-nowrap"},Rt={key:5},Ht={class:"flex-1 ms-3 whitespace-nowrap"},Ut={key:6},zt={class:"flex-1 ms-3 whitespace-nowrap"},Zt={class:"mt-2 space-y-1 pl-2"},qt={class:"min-w-56 bg-slate-900 border border-slate-800 rounded-lg shadow-sm overflow-hidden"},Ft={class:"py-2"},Wt={key:0},Gt={key:1},Qt={__name:"Sidebar",props:{collapsed:{type:Boolean,default:!1}},setup(d){const C=window.__APP_LOGO_MARK__??"",$=window.__APP_LOGO_FULL__??"",b=L(()=>C||vt),g=L(()=>$||xt),i=window.location.pathname,n=q=>q==="/dashboard"?i==="/dashboard":i.startsWith(q),E=q=>i===q,B=d,{collapsed:r}=Ae(B),v=L(()=>window.__AUTH_USER__??null),w=q=>{var K;const m=(K=v.value)==null?void 0:K.permissions;return Array.isArray(m)&&m.includes(q)},f=L(()=>w("menu.users")),u=L(()=>w("menu.roles")),y=L(()=>w("menu.leads")),A=L(()=>w("menu.email")||w("menu.leads")),R=L(()=>w("menu.inbox")),O=L(()=>w("menu.customers")),c=L(()=>w("menu.calendar")||w("calendar.view")),U=L(()=>w("menu.postventa")),N=I(n("/incidencias")||n("/backlog")||n("/postventa")),P=I(!1),x=I(null),l=I({left:"0px",top:"0px"});let t=null;const s=()=>{var m,K;if(!r.value)return;t&&(clearTimeout(t),t=null);const q=(K=(m=x.value)==null?void 0:m.getBoundingClientRect)==null?void 0:K.call(m);q&&(l.value={left:`${Math.round(q.right+8)}px`,top:`${Math.round(q.top)}px`}),P.value=!0},p=()=>{r.value&&(t&&clearTimeout(t),t=setTimeout(()=>{P.value=!1},120))},T=()=>{if(r.value){window.location.assign("/backlog");return}N.value=!N.value},_=I(E("/leads")||n("/desistidos")||n("/espera")),D=I(!1),H=I(null),Z=I({left:"0px",top:"0px"});let F=null;const J=()=>{var m,K;if(!r.value)return;F&&(clearTimeout(F),F=null);const q=(K=(m=H.value)==null?void 0:m.getBoundingClientRect)==null?void 0:K.call(m);q&&(Z.value={left:`${Math.round(q.right+8)}px`,top:`${Math.round(q.top)}px`}),D.value=!0},ee=()=>{r.value&&(F&&clearTimeout(F),F=setTimeout(()=>{D.value=!1},120))},te=()=>{if(r.value){window.location.assign("/leads");return}_.value=!_.value},le=I(n("/leads/whatsapp")||n("/leads/email")),se=I(!1),oe=I(null),be=I({left:"0px",top:"0px"});let re=null;const ge=()=>{var m,K;if(!r.value)return;re&&(clearTimeout(re),re=null);const q=(K=(m=oe.value)==null?void 0:m.getBoundingClientRect)==null?void 0:K.call(m);q&&(be.value={left:`${Math.round(q.right+8)}px`,top:`${Math.round(q.top)}px`}),se.value=!0},pe=()=>{r.value&&(re&&clearTimeout(re),re=setTimeout(()=>{se.value=!1},120))},he=()=>{if(r.value){window.location.assign("/leads/whatsapp");return}le.value=!le.value};return(q,m)=>(a(),o("aside",{id:"logo-sidebar",class:V(["fixed top-0 left-0 z-40 h-screen transition-all duration-200 -translate-x-full bg-slate-900 border-r border-slate-950 sm:translate-x-0",k(r)?"w-20":"w-64"]),"aria-label":"Sidebar"},[e("div",ft,[e("div",{class:V(["h-16 px-2 flex items-center bg-sky-600 border-b border-sky-700 overflow-hidden",k(r)?"justify-center":"justify-start"])},[e("a",ht,[k(r)?(a(),o("img",{key:0,src:b.value,alt:"Atlantis",class:"h-14 w-14 object-contain"},null,8,yt)):(a(),o("img",{key:1,src:g.value,alt:"Atlantis",class:"h-14 w-full max-w-full flex-1 object-contain object-left"},null,8,wt))])],2),e("div",kt,[j(e("div",_t," Menú ",512),[[W,!k(r)]]),e("ul",$t,[e("li",null,[e("a",{href:"/dashboard",title:"Inicio","aria-current":"page",class:V(["flex items-center p-2 rounded-lg group",[k(r)?"justify-center":"",n("/dashboard")?"text-white bg-slate-800 border border-slate-700":"text-slate-200 hover:bg-slate-800"]])},[(a(),o("svg",{class:V(["w-5 h-5",n("/dashboard")?"text-white/90":"text-slate-300 group-hover:text-white"]),"aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[...m[0]||(m[0]=[e("path",{d:"M10 2a1 1 0 0 1 .7.3l7 7a1 1 0 0 1-1.4 1.4L16 10.4V17a1 1 0 0 1-1 1h-3a1 1 0 0 1-1-1v-3H9v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-6.6l-.3.3A1 1 0 1 1 2.3 9.3l7-7A1 1 0 0 1 10 2Z"},null,-1)])],2)),j(e("span",Ct,"Inicio",512),[[W,!k(r)]])],2)]),f.value?(a(),o("li",Et,[e("a",{href:"/users",title:"Usuarios",class:V(["flex items-center p-2 rounded-lg group",[k(r)?"justify-center":"",n("/users")?"text-white bg-slate-800 border border-slate-700":"text-slate-200 hover:bg-slate-800"]])},[(a(),o("svg",{class:V(["w-5 h-5",n("/users")?"text-white/90":"text-slate-300 group-hover:text-white"]),"aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[...m[1]||(m[1]=[e("path",{d:"M10 10a4 4 0 1 0-4-4 4 4 0 0 0 4 4Zm-7 8a7 7 0 0 1 14 0 1 1 0 0 1-2 0 5 5 0 0 0-10 0 1 1 0 0 1-2 0Z"},null,-1)])],2)),j(e("span",Tt,"Usuarios",512),[[W,!k(r)]])],2)])):S("",!0),u.value?(a(),o("li",Bt,[e("a",{href:"/roles",title:"Roles",class:V(["flex items-center p-2 rounded-lg group",[k(r)?"justify-center":"",n("/roles")?"text-white bg-slate-800 border border-slate-700":"text-slate-200 hover:bg-slate-800"]])},[(a(),o("svg",{class:V(["w-5 h-5",n("/roles")?"text-white/90":"text-slate-300 group-hover:text-white"]),"aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[...m[2]||(m[2]=[e("path",{d:"M10 2l7 3v5c0 5-3.58 9.74-7 10-3.42-.26-7-5-7-10V5l7-3z"},null,-1)])],2)),j(e("span",St,"Roles",512),[[W,!k(r)]])],2)])):S("",!0),y.value?(a(),o("li",It,[e("div",{class:"relative",ref_key:"pipelineAnchor",ref:H,onMouseenter:J,onMouseleave:ee},[e("button",{type:"button",class:V(["w-full flex items-center p-2 rounded-lg group",[k(r)?"justify-center":"",E("/leads")||n("/desistidos")||n("/espera")?"text-white bg-slate-800 border border-slate-700":"text-slate-200 hover:bg-slate-800"]]),onClick:te},[(a(),o("svg",{class:V(["w-5 h-5",E("/leads")||n("/desistidos")||n("/espera")?"text-white/90":"text-slate-300 group-hover:text-white"]),"aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[...m[3]||(m[3]=[e("path",{d:"M3 3h14v4H3V3zm0 6h6v8H3v-8zm8 0h6v8h-6v-8z"},null,-1)])],2)),j(e("span",Mt,"Pipeline",512),[[W,!k(r)]]),j((a(),o("svg",{class:V(["w-4 h-4",_.value?"rotate-180":""]),"aria-hidden":"true",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[...m[4]||(m[4]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2)),[[W,!k(r)]])],2),j(e("ul",Lt,[e("li",null,[e("a",{href:"/leads",class:V(["flex items-center gap-3 p-2 rounded-lg group",["text-slate-200 hover:bg-slate-800",k(i)==="/leads"?"bg-slate-800 border border-slate-700":""]])},[...m[5]||(m[5]=[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"},null,-1),e("span",{class:"whitespace-nowrap"},"Leads",-1)])],2)]),e("li",null,[e("a",{href:"/espera",class:V(["flex items-center gap-3 p-2 rounded-lg group",["text-slate-200 hover:bg-slate-800",n("/espera")?"bg-slate-800 border border-slate-700":""]])},[...m[6]||(m[6]=[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"},null,-1),e("span",{class:"whitespace-nowrap"},"Zona de espera",-1)])],2)]),e("li",null,[e("a",{href:"/desistidos",class:V(["flex items-center gap-3 p-2 rounded-lg group",["text-slate-200 hover:bg-slate-800",n("/desistidos")?"bg-slate-800 border border-slate-700":""]])},[...m[7]||(m[7]=[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"},null,-1),e("span",{class:"whitespace-nowrap"},"Desistidos",-1)])],2)])],512),[[W,!k(r)&&_.value]])],544)])):S("",!0),R.value?(a(),o("li",At,[e("div",{class:"relative",ref_key:"inboxAnchor",ref:oe,onMouseenter:ge,onMouseleave:pe},[e("button",{type:"button",class:V(["w-full flex items-center p-2 rounded-lg group",[k(r)?"justify-center":"",n("/leads/whatsapp")||n("/leads/email")?"text-white bg-slate-800 border border-slate-700":"text-slate-200 hover:bg-slate-800"]]),onClick:he},[(a(),o("svg",{class:V(["w-5 h-5",n("/leads/whatsapp")||n("/leads/email")?"text-white/90":"text-slate-300 group-hover:text-white"]),"aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[...m[8]||(m[8]=[e("path",{d:"M2 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4zm2 0 6 4 6-4H4zm14 2.2-8 5.3-8-5.3V16h16V6.2z"},null,-1)])],2)),j(e("span",Vt,"Bandeja de entrada",512),[[W,!k(r)]]),j((a(),o("svg",{class:V(["w-4 h-4",le.value?"rotate-180":""]),"aria-hidden":"true",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[...m[9]||(m[9]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2)),[[W,!k(r)]])],2),j(e("ul",jt,[y.value?(a(),o("li",Nt,[e("a",{href:"/leads/whatsapp",class:V(["flex items-center gap-3 p-2 rounded-lg group",["text-slate-200 hover:bg-slate-800",k(i)==="/leads/whatsapp"?"bg-slate-800 border border-slate-700":""]])},[...m[10]||(m[10]=[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"},null,-1),e("span",{class:"whitespace-nowrap"},"WhatsApp masivo",-1)])],2)])):S("",!0),A.value?(a(),o("li",Pt,[e("a",{href:"/leads/email",class:V(["flex items-center gap-3 p-2 rounded-lg group",["text-slate-200 hover:bg-slate-800",k(i)==="/leads/email"?"bg-slate-800 border border-slate-700":""]])},[...m[11]||(m[11]=[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"},null,-1),e("span",{class:"whitespace-nowrap"},"Email masivo",-1)])],2)])):S("",!0)],512),[[W,!k(r)&&le.value]])],544)])):S("",!0),O.value?(a(),o("li",Dt,[e("a",{href:"/customers",title:"Clientes",class:V(["flex items-center p-2 rounded-lg group",[k(r)?"justify-center":"",n("/customers")?"text-white bg-slate-800 border border-slate-700":"text-slate-200 hover:bg-slate-800"]])},[(a(),o("svg",{class:V(["w-5 h-5",n("/customers")?"text-white/90":"text-slate-300 group-hover:text-white"]),"aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[...m[12]||(m[12]=[e("path",{d:"M3 21h14v-8H3v8zM5 10h10v11H5V10zM7 3h6v4H7V3zM3 7h14v2H3V7z"},null,-1)])],2)),j(e("span",Ot,"Clientes",512),[[W,!k(r)]])],2)])):S("",!0),c.value?(a(),o("li",Rt,[e("a",{href:"/calendar",title:"Calendario",class:V(["flex items-center p-2 rounded-lg group",[k(r)?"justify-center":"",n("/calendar")?"text-white bg-slate-800 border border-slate-700":"text-slate-200 hover:bg-slate-800"]])},[(a(),o("svg",{class:V(["w-5 h-5",n("/calendar")?"text-white/90":"text-slate-300 group-hover:text-white"]),"aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[...m[13]||(m[13]=[e("path",{d:"M6 2a1 1 0 1 0 0 2h8a1 1 0 1 0 0-2H6Z"},null,-1),e("path",{"fill-rule":"evenodd",d:"M4 5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V5Zm3 4a1 1 0 0 0 0 2h6a1 1 0 1 0 0-2H7Zm0 4a1 1 0 1 0 0 2h4a1 1 0 1 0 0-2H7Z","clip-rule":"evenodd"},null,-1)])],2)),j(e("span",Ht,"Calendario",512),[[W,!k(r)]])],2)])):S("",!0),U.value?(a(),o("li",Ut,[e("div",{class:"relative",ref_key:"postventaAnchor",ref:x,onMouseenter:s,onMouseleave:p},[e("button",{type:"button",class:V(["w-full flex items-center p-2 rounded-lg group",[k(r)?"justify-center":"",n("/incidencias")||n("/backlog")||n("/postventa")?"text-white bg-slate-800 border border-slate-700":"text-slate-200 hover:bg-slate-800"]]),onClick:T},[(a(),o("svg",{class:V(["w-5 h-5",n("/incidencias")||n("/backlog")||n("/postventa")?"text-white/90":"text-slate-300 group-hover:text-white"]),"aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[...m[14]||(m[14]=[e("path",{d:"M11.3 1.046a1 1 0 0 0-2.6 0l-.2.682a6.96 6.96 0 0 0-1.18.49l-.63-.35a1 1 0 0 0-1.24.22l-.9.9a1 1 0 0 0-.22 1.24l.35.63a6.96 6.96 0 0 0-.49 1.18l-.682.2a1 1 0 0 0 0 2.6l.682.2c.12.42.28.82.49 1.2l-.35.63a1 1 0 0 0 .22 1.24l.9.9a1 1 0 0 0 1.24.22l.63-.35c.38.2.78.37 1.2.49l.2.682a1 1 0 0 0 2.6 0l.2-.682c.42-.12.82-.28 1.2-.49l.63.35a1 1 0 0 0 1.24-.22l.9-.9a1 1 0 0 0 .22-1.24l-.35-.63c.2-.38.37-.78.49-1.2l.682-.2a1 1 0 0 0 0-2.6l-.682-.2a6.96 6.96 0 0 0-.49-1.18l.35-.63a1 1 0 0 0-.22-1.24l-.9-.9a1 1 0 0 0-1.24-.22l-.63.35c-.38-.2-.78-.37-1.2-.49l-.2-.682ZM10 13a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z"},null,-1)])],2)),j(e("span",zt,"Postventa",512),[[W,!k(r)]]),j((a(),o("svg",{class:V(["w-4 h-4",N.value?"rotate-180":""]),"aria-hidden":"true",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[...m[15]||(m[15]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2)),[[W,!k(r)]])],2),j(e("ul",Zt,[e("li",null,[e("a",{href:"/backlog",class:V(["flex items-center gap-3 p-2 rounded-lg group",["text-slate-200 hover:bg-slate-800",n("/incidencias")||n("/backlog")?"bg-slate-800 border border-slate-700":""]])},[...m[16]||(m[16]=[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"},null,-1),e("span",{class:"whitespace-nowrap"},"Incidencias",-1)])],2)]),e("li",null,[e("a",{href:"/postventa/clientes",class:V(["flex items-center gap-3 p-2 rounded-lg group",["text-slate-200 hover:bg-slate-800",n("/postventa/clientes")?"bg-slate-800 border border-slate-700":""]])},[...m[17]||(m[17]=[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"},null,-1),e("span",{class:"whitespace-nowrap"},"Clientes",-1)])],2)]),e("li",null,[e("a",{href:"/postventa/contadores",class:V(["flex items-center gap-3 p-2 rounded-lg group",["text-slate-200 hover:bg-slate-800",n("/postventa/contadores")?"bg-slate-800 border border-slate-700":""]])},[...m[18]||(m[18]=[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"},null,-1),e("span",{class:"whitespace-nowrap"},"Contadores",-1)])],2)]),e("li",null,[e("a",{href:"/postventa/certificados",class:V(["flex items-center gap-3 p-2 rounded-lg group",["text-slate-200 hover:bg-slate-800",n("/postventa/certificados")?"bg-slate-800 border border-slate-700":""]])},[...m[19]||(m[19]=[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"},null,-1),e("span",{class:"whitespace-nowrap"},"Certificados",-1)])],2)])],512),[[W,!k(r)&&N.value]])],544)])):S("",!0)])])]),(a(),z(we,{to:"body"},[k(r)?j((a(),o("div",{key:0,class:"fixed z-[9999]",style:ye(l.value),onMouseenter:s,onMouseleave:p},[...m[20]||(m[20]=[e("div",{class:"min-w-56 bg-slate-900 border border-slate-800 rounded-lg shadow-sm overflow-hidden"},[e("div",{class:"px-4 py-3 flex items-center justify-between border-b border-slate-800"},[e("div",{class:"text-sm font-semibold text-slate-100"},"Postventa"),e("svg",{class:"w-4 h-4 text-slate-300","aria-hidden":"true",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])]),e("ul",{class:"py-2"},[e("li",null,[e("a",{href:"/backlog",class:"flex items-center gap-3 px-4 py-2 text-sm text-slate-200 hover:bg-slate-800"},[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"}),e("span",{class:"whitespace-nowrap"},"Incidencias")])]),e("li",null,[e("a",{href:"/postventa/clientes",class:"flex items-center gap-3 px-4 py-2 text-sm text-slate-200 hover:bg-slate-800"},[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"}),e("span",{class:"whitespace-nowrap"},"Clientes")])]),e("li",null,[e("a",{href:"/postventa/contadores",class:"flex items-center gap-3 px-4 py-2 text-sm text-slate-200 hover:bg-slate-800"},[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"}),e("span",{class:"whitespace-nowrap"},"Contadores")])]),e("li",null,[e("a",{href:"/postventa/certificados",class:"flex items-center gap-3 px-4 py-2 text-sm text-slate-200 hover:bg-slate-800"},[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"}),e("span",{class:"whitespace-nowrap"},"Certificados")])])])],-1)])],36)),[[W,P.value]]):S("",!0)])),(a(),z(we,{to:"body"},[k(r)?j((a(),o("div",{key:0,class:"fixed z-[9999]",style:ye(Z.value),onMouseenter:J,onMouseleave:ee},[...m[21]||(m[21]=[e("div",{class:"min-w-56 bg-slate-900 border border-slate-800 rounded-lg shadow-sm overflow-hidden"},[e("div",{class:"px-4 py-3 flex items-center justify-between border-b border-slate-800"},[e("div",{class:"text-sm font-semibold text-slate-100"},"Pipeline"),e("svg",{class:"w-4 h-4 text-slate-300","aria-hidden":"true",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])]),e("ul",{class:"py-2"},[e("li",null,[e("a",{href:"/leads",class:"flex items-center gap-3 px-4 py-2 text-sm text-slate-200 hover:bg-slate-800"},[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"}),e("span",{class:"whitespace-nowrap"},"Leads")])]),e("li",null,[e("a",{href:"/espera",class:"flex items-center gap-3 px-4 py-2 text-sm text-slate-200 hover:bg-slate-800"},[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"}),e("span",{class:"whitespace-nowrap"},"Zona de espera")])]),e("li",null,[e("a",{href:"/desistidos",class:"flex items-center gap-3 px-4 py-2 text-sm text-slate-200 hover:bg-slate-800"},[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"}),e("span",{class:"whitespace-nowrap"},"Desistidos")])])])],-1)])],36)),[[W,D.value]]):S("",!0)])),(a(),z(we,{to:"body"},[k(r)?j((a(),o("div",{key:0,class:"fixed z-[9999]",style:ye(be.value),onMouseenter:ge,onMouseleave:pe},[e("div",qt,[m[24]||(m[24]=e("div",{class:"px-4 py-3 flex items-center justify-between border-b border-slate-800"},[e("div",{class:"text-sm font-semibold text-slate-100"},"Bandeja de entrada"),e("svg",{class:"w-4 h-4 text-slate-300","aria-hidden":"true",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1)),e("ul",Ft,[y.value?(a(),o("li",Wt,[...m[22]||(m[22]=[e("a",{href:"/leads/whatsapp",class:"flex items-center gap-3 px-4 py-2 text-sm text-slate-200 hover:bg-slate-800"},[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"}),e("span",{class:"whitespace-nowrap"},"WhatsApp masivo")],-1)])])):S("",!0),A.value?(a(),o("li",Gt,[...m[23]||(m[23]=[e("a",{href:"/leads/email",class:"flex items-center gap-3 px-4 py-2 text-sm text-slate-200 hover:bg-slate-800"},[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"}),e("span",{class:"whitespace-nowrap"},"Email masivo")],-1)])])):S("",!0)])])],36)),[[W,se.value]]):S("",!0)]))],2))}},Yt={class:"bg-white border-t border-gray-200 dark:bg-slate-950 dark:border-slate-800"},Kt={class:"max-w-7xl mx-auto px-4 py-6"},Jt={class:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"},Xt={class:"text-sm text-gray-500 dark:text-slate-300"},es={__name:"Footer",setup(d){const C=new Date().getFullYear();return($,b)=>(a(),o("footer",Yt,[e("div",Kt,[e("div",Jt,[e("span",Xt,"© "+h(k(C))+" CRM ATLANTIS",1),b[0]||(b[0]=e("div",{class:"flex gap-4"},[e("a",{href:"#",class:"text-sm text-gray-500 hover:text-gray-900 dark:text-slate-300 dark:hover:text-slate-100"},"Ayuda"),e("a",{href:"#",class:"text-sm text-gray-500 hover:text-gray-900 dark:text-slate-300 dark:hover:text-slate-100"},"Privacidad"),e("a",{href:"#",class:"text-sm text-gray-500 hover:text-gray-900 dark:text-slate-300 dark:hover:text-slate-100"},"Términos")],-1))])])]))}},ts={key:0,class:"rounded-lg border border-slate-200 bg-white p-6 text-sm text-slate-600 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-300"},ss={key:1,class:"rounded-lg border border-red-200 bg-white p-6 text-sm text-red-700 dark:border-red-900/40 dark:bg-slate-900 dark:text-red-300"},as={key:2,class:"space-y-6"},ls={class:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-end"},rs={class:"flex items-center gap-2"},os=["disabled"],ns={class:"grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-4"},ds={key:0,href:"/leads",class:"block rounded-lg border border-slate-200 bg-white p-6 shadow-sm hover:bg-slate-50 dark:border-slate-800 dark:bg-slate-900 dark:hover:bg-slate-800"},is={class:"mt-3 text-3xl font-semibold text-slate-900 dark:text-slate-100"},us={class:"mt-2 text-sm text-slate-600 dark:text-slate-300"},cs={key:1,href:"/customers",class:"block rounded-lg border border-slate-200 bg-white p-6 shadow-sm hover:bg-slate-50 dark:border-slate-800 dark:bg-slate-900 dark:hover:bg-slate-800"},ms={class:"mt-3 text-3xl font-semibold text-slate-900 dark:text-slate-100"},bs={key:2,href:"/backlog",class:"block rounded-lg border border-slate-200 bg-white p-6 shadow-sm hover:bg-slate-50 dark:border-slate-800 dark:bg-slate-900 dark:hover:bg-slate-800"},gs={class:"mt-3 text-3xl font-semibold text-slate-900 dark:text-slate-100"},ps={class:"mt-2 text-sm text-slate-600 dark:text-slate-300"},vs={key:3,href:"/postventa/certificados",class:"block rounded-lg border border-slate-200 bg-white p-6 shadow-sm hover:bg-slate-50 dark:border-slate-800 dark:bg-slate-900 dark:hover:bg-slate-800"},xs={class:"mt-3 text-3xl font-semibold text-slate-900 dark:text-slate-100"},fs={class:"mt-2 text-sm text-slate-600 dark:text-slate-300"},hs={key:4,href:"/postventa/contadores",class:"block rounded-lg border border-slate-200 bg-white p-6 shadow-sm hover:bg-slate-50 dark:border-slate-800 dark:bg-slate-900 dark:hover:bg-slate-800"},ys={class:"mt-3 text-3xl font-semibold text-slate-900 dark:text-slate-100"},ws={class:"mt-2 text-sm text-slate-600 dark:text-slate-300"},ks={key:5,href:"/calendar",class:"block rounded-lg border border-slate-200 bg-white p-6 shadow-sm hover:bg-slate-50 dark:border-slate-800 dark:bg-slate-900 dark:hover:bg-slate-800"},_s={class:"mt-3 text-3xl font-semibold text-slate-900 dark:text-slate-100"},$s={class:"grid grid-cols-1 gap-6 lg:grid-cols-3"},Cs={class:"lg:col-span-2"},Es={class:"rounded-lg border border-slate-200 bg-white shadow-sm dark:border-slate-800 dark:bg-slate-900"},Ts={class:"border-b border-slate-200 p-6 dark:border-slate-800"},Bs={class:"flex items-center justify-between"},Ss={key:0,href:"/postventa/certificados",class:"text-sm font-medium text-blue-600 hover:underline"},Is={class:"overflow-x-auto"},Ms={class:"min-w-full text-left text-sm text-slate-700 dark:text-slate-200"},Ls={class:"px-6 py-3 font-medium text-slate-900 dark:text-slate-100"},As={class:"px-6 py-3"},Vs={class:"px-6 py-3"},js={class:"px-6 py-3"},Ns={key:0},Ps={class:"rounded-lg border border-slate-200 bg-white shadow-sm dark:border-slate-800 dark:bg-slate-900"},Ds={class:"border-b border-slate-200 p-6 dark:border-slate-800"},Os={class:"flex items-center justify-between"},Rs={key:0,href:"/calendar",class:"text-sm font-medium text-blue-600 hover:underline"},Hs={class:"p-6"},Us={key:0,class:"text-sm text-slate-500 dark:text-slate-300"},zs={key:1,class:"space-y-3"},Zs={class:"text-sm font-semibold text-slate-900 dark:text-slate-100"},qs={class:"mt-1 text-xs text-slate-600 dark:text-slate-300"},Fs={key:0},Ws={class:"grid grid-cols-1 gap-6 lg:grid-cols-2"},Gs={key:0,class:"rounded-lg border border-slate-200 bg-white shadow-sm dark:border-slate-800 dark:bg-slate-900"},Qs={class:"divide-y divide-slate-200 dark:divide-slate-800"},Ys={class:"flex items-center justify-between gap-3"},Ks={class:"text-sm font-semibold text-slate-900 dark:text-slate-100"},Js={class:"mt-1 text-xs text-slate-600 dark:text-slate-300"},Xs={class:"text-right"},ea={class:"text-sm font-medium text-slate-900 dark:text-slate-100"},ta={class:"mt-1 text-xs text-slate-600 dark:text-slate-300"},sa={key:0,class:"p-6 text-sm text-slate-500 dark:text-slate-300"},aa={key:1,class:"rounded-lg border border-slate-200 bg-white shadow-sm dark:border-slate-800 dark:bg-slate-900"},la={class:"divide-y divide-slate-200 dark:divide-slate-800"},ra={class:"text-sm font-semibold text-slate-900 dark:text-slate-100"},oa={class:"mt-1 text-xs text-slate-600 dark:text-slate-300"},na={key:0,class:"p-6 text-sm text-slate-500 dark:text-slate-300"},da={__name:"DashboardView",setup(d){const C=I(!0),$=I(""),b=I({}),g=I({certificados_por_vencer:[],upcoming_events:[],recent_leads:null,recent_incidences:null}),i=I(null),n=I(""),E=()=>{const f=i.value;f&&(f.focus(),typeof f.showPicker=="function"&&f.showPicker())},B=f=>{if(!f)return"—";try{const u=new Date(f);return new Intl.DateTimeFormat("es-PE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(u)}catch{return String(f)}},r=(f,u)=>{if(f==null||f==="")return"—";const y=Number(f);if(!Number.isFinite(y))return String(f);const A=u||"PEN";try{return new Intl.NumberFormat("es-PE",{style:"currency",currency:A,maximumFractionDigits:2}).format(y)}catch{return`${y.toFixed(2)} ${A}`}},v=async()=>{var f,u;C.value=!0,$.value="";try{const{data:y}=await X.get("/dashboard/summary",{params:{month:n.value||void 0}});b.value=(y==null?void 0:y.cards)||{},g.value={...g.value,...(y==null?void 0:y.lists)||{}}}catch(y){$.value=((u=(f=y==null?void 0:y.response)==null?void 0:f.data)==null?void 0:u.message)??"No se pudo cargar el dashboard."}finally{C.value=!1}},w=()=>{v()};return me(()=>{v()}),(f,u)=>{var y,A,R,O;return a(),o("div",null,[C.value?(a(),o("div",ts," Cargando dashboard… ")):$.value?(a(),o("div",ss,h($.value),1)):(a(),o("div",as,[e("section",ls,[e("div",rs,[u[1]||(u[1]=e("label",{class:"text-sm text-slate-600 dark:text-slate-300"},"Mes",-1)),j(e("input",{ref_key:"monthInput",ref:i,"onUpdate:modelValue":u[0]||(u[0]=c=>n.value=c),type:"month",class:"rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 focus:border-sky-500 focus:ring-sky-500 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100",onClick:E},null,512),[[ae,n.value]]),e("button",{type:"button",class:"rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 hover:bg-slate-50 disabled:opacity-50 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-200 dark:hover:bg-slate-800",disabled:C.value,onClick:w}," Ver ",8,os)])]),e("section",ns,[b.value.leads?(a(),o("a",ds,[u[2]||(u[2]=e("div",{class:"flex items-center justify-between"},[e("span",{class:"text-sm font-medium text-slate-500 dark:text-slate-300"},"Leads"),e("span",{class:"inline-flex items-center rounded bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700 dark:bg-slate-800 dark:text-slate-200"},"Total")],-1)),e("div",is,h(b.value.leads.total),1),e("div",us," Abiertos: "+h(b.value.leads.open)+" · Archivados: "+h(b.value.leads.archived),1)])):S("",!0),b.value.customers?(a(),o("a",cs,[u[3]||(u[3]=e("div",{class:"flex items-center justify-between"},[e("span",{class:"text-sm font-medium text-slate-500 dark:text-slate-300"},"Clientes"),e("span",{class:"inline-flex items-center rounded bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700 dark:bg-slate-800 dark:text-slate-200"},"Total")],-1)),e("div",ms,h(b.value.customers.total),1),u[4]||(u[4]=e("div",{class:"mt-2 text-sm text-slate-600 dark:text-slate-300"},"Clientes registrados",-1))])):S("",!0),b.value.incidencias?(a(),o("a",bs,[u[5]||(u[5]=e("div",{class:"flex items-center justify-between"},[e("span",{class:"text-sm font-medium text-slate-500 dark:text-slate-300"},"Incidencias"),e("span",{class:"inline-flex items-center rounded bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700 dark:bg-slate-800 dark:text-slate-200"},"Postventa")],-1)),e("div",gs,h(b.value.incidencias.open),1),e("div",ps,"Abiertas · Archivadas: "+h(b.value.incidencias.archived),1)])):S("",!0),b.value.certificados?(a(),o("a",vs,[u[6]||(u[6]=e("div",{class:"flex items-center justify-between"},[e("span",{class:"text-sm font-medium text-slate-500 dark:text-slate-300"},"Certificados"),e("span",{class:"inline-flex items-center rounded bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700 dark:bg-slate-800 dark:text-slate-200"},"Activos")],-1)),e("div",xs,h(b.value.certificados.activos),1),e("div",fs," Por vencer (30d): "+h(b.value.certificados.por_vencer_30d)+" · Vencidos: "+h(b.value.certificados.vencidos),1)])):S("",!0),b.value.contadores?(a(),o("a",hs,[u[7]||(u[7]=e("div",{class:"flex items-center justify-between"},[e("span",{class:"text-sm font-medium text-slate-500 dark:text-slate-300"},"Contadores"),e("span",{class:"inline-flex items-center rounded bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700 dark:bg-slate-800 dark:text-slate-200"},"Total")],-1)),e("div",ys,h(b.value.contadores.total),1),e("div",ws," Asignados: "+h(b.value.contadores.assigned)+" · Sin asignar: "+h(b.value.contadores.unassigned),1)])):S("",!0),b.value.calendar?(a(),o("a",ks,[u[8]||(u[8]=e("div",{class:"flex items-center justify-between"},[e("span",{class:"text-sm font-medium text-slate-500 dark:text-slate-300"},"Calendario"),e("span",{class:"inline-flex items-center rounded bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700 dark:bg-slate-800 dark:text-slate-200"},"7 días")],-1)),e("div",_s,h(b.value.calendar.upcoming_7d),1),u[9]||(u[9]=e("div",{class:"mt-2 text-sm text-slate-600 dark:text-slate-300"},"Eventos asignados próximos",-1))])):S("",!0)]),e("section",$s,[e("div",Cs,[e("div",Es,[e("div",Ts,[e("div",Bs,[u[10]||(u[10]=e("h2",{class:"text-lg font-semibold text-slate-900 dark:text-slate-100"},"Certificados por vencer",-1)),b.value.certificados?(a(),o("a",Ss," Ver certificados ")):S("",!0)]),u[11]||(u[11]=e("p",{class:"mt-1 text-sm text-slate-600 dark:text-slate-300"},"Próximos 30 días (máx. 5)",-1))]),e("div",Is,[e("table",Ms,[u[13]||(u[13]=e("thead",{class:"bg-slate-50 text-xs uppercase text-slate-600 dark:bg-slate-800 dark:text-slate-200"},[e("tr",null,[e("th",{class:"px-6 py-3"},"Nombre"),e("th",{class:"px-6 py-3"},"RUC"),e("th",{class:"px-6 py-3"},"Tipo"),e("th",{class:"px-6 py-3"},"Vence")])],-1)),e("tbody",null,[(a(!0),o(de,null,ie(g.value.certificados_por_vencer,c=>(a(),o("tr",{key:c.id,class:"border-t border-slate-200 hover:bg-slate-50 dark:border-slate-800 dark:hover:bg-slate-800"},[e("td",Ls,h(c.nombre),1),e("td",As,h(c.ruc||"—"),1),e("td",Vs,h(c.tipo||"—"),1),e("td",js,h(c.fecha_vencimiento||"—"),1)]))),128)),(y=g.value.certificados_por_vencer)!=null&&y.length?S("",!0):(a(),o("tr",Ns,[...u[12]||(u[12]=[e("td",{class:"px-6 py-4 text-sm text-slate-500 dark:text-slate-300",colspan:"4"},"Sin vencimientos próximos.",-1)])]))])])])])]),e("div",null,[e("div",Ps,[e("div",Ds,[e("div",Os,[u[14]||(u[14]=e("h2",{class:"text-lg font-semibold text-slate-900 dark:text-slate-100"},"Próximos eventos",-1)),b.value.calendar?(a(),o("a",Rs,"Ver calendario")):S("",!0)]),u[15]||(u[15]=e("p",{class:"mt-1 text-sm text-slate-600 dark:text-slate-300"},"Asignados a ti (máx. 5)",-1))]),e("div",Hs,[(A=g.value.upcoming_events)!=null&&A.length?(a(),o("ul",zs,[(a(!0),o(de,null,ie(g.value.upcoming_events,c=>(a(),o("li",{key:c.id,class:"rounded-lg border border-slate-200 p-3 dark:border-slate-800"},[e("div",Zs,h(c.title),1),e("div",qs,[Ce(h(B(c.start_at))+" ",1),c.location?(a(),o("span",Fs,"· "+h(c.location),1)):S("",!0)])]))),128))])):(a(),o("div",Us,"Sin eventos próximos."))])])])]),e("section",Ws,[g.value.recent_leads?(a(),o("div",Gs,[u[16]||(u[16]=Te('<div class="border-b border-slate-200 p-6 dark:border-slate-800"><div class="flex items-center justify-between"><h2 class="text-lg font-semibold text-slate-900 dark:text-slate-100">Últimos leads</h2><a href="/leads" class="text-sm font-medium text-blue-600 hover:underline">Ver leads</a></div><p class="mt-1 text-sm text-slate-600 dark:text-slate-300">Últimos 5 registros</p></div>',1)),e("div",Qs,[(a(!0),o(de,null,ie(g.value.recent_leads,c=>(a(),o("div",{key:c.id,class:"p-6"},[e("div",Ys,[e("div",null,[e("div",Ks,h(c.name),1),e("div",Js,h(c.company_name||"—"),1)]),e("div",Xs,[e("div",ea,h(r(c.amount,c.currency)),1),e("div",ta,h(B(c.created_at)),1)])])]))),128)),(R=g.value.recent_leads)!=null&&R.length?S("",!0):(a(),o("div",sa,"Sin leads."))])])):S("",!0),g.value.recent_incidences?(a(),o("div",aa,[u[17]||(u[17]=Te('<div class="border-b border-slate-200 p-6 dark:border-slate-800"><div class="flex items-center justify-between"><h2 class="text-lg font-semibold text-slate-900 dark:text-slate-100">Últimas incidencias</h2><a href="/backlog" class="text-sm font-medium text-blue-600 hover:underline">Ver incidencias</a></div><p class="mt-1 text-sm text-slate-600 dark:text-slate-300">Últimos 5 registros</p></div>',1)),e("div",la,[(a(!0),o(de,null,ie(g.value.recent_incidences,c=>(a(),o("div",{key:c.id,class:"p-6"},[e("div",ra,h(c.correlative)+" · "+h(c.title),1),e("div",oa," Prioridad: "+h(c.priority||"—")+" · Fecha: "+h(c.date||"—")+" · "+h(B(c.created_at)),1)]))),128)),(O=g.value.recent_incidences)!=null&&O.length?S("",!0):(a(),o("div",na,"Sin incidencias."))])])):S("",!0)])]))])}}},ia={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},ua={class:"relative w-full max-w-2xl rounded-xl bg-white shadow-xl dark:bg-slate-900"},ca={key:0,class:"mb-4 rounded-lg border border-red-200 bg-red-50 p-3 text-sm text-red-700 dark:border-red-900/40 dark:bg-red-950/30 dark:text-red-200"},ma={class:"grid grid-cols-1 gap-3 md:grid-cols-2"},ba={class:"md:col-span-2"},ga={class:"md:col-span-2"},pa={class:"relative"},va={key:0,class:"absolute z-10 mt-1 w-full rounded-lg border border-gray-200 bg-white p-1 shadow-lg dark:border-slate-800 dark:bg-slate-950"},xa=["onClick"],fa={class:"truncate"},ha={class:"ml-3 text-xs text-gray-500 dark:text-slate-400"},ya={key:1,class:"mt-1 text-xs text-gray-600 dark:text-slate-300"},wa={class:"md:col-span-2"},ka={class:"mt-5 flex items-center justify-end gap-2"},_a=["disabled"],$a={__name:"IncidenceQuickModal",setup(d){const C=I(!1),$=I(!1),b=I(""),g=I({title:"",date:"",priority:"media",notes:"",customer_id:null}),i=I(""),n=I(""),E=I([]),B=I(!1);let r=null;const v=()=>{const x=new Date,l=x.getFullYear(),t=String(x.getMonth()+1).padStart(2,"0"),s=String(x.getDate()).padStart(2,"0");return`${l}-${t}-${s}`},w=()=>{b.value="",g.value={title:"",date:v(),priority:"media",notes:"",customer_id:null},i.value="",n.value="",E.value=[],B.value=!1},f=()=>{C.value=!1,B.value=!1},u=()=>{g.value.customer_id=null,n.value=""},y=x=>{g.value.customer_id=Number(x.id),n.value=String(x.label||""),i.value=String(x.label||""),B.value=!1},A=async x=>{var l,t;try{const s=await X.get("/related-lookup",{params:{type:"customer",id:x}}),p=(t=(l=s==null?void 0:s.data)==null?void 0:l.data)==null?void 0:t.label;p?(n.value=String(p),i.value=String(p)):(n.value=`#${x}`,i.value=`#${x}`)}catch{n.value=`#${x}`,i.value=`#${x}`}},R=async()=>{var l;const x=(i.value||"").trim();if(!x||x.length<2){E.value=[],B.value=!1;return}try{const t=await X.get("/related-lookup",{params:{type:"customer",q:x,limit:8}}),s=((l=t==null?void 0:t.data)==null?void 0:l.data)??[];E.value=Array.isArray(s)?s:[],B.value=E.value.length>0}catch{E.value=[],B.value=!1}},O=()=>{g.value.customer_id=null,n.value="",r&&window.clearTimeout(r),r=window.setTimeout(()=>{R()},250)},c=x=>{var p,T,_;const l=(T=(p=x==null?void 0:x.response)==null?void 0:p.data)==null?void 0:T.errors;if(!l||typeof l!="object")return null;const t=Object.keys(l)[0],s=t?(_=l[t])==null?void 0:_[0]:null;return typeof s=="string"?s:null},U=async()=>{var l,t;$.value=!0,b.value="";const x={title:g.value.title,date:g.value.date||null,priority:g.value.priority||"media",notes:g.value.notes||null,customer_id:g.value.customer_id||null};try{await X.post("/incidencias",x),fe("Incidencia creada"),f(),window.dispatchEvent(new CustomEvent("incidencias:created"))}catch(s){b.value=c(s)??((t=(l=s==null?void 0:s.response)==null?void 0:l.data)==null?void 0:t.message)??"No se pudo crear la incidencia.",ke(b.value)}finally{$.value=!1}},N=async(x={})=>{w(),C.value=!0;const l=(x==null?void 0:x.customer_id)??(x==null?void 0:x.customerId)??null,t=(x==null?void 0:x.customer_label)??(x==null?void 0:x.customerLabel)??null;l&&(g.value.customer_id=Number(l),t?(n.value=String(t),i.value=String(t)):await A(Number(l)))},P=x=>{N((x==null?void 0:x.detail)??{})};return me(()=>{window.addEventListener("incidencias:create",P)}),_e(()=>{window.removeEventListener("incidencias:create",P),r&&window.clearTimeout(r)}),(x,l)=>(a(),z(xe,{name:"fade"},{default:ve(()=>[C.value?(a(),o("div",ia,[e("div",{class:"absolute inset-0 bg-black/50",onClick:f}),ne(xe,{name:"pop"},{default:ve(()=>[e("div",ua,[l[11]||(l[11]=e("div",{class:"p-5 border-b border-gray-200 dark:border-slate-800"},[e("div",{class:"text-lg font-semibold text-gray-900 dark:text-slate-100"},"Nueva incidencia"),e("div",{class:"mt-1 text-sm text-gray-600 dark:text-slate-300"}," Registra una incidencia y asígnala a un cliente. ")],-1)),e("form",{class:"p-5",onSubmit:$e(U,["prevent"])},[b.value?(a(),o("div",ca,h(b.value),1)):S("",!0),e("div",ma,[e("div",ba,[l[5]||(l[5]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300"},"Nombre de la incidencia",-1)),j(e("input",{"onUpdate:modelValue":l[0]||(l[0]=t=>g.value.title=t),type:"text",required:"",class:"mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100"},null,512),[[ae,g.value.title,void 0,{trim:!0}]])]),e("div",null,[l[6]||(l[6]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300"},"Fecha",-1)),j(e("input",{"onUpdate:modelValue":l[1]||(l[1]=t=>g.value.date=t),type:"date",class:"mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100"},null,512),[[ae,g.value.date]])]),e("div",null,[l[8]||(l[8]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300"},"Prioridad",-1)),j(e("select",{"onUpdate:modelValue":l[2]||(l[2]=t=>g.value.priority=t),class:"mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100"},[...l[7]||(l[7]=[e("option",{value:"alta"},"Alta",-1),e("option",{value:"media"},"Media",-1),e("option",{value:"baja"},"Baja",-1)])],512),[[Se,g.value.priority]])]),e("div",ga,[l[9]||(l[9]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300"},"Cliente",-1)),e("div",pa,[j(e("input",{"onUpdate:modelValue":l[3]||(l[3]=t=>i.value=t),type:"text",class:"mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100",placeholder:"Buscar cliente…",onInput:O,onFocus:O},null,544),[[ae,i.value,void 0,{trim:!0}]]),B.value&&E.value.length?(a(),o("div",va,[(a(!0),o(de,null,ie(E.value,t=>(a(),o("button",{key:t.id,type:"button",class:"flex w-full items-center justify-between rounded-md px-2 py-2 text-left text-sm text-gray-800 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-200 dark:text-slate-100 dark:hover:bg-slate-900 dark:focus:ring-blue-500/30",onClick:s=>y(t)},[e("span",fa,h(t.label),1),e("span",ha,"#"+h(t.id),1)],8,xa))),128))])):S("",!0),n.value?(a(),o("div",ya,[Ce(" Seleccionado: "+h(n.value)+" ",1),e("button",{type:"button",class:"ml-2 text-xs font-medium text-blue-600 hover:underline",onClick:u}," Quitar ")])):S("",!0)])]),e("div",wa,[l[10]||(l[10]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300"},"Observaciones",-1)),j(e("textarea",{"onUpdate:modelValue":l[4]||(l[4]=t=>g.value.notes=t),rows:"4",class:"mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100",placeholder:"Detalle / notas…"},null,512),[[ae,g.value.notes,void 0,{trim:!0}]])])]),e("div",ka,[e("button",{type:"button",class:"inline-flex items-center rounded-lg border border-gray-200 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-200 dark:hover:bg-slate-800",onClick:f}," Cancelar "),e("button",{type:"submit",class:"inline-flex items-center rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-blue-700 disabled:opacity-60",disabled:$.value},h($.value?"Creando…":"Crear incidencia"),9,_a)])],32)])]),_:1})])):S("",!0)]),_:1}))}},Ca=Ie($a,[["__scopeId","data-v-f7e6933a"]]),Ea={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},Ta={class:"relative w-full max-w-2xl rounded-xl bg-white shadow-xl dark:bg-slate-900"},Ba={key:0,class:"mb-4 rounded-lg border border-red-200 bg-red-50 p-3 text-sm text-red-700 dark:border-red-900/40 dark:bg-red-950/30 dark:text-red-200"},Sa={class:"grid grid-cols-1 gap-3 md:grid-cols-2"},Ia={class:"md:col-span-2"},Ma={class:"md:col-span-2"},La={class:"relative"},Aa={key:0,class:"absolute z-10 mt-1 w-full rounded-lg border border-gray-200 bg-white p-1 shadow-lg dark:border-slate-800 dark:bg-slate-950"},Va=["onClick"],ja={class:"truncate"},Na={class:"ml-3 text-xs text-gray-500 dark:text-slate-400"},Pa={key:1,class:"mt-1 text-xs text-gray-600 dark:text-slate-300"},Da={class:"md:col-span-2"},Oa={class:"mt-5 flex items-center justify-between gap-2"},Ra=["disabled"],Ha={class:"ml-auto flex items-center gap-2"},Ua=["disabled"],za={__name:"IncidenceEditModal",setup(d){const C=I(!1),$=I(!1),b=I(!1),g=I(""),i=I({id:null,title:"",date:"",priority:"media",notes:"",customer_id:null}),n=I(""),E=I(""),B=I([]),r=I(!1);let v=null;const w=()=>{g.value="",b.value=!1,i.value={id:null,title:"",date:"",priority:"media",notes:"",customer_id:null},n.value="",E.value="",B.value=[],r.value=!1},f=()=>{C.value=!1,r.value=!1},u=()=>{i.value.customer_id=null,E.value=""},y=t=>{i.value.customer_id=Number(t.id),E.value=String(t.label||""),n.value=String(t.label||""),r.value=!1},A=async t=>{var s,p;try{const T=await X.get("/related-lookup",{params:{type:"customer",id:t}}),_=(p=(s=T==null?void 0:T.data)==null?void 0:s.data)==null?void 0:p.label;_?(E.value=String(_),n.value=String(_)):(E.value=`#${t}`,n.value=`#${t}`)}catch{E.value=`#${t}`,n.value=`#${t}`}},R=async()=>{var s;const t=(n.value||"").trim();if(!t||t.length<2){B.value=[],r.value=!1;return}try{const p=await X.get("/related-lookup",{params:{type:"customer",q:t,limit:8}}),T=((s=p==null?void 0:p.data)==null?void 0:s.data)??[];B.value=Array.isArray(T)?T:[],r.value=B.value.length>0}catch{B.value=[],r.value=!1}},O=()=>{i.value.customer_id=null,E.value="",v&&window.clearTimeout(v),v=window.setTimeout(()=>{R()},250)},c=t=>{var _,D,H;const s=(D=(_=t==null?void 0:t.response)==null?void 0:_.data)==null?void 0:D.errors;if(!s||typeof s!="object")return null;const p=Object.keys(s)[0],T=p?(H=s[p])==null?void 0:H[0]:null;return typeof T=="string"?T:null},U=t=>{if(!t)return"";try{const s=String(t);if(/^\d{4}-\d{2}-\d{2}$/.test(s))return s;const p=new Date(s);if(Number.isNaN(p.getTime()))return"";const T=p.getFullYear(),_=String(p.getMonth()+1).padStart(2,"0"),D=String(p.getDate()).padStart(2,"0");return`${T}-${_}-${D}`}catch{return""}},N=async(t={})=>{var D,H;w();const s=(t==null?void 0:t.incidence)??(t==null?void 0:t.item)??t,p=(s==null?void 0:s.id)??(t==null?void 0:t.id)??null;if(!p)return;i.value.id=Number(p),i.value.title=String((s==null?void 0:s.title)??""),i.value.date=U((s==null?void 0:s.date)??""),i.value.priority=String((s==null?void 0:s.priority)??"media")||"media",i.value.notes=String((s==null?void 0:s.notes)??"");const T=(s==null?void 0:s.customer_id)??(t==null?void 0:t.customer_id)??null;i.value.customer_id=T?Number(T):null,C.value=!0;const _=((D=s==null?void 0:s.customer)==null?void 0:D.company_name)||((H=s==null?void 0:s.customer)==null?void 0:H.name)||(t==null?void 0:t.customer_label)||null;i.value.customer_id&&(_?(E.value=String(_),n.value=String(_)):await A(i.value.customer_id))},P=async()=>{var s,p,T;if(!i.value.id)return;$.value=!0,g.value="";const t={title:i.value.title,date:i.value.date||null,priority:i.value.priority||"media",notes:i.value.notes||null,customer_id:i.value.customer_id||null};try{const _=await X.put(`/incidencias/${i.value.id}`,t),D=(s=_==null?void 0:_.data)==null?void 0:s.data;fe("Incidencia actualizada"),f(),window.dispatchEvent(new CustomEvent("incidencias:updated",{detail:{incidence:D}}))}catch(_){g.value=c(_)??((T=(p=_==null?void 0:_.response)==null?void 0:p.data)==null?void 0:T.message)??"No se pudo actualizar la incidencia.",ke(g.value)}finally{$.value=!1}},x=async()=>{var s,p;if(!(!i.value.id||!await Ve({title:"¿Seguro que quieres eliminar la incidencia?",text:"Esta acción no se puede deshacer.",icon:"warning",confirmText:"Eliminar",cancelText:"Cancelar"}))){b.value=!0,g.value="";try{await X.delete(`/incidencias/${i.value.id}`),fe("Incidencia eliminada correctamente"),f(),window.dispatchEvent(new CustomEvent("incidencias:deleted",{detail:{id:i.value.id}}))}catch(T){g.value=((p=(s=T==null?void 0:T.response)==null?void 0:s.data)==null?void 0:p.message)??"No se pudo eliminar la incidencia.",ke(g.value)}finally{b.value=!1}}},l=t=>{N((t==null?void 0:t.detail)??{})};return me(()=>{window.addEventListener("incidencias:edit",l)}),_e(()=>{window.removeEventListener("incidencias:edit",l),v&&window.clearTimeout(v)}),(t,s)=>(a(),z(xe,{name:"fade"},{default:ve(()=>[C.value?(a(),o("div",Ea,[e("div",{class:"absolute inset-0 bg-black/50",onClick:f}),ne(xe,{name:"pop"},{default:ve(()=>[e("div",Ta,[s[11]||(s[11]=e("div",{class:"p-5 border-b border-gray-200 dark:border-slate-800"},[e("div",{class:"text-lg font-semibold text-gray-900 dark:text-slate-100"},"Editar incidencia"),e("div",{class:"mt-1 text-sm text-gray-600 dark:text-slate-300"}," Actualiza título, cliente, prioridad, fecha y notas. ")],-1)),e("form",{class:"p-5",onSubmit:$e(P,["prevent"])},[g.value?(a(),o("div",Ba,h(g.value),1)):S("",!0),e("div",Sa,[e("div",Ia,[s[5]||(s[5]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300"},"Nombre de la incidencia",-1)),j(e("input",{"onUpdate:modelValue":s[0]||(s[0]=p=>i.value.title=p),type:"text",required:"",class:"mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100"},null,512),[[ae,i.value.title,void 0,{trim:!0}]])]),e("div",null,[s[6]||(s[6]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300"},"Fecha",-1)),j(e("input",{"onUpdate:modelValue":s[1]||(s[1]=p=>i.value.date=p),type:"date",class:"mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100"},null,512),[[ae,i.value.date]])]),e("div",null,[s[8]||(s[8]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300"},"Prioridad",-1)),j(e("select",{"onUpdate:modelValue":s[2]||(s[2]=p=>i.value.priority=p),class:"mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100"},[...s[7]||(s[7]=[e("option",{value:"alta"},"Alta",-1),e("option",{value:"media"},"Media",-1),e("option",{value:"baja"},"Baja",-1)])],512),[[Se,i.value.priority]])]),e("div",Ma,[s[9]||(s[9]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300"},"Cliente",-1)),e("div",La,[j(e("input",{"onUpdate:modelValue":s[3]||(s[3]=p=>n.value=p),type:"text",class:"mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100",placeholder:"Buscar cliente…",onInput:O,onFocus:O},null,544),[[ae,n.value,void 0,{trim:!0}]]),r.value&&B.value.length?(a(),o("div",Aa,[(a(!0),o(de,null,ie(B.value,p=>(a(),o("button",{key:p.id,type:"button",class:"flex w-full items-center justify-between rounded-md px-2 py-2 text-left text-sm text-gray-800 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-200 dark:text-slate-100 dark:hover:bg-slate-900 dark:focus:ring-blue-500/30",onClick:T=>y(p)},[e("span",ja,h(p.label),1),e("span",Na,"#"+h(p.id),1)],8,Va))),128))])):S("",!0),E.value?(a(),o("div",Pa,[Ce(" Seleccionado: "+h(E.value)+" ",1),e("button",{type:"button",class:"ml-2 text-xs font-medium text-blue-600 hover:underline",onClick:u}," Quitar ")])):S("",!0)])]),e("div",Da,[s[10]||(s[10]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300"},"Observaciones",-1)),j(e("textarea",{"onUpdate:modelValue":s[4]||(s[4]=p=>i.value.notes=p),rows:"4",class:"mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100",placeholder:"Detalle / notas…"},null,512),[[ae,i.value.notes,void 0,{trim:!0}]])])]),e("div",Oa,[i.value.id?(a(),o("button",{key:0,type:"button",class:"inline-flex items-center rounded-lg border border-red-200 bg-red-50 px-4 py-2 text-sm font-medium text-red-700 shadow-sm hover:bg-red-100 disabled:opacity-60 dark:border-red-700 dark:bg-red-900/20 dark:text-red-400 dark:hover:bg-red-900/30",disabled:$.value||b.value,onClick:x},h(b.value?"Eliminando…":"Eliminar"),9,Ra)):S("",!0),e("div",Ha,[e("button",{type:"button",class:"inline-flex items-center rounded-lg border border-gray-200 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-200 dark:hover:bg-slate-800",onClick:f}," Cancelar "),e("button",{type:"submit",class:"inline-flex items-center rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-blue-700 disabled:opacity-60",disabled:$.value||b.value||!i.value.id},h($.value?"Guardando…":"Guardar cambios"),9,Ua)])])],32)])]),_:1})])):S("",!0)]),_:1}))}},Za=Ie(za,[["__scopeId","data-v-cbeecece"]]),qa={class:"min-h-screen flex flex-col bg-gradient-to-br from-blue-50/60 via-gray-50 to-gray-50 dark:from-slate-950 dark:via-slate-950 dark:to-slate-900"},Fa={class:"flex-1 p-4 pt-20"},Wa={class:"max-w-7xl mx-auto w-full"},Ga={class:"flex items-center justify-between mb-6"},Qa={class:"border-l-4 border-blue-600 pl-4"},Ya={class:"text-2xl font-semibold text-gray-900 dark:text-slate-100"},Ka={class:"mt-1 text-sm text-gray-600 dark:text-slate-300"},Ja={__name:"App",setup(d){const C=Q(()=>G(()=>import("./UsersTable-DN1KMz28.js"),__vite__mapDeps([0,1,2,3,4]))),$=Q(()=>G(()=>import("./RolesTable-DkgpdnOf.js"),__vite__mapDeps([5,1,2]))),b=Q(()=>G(()=>import("./LeadsBoard-CsJD7TYH.js"),__vite__mapDeps([6,1,2,7,3,8]))),g=Q(()=>G(()=>import("./LeadsTable-Da9rkPgL.js"),__vite__mapDeps([9,2,3,1]))),i=Q(()=>G(()=>import("./LeadsWhatsAppCampaign-CU8cUbtd.js"),__vite__mapDeps([10,1,2]))),n=Q(()=>G(()=>import("./LeadsEmailCampaign-BxbhdKc1.js"),__vite__mapDeps([11,1,2]))),E=Q(()=>G(()=>import("./CustomersTable-BibpDNyG.js"),__vite__mapDeps([12,1,2,7,3,8]))),B=Q(()=>G(()=>import("./CalendarView-Cb5yXk85.js"),__vite__mapDeps([13,7,2,1,3,14,15,8,16]))),r=Q(()=>G(()=>import("./IncidenciasTable-DMQaVsvf.js"),__vite__mapDeps([17,1,2,7,3,8]))),v=Q(()=>G(()=>import("./IncidenciasBoard-DXbychUo.js"),__vite__mapDeps([18,1,2,3,4]))),w=Q(()=>G(()=>import("./BacklogBoard-BlcgM_kw.js"),__vite__mapDeps([19,1,2,7,3,8]))),f=Q(()=>G(()=>import("./PostventaCustomersTable-D-t8XMUc.js"),__vite__mapDeps([20,1,2,7,3,8]))),u=Q(()=>G(()=>import("./ContadoresTable-RPPuekvp.js"),__vite__mapDeps([21,1,2,7,3,8]))),y=Q(()=>G(()=>import("./CertificadosTable-CdItwKUd.js"),__vite__mapDeps([22,1,2,7,3,8]))),A=Q(()=>G(()=>import("./LostLeadsList-B9XZcuMy.js"),__vite__mapDeps([23,1,2,7,3,8]))),R=Q(()=>G(()=>import("./WaitingLeadsList-IAumSAEd.js"),__vite__mapDeps([24,1,2,7,3,8]))),O=Q(()=>G(()=>import("./SettingsView-B-e4xOJP.js"),__vite__mapDeps([25,1,8,26]))),c=window.location.pathname.replace(/\/+$/,"")||"/",U=L(()=>c.startsWith("/users")),N=L(()=>c.startsWith("/roles")),P=L(()=>c==="/leads"),x=L(()=>c==="/leads/list"),l=L(()=>c==="/leads/whatsapp"),t=L(()=>c==="/leads/email"),s=L(()=>c.startsWith("/leads")),p=L(()=>c.startsWith("/customers")),T=L(()=>c.startsWith("/calendar")),_=L(()=>c.startsWith("/incidencias")),D=L(()=>_.value&&c==="/incidencias/board"?"board":"table"),H=L(()=>c.startsWith("/backlog")),Z=L(()=>c==="/postventa/clientes"),F=L(()=>c==="/postventa/contadores"),J=L(()=>c==="/postventa/certificados"),ee=L(()=>c.startsWith("/configuracion")),te=L(()=>_.value||H.value),le=L(()=>U.value?"Usuarios":N.value?"Roles":ee.value?"Configuración":l.value?"WhatsApp":t.value?"Email":s.value?"Leads":c==="/desistidos"?"Desistidos":c==="/espera"?"Zona de espera":p.value?"Clientes":T.value?"Calendario":te.value?"Incidencias":Z.value?"Clientes":F.value?"Contadores":J.value?"Certificados":"Dashboard"),se=L(()=>U.value?"Gestión de usuarios del sistema":N.value?"Crea roles y asigna permisos":ee.value?"Personalización del sistema":l.value?"Campañas manuales asistidas (sin API)":t.value?"Campañas informativas por correo (con baja automática)":P.value?"Pipeline de oportunidades":x.value?"Gestión de leads por etapas":c==="/desistidos"?"Leads marcados como desistidos":c==="/espera"?"Leads enviados a zona de espera":p.value?"Listado de clientes":T.value?"Agenda y recordatorios":_.value?`Registro y seguimiento de incidencias (vista ${D.value==="board"?"kanban":"lista"})`:H.value?"Registro y seguimiento de incidencias (vista backlog)":Z.value?"Clientes (postventa)":F.value?"Gestión de contadores":J.value?"Gestión de certificados":"Resumen general del sistema");L(()=>te.value||Z.value||F.value||J.value);const oe=L(()=>c==="/desistidos"),be=L(()=>c==="/espera"),re=()=>{s.value&&window.location.assign(P.value?"/leads/list":"/leads")},ge=()=>{H.value?window.location.assign("/incidencias"):_.value&&(D.value==="table"?window.location.assign("/incidencias/board"):window.location.assign("/backlog"))},pe=()=>{window.dispatchEvent(new CustomEvent("roles:create"))},he=()=>{window.dispatchEvent(new CustomEvent("leads:create-quick"))},q=()=>{window.dispatchEvent(new CustomEvent("incidencias:create"))},m=()=>{window.dispatchEvent(new CustomEvent("contadores:create"))},K=()=>{window.dispatchEvent(new CustomEvent("certificados:create"))},ce=I(!0),Me=()=>{ce.value=!ce.value};return me(()=>{}),(Xa,el)=>(a(),o("div",qa,[ne(pt,{"sidebar-collapsed":ce.value,onToggleSidebar:Me},null,8,["sidebar-collapsed"]),ne(Qt,{collapsed:ce.value},null,8,["collapsed"]),e("main",{class:V(["transition-[margin] duration-200 flex-1 flex flex-col",ce.value?"sm:ml-20":"sm:ml-64"])},[e("div",Fa,[e("div",Wa,[e("div",Ga,[e("div",Qa,[e("h1",Ya,h(le.value),1),e("p",Ka,h(se.value),1)]),N.value?(a(),o("button",{key:0,type:"button",class:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg shadow-sm hover:bg-blue-700 hover:shadow focus:outline-none focus:ring-4 focus:ring-blue-300",onClick:pe}," Crear rol ")):P.value||x.value?(a(),o("button",{key:1,type:"button",class:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg shadow-sm hover:bg-blue-700 hover:shadow focus:outline-none focus:ring-4 focus:ring-blue-300",onClick:he}," Lead rápido ")):S("",!0),P.value||x.value?(a(),o("button",{key:2,type:"button",class:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-200 rounded-lg shadow-sm hover:bg-blue-50 hover:border-blue-200 hover:text-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 dark:text-slate-200 dark:bg-slate-900 dark:border-slate-800 dark:hover:bg-slate-800",onClick:re},h(P.value?"Vista lista":"Vista pipeline"),1)):te.value?(a(),o("button",{key:3,type:"button",class:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-200 rounded-lg shadow-sm hover:bg-blue-50 hover:border-blue-200 hover:text-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 dark:text-slate-200 dark:bg-slate-900 dark:border-slate-800 dark:hover:bg-slate-800",onClick:ge},h(H.value?"Vista lista":"Vista backlog"),1)):S("",!0),te.value||Z.value?(a(),o("button",{key:5,type:"button",class:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg shadow-sm hover:bg-blue-700 hover:shadow focus:outline-none focus:ring-4 focus:ring-blue-300",onClick:q}," Nueva incidencia ")):F.value?(a(),o("button",{key:6,type:"button",class:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg shadow-sm hover:bg-blue-700 hover:shadow focus:outline-none focus:ring-4 focus:ring-blue-300",onClick:m}," Nuevo contador ")):J.value?(a(),o("button",{key:7,type:"button",class:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg shadow-sm hover:bg-blue-700 hover:shadow focus:outline-none focus:ring-4 focus:ring-blue-300",onClick:K}," Nuevo certificado ")):S("",!0)]),U.value?(a(),z(k(C),{key:0})):N.value?(a(),z(k($),{key:1})):P.value?(a(),z(k(b),{key:2})):x.value?(a(),z(k(g),{key:3})):l.value?(a(),z(k(i),{key:4})):t.value?(a(),z(k(n),{key:5})):_.value&&D.value==="table"?(a(),z(k(r),{key:6})):_.value&&D.value==="board"?(a(),z(k(v),{key:7})):H.value?(a(),z(k(w),{key:8})):Z.value?(a(),z(k(f),{key:9})):F.value?(a(),z(k(u),{key:10})):J.value?(a(),z(k(y),{key:11})):p.value?(a(),z(k(E),{key:12})):oe.value?(a(),z(k(A),{key:13})):be.value?(a(),z(k(R),{key:14})):ee.value?(a(),z(k(O),{key:15})):T.value?(a(),z(k(B),{key:16})):(a(),z(da,{key:17}))])]),ne(es,{class:"mt-auto w-full"})],2),ne(Ca),ne(Za)]))}},cl=Object.freeze(Object.defineProperty({__proto__:null,default:Ja},Symbol.toStringTag,{value:"Module"}));export{cl as A,fe as a,ol as b,Ve as c,nl as d,il as e,Ne as f,ul as g,Pe as h,dl as p,ke as t};
