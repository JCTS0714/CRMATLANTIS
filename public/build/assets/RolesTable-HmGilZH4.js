import{_ as je}from"./app-D0PWajC2.js";import{r as i,e as J,x as Ae,o as Ve,f as Oe,g as r,i as o,j as s,A as C,w as c,u as p,F as b,m as g,s as ce,t as d,v as x,D as $,l as B,E as N,k as X,C as S,z as T,J as me}from"./vendor-vue-Diyp6CFE.js";import{a as E}from"./vendor-utils-Czy7fllw.js";import{u as Pe,a as Ue,_ as $e}from"./App-BLINciIY.js";import"./vendor-ui-BsDgRXDF.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Be={class:"bg-white border border-gray-200 rounded-lg shadow-sm overflow-hidden dark:bg-slate-900 dark:border-slate-800"},Ne={class:"p-4 border-b border-gray-200 dark:border-slate-800 flex items-center justify-between gap-3"},Te={key:0,class:"bg-white dark:bg-slate-900"},Ge={key:1,class:"bg-white dark:bg-slate-900"},ze={class:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-slate-100"},Fe={class:"px-6 py-4"},Ie={class:"text-gray-700 dark:text-slate-200"},qe={class:"px-6 py-4"},De={class:"text-gray-700 dark:text-slate-200"},We={class:"px-6 py-4 text-right"},Ke={class:"inline-flex items-center gap-2"},He=["onClick"],Je=["disabled","onClick"],Xe={class:"relative w-full max-w-2xl"},Qe={class:"relative bg-white rounded-lg shadow dark:bg-slate-900"},Ye={class:"grid gap-4 mb-4 grid-cols-1"},Ze={key:0,class:"rounded-lg border border-amber-200 bg-amber-50 px-3 py-2 text-xs text-amber-800 dark:border-amber-800/40 dark:bg-amber-950/20 dark:text-amber-300"},et={key:0,class:"text-sm text-gray-500 dark:text-slate-300"},tt={key:1,class:"grid grid-cols-1 md:grid-cols-2 gap-3"},st={class:"flex items-center justify-between col-span-full"},at={class:"inline-flex items-center text-sm text-gray-600 dark:text-slate-300"},lt=["checked","onChange"],rt={class:"bg-gray-50 border border-gray-200 rounded-lg p-3 dark:bg-slate-800 dark:border-slate-700"},ot={key:0,class:"text-sm text-gray-500 dark:text-slate-300"},nt={key:1},it={class:"mb-3 flex items-center gap-3"},dt={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},ut={class:"flex items-center justify-between mb-2"},ct={class:"text-sm font-semibold text-gray-900 dark:text-slate-100"},mt={class:"flex items-center gap-2"},bt={class:"inline-flex items-center text-sm text-gray-600 dark:text-slate-300"},gt=["checked","onChange"],pt=["onClick"],xt=["value"],vt={key:1,class:"text-sm text-red-600"},yt=["disabled"],ft={class:"relative w-full max-w-2xl max-h-[90vh]"},kt={class:"relative bg-white rounded-lg shadow dark:bg-slate-900 max-h-[90vh] overflow-hidden flex flex-col"},ht={class:"grid gap-4 mb-4 grid-cols-1"},wt={key:0,class:"text-sm text-gray-500 dark:text-slate-300"},_t={key:1,class:"grid grid-cols-1 md:grid-cols-2 gap-3"},Ct={class:"flex items-center justify-between col-span-full"},St={class:"inline-flex items-center text-sm text-gray-600 dark:text-slate-300"},Et=["checked","onChange"],Lt={class:"bg-gray-50 border border-gray-200 rounded-lg p-3 dark:bg-slate-800 dark:border-slate-700"},Mt={key:0,class:"text-sm text-gray-500 dark:text-slate-300"},Rt={key:1},jt={class:"mb-3 flex items-center gap-3"},At={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},Vt={class:"flex items-center justify-between mb-2"},Ot={class:"text-sm font-semibold text-gray-900 dark:text-slate-100"},Pt={class:"flex items-center gap-2"},Ut={class:"inline-flex items-center text-sm text-gray-600 dark:text-slate-300"},$t=["checked","onChange"],Bt=["onClick"],Nt=["value"],Tt={key:0,class:"text-sm text-red-600"},Gt=["disabled"],Ht={__name:"RolesTable",setup(zt){const G=[{key:"role",label:"Rol"},{key:"modules",label:"Módulos"},{key:"permissions",label:"Permisos"},{key:"actions",label:"Acciones"}],{tableRef:Q,visibleKeys:be,isColumnVisible:ge,toggleColumn:pe,resetColumns:xe}=Pe({tableId:"roles-table",columns:G}),{tableScrollRef:ve,stickyScrollRef:ye,stickyScrollWidth:fe,showStickyXScroll:ke}=Ue({tableRef:Q}),z=i([]),F=i(!0),L=i(null),Y=(()=>{if(typeof window>"u")return!1;const a=window.location.hostname;return a==="localhost"||a==="127.0.0.1"||a==="::1"})();let I=null;const he=async()=>Y?(I||(I=je(()=>import("./customerModalAutofill.local-CpHl0RE-.js"),[]).catch(()=>null)),I):null,M=i([]),v=i(!0),q={"menu.users":"Usuarios","menu.roles":"Roles","menu.leads":"Leads","menu.email":"Email masivo","menu.inbox":"Bandeja de entrada","menu.customers":"Clientes","menu.calendar":"Calendario","menu.postventa":"Postventa"},Z=Object.keys(q);function we(a){if(q[a])return q[a];const e=String(a||"").replace(/^menu\./,"").replace(/[._-]+/g," ").trim();return e?e.replace(new RegExp("\\b\\p{L}","gu"),t=>t.toUpperCase()):a}const R=J(()=>{const a=(M.value||[]).filter(t=>String(t).startsWith("menu.")),e=Array.from(new Set(a));return e.sort((t,l)=>{const n=Z.indexOf(t),k=Z.indexOf(l);return n!==-1&&k!==-1?n-k:n!==-1?-1:k!==-1?1:String(t).localeCompare(String(l))}),e.map(t=>({permission:t,label:we(t)}))}),y=i(!1),f=i(!1),j=i(!1),h=i(""),u=i({name:"",permissions:[]}),A=i(!1),w=i(""),D=i(null),m=i({name:"",permissions:[]}),ee=a=>{var n,k,ue;const e=(k=(n=a==null?void 0:a.response)==null?void 0:n.data)==null?void 0:k.errors;if(!e||typeof e!="object")return null;const t=Object.keys(e)[0],l=t?(ue=e[t])==null?void 0:ue[0]:null;return typeof l=="string"?l:null},W=a=>{const[e,t]=String(a).split(".",2),l=t==="view"?"Ver":t==="create"?"Crear":t==="update"?"Editar":t==="delete"?"Eliminar":t??"",n=e==="users"?"Usuarios":e==="roles"?"Roles":e==="leads"?"Leads":e?e.charAt(0).toUpperCase()+e.slice(1):"";return l&&n?`${l}`:a},K=J(()=>{const a=new Map;for(const e of M.value){if(String(e).startsWith("menu."))continue;const[t]=String(e).split(".",1),l=t||"otros";a.has(l)||a.set(l,[]),a.get(l).push(e)}return Array.from(a.entries()).map(([e,t])=>({key:e,label:e==="users"?"Usuarios":e==="roles"?"Roles":e==="leads"?"Leads":e.charAt(0).toUpperCase()+e.slice(1),items:t.slice().sort((l,n)=>String(l).localeCompare(String(n)))})).sort((e,t)=>e.label.localeCompare(t.label))}),_=i(""),H=i({}),te=J(()=>{const a=String(_.value||"").trim().toLowerCase();return a?K.value.map(e=>({...e,items:e.items.filter(t=>String(t).toLowerCase().includes(a)||W(t).toLowerCase().includes(a))})).filter(e=>Array.isArray(e.items)&&e.items.length>0):K.value}),se=(a,e)=>{if(Array.isArray(a))for(const t of R.value){const l=a.indexOf(t.permission)!==-1;if(e&&!l&&a.push(t.permission),!e&&l){const n=a.indexOf(t.permission);n!==-1&&a.splice(n,1)}}},ae=a=>{if(!Array.isArray(a))return;const e=[];for(const t of K.value)for(const l of t.items)e.includes(l)||e.push(l);for(const t of e)a.includes(t)||a.push(t)},le=(a,e)=>Array.isArray(a)?e.every(t=>a.includes(t)):!1,re=(a,e,t)=>{if(Array.isArray(a))if(t)for(const l of e)a.includes(l)||a.push(l);else for(const l of e){const n=a.indexOf(l);n!==-1&&a.splice(n,1)}},oe=a=>{H.value[a]=!H.value[a]},V=a=>!!H.value[a],ne=(a,e,t)=>{if(!Array.isArray(a))return;const l=a.indexOf(e);t&&l===-1&&a.push(e),!t&&l!==-1&&a.splice(l,1)},_e=a=>{const e=a==null?void 0:a.permissions;return Array.isArray(e)?e.filter(t=>String(t).startsWith("menu.")).length:0},O=async()=>{var a;F.value=!0;try{const e=await E.get("/roles/data");z.value=((a=e==null?void 0:e.data)==null?void 0:a.data)??[]}finally{F.value=!1}},Ce=async()=>{var a;v.value=!0;try{const e=await E.get("/roles/permissions");M.value=((a=e==null?void 0:e.data)==null?void 0:a.data)??[]}finally{v.value=!1}},ie=()=>{h.value="",u.value={name:"",permissions:[]},y.value=!0},Se=async()=>{var e;const a=await he();(e=a==null?void 0:a.autofillRoleCreateForm)==null||e.call(a,u,R.value,M.value)},P=()=>{y.value=!1},U=()=>{f.value=!1},Ee=a=>{D.value=a.id,w.value="",m.value={name:a.name??"",permissions:Array.isArray(a.permissions)?a.permissions.slice():[]},f.value=!0},Le=async()=>{var a,e;j.value=!0,h.value="";try{await E.post("/roles",u.value),P(),await O()}catch(t){h.value=ee(t)??((e=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:e.message)??"No se pudo crear el rol."}finally{j.value=!1}},Me=async()=>{var a,e;if(D.value){A.value=!0,w.value="";try{await E.put(`/roles/${D.value}`,m.value),U(),await O()}catch(t){w.value=ee(t)??((e=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:e.message)??"No se pudo actualizar el rol."}finally{A.value=!1}}},Re=async a=>{var e,t;if(confirm(`¿Eliminar el rol "${a.name}"?`)){L.value=a.id;try{await E.delete(`/roles/${a.id}`),await O()}catch(l){const n=((t=(e=l==null?void 0:l.response)==null?void 0:e.data)==null?void 0:t.message)??"No se pudo eliminar el rol.";alert(n)}finally{L.value=null}}},de=a=>{a.key==="Escape"&&(y.value&&P(),f.value&&U())};return Ae(()=>y.value||f.value,a=>{document.body.classList.toggle("overflow-hidden",a)}),Ve(async()=>{window.addEventListener("roles:create",ie),window.addEventListener("keydown",de),await Promise.all([Ce(),O()])}),Oe(()=>{window.removeEventListener("roles:create",ie),window.removeEventListener("keydown",de),document.body.classList.remove("overflow-hidden")}),(a,e)=>(o(),r(b,null,[s("div",Be,[s("div",Ne,[e[10]||(e[10]=s("div",{class:"text-sm text-gray-600 dark:text-slate-300"}," Crea roles y asigna permisos del sistema. ",-1)),C($e,{columns:G,"visible-keys":p(be),onToggle:p(pe),onReset:p(xe)},null,8,["visible-keys","onToggle","onReset"])]),s("div",{ref_key:"tableScrollRef",ref:ve,class:"relative overflow-x-auto"},[s("table",{ref_key:"tableRef",ref:Q,class:"w-full text-sm text-left text-gray-600 dark:text-slate-300"},[s("colgroup",null,[(o(),r(b,null,g(G,t=>s("col",{key:t.key,style:ce({display:p(ge)(t.key)?"":"none"})},null,4)),64))]),e[15]||(e[15]=s("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-slate-800 dark:text-slate-200"},[s("tr",null,[s("th",{scope:"col",class:"px-6 py-3"},"Rol"),s("th",{scope:"col",class:"px-6 py-3"},"Módulos"),s("th",{scope:"col",class:"px-6 py-3"},"Permisos"),s("th",{scope:"col",class:"px-6 py-3 text-right"},"Acciones")])],-1)),s("tbody",null,[F.value?(o(),r("tr",Te,[...e[11]||(e[11]=[s("td",{colspan:"4",class:"px-6 py-6 text-gray-500 dark:text-slate-300"},"Cargando...",-1)])])):z.value.length===0?(o(),r("tr",Ge,[...e[12]||(e[12]=[s("td",{colspan:"4",class:"px-6 py-6 text-gray-500 dark:text-slate-300"},"No hay roles.",-1)])])):(o(!0),r(b,{key:2},g(z.value,t=>{var l;return o(),r("tr",{key:t.id,class:"bg-white border-b border-gray-100 hover:bg-blue-50/40 transition-colors dark:bg-slate-900 dark:border-slate-800 dark:hover:bg-slate-800/60"},[s("td",ze,d(t.name),1),s("td",Fe,[s("span",Ie,d(_e(t)),1),e[13]||(e[13]=s("span",{class:"text-gray-500 dark:text-slate-400"},"módulo(s)",-1))]),s("td",qe,[s("span",De,d(((l=t.permissions)==null?void 0:l.length)??0),1),e[14]||(e[14]=s("span",{class:"text-gray-500 dark:text-slate-400"},"permiso(s)",-1))]),s("td",We,[s("div",Ke,[s("button",{type:"button",class:"px-3 py-1.5 text-xs font-medium text-gray-700 bg-white border border-gray-200 rounded-md hover:bg-gray-50 dark:text-slate-200 dark:bg-slate-900 dark:border-slate-700 dark:hover:bg-slate-800",onClick:n=>Ee(t)}," Editar ",8,He),s("button",{type:"button",class:"px-3 py-1.5 text-xs font-medium text-white bg-red-600 rounded-md hover:bg-red-700",disabled:L.value===t.id,onClick:n=>Re(t)},d(L.value===t.id?"Eliminando...":"Eliminar"),9,Je)])])])}),128))])],512)],512),c(s("div",{ref_key:"stickyScrollRef",ref:ye,class:"sticky bottom-0 z-20 mt-2 overflow-x-auto rounded-lg border border-slate-200 bg-white/95 dark:border-slate-700 dark:bg-slate-900/95"},[s("div",{style:ce({width:`${p(fe)}px`,height:"1px"})},null,4)],512),[[x,p(ke)]])]),C(N,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:$(()=>[c(s("div",{class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/50",role:"dialog","aria-modal":"true",onClick:B(P,["self"])},[C(N,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:$(()=>[c(s("div",Xe,[s("div",Qe,[s("div",{class:"flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-slate-800"},[e[17]||(e[17]=s("h3",{class:"text-lg font-semibold text-gray-900 dark:text-slate-100"},"Crear rol",-1)),s("button",{type:"button",class:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-slate-800 dark:hover:text-slate-100",onClick:P},[...e[16]||(e[16]=[s("span",{class:"sr-only"},"Cerrar",-1),s("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[s("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 12 12M13 1 1 13"})],-1)])])]),s("form",{class:"p-4 md:p-5",onSubmit:B(Le,["prevent"])},[s("div",Ye,[p(Y)?(o(),r("div",Ze,[e[18]||(e[18]=S(" Solo local: autollenado para pruebas. ",-1)),s("button",{type:"button",class:"ml-2 inline-flex items-center rounded-md border border-amber-300 bg-white px-2 py-1 text-xs font-medium text-amber-800 hover:bg-amber-100 dark:border-amber-700 dark:bg-slate-900 dark:text-amber-300 dark:hover:bg-amber-900/30",onClick:Se}," Rellenar test ")])):X("",!0),s("div",null,[e[19]||(e[19]=s("label",{class:"block mb-2 text-sm font-medium text-gray-900"},"Nombre",-1)),c(s("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>u.value.name=t),type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",placeholder:"Ej: supervisor",required:""},null,512),[[T,u.value.name,void 0,{trim:!0}]])]),s("div",null,[e[22]||(e[22]=s("label",{class:"block mb-2 text-sm font-medium text-gray-900"},"Módulos del menú",-1)),v.value?(o(),r("div",et,"Cargando módulos...")):(o(),r("div",tt,[s("div",st,[e[21]||(e[21]=s("div",{class:"text-sm text-gray-700 dark:text-slate-200"},"Módulos disponibles",-1)),s("label",at,[s("input",{type:"checkbox",class:"rounded border-gray-300 text-blue-600 mr-2",onChange:e[1]||(e[1]=t=>se(u.value.permissions,t.target.checked))},null,32),e[20]||(e[20]=S(" Seleccionar todos ",-1))])]),(o(!0),r(b,null,g(R.value,t=>(o(),r("label",{key:t.permission,class:"flex items-center gap-2 rounded-lg border border-gray-200 p-3 bg-white text-sm text-gray-700 dark:bg-slate-900 dark:border-slate-700 dark:text-slate-200"},[s("input",{type:"checkbox",class:"rounded border-gray-300 text-blue-600 focus:ring-blue-600",checked:u.value.permissions.includes(t.permission),onChange:l=>ne(u.value.permissions,t.permission,l.target.checked)},null,40,lt),s("span",null,d(t.label),1)]))),128))]))]),s("div",null,[e[24]||(e[24]=s("label",{class:"block mb-2 text-sm font-medium text-gray-900"},"Permisos",-1)),s("div",rt,[v.value?(o(),r("div",ot,"Cargando permisos...")):(o(),r("div",nt,[s("div",it,[c(s("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>_.value=t),type:"search",placeholder:"Buscar permisos...",class:"flex-1 bg-white dark:bg-slate-900 border border-gray-200 rounded px-3 py-2 text-sm dark:border-slate-700 dark:text-slate-200"},null,512),[[T,_.value]]),s("button",{type:"button",class:"text-sm text-gray-600 dark:text-slate-300",onClick:e[3]||(e[3]=t=>ae(u.value.permissions))},"Seleccionar todos")]),s("div",dt,[(o(!0),r(b,null,g(te.value,t=>(o(),r("div",{key:t.key,class:"rounded-lg border border-gray-200 p-3 bg-white dark:bg-slate-900 dark:border-slate-700"},[s("div",ut,[s("div",ct,d(t.label),1),s("div",mt,[s("label",bt,[s("input",{type:"checkbox",class:"rounded border-gray-300 text-blue-600 mr-2",checked:le(u.value.permissions,t.items),onChange:l=>re(u.value.permissions,t.items,l.target.checked)},null,40,gt),e[23]||(e[23]=S(" Todos ",-1))]),s("button",{type:"button",class:"text-xs text-gray-500 dark:text-slate-400",onClick:l=>oe(t.key)},d(V(t.key)?"Abrir":"Ocultar"),9,pt)])]),c(s("div",null,[(o(!0),r(b,null,g(t.items,l=>(o(),r("label",{key:l,class:"flex items-center gap-2 py-1 text-sm text-gray-700 dark:text-slate-200"},[c(s("input",{type:"checkbox",class:"rounded border-gray-300 text-blue-600 focus:ring-blue-600",value:l,"onUpdate:modelValue":e[4]||(e[4]=n=>u.value.permissions=n)},null,8,xt),[[me,u.value.permissions]]),s("span",null,d(W(l)),1)]))),128))],512),[[x,!V(t.key)]])]))),128))])]))])]),h.value?(o(),r("p",vt,d(h.value),1)):X("",!0)]),s("button",{type:"submit",class:"w-full text-white bg-blue-600 hover:bg-blue-700 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center",disabled:j.value},d(j.value?"Creando...":"Crear rol"),9,yt)],32)])],512),[[x,y.value]])]),_:1})],512),[[x,y.value]])]),_:1}),C(N,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:$(()=>[c(s("div",{class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/50",role:"dialog","aria-modal":"true",onClick:B(U,["self"])},[C(N,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:$(()=>[c(s("div",ft,[s("div",kt,[s("div",{class:"flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-slate-800"},[e[26]||(e[26]=s("h3",{class:"text-lg font-semibold text-gray-900 dark:text-slate-100"},"Editar rol",-1)),s("button",{type:"button",class:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-slate-800 dark:hover:text-slate-100",onClick:U},[...e[25]||(e[25]=[s("span",{class:"sr-only"},"Cerrar",-1),s("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[s("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 12 12M13 1 1 13"})],-1)])])]),s("form",{class:"min-h-0 p-4 md:p-5 overflow-y-auto",onSubmit:B(Me,["prevent"])},[s("div",ht,[s("div",null,[e[27]||(e[27]=s("label",{class:"block mb-2 text-sm font-medium text-gray-900"},"Nombre",-1)),c(s("input",{"onUpdate:modelValue":e[5]||(e[5]=t=>m.value.name=t),type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",required:""},null,512),[[T,m.value.name,void 0,{trim:!0}]])]),s("div",null,[e[30]||(e[30]=s("label",{class:"block mb-2 text-sm font-medium text-gray-900"},"Módulos del menú",-1)),v.value?(o(),r("div",wt,"Cargando módulos...")):(o(),r("div",_t,[s("div",Ct,[e[29]||(e[29]=s("div",{class:"text-sm text-gray-700 dark:text-slate-200"},"Módulos disponibles",-1)),s("label",St,[s("input",{type:"checkbox",class:"rounded border-gray-300 text-blue-600 mr-2",onChange:e[6]||(e[6]=t=>se(m.value.permissions,t.target.checked))},null,32),e[28]||(e[28]=S(" Seleccionar todos ",-1))])]),(o(!0),r(b,null,g(R.value,t=>(o(),r("label",{key:t.permission,class:"flex items-center gap-2 rounded-lg border border-gray-200 p-3 bg-white text-sm text-gray-700 dark:bg-slate-900 dark:border-slate-700 dark:text-slate-200"},[s("input",{type:"checkbox",class:"rounded border-gray-300 text-blue-600 focus:ring-blue-600",checked:m.value.permissions.includes(t.permission),onChange:l=>ne(m.value.permissions,t.permission,l.target.checked)},null,40,Et),s("span",null,d(t.label),1)]))),128))]))]),s("div",null,[e[32]||(e[32]=s("label",{class:"block mb-2 text-sm font-medium text-gray-900"},"Permisos",-1)),s("div",Lt,[v.value?(o(),r("div",Mt,"Cargando permisos...")):(o(),r("div",Rt,[s("div",jt,[c(s("input",{"onUpdate:modelValue":e[7]||(e[7]=t=>_.value=t),type:"search",placeholder:"Buscar permisos...",class:"flex-1 bg-white dark:bg-slate-900 border border-gray-200 rounded px-3 py-2 text-sm dark:border-slate-700 dark:text-slate-200"},null,512),[[T,_.value]]),s("button",{type:"button",class:"text-sm text-gray-600 dark:text-slate-300",onClick:e[8]||(e[8]=t=>ae(m.value.permissions))},"Seleccionar todos")]),s("div",At,[(o(!0),r(b,null,g(te.value,t=>(o(),r("div",{key:t.key,class:"rounded-lg border border-gray-200 p-3 bg-white dark:bg-slate-900 dark:border-slate-700"},[s("div",Vt,[s("div",Ot,d(t.label),1),s("div",Pt,[s("label",Ut,[s("input",{type:"checkbox",class:"rounded border-gray-300 text-blue-600 mr-2",checked:le(m.value.permissions,t.items),onChange:l=>re(m.value.permissions,t.items,l.target.checked)},null,40,$t),e[31]||(e[31]=S(" Todos ",-1))]),s("button",{type:"button",class:"text-xs text-gray-500 dark:text-slate-400",onClick:l=>oe(t.key)},d(V(t.key)?"Abrir":"Ocultar"),9,Bt)])]),c(s("div",null,[(o(!0),r(b,null,g(t.items,l=>(o(),r("label",{key:l,class:"flex items-center gap-2 py-1 text-sm text-gray-700 dark:text-slate-200"},[c(s("input",{type:"checkbox",class:"rounded border-gray-300 text-blue-600 focus:ring-blue-600",value:l,"onUpdate:modelValue":e[9]||(e[9]=n=>m.value.permissions=n)},null,8,Nt),[[me,m.value.permissions]]),s("span",null,d(W(l)),1)]))),128))],512),[[x,!V(t.key)]])]))),128))])]))])]),w.value?(o(),r("p",Tt,d(w.value),1)):X("",!0)]),s("button",{type:"submit",class:"w-full text-white bg-blue-600 hover:bg-blue-700 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center",disabled:A.value},d(A.value?"Guardando...":"Guardar cambios"),9,Gt)],32)])],512),[[x,f.value]])]),_:1})],512),[[x,f.value]])]),_:1})],64))}};export{Ht as default};
