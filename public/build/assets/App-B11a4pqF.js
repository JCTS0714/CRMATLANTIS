const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/UsersTable-3QfunplF.js","assets/vendor-vue-DArGLcBM.js","assets/vendor-ui-CyZqwBXe.js","assets/vendor-utils-Czy7fllw.js","assets/RolesTable-Djih1zir.js","assets/LeadsBoard-BY-gPbRx.js","assets/app-C29UHuqU.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/LeadsTable-nM9Bnm8v.js","assets/LeadsWhatsAppCampaign-Cwyge7Ru.js","assets/LeadsEmailCampaign-9PGB2g6x.js","assets/CustomersTable-DZWdLbJC.js","assets/CalendarView-DhHcOrgM.js","assets/CalendarView-BFEl6N-c.css","assets/IncidenciasTable-CC7TtjZk.js","assets/BacklogBoard-Bw_uP771.js","assets/PostventaCustomersTable-D3gixeWA.js","assets/ContadoresTable-DHHI94ca.js","assets/CertificadosTable-Dywm1f1-.js","assets/LostLeadsList-z9PYUu64.js","assets/WaitingLeadsList-CQmUT7Uh.js","assets/SettingsView-B0VieDNS.js"])))=>i.map(i=>d[i]);
import{t as Be,_ as Z}from"./app-C29UHuqU.js";import{a as te}from"./vendor-utils-Czy7fllw.js";import{S as K}from"./vendor-ui-CyZqwBXe.js";import{e as I,r as $,o as ce,f as we,g as o,i as a,j as e,k as _,t as p,F as de,l as ie,u as v,n as V,m as Se,p as U,w as P,v as z,q as fe,T as he,s as ee,x as _e,y as ye,z as xe,A as ne,B as pe,C as Ce,D as $e,b as F}from"./vendor-vue-DArGLcBM.js";import{_ as Ee}from"./_plugin-vue_export-helper-DlAUqK2U.js";const me=K.mixin({buttonsStyling:!1,customClass:{popup:"rounded-xl border border-gray-200 bg-white text-gray-900 shadow-xl dark:!border-slate-800 dark:!bg-slate-900 dark:!text-slate-100",backdrop:"bg-black/60",title:"text-base font-semibold text-gray-900 dark:text-slate-100",htmlContainer:"text-sm text-gray-600 dark:text-slate-300",actions:"gap-2",confirmButton:"inline-flex items-center rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-300 disabled:opacity-60",cancelButton:"inline-flex items-center rounded-lg border border-gray-200 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-4 focus:ring-blue-100 disabled:opacity-60 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-200 dark:hover:bg-slate-800"}}),ke=K.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:2500,timerProgressBar:!0,didOpen:c=>{c.addEventListener("mouseenter",K.stopTimer),c.addEventListener("mouseleave",K.resumeTimer)},customClass:{popup:"rounded-xl border border-gray-200 bg-white text-gray-900 shadow-lg dark:!border-slate-800 dark:!bg-slate-900 dark:!text-slate-100",title:"text-sm font-medium",htmlContainer:"text-sm"}});async function tl({title:c,text:A,confirmText:T="Aceptar",cancelText:g="Cancelar",icon:n="question"}={}){return(await me.fire({title:c,text:A,icon:n,showCancelButton:!0,confirmButtonText:T,cancelButtonText:g})).isConfirmed===!0}function Ie(c){return ke.fire({icon:"success",title:c})}function Te(c){return ke.fire({icon:"error",title:c})}function Me(c){return ke.fire({icon:"info",title:c})}function M(c){return String(c??"").replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;")}async function sl(c={}){const A=`
    <div class="grid gap-3 text-left">
      <div>
        <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Nombre</label>
        <input id="sw-cust-name" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(c.name)}" />
      </div>

      <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Contacto</label>
          <input id="sw-cust-contact_name" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(c.contact_name)}" />
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Empresa</label>
          <input id="sw-cust-company_name" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(c.company_name)}" />
        </div>
      </div>

      <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Teléfono</label>
          <input id="sw-cust-contact_phone" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(c.contact_phone)}" />
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Email</label>
          <input id="sw-cust-contact_email" type="email" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(c.contact_email)}" />
        </div>
      </div>

      <div>
        <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Dirección</label>
        <input id="sw-cust-company_address" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(c.company_address)}" />
      </div>

      <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Tipo doc</label>
          <select id="sw-cust-document_type" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100">
            <option value="" ${c.document_type?"":"selected"}>(opcional)</option>
            <option value="dni" ${c.document_type==="dni"?"selected":""}>DNI</option>
            <option value="ruc" ${c.document_type==="ruc"?"selected":""}>RUC</option>
          </select>
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Número doc</label>
          <input id="sw-cust-document_number" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(c.document_number)}" />
        </div>
      </div>
    </div>
  `,T=await me.fire({title:"Editar cliente",html:A,focusConfirm:!1,showCancelButton:!0,confirmButtonText:"Guardar",cancelButtonText:"Cancelar",preConfirm:()=>{var L,k,b,C,j,D,w,r,m,f,S,s,t,l,x;const g=((k=(L=document.getElementById("sw-cust-name"))==null?void 0:L.value)==null?void 0:k.trim())??"",n=((C=(b=document.getElementById("sw-cust-contact_name"))==null?void 0:b.value)==null?void 0:C.trim())??"",y=((D=(j=document.getElementById("sw-cust-company_name"))==null?void 0:j.value)==null?void 0:D.trim())??"",d=((r=(w=document.getElementById("sw-cust-contact_phone"))==null?void 0:w.value)==null?void 0:r.trim())??"",E=((f=(m=document.getElementById("sw-cust-contact_email"))==null?void 0:m.value)==null?void 0:f.trim())??"",B=((s=(S=document.getElementById("sw-cust-company_address"))==null?void 0:S.value)==null?void 0:s.trim())??"",u=((t=document.getElementById("sw-cust-document_type"))==null?void 0:t.value)??"",N=((x=(l=document.getElementById("sw-cust-document_number"))==null?void 0:l.value)==null?void 0:x.trim())??"";return g?N&&!u?(K.showValidationMessage("El tipo de documento es requerido si envías número de documento."),!1):u&&!N?(K.showValidationMessage("El número de documento es requerido."),!1):{name:g,contact_name:n||null,company_name:y||null,contact_phone:d||null,contact_email:E||null,company_address:B||null,document_type:u||null,document_number:N||null}:(K.showValidationMessage("El nombre es requerido."),!1)}});return T.isConfirmed?T.value:null}async function al(){const c={name:"",contact_name:"",company_name:"",contact_phone:"",contact_email:"",company_address:"",document_number:""},A=`
    <div class="grid gap-3 text-left">
      <div>
        <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Nombre</label>
        <input id="sw-cust-name" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(c.name)}" />
      </div>

      <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Contacto</label>
          <input id="sw-cust-contact_name" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(c.contact_name)}" />
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Empresa</label>
          <input id="sw-cust-company_name" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(c.company_name)}" />
        </div>
      </div>

      <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Teléfono</label>
          <input id="sw-cust-contact_phone" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(c.contact_phone)}" />
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Email</label>
          <input id="sw-cust-contact_email" type="email" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(c.contact_email)}" />
        </div>
      </div>

      <div>
        <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Dirección</label>
        <input id="sw-cust-company_address" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(c.company_address)}" />
      </div>

      <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Tipo doc</label>
          <select id="sw-cust-document_type" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100">
            <option value="" selected>(opcional)</option>
            <option value="dni">DNI</option>
            <option value="ruc">RUC</option>
          </select>
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Número doc</label>
          <input id="sw-cust-document_number" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(c.document_number)}" />
        </div>
      </div>
    </div>
  `,T=await me.fire({title:"Crear cliente",html:A,focusConfirm:!1,showCancelButton:!0,confirmButtonText:"Crear",cancelButtonText:"Cancelar",preConfirm:()=>{var L,k,b,C,j,D,w,r,m,f,S,s,t,l,x;const g=((k=(L=document.getElementById("sw-cust-name"))==null?void 0:L.value)==null?void 0:k.trim())??"",n=((C=(b=document.getElementById("sw-cust-contact_name"))==null?void 0:b.value)==null?void 0:C.trim())??"",y=((D=(j=document.getElementById("sw-cust-company_name"))==null?void 0:j.value)==null?void 0:D.trim())??"",d=((r=(w=document.getElementById("sw-cust-contact_phone"))==null?void 0:w.value)==null?void 0:r.trim())??"",E=((f=(m=document.getElementById("sw-cust-contact_email"))==null?void 0:m.value)==null?void 0:f.trim())??"",B=((s=(S=document.getElementById("sw-cust-company_address"))==null?void 0:S.value)==null?void 0:s.trim())??"",u=((t=document.getElementById("sw-cust-document_type"))==null?void 0:t.value)??"",N=((x=(l=document.getElementById("sw-cust-document_number"))==null?void 0:l.value)==null?void 0:x.trim())??"";return g?N&&!u?(K.showValidationMessage("El tipo de documento es requerido si envías número de documento."),!1):u&&!N?(K.showValidationMessage("El número de documento es requerido."),!1):{name:g,contact_name:n||null,company_name:y||null,contact_phone:d||null,contact_email:E||null,company_address:B||null,document_type:u||null,document_number:N||null}:(K.showValidationMessage("El nombre es requerido."),!1)}});return T.isConfirmed?T.value:null}async function ll(){return Ae({nro:"",comercio:"",nom_contador:"",titular_tlf:"",telefono:"",telefono_actu:"",link:"",usuario:"",contrasena:"",servidor:"",customer:null},!0)}async function Ae(c={},A=!1){var y;const T=((y=c==null?void 0:c.customer)==null?void 0:y.id)??"",g=`
    <div class="grid gap-3 text-left">
      <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Nro</label>
          <input id="sw-cont-nro" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(c.nro)}" />
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Comercio</label>
          <input id="sw-cont-comercio" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(c.comercio)}" />
        </div>
      </div>

      <div>
        <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Nombre del contador</label>
        <input id="sw-cont-nom_contador" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(c.nom_contador)}" />
      </div>

      <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Titular tlf</label>
          <input id="sw-cont-titular_tlf" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(c.titular_tlf)}" />
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Teléfono</label>
          <input id="sw-cont-telefono" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(c.telefono)}" />
        </div>
      </div>

      <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Teléfono act.</label>
          <input id="sw-cont-telefono_actu" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(c.telefono_actu)}" />
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Servidor</label>
          <input id="sw-cont-servidor" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(c.servidor)}" />
        </div>
      </div>

      <div>
        <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Link</label>
        <input id="sw-cont-link" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(c.link)}" />
      </div>

      <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Usuario</label>
          <input id="sw-cont-usuario" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(c.usuario)}" />
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Contraseña</label>
          <input id="sw-cont-contrasena" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(c.contrasena)}" />
        </div>
      </div>

      <div>
        <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Cliente ID (opcional)</label>
        <input id="sw-cont-customer_id" inputmode="numeric" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(T)}" placeholder="Ej: 12" />
        <div class="mt-1 text-xs text-gray-500 dark:text-slate-400">Si lo dejas vacío, queda sin asignar.</div>
      </div>
    </div>
  `,n=await me.fire({title:A?"Crear contador":"Editar contador",html:g,focusConfirm:!1,showCancelButton:!0,confirmButtonText:A?"Crear":"Guardar",cancelButtonText:"Cancelar",preConfirm:()=>{var r,m,f,S,s,t,l,x,h,O,R,q,W,Y,G,J,le,ue,X,se,oe,re;const d=((m=(r=document.getElementById("sw-cont-nro"))==null?void 0:r.value)==null?void 0:m.trim())??"",E=((S=(f=document.getElementById("sw-cont-comercio"))==null?void 0:f.value)==null?void 0:S.trim())??"",B=((t=(s=document.getElementById("sw-cont-nom_contador"))==null?void 0:s.value)==null?void 0:t.trim())??"",u=((x=(l=document.getElementById("sw-cont-titular_tlf"))==null?void 0:l.value)==null?void 0:x.trim())??"",N=((O=(h=document.getElementById("sw-cont-telefono"))==null?void 0:h.value)==null?void 0:O.trim())??"",L=((q=(R=document.getElementById("sw-cont-telefono_actu"))==null?void 0:R.value)==null?void 0:q.trim())??"",k=((Y=(W=document.getElementById("sw-cont-servidor"))==null?void 0:W.value)==null?void 0:Y.trim())??"",b=((J=(G=document.getElementById("sw-cont-link"))==null?void 0:G.value)==null?void 0:J.trim())??"",C=((ue=(le=document.getElementById("sw-cont-usuario"))==null?void 0:le.value)==null?void 0:ue.trim())??"",j=((se=(X=document.getElementById("sw-cont-contrasena"))==null?void 0:X.value)==null?void 0:se.trim())??"",D=((re=(oe=document.getElementById("sw-cont-customer_id"))==null?void 0:oe.value)==null?void 0:re.trim())??"";if(!d&&!E&&!B)return K.showValidationMessage("Completa al menos Nro, Comercio o Nombre del contador."),!1;const w=D?Number(D):null;return D&&(!Number.isInteger(w)||w<=0)?(K.showValidationMessage("Cliente ID inválido."),!1):{nro:d||null,comercio:E||null,nom_contador:B||null,titular_tlf:u||null,telefono:N||null,telefono_actu:L||null,servidor:k||null,link:b||null,usuario:C||null,contrasena:j||null,customer_id:w}}});return n.isConfirmed?n.value:null}async function ol(){return Le({nombre:"",ruc:"",usuario:"",clave:"",fecha_creacion:"",fecha_vencimiento:"",estado:"activo",tipo:"",observacion:""},!0)}async function Le(c={},A=!1){const T=`
    <div class="grid gap-3 text-left">
      <div>
        <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Nombre</label>
        <input id="sw-cert-nombre" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(c.nombre)}" />
      </div>

      <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">RUC</label>
          <input id="sw-cert-ruc" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(c.ruc)}" />
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Tipo</label>
          <select id="sw-cert-tipo" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100">
            <option value="" ${c.tipo?"":"selected"}>(opcional)</option>
            <option value="OSE" ${c.tipo==="OSE"?"selected":""}>OSE</option>
            <option value="PSE" ${c.tipo==="PSE"?"selected":""}>PSE</option>
          </select>
        </div>
      </div>

      <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Estado</label>
          <select id="sw-cert-estado" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100">
            <option value="activo" ${c.estado==="activo"||!c.estado?"selected":""}>Activo</option>
            <option value="inactivo" ${c.estado==="inactivo"?"selected":""}>Inactivo</option>
          </select>
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Fecha vencimiento</label>
          <input id="sw-cert-fecha_vencimiento" type="date" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(c.fecha_vencimiento)}" />
        </div>
      </div>

      <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Usuario</label>
          <input id="sw-cert-usuario" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(c.usuario)}" />
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Clave</label>
          <input id="sw-cert-clave" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(c.clave)}" />
        </div>
      </div>

      <div>
        <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Fecha creación</label>
        <input id="sw-cert-fecha_creacion" type="date" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(c.fecha_creacion)}" />
      </div>

      <div>
        <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Imagen</label>
        <input id="sw-cert-imagen" type="file" accept="image/*" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" />
        ${c.imagen?`<div class="mt-1 text-xs text-gray-500 dark:text-slate-400">Actual: ${M(c.imagen)}</div>`:""}
      </div>

      <div>
        <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Observación</label>
        <textarea id="sw-cert-observacion" rows="3" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100">${M(c.observacion)}</textarea>
      </div>
    </div>
  `,g=await me.fire({title:A?"Crear certificado":"Editar certificado",html:T,focusConfirm:!1,showCancelButton:!0,confirmButtonText:A?"Crear":"Guardar",cancelButtonText:"Cancelar",preConfirm:()=>{var j,D,w,r,m,f,S,s,t,l,x,h,O,R,q,W;const n=((D=(j=document.getElementById("sw-cert-nombre"))==null?void 0:j.value)==null?void 0:D.trim())??"",y=((r=(w=document.getElementById("sw-cert-ruc"))==null?void 0:w.value)==null?void 0:r.trim())??"",d=((m=document.getElementById("sw-cert-tipo"))==null?void 0:m.value)??"",E=((f=document.getElementById("sw-cert-estado"))==null?void 0:f.value)??"activo",B=((S=document.getElementById("sw-cert-fecha_vencimiento"))==null?void 0:S.value)??"",u=((t=(s=document.getElementById("sw-cert-usuario"))==null?void 0:s.value)==null?void 0:t.trim())??"",N=((x=(l=document.getElementById("sw-cert-clave"))==null?void 0:l.value)==null?void 0:x.trim())??"",L=((h=document.getElementById("sw-cert-fecha_creacion"))==null?void 0:h.value)??"",k=((R=(O=document.getElementById("sw-cert-imagen"))==null?void 0:O.files)==null?void 0:R[0])??null,b=((W=(q=document.getElementById("sw-cert-observacion"))==null?void 0:q.value)==null?void 0:W.trim())??"";if(!n)return K.showValidationMessage("El nombre es requerido."),!1;const C={nombre:n,ruc:y||null,tipo:d||null,estado:E||"activo",fecha_vencimiento:B||null,usuario:u||null,clave:N||null,fecha_creacion:L||null,observacion:b||null};return k&&(C.imagen=k),C}});return g.isConfirmed?g.value:null}const Ve={class:"h-full px-3 lg:px-5 lg:pl-3"},je={class:"h-full flex items-center justify-between"},Pe={class:"flex items-center justify-start rtl:justify-end"},Ne={key:0,class:"w-6 h-6","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},De={key:1,class:"w-6 h-6","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},Oe={class:"flex items-center gap-2"},Re={class:"relative"},Ue={type:"button",class:"inline-flex items-center justify-center w-9 h-9 text-sm text-white/90 rounded-lg hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-white/40","aria-expanded":"false","data-dropdown-toggle":"notifications-dropdown","data-dropdown-placement":"bottom-end","aria-label":"Notificaciones"},He={key:0,class:"absolute -top-1 -right-1 min-w-5 h-5 px-1 rounded-full bg-white text-sky-700 text-[10px] font-semibold flex items-center justify-center ring-1 ring-sky-700"},ze={id:"notifications-dropdown",class:"z-50 hidden my-4 w-80 max-w-[90vw] text-sm bg-white divide-y divide-gray-100 rounded-lg shadow dark:bg-slate-900 dark:divide-slate-800"},Ze={class:"px-4 py-3"},Fe={class:"text-xs text-gray-500 dark:text-slate-300"},qe={class:"py-2 max-h-72 overflow-auto"},We={key:0,class:"px-4 py-2 text-gray-500 dark:text-slate-300"},Ge=["onClick"],Qe={class:"text-sm text-gray-900 dark:text-slate-100"},Ke={key:0,class:"text-xs text-gray-500 dark:text-slate-300"},Ye={class:"text-[11px] text-gray-400 dark:text-slate-400"},Je=["aria-label"],Xe={key:0,class:"w-5 h-5","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},et={key:1,class:"w-5 h-5","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},tt={class:"flex items-center ms-3"},st={type:"button",class:"flex text-sm rounded-full ring-1 ring-sky-700 hover:ring-white/60 focus:ring-4 focus:ring-white/30","aria-expanded":"false","data-dropdown-toggle":"user-dropdown","data-dropdown-placement":"bottom"},at=["src","alt"],lt={key:1,class:"w-8 h-8 rounded-full bg-white text-sky-700 flex items-center justify-center text-xs font-semibold"},ot={id:"user-dropdown",class:"z-50 hidden my-4 text-base list-none bg-white divide-y divide-gray-100 rounded-lg shadow dark:bg-slate-900 dark:divide-slate-800"},rt={class:"px-4 py-3"},nt={class:"text-sm text-gray-900 dark:text-slate-100"},dt={class:"text-sm font-medium text-gray-500 truncate dark:text-slate-300"},it={class:"py-2"},ut={method:"POST",action:"/logout",class:"block"},ct=["value"],mt={__name:"Header",props:{sidebarCollapsed:{type:Boolean,default:!1}},emits:["toggle-sidebar"],setup(c){var w;const A=((w=document.querySelector('meta[name="csrf-token"]'))==null?void 0:w.getAttribute("content"))??"",T=I(()=>window.__AUTH_USER__??null),g=I(()=>{var r;return((r=T.value)==null?void 0:r.name)??"Usuario"}),n=I(()=>{var r;return((r=T.value)==null?void 0:r.email)??""}),y=I(()=>{var r;return((r=T.value)==null?void 0:r.profile_photo_url)??""}),d=I(()=>{var t;const r=String(((t=T.value)==null?void 0:t.name)??"").trim();if(!r)return"U";const m=r.split(/\s+/).map(l=>l.trim()).filter(Boolean);if(m.length===0)return"U";const f=Array.from(m[0])[0]??"",S=m.length>1?Array.from(m[m.length-1])[0]??"":"";return(`${f}${S}`.trim()||"U").toLocaleUpperCase("es-ES")}),E=$(!1),B=$([]),u=$(0);let N=null,L=new Set;const k=async({toastNew:r=!1}={})=>{var m,f;try{const S=await te.get("/notifications"),s=(m=S==null?void 0:S.data)==null?void 0:m.data,t=(s==null?void 0:s.notifications)??[],l=(s==null?void 0:s.count)??0;if(r){const x=t.filter(h=>!L.has(h.id));for(const h of x.slice(0,2)){const O=(f=h==null?void 0:h.data)!=null&&f.title?`Recordatorio: ${h.data.title}`:"Nuevo recordatorio";Me(O)}}B.value=t,u.value=Number(l)||0,L=new Set(t.map(x=>x.id))}catch{}},b=async r=>{var f;if(!(r!=null&&r.id))return;try{await te.post(`/notifications/${r.id}/read`)}catch{}const m=(f=r==null?void 0:r.data)==null?void 0:f.url;m?window.location.assign(m):k({toastNew:!1})},C=r=>{if(!r)return"";const m=new Date(r);return Number.isNaN(m.getTime())?String(r):m.toLocaleString()},j=()=>{E.value=document.documentElement.classList.contains("dark")},D=()=>{const r=Be();E.value=r==="dark"};return ce(()=>{j(),window.addEventListener("theme:changed",j),k({toastNew:!1}),N=setInterval(()=>k({toastNew:!0}),3e4)}),we(()=>{window.removeEventListener("theme:changed",j),N&&clearInterval(N)}),(r,m)=>(a(),o("nav",{class:V(["fixed top-0 right-0 z-50 h-16 bg-sky-600 border-b border-sky-700 shadow-sm",c.sidebarCollapsed?"left-0 sm:left-20":"left-0 sm:left-64"])},[e("div",Ve,[e("div",je,[e("div",Pe,[m[4]||(m[4]=e("button",{"data-drawer-target":"logo-sidebar","data-drawer-toggle":"logo-sidebar","aria-controls":"logo-sidebar",type:"button",class:"inline-flex items-center p-2 text-sm text-white/90 rounded-lg sm:hidden hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-white/40"},[e("span",{class:"sr-only"},"Abrir sidebar"),e("svg",{class:"w-6 h-6","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"clip-rule":"evenodd","fill-rule":"evenodd",d:"M2 4.75A.75.75 0 0 1 2.75 4h14.5a.75.75 0 0 1 0 1.5H2.75A.75.75 0 0 1 2 4.75Zm0 10.5a.75.75 0 0 1 .75-.75h14.5a.75.75 0 0 1 0 1.5H2.75a.75.75 0 0 1-.75-.75ZM2 10a.75.75 0 0 1 .75-.75h14.5a.75.75 0 0 1 0 1.5H2.75A.75.75 0 0 1 2 10Z"})])],-1)),e("button",{type:"button",class:"hidden sm:inline-flex items-center p-2 text-sm text-white/90 rounded-lg hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-white/40",onClick:m[0]||(m[0]=f=>r.$emit("toggle-sidebar"))},[m[3]||(m[3]=e("span",{class:"sr-only"},"Contraer/expandir sidebar",-1)),c.sidebarCollapsed?(a(),o("svg",De,[...m[2]||(m[2]=[e("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 0 1 1-1h8a1 1 0 1 1 0 2H5v10h7a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1V4Zm12.707 2.293a1 1 0 0 1 0 1.414L15.414 8H9a1 1 0 1 0 0 2h6.414l.293.293a1 1 0 0 1 0 1.414l-2 2a1 1 0 1 0 1.414 1.414l2-2a1 1 0 0 0 0-1.414L16.414 10l.707-.707a1 1 0 0 0 0-1.414l-2-2a1 1 0 0 0-1.414 1.414l2 2Z","clip-rule":"evenodd"},null,-1)])])):(a(),o("svg",Ne,[...m[1]||(m[1]=[e("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 0 1 1-1h8a1 1 0 1 1 0 2H5v10h7a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1V4Zm12.293 2.293a1 1 0 0 1 1.414 0l2 2a1 1 0 0 1 0 1.414l-2 2a1 1 0 1 1-1.414-1.414L15.586 10l-.293-.293a1 1 0 0 1 0-1.414ZM9 10a1 1 0 0 1 1-1h7a1 1 0 1 1 0 2h-7a1 1 0 0 1-1-1Z","clip-rule":"evenodd"},null,-1)])]))])]),e("div",Oe,[e("div",Re,[e("button",Ue,[m[5]||(m[5]=e("svg",{class:"w-5 h-5","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M10 2a6 6 0 0 0-6 6v2.586l-.707.707A1 1 0 0 0 3 13h14a1 1 0 0 0 .707-1.707L17 10.586V8a6 6 0 0 0-6-6Zm0 16a2.5 2.5 0 0 0 2.45-2H7.55A2.5 2.5 0 0 0 10 18Z"})],-1)),u.value>0?(a(),o("span",He,p(u.value>99?"99+":u.value),1)):_("",!0)]),e("div",ze,[e("div",Ze,[m[6]||(m[6]=e("p",{class:"text-sm font-semibold text-gray-900 dark:text-slate-100"},"Notificaciones",-1)),e("p",Fe,"No leídas: "+p(u.value),1)]),e("ul",qe,[B.value.length===0?(a(),o("li",We," No hay notificaciones nuevas. ")):_("",!0),(a(!0),o(de,null,ie(B.value,f=>{var S,s;return a(),o("li",{key:f.id},[e("button",{type:"button",class:"w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-slate-800",onClick:t=>b(f)},[e("p",Qe,p(((S=f==null?void 0:f.data)==null?void 0:S.title)??"Notificación"),1),(s=f==null?void 0:f.data)!=null&&s.message?(a(),o("p",Ke,p(f.data.message),1)):_("",!0),e("p",Ye,p(C(f==null?void 0:f.created_at)),1)],8,Ge)])}),128))])])]),e("button",{type:"button",class:"inline-flex items-center justify-center w-9 h-9 text-sm text-white/90 rounded-lg hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-white/40","aria-label":E.value?"Cambiar a modo claro":"Cambiar a modo oscuro",onClick:D},[E.value?(a(),o("svg",Xe,[...m[7]||(m[7]=[e("path",{d:"M10 2a1 1 0 0 1 1 1v1a1 1 0 1 1-2 0V3a1 1 0 0 1 1-1Zm4.95 3.05a1 1 0 0 1 0 1.41l-.7.7a1 1 0 1 1-1.41-1.41l.7-.7a1 1 0 0 1 1.41 0ZM17 9a1 1 0 1 1 0 2h-1a1 1 0 1 1 0-2h1ZM10 6a4 4 0 1 0 0 8 4 4 0 0 0 0-8ZM4 9a1 1 0 1 0 0 2H3a1 1 0 1 0 0-2h1Zm2.16-3.54a1 1 0 0 1 1.41 0l.7.7a1 1 0 0 1-1.41 1.41l-.7-.7a1 1 0 0 1 0-1.41ZM10 16a1 1 0 0 1 1 1v1a1 1 0 1 1-2 0v-1a1 1 0 0 1 1-1Zm5.54.46a1 1 0 0 1 0 1.41l-.7.7a1 1 0 1 1-1.41-1.41l.7-.7a1 1 0 0 1 1.41 0ZM6.57 15.76a1 1 0 0 1 0 1.41l-.7.7a1 1 0 1 1-1.41-1.41l.7-.7a1 1 0 0 1 1.41 0Z"},null,-1)])])):(a(),o("svg",et,[...m[8]||(m[8]=[e("path",{d:"M17.293 13.293A8 8 0 0 1 6.707 2.707a1 1 0 0 1 1.11-1.66A10 10 0 1 0 18.953 12.183a1 1 0 0 1-1.66 1.11Z"},null,-1)])]))],8,Je),e("div",tt,[e("button",st,[m[9]||(m[9]=e("span",{class:"sr-only"},"Abrir menú de usuario",-1)),y.value?(a(),o("img",{key:0,src:y.value,alt:g.value,class:"w-8 h-8 rounded-full object-cover bg-white ring-1 ring-sky-700",loading:"lazy"},null,8,at)):(a(),o("div",lt,p(d.value),1))]),e("div",ot,[e("div",rt,[e("p",nt,p(g.value),1),e("p",dt,p(n.value),1)]),e("ul",it,[m[11]||(m[11]=e("li",null,[e("a",{href:"/profile",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-slate-200 dark:hover:bg-slate-800"}," Perfil ")],-1)),m[12]||(m[12]=e("li",null,[e("a",{href:"/configuracion",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-slate-200 dark:hover:bg-slate-800"}," Configuración ")],-1)),e("li",null,[e("form",ut,[e("input",{type:"hidden",name:"_token",value:v(A)},null,8,ct),m[10]||(m[10]=e("button",{type:"submit",class:"w-full text-left block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-slate-200 dark:hover:bg-slate-800"}," Salir ",-1))])])])])])])])])],2))}},bt="/build/assets/LOGO-cdeU89Pk.png",gt="/build/assets/LOGO_TEXTO-CJ7UpWu5.png",xt={class:"h-full flex flex-col bg-slate-900"},pt={href:"/dashboard",class:"flex items-center w-full gap-2"},vt=["src"],ft=["src"],ht={class:"flex-1 px-3 pb-4 overflow-y-auto"},wt={class:"px-2 pt-2 pb-3 text-xs font-semibold text-slate-300 uppercase tracking-wider"},yt={class:"space-y-2 font-medium"},kt={class:"ms-3"},_t={key:0},Ct={class:"flex-1 ms-3 whitespace-nowrap"},$t={key:1},Et={class:"flex-1 ms-3 whitespace-nowrap"},It={key:2},Tt={class:"flex-1 ms-3 whitespace-nowrap"},Bt={class:"mt-2 space-y-1 pl-2"},St={key:3},Mt={class:"flex-1 ms-3 whitespace-nowrap"},At={class:"mt-2 space-y-1 pl-2"},Lt={key:0},Vt={key:1},jt={key:4},Pt={class:"flex-1 ms-3 whitespace-nowrap"},Nt={key:5},Dt={class:"flex-1 ms-3 whitespace-nowrap"},Ot={key:6},Rt={class:"flex-1 ms-3 whitespace-nowrap"},Ut={class:"mt-2 space-y-1 pl-2"},Ht={class:"min-w-56 bg-slate-900 border border-slate-800 rounded-lg shadow-sm overflow-hidden"},zt={class:"py-2"},Zt={key:0},Ft={key:1},qt={__name:"Sidebar",props:{collapsed:{type:Boolean,default:!1}},setup(c){const A=window.__APP_LOGO_MARK__??"",T=window.__APP_LOGO_FULL__??"",g=I(()=>A||bt),n=I(()=>T||gt),y=window.location.pathname,d=H=>H==="/dashboard"?y==="/dashboard":y.startsWith(H),E=H=>y===H,B=c,{collapsed:u}=Se(B),N=I(()=>window.__AUTH_USER__??null),L=H=>{var Q;const i=(Q=N.value)==null?void 0:Q.permissions;return Array.isArray(i)&&i.includes(H)},k=I(()=>L("menu.users")),b=I(()=>L("menu.roles")),C=I(()=>L("menu.leads")),j=I(()=>L("menu.email")||L("menu.leads")),D=I(()=>C.value||j.value),w=I(()=>L("menu.customers")),r=I(()=>L("menu.calendar")||L("calendar.view")),m=I(()=>L("menu.postventa")),f=$(d("/incidencias")||d("/backlog")||d("/postventa")),S=$(!1),s=$(null),t=$({left:"0px",top:"0px"});let l=null;const x=()=>{var i,Q;if(!u.value)return;l&&(clearTimeout(l),l=null);const H=(Q=(i=s.value)==null?void 0:i.getBoundingClientRect)==null?void 0:Q.call(i);H&&(t.value={left:`${Math.round(H.right+8)}px`,top:`${Math.round(H.top)}px`}),S.value=!0},h=()=>{u.value&&(l&&clearTimeout(l),l=setTimeout(()=>{S.value=!1},120))},O=()=>{if(u.value){window.location.assign("/backlog");return}f.value=!f.value},R=$(E("/leads")||d("/desistidos")||d("/espera")),q=$(!1),W=$(null),Y=$({left:"0px",top:"0px"});let G=null;const J=()=>{var i,Q;if(!u.value)return;G&&(clearTimeout(G),G=null);const H=(Q=(i=W.value)==null?void 0:i.getBoundingClientRect)==null?void 0:Q.call(i);H&&(Y.value={left:`${Math.round(H.right+8)}px`,top:`${Math.round(H.top)}px`}),q.value=!0},le=()=>{u.value&&(G&&clearTimeout(G),G=setTimeout(()=>{q.value=!1},120))},ue=()=>{if(u.value){window.location.assign("/leads");return}R.value=!R.value},X=$(d("/leads/whatsapp")||d("/leads/email")),se=$(!1),oe=$(null),re=$({left:"0px",top:"0px"});let ae=null;const be=()=>{var i,Q;if(!u.value)return;ae&&(clearTimeout(ae),ae=null);const H=(Q=(i=oe.value)==null?void 0:i.getBoundingClientRect)==null?void 0:Q.call(i);H&&(re.value={left:`${Math.round(H.right+8)}px`,top:`${Math.round(H.top)}px`}),se.value=!0},ge=()=>{u.value&&(ae&&clearTimeout(ae),ae=setTimeout(()=>{se.value=!1},120))},ve=()=>{if(u.value){window.location.assign("/leads/whatsapp");return}X.value=!X.value};return(H,i)=>(a(),o("aside",{id:"logo-sidebar",class:V(["fixed top-0 left-0 z-40 h-screen transition-all duration-200 -translate-x-full bg-slate-900 border-r border-slate-950 sm:translate-x-0",v(u)?"w-20":"w-64"]),"aria-label":"Sidebar"},[e("div",xt,[e("div",{class:V(["h-16 px-2 flex items-center bg-sky-600 border-b border-sky-700 overflow-hidden",v(u)?"justify-center":"justify-start"])},[e("a",pt,[v(u)?(a(),o("img",{key:0,src:g.value,alt:"Atlantis",class:"h-14 w-14 object-contain"},null,8,vt)):(a(),o("img",{key:1,src:n.value,alt:"Atlantis",class:"h-14 w-full max-w-full flex-1 object-contain object-left"},null,8,ft))])],2),e("div",ht,[P(e("div",wt," Menú ",512),[[z,!v(u)]]),e("ul",yt,[e("li",null,[e("a",{href:"/dashboard",title:"Inicio","aria-current":"page",class:V(["flex items-center p-2 rounded-lg group",[v(u)?"justify-center":"",d("/dashboard")?"text-white bg-slate-800 border border-slate-700":"text-slate-200 hover:bg-slate-800"]])},[(a(),o("svg",{class:V(["w-5 h-5",d("/dashboard")?"text-white/90":"text-slate-300 group-hover:text-white"]),"aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[...i[0]||(i[0]=[e("path",{d:"M10 2a1 1 0 0 1 .7.3l7 7a1 1 0 0 1-1.4 1.4L16 10.4V17a1 1 0 0 1-1 1h-3a1 1 0 0 1-1-1v-3H9v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-6.6l-.3.3A1 1 0 1 1 2.3 9.3l7-7A1 1 0 0 1 10 2Z"},null,-1)])],2)),P(e("span",kt,"Inicio",512),[[z,!v(u)]])],2)]),k.value?(a(),o("li",_t,[e("a",{href:"/users",title:"Usuarios",class:V(["flex items-center p-2 rounded-lg group",[v(u)?"justify-center":"",d("/users")?"text-white bg-slate-800 border border-slate-700":"text-slate-200 hover:bg-slate-800"]])},[(a(),o("svg",{class:V(["w-5 h-5",d("/users")?"text-white/90":"text-slate-300 group-hover:text-white"]),"aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[...i[1]||(i[1]=[e("path",{d:"M10 10a4 4 0 1 0-4-4 4 4 0 0 0 4 4Zm-7 8a7 7 0 0 1 14 0 1 1 0 0 1-2 0 5 5 0 0 0-10 0 1 1 0 0 1-2 0Z"},null,-1)])],2)),P(e("span",Ct,"Usuarios",512),[[z,!v(u)]])],2)])):_("",!0),b.value?(a(),o("li",$t,[e("a",{href:"/roles",title:"Roles",class:V(["flex items-center p-2 rounded-lg group",[v(u)?"justify-center":"",d("/roles")?"text-white bg-slate-800 border border-slate-700":"text-slate-200 hover:bg-slate-800"]])},[(a(),o("svg",{class:V(["w-5 h-5",d("/roles")?"text-white/90":"text-slate-300 group-hover:text-white"]),"aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[...i[2]||(i[2]=[e("path",{d:"M10 2l7 3v5c0 5-3.58 9.74-7 10-3.42-.26-7-5-7-10V5l7-3z"},null,-1)])],2)),P(e("span",Et,"Roles",512),[[z,!v(u)]])],2)])):_("",!0),C.value?(a(),o("li",It,[e("div",{class:"relative",ref_key:"pipelineAnchor",ref:W,onMouseenter:J,onMouseleave:le},[e("button",{type:"button",class:V(["w-full flex items-center p-2 rounded-lg group",[v(u)?"justify-center":"",E("/leads")||d("/desistidos")||d("/espera")?"text-white bg-slate-800 border border-slate-700":"text-slate-200 hover:bg-slate-800"]]),onClick:ue},[(a(),o("svg",{class:V(["w-5 h-5",E("/leads")||d("/desistidos")||d("/espera")?"text-white/90":"text-slate-300 group-hover:text-white"]),"aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[...i[3]||(i[3]=[e("path",{d:"M3 3h14v4H3V3zm0 6h6v8H3v-8zm8 0h6v8h-6v-8z"},null,-1)])],2)),P(e("span",Tt,"Pipeline",512),[[z,!v(u)]]),P((a(),o("svg",{class:V(["w-4 h-4",R.value?"rotate-180":""]),"aria-hidden":"true",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[...i[4]||(i[4]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2)),[[z,!v(u)]])],2),P(e("ul",Bt,[e("li",null,[e("a",{href:"/leads",class:V(["flex items-center gap-3 p-2 rounded-lg group",["text-slate-200 hover:bg-slate-800",v(y)==="/leads"?"bg-slate-800 border border-slate-700":""]])},[...i[5]||(i[5]=[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"},null,-1),e("span",{class:"whitespace-nowrap"},"Leads",-1)])],2)]),e("li",null,[e("a",{href:"/espera",class:V(["flex items-center gap-3 p-2 rounded-lg group",["text-slate-200 hover:bg-slate-800",d("/espera")?"bg-slate-800 border border-slate-700":""]])},[...i[6]||(i[6]=[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"},null,-1),e("span",{class:"whitespace-nowrap"},"Zona de espera",-1)])],2)]),e("li",null,[e("a",{href:"/desistidos",class:V(["flex items-center gap-3 p-2 rounded-lg group",["text-slate-200 hover:bg-slate-800",d("/desistidos")?"bg-slate-800 border border-slate-700":""]])},[...i[7]||(i[7]=[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"},null,-1),e("span",{class:"whitespace-nowrap"},"Desistidos",-1)])],2)])],512),[[z,!v(u)&&R.value]])],544)])):_("",!0),D.value?(a(),o("li",St,[e("div",{class:"relative",ref_key:"inboxAnchor",ref:oe,onMouseenter:be,onMouseleave:ge},[e("button",{type:"button",class:V(["w-full flex items-center p-2 rounded-lg group",[v(u)?"justify-center":"",d("/leads/whatsapp")||d("/leads/email")?"text-white bg-slate-800 border border-slate-700":"text-slate-200 hover:bg-slate-800"]]),onClick:ve},[(a(),o("svg",{class:V(["w-5 h-5",d("/leads/whatsapp")||d("/leads/email")?"text-white/90":"text-slate-300 group-hover:text-white"]),"aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[...i[8]||(i[8]=[e("path",{d:"M2 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4zm2 0 6 4 6-4H4zm14 2.2-8 5.3-8-5.3V16h16V6.2z"},null,-1)])],2)),P(e("span",Mt,"Bandeja de entrada",512),[[z,!v(u)]]),P((a(),o("svg",{class:V(["w-4 h-4",X.value?"rotate-180":""]),"aria-hidden":"true",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[...i[9]||(i[9]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2)),[[z,!v(u)]])],2),P(e("ul",At,[C.value?(a(),o("li",Lt,[e("a",{href:"/leads/whatsapp",class:V(["flex items-center gap-3 p-2 rounded-lg group",["text-slate-200 hover:bg-slate-800",v(y)==="/leads/whatsapp"?"bg-slate-800 border border-slate-700":""]])},[...i[10]||(i[10]=[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"},null,-1),e("span",{class:"whitespace-nowrap"},"WhatsApp masivo",-1)])],2)])):_("",!0),j.value?(a(),o("li",Vt,[e("a",{href:"/leads/email",class:V(["flex items-center gap-3 p-2 rounded-lg group",["text-slate-200 hover:bg-slate-800",v(y)==="/leads/email"?"bg-slate-800 border border-slate-700":""]])},[...i[11]||(i[11]=[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"},null,-1),e("span",{class:"whitespace-nowrap"},"Email masivo",-1)])],2)])):_("",!0)],512),[[z,!v(u)&&X.value]])],544)])):_("",!0),w.value?(a(),o("li",jt,[e("a",{href:"/customers",title:"Clientes",class:V(["flex items-center p-2 rounded-lg group",[v(u)?"justify-center":"",d("/customers")?"text-white bg-slate-800 border border-slate-700":"text-slate-200 hover:bg-slate-800"]])},[(a(),o("svg",{class:V(["w-5 h-5",d("/customers")?"text-white/90":"text-slate-300 group-hover:text-white"]),"aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[...i[12]||(i[12]=[e("path",{d:"M3 21h14v-8H3v8zM5 10h10v11H5V10zM7 3h6v4H7V3zM3 7h14v2H3V7z"},null,-1)])],2)),P(e("span",Pt,"Clientes",512),[[z,!v(u)]])],2)])):_("",!0),r.value?(a(),o("li",Nt,[e("a",{href:"/calendar",title:"Calendario",class:V(["flex items-center p-2 rounded-lg group",[v(u)?"justify-center":"",d("/calendar")?"text-white bg-slate-800 border border-slate-700":"text-slate-200 hover:bg-slate-800"]])},[(a(),o("svg",{class:V(["w-5 h-5",d("/calendar")?"text-white/90":"text-slate-300 group-hover:text-white"]),"aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[...i[13]||(i[13]=[e("path",{d:"M6 2a1 1 0 1 0 0 2h8a1 1 0 1 0 0-2H6Z"},null,-1),e("path",{"fill-rule":"evenodd",d:"M4 5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V5Zm3 4a1 1 0 0 0 0 2h6a1 1 0 1 0 0-2H7Zm0 4a1 1 0 1 0 0 2h4a1 1 0 1 0 0-2H7Z","clip-rule":"evenodd"},null,-1)])],2)),P(e("span",Dt,"Calendario",512),[[z,!v(u)]])],2)])):_("",!0),m.value?(a(),o("li",Ot,[e("div",{class:"relative",ref_key:"postventaAnchor",ref:s,onMouseenter:x,onMouseleave:h},[e("button",{type:"button",class:V(["w-full flex items-center p-2 rounded-lg group",[v(u)?"justify-center":"",d("/incidencias")||d("/backlog")||d("/postventa")?"text-white bg-slate-800 border border-slate-700":"text-slate-200 hover:bg-slate-800"]]),onClick:O},[(a(),o("svg",{class:V(["w-5 h-5",d("/incidencias")||d("/backlog")||d("/postventa")?"text-white/90":"text-slate-300 group-hover:text-white"]),"aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[...i[14]||(i[14]=[e("path",{d:"M11.3 1.046a1 1 0 0 0-2.6 0l-.2.682a6.96 6.96 0 0 0-1.18.49l-.63-.35a1 1 0 0 0-1.24.22l-.9.9a1 1 0 0 0-.22 1.24l.35.63a6.96 6.96 0 0 0-.49 1.18l-.682.2a1 1 0 0 0 0 2.6l.682.2c.12.42.28.82.49 1.2l-.35.63a1 1 0 0 0 .22 1.24l.9.9a1 1 0 0 0 1.24.22l.63-.35c.38.2.78.37 1.2.49l.2.682a1 1 0 0 0 2.6 0l.2-.682c.42-.12.82-.28 1.2-.49l.63.35a1 1 0 0 0 1.24-.22l.9-.9a1 1 0 0 0 .22-1.24l-.35-.63c.2-.38.37-.78.49-1.2l.682-.2a1 1 0 0 0 0-2.6l-.682-.2a6.96 6.96 0 0 0-.49-1.18l.35-.63a1 1 0 0 0-.22-1.24l-.9-.9a1 1 0 0 0-1.24-.22l-.63.35c-.38-.2-.78-.37-1.2-.49l-.2-.682ZM10 13a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z"},null,-1)])],2)),P(e("span",Rt,"Postventa",512),[[z,!v(u)]]),P((a(),o("svg",{class:V(["w-4 h-4",f.value?"rotate-180":""]),"aria-hidden":"true",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[...i[15]||(i[15]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2)),[[z,!v(u)]])],2),P(e("ul",Ut,[e("li",null,[e("a",{href:"/backlog",class:V(["flex items-center gap-3 p-2 rounded-lg group",["text-slate-200 hover:bg-slate-800",d("/incidencias")||d("/backlog")?"bg-slate-800 border border-slate-700":""]])},[...i[16]||(i[16]=[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"},null,-1),e("span",{class:"whitespace-nowrap"},"Incidencias",-1)])],2)]),e("li",null,[e("a",{href:"/postventa/clientes",class:V(["flex items-center gap-3 p-2 rounded-lg group",["text-slate-200 hover:bg-slate-800",d("/postventa/clientes")?"bg-slate-800 border border-slate-700":""]])},[...i[17]||(i[17]=[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"},null,-1),e("span",{class:"whitespace-nowrap"},"Clientes",-1)])],2)]),e("li",null,[e("a",{href:"/postventa/contadores",class:V(["flex items-center gap-3 p-2 rounded-lg group",["text-slate-200 hover:bg-slate-800",d("/postventa/contadores")?"bg-slate-800 border border-slate-700":""]])},[...i[18]||(i[18]=[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"},null,-1),e("span",{class:"whitespace-nowrap"},"Contadores",-1)])],2)]),e("li",null,[e("a",{href:"/postventa/certificados",class:V(["flex items-center gap-3 p-2 rounded-lg group",["text-slate-200 hover:bg-slate-800",d("/postventa/certificados")?"bg-slate-800 border border-slate-700":""]])},[...i[19]||(i[19]=[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"},null,-1),e("span",{class:"whitespace-nowrap"},"Certificados",-1)])],2)])],512),[[z,!v(u)&&f.value]])],544)])):_("",!0)])])]),(a(),U(he,{to:"body"},[v(u)?P((a(),o("div",{key:0,class:"fixed z-[9999]",style:fe(t.value),onMouseenter:x,onMouseleave:h},[...i[20]||(i[20]=[e("div",{class:"min-w-56 bg-slate-900 border border-slate-800 rounded-lg shadow-sm overflow-hidden"},[e("div",{class:"px-4 py-3 flex items-center justify-between border-b border-slate-800"},[e("div",{class:"text-sm font-semibold text-slate-100"},"Postventa"),e("svg",{class:"w-4 h-4 text-slate-300","aria-hidden":"true",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])]),e("ul",{class:"py-2"},[e("li",null,[e("a",{href:"/backlog",class:"flex items-center gap-3 px-4 py-2 text-sm text-slate-200 hover:bg-slate-800"},[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"}),e("span",{class:"whitespace-nowrap"},"Incidencias")])]),e("li",null,[e("a",{href:"/postventa/clientes",class:"flex items-center gap-3 px-4 py-2 text-sm text-slate-200 hover:bg-slate-800"},[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"}),e("span",{class:"whitespace-nowrap"},"Clientes")])]),e("li",null,[e("a",{href:"/postventa/contadores",class:"flex items-center gap-3 px-4 py-2 text-sm text-slate-200 hover:bg-slate-800"},[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"}),e("span",{class:"whitespace-nowrap"},"Contadores")])]),e("li",null,[e("a",{href:"/postventa/certificados",class:"flex items-center gap-3 px-4 py-2 text-sm text-slate-200 hover:bg-slate-800"},[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"}),e("span",{class:"whitespace-nowrap"},"Certificados")])])])],-1)])],36)),[[z,S.value]]):_("",!0)])),(a(),U(he,{to:"body"},[v(u)?P((a(),o("div",{key:0,class:"fixed z-[9999]",style:fe(Y.value),onMouseenter:J,onMouseleave:le},[...i[21]||(i[21]=[e("div",{class:"min-w-56 bg-slate-900 border border-slate-800 rounded-lg shadow-sm overflow-hidden"},[e("div",{class:"px-4 py-3 flex items-center justify-between border-b border-slate-800"},[e("div",{class:"text-sm font-semibold text-slate-100"},"Pipeline"),e("svg",{class:"w-4 h-4 text-slate-300","aria-hidden":"true",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])]),e("ul",{class:"py-2"},[e("li",null,[e("a",{href:"/leads",class:"flex items-center gap-3 px-4 py-2 text-sm text-slate-200 hover:bg-slate-800"},[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"}),e("span",{class:"whitespace-nowrap"},"Leads")])]),e("li",null,[e("a",{href:"/espera",class:"flex items-center gap-3 px-4 py-2 text-sm text-slate-200 hover:bg-slate-800"},[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"}),e("span",{class:"whitespace-nowrap"},"Zona de espera")])]),e("li",null,[e("a",{href:"/desistidos",class:"flex items-center gap-3 px-4 py-2 text-sm text-slate-200 hover:bg-slate-800"},[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"}),e("span",{class:"whitespace-nowrap"},"Desistidos")])])])],-1)])],36)),[[z,q.value]]):_("",!0)])),(a(),U(he,{to:"body"},[v(u)?P((a(),o("div",{key:0,class:"fixed z-[9999]",style:fe(re.value),onMouseenter:be,onMouseleave:ge},[e("div",Ht,[i[24]||(i[24]=e("div",{class:"px-4 py-3 flex items-center justify-between border-b border-slate-800"},[e("div",{class:"text-sm font-semibold text-slate-100"},"Bandeja de entrada"),e("svg",{class:"w-4 h-4 text-slate-300","aria-hidden":"true",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1)),e("ul",zt,[C.value?(a(),o("li",Zt,[...i[22]||(i[22]=[e("a",{href:"/leads/whatsapp",class:"flex items-center gap-3 px-4 py-2 text-sm text-slate-200 hover:bg-slate-800"},[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"}),e("span",{class:"whitespace-nowrap"},"WhatsApp masivo")],-1)])])):_("",!0),j.value?(a(),o("li",Ft,[...i[23]||(i[23]=[e("a",{href:"/leads/email",class:"flex items-center gap-3 px-4 py-2 text-sm text-slate-200 hover:bg-slate-800"},[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"}),e("span",{class:"whitespace-nowrap"},"Email masivo")],-1)])])):_("",!0)])])],36)),[[z,se.value]]):_("",!0)]))],2))}},Wt={class:"bg-white border-t border-gray-200 dark:bg-slate-950 dark:border-slate-800"},Gt={class:"max-w-7xl mx-auto px-4 py-6"},Qt={class:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"},Kt={class:"text-sm text-gray-500 dark:text-slate-300"},Yt={__name:"Footer",setup(c){const A=new Date().getFullYear();return(T,g)=>(a(),o("footer",Wt,[e("div",Gt,[e("div",Qt,[e("span",Kt,"© "+p(v(A))+" CRM ATLANTIS",1),g[0]||(g[0]=e("div",{class:"flex gap-4"},[e("a",{href:"#",class:"text-sm text-gray-500 hover:text-gray-900 dark:text-slate-300 dark:hover:text-slate-100"},"Ayuda"),e("a",{href:"#",class:"text-sm text-gray-500 hover:text-gray-900 dark:text-slate-300 dark:hover:text-slate-100"},"Privacidad"),e("a",{href:"#",class:"text-sm text-gray-500 hover:text-gray-900 dark:text-slate-300 dark:hover:text-slate-100"},"Términos")],-1))])])]))}},Jt={key:0,class:"rounded-lg border border-slate-200 bg-white p-6 text-sm text-slate-600 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-300"},Xt={key:1,class:"rounded-lg border border-red-200 bg-white p-6 text-sm text-red-700 dark:border-red-900/40 dark:bg-slate-900 dark:text-red-300"},es={key:2,class:"space-y-6"},ts={class:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-end"},ss={class:"flex items-center gap-2"},as=["disabled"],ls={class:"grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-4"},os={key:0,href:"/leads",class:"block rounded-lg border border-slate-200 bg-white p-6 shadow-sm hover:bg-slate-50 dark:border-slate-800 dark:bg-slate-900 dark:hover:bg-slate-800"},rs={class:"mt-3 text-3xl font-semibold text-slate-900 dark:text-slate-100"},ns={class:"mt-2 text-sm text-slate-600 dark:text-slate-300"},ds={key:1,href:"/customers",class:"block rounded-lg border border-slate-200 bg-white p-6 shadow-sm hover:bg-slate-50 dark:border-slate-800 dark:bg-slate-900 dark:hover:bg-slate-800"},is={class:"mt-3 text-3xl font-semibold text-slate-900 dark:text-slate-100"},us={key:2,href:"/backlog",class:"block rounded-lg border border-slate-200 bg-white p-6 shadow-sm hover:bg-slate-50 dark:border-slate-800 dark:bg-slate-900 dark:hover:bg-slate-800"},cs={class:"mt-3 text-3xl font-semibold text-slate-900 dark:text-slate-100"},ms={class:"mt-2 text-sm text-slate-600 dark:text-slate-300"},bs={key:3,href:"/postventa/certificados",class:"block rounded-lg border border-slate-200 bg-white p-6 shadow-sm hover:bg-slate-50 dark:border-slate-800 dark:bg-slate-900 dark:hover:bg-slate-800"},gs={class:"mt-3 text-3xl font-semibold text-slate-900 dark:text-slate-100"},xs={class:"mt-2 text-sm text-slate-600 dark:text-slate-300"},ps={key:4,href:"/postventa/contadores",class:"block rounded-lg border border-slate-200 bg-white p-6 shadow-sm hover:bg-slate-50 dark:border-slate-800 dark:bg-slate-900 dark:hover:bg-slate-800"},vs={class:"mt-3 text-3xl font-semibold text-slate-900 dark:text-slate-100"},fs={class:"mt-2 text-sm text-slate-600 dark:text-slate-300"},hs={key:5,href:"/calendar",class:"block rounded-lg border border-slate-200 bg-white p-6 shadow-sm hover:bg-slate-50 dark:border-slate-800 dark:bg-slate-900 dark:hover:bg-slate-800"},ws={class:"mt-3 text-3xl font-semibold text-slate-900 dark:text-slate-100"},ys={class:"grid grid-cols-1 gap-6 lg:grid-cols-3"},ks={class:"lg:col-span-2"},_s={class:"rounded-lg border border-slate-200 bg-white shadow-sm dark:border-slate-800 dark:bg-slate-900"},Cs={class:"border-b border-slate-200 p-6 dark:border-slate-800"},$s={class:"flex items-center justify-between"},Es={key:0,href:"/postventa/certificados",class:"text-sm font-medium text-blue-600 hover:underline"},Is={class:"overflow-x-auto"},Ts={class:"min-w-full text-left text-sm text-slate-700 dark:text-slate-200"},Bs={class:"px-6 py-3 font-medium text-slate-900 dark:text-slate-100"},Ss={class:"px-6 py-3"},Ms={class:"px-6 py-3"},As={class:"px-6 py-3"},Ls={key:0},Vs={class:"rounded-lg border border-slate-200 bg-white shadow-sm dark:border-slate-800 dark:bg-slate-900"},js={class:"border-b border-slate-200 p-6 dark:border-slate-800"},Ps={class:"flex items-center justify-between"},Ns={key:0,href:"/calendar",class:"text-sm font-medium text-blue-600 hover:underline"},Ds={class:"p-6"},Os={key:0,class:"text-sm text-slate-500 dark:text-slate-300"},Rs={key:1,class:"space-y-3"},Us={class:"text-sm font-semibold text-slate-900 dark:text-slate-100"},Hs={class:"mt-1 text-xs text-slate-600 dark:text-slate-300"},zs={key:0},Zs={class:"grid grid-cols-1 gap-6 lg:grid-cols-2"},Fs={key:0,class:"rounded-lg border border-slate-200 bg-white shadow-sm dark:border-slate-800 dark:bg-slate-900"},qs={class:"divide-y divide-slate-200 dark:divide-slate-800"},Ws={class:"flex items-center justify-between gap-3"},Gs={class:"text-sm font-semibold text-slate-900 dark:text-slate-100"},Qs={class:"mt-1 text-xs text-slate-600 dark:text-slate-300"},Ks={class:"text-right"},Ys={class:"text-sm font-medium text-slate-900 dark:text-slate-100"},Js={class:"mt-1 text-xs text-slate-600 dark:text-slate-300"},Xs={key:0,class:"p-6 text-sm text-slate-500 dark:text-slate-300"},ea={key:1,class:"rounded-lg border border-slate-200 bg-white shadow-sm dark:border-slate-800 dark:bg-slate-900"},ta={class:"divide-y divide-slate-200 dark:divide-slate-800"},sa={class:"text-sm font-semibold text-slate-900 dark:text-slate-100"},aa={class:"mt-1 text-xs text-slate-600 dark:text-slate-300"},la={key:0,class:"p-6 text-sm text-slate-500 dark:text-slate-300"},oa={__name:"DashboardView",setup(c){const A=$(!0),T=$(""),g=$({}),n=$({certificados_por_vencer:[],upcoming_events:[],recent_leads:null,recent_incidences:null}),y=$(null),d=$(""),E=()=>{const k=y.value;k&&(k.focus(),typeof k.showPicker=="function"&&k.showPicker())},B=k=>{if(!k)return"—";try{const b=new Date(k);return new Intl.DateTimeFormat("es-PE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(b)}catch{return String(k)}},u=(k,b)=>{if(k==null||k==="")return"—";const C=Number(k);if(!Number.isFinite(C))return String(k);const j=b||"PEN";try{return new Intl.NumberFormat("es-PE",{style:"currency",currency:j,maximumFractionDigits:2}).format(C)}catch{return`${C.toFixed(2)} ${j}`}},N=async()=>{var k,b;A.value=!0,T.value="";try{const{data:C}=await te.get("/dashboard/summary",{params:{month:d.value||void 0}});g.value=(C==null?void 0:C.cards)||{},n.value={...n.value,...(C==null?void 0:C.lists)||{}}}catch(C){T.value=((b=(k=C==null?void 0:C.response)==null?void 0:k.data)==null?void 0:b.message)??"No se pudo cargar el dashboard."}finally{A.value=!1}},L=()=>{N()};return ce(()=>{N()}),(k,b)=>{var C,j,D,w;return a(),o("div",null,[A.value?(a(),o("div",Jt," Cargando dashboard… ")):T.value?(a(),o("div",Xt,p(T.value),1)):(a(),o("div",es,[e("section",ts,[e("div",ss,[b[1]||(b[1]=e("label",{class:"text-sm text-slate-600 dark:text-slate-300"},"Mes",-1)),P(e("input",{ref_key:"monthInput",ref:y,"onUpdate:modelValue":b[0]||(b[0]=r=>d.value=r),type:"month",class:"rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 focus:border-sky-500 focus:ring-sky-500 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100",onClick:E},null,512),[[ee,d.value]]),e("button",{type:"button",class:"rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 hover:bg-slate-50 disabled:opacity-50 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-200 dark:hover:bg-slate-800",disabled:A.value,onClick:L}," Ver ",8,as)])]),e("section",ls,[g.value.leads?(a(),o("a",os,[b[2]||(b[2]=e("div",{class:"flex items-center justify-between"},[e("span",{class:"text-sm font-medium text-slate-500 dark:text-slate-300"},"Leads"),e("span",{class:"inline-flex items-center rounded bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700 dark:bg-slate-800 dark:text-slate-200"},"Total")],-1)),e("div",rs,p(g.value.leads.total),1),e("div",ns," Abiertos: "+p(g.value.leads.open)+" · Archivados: "+p(g.value.leads.archived),1)])):_("",!0),g.value.customers?(a(),o("a",ds,[b[3]||(b[3]=e("div",{class:"flex items-center justify-between"},[e("span",{class:"text-sm font-medium text-slate-500 dark:text-slate-300"},"Clientes"),e("span",{class:"inline-flex items-center rounded bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700 dark:bg-slate-800 dark:text-slate-200"},"Total")],-1)),e("div",is,p(g.value.customers.total),1),b[4]||(b[4]=e("div",{class:"mt-2 text-sm text-slate-600 dark:text-slate-300"},"Clientes registrados",-1))])):_("",!0),g.value.incidencias?(a(),o("a",us,[b[5]||(b[5]=e("div",{class:"flex items-center justify-between"},[e("span",{class:"text-sm font-medium text-slate-500 dark:text-slate-300"},"Incidencias"),e("span",{class:"inline-flex items-center rounded bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700 dark:bg-slate-800 dark:text-slate-200"},"Postventa")],-1)),e("div",cs,p(g.value.incidencias.open),1),e("div",ms,"Abiertas · Archivadas: "+p(g.value.incidencias.archived),1)])):_("",!0),g.value.certificados?(a(),o("a",bs,[b[6]||(b[6]=e("div",{class:"flex items-center justify-between"},[e("span",{class:"text-sm font-medium text-slate-500 dark:text-slate-300"},"Certificados"),e("span",{class:"inline-flex items-center rounded bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700 dark:bg-slate-800 dark:text-slate-200"},"Activos")],-1)),e("div",gs,p(g.value.certificados.activos),1),e("div",xs," Por vencer (30d): "+p(g.value.certificados.por_vencer_30d)+" · Vencidos: "+p(g.value.certificados.vencidos),1)])):_("",!0),g.value.contadores?(a(),o("a",ps,[b[7]||(b[7]=e("div",{class:"flex items-center justify-between"},[e("span",{class:"text-sm font-medium text-slate-500 dark:text-slate-300"},"Contadores"),e("span",{class:"inline-flex items-center rounded bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700 dark:bg-slate-800 dark:text-slate-200"},"Total")],-1)),e("div",vs,p(g.value.contadores.total),1),e("div",fs," Asignados: "+p(g.value.contadores.assigned)+" · Sin asignar: "+p(g.value.contadores.unassigned),1)])):_("",!0),g.value.calendar?(a(),o("a",hs,[b[8]||(b[8]=e("div",{class:"flex items-center justify-between"},[e("span",{class:"text-sm font-medium text-slate-500 dark:text-slate-300"},"Calendario"),e("span",{class:"inline-flex items-center rounded bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700 dark:bg-slate-800 dark:text-slate-200"},"7 días")],-1)),e("div",ws,p(g.value.calendar.upcoming_7d),1),b[9]||(b[9]=e("div",{class:"mt-2 text-sm text-slate-600 dark:text-slate-300"},"Eventos asignados próximos",-1))])):_("",!0)]),e("section",ys,[e("div",ks,[e("div",_s,[e("div",Cs,[e("div",$s,[b[10]||(b[10]=e("h2",{class:"text-lg font-semibold text-slate-900 dark:text-slate-100"},"Certificados por vencer",-1)),g.value.certificados?(a(),o("a",Es," Ver certificados ")):_("",!0)]),b[11]||(b[11]=e("p",{class:"mt-1 text-sm text-slate-600 dark:text-slate-300"},"Próximos 30 días (máx. 5)",-1))]),e("div",Is,[e("table",Ts,[b[13]||(b[13]=e("thead",{class:"bg-slate-50 text-xs uppercase text-slate-600 dark:bg-slate-800 dark:text-slate-200"},[e("tr",null,[e("th",{class:"px-6 py-3"},"Nombre"),e("th",{class:"px-6 py-3"},"RUC"),e("th",{class:"px-6 py-3"},"Tipo"),e("th",{class:"px-6 py-3"},"Vence")])],-1)),e("tbody",null,[(a(!0),o(de,null,ie(n.value.certificados_por_vencer,r=>(a(),o("tr",{key:r.id,class:"border-t border-slate-200 hover:bg-slate-50 dark:border-slate-800 dark:hover:bg-slate-800"},[e("td",Bs,p(r.nombre),1),e("td",Ss,p(r.ruc||"—"),1),e("td",Ms,p(r.tipo||"—"),1),e("td",As,p(r.fecha_vencimiento||"—"),1)]))),128)),(C=n.value.certificados_por_vencer)!=null&&C.length?_("",!0):(a(),o("tr",Ls,[...b[12]||(b[12]=[e("td",{class:"px-6 py-4 text-sm text-slate-500 dark:text-slate-300",colspan:"4"},"Sin vencimientos próximos.",-1)])]))])])])])]),e("div",null,[e("div",Vs,[e("div",js,[e("div",Ps,[b[14]||(b[14]=e("h2",{class:"text-lg font-semibold text-slate-900 dark:text-slate-100"},"Próximos eventos",-1)),g.value.calendar?(a(),o("a",Ns,"Ver calendario")):_("",!0)]),b[15]||(b[15]=e("p",{class:"mt-1 text-sm text-slate-600 dark:text-slate-300"},"Asignados a ti (máx. 5)",-1))]),e("div",Ds,[(j=n.value.upcoming_events)!=null&&j.length?(a(),o("ul",Rs,[(a(!0),o(de,null,ie(n.value.upcoming_events,r=>(a(),o("li",{key:r.id,class:"rounded-lg border border-slate-200 p-3 dark:border-slate-800"},[e("div",Us,p(r.title),1),e("div",Hs,[ye(p(B(r.start_at))+" ",1),r.location?(a(),o("span",zs,"· "+p(r.location),1)):_("",!0)])]))),128))])):(a(),o("div",Os,"Sin eventos próximos."))])])])]),e("section",Zs,[n.value.recent_leads?(a(),o("div",Fs,[b[16]||(b[16]=_e('<div class="border-b border-slate-200 p-6 dark:border-slate-800"><div class="flex items-center justify-between"><h2 class="text-lg font-semibold text-slate-900 dark:text-slate-100">Últimos leads</h2><a href="/leads" class="text-sm font-medium text-blue-600 hover:underline">Ver leads</a></div><p class="mt-1 text-sm text-slate-600 dark:text-slate-300">Últimos 5 registros</p></div>',1)),e("div",qs,[(a(!0),o(de,null,ie(n.value.recent_leads,r=>(a(),o("div",{key:r.id,class:"p-6"},[e("div",Ws,[e("div",null,[e("div",Gs,p(r.name),1),e("div",Qs,p(r.company_name||"—"),1)]),e("div",Ks,[e("div",Ys,p(u(r.amount,r.currency)),1),e("div",Js,p(B(r.created_at)),1)])])]))),128)),(D=n.value.recent_leads)!=null&&D.length?_("",!0):(a(),o("div",Xs,"Sin leads."))])])):_("",!0),n.value.recent_incidences?(a(),o("div",ea,[b[17]||(b[17]=_e('<div class="border-b border-slate-200 p-6 dark:border-slate-800"><div class="flex items-center justify-between"><h2 class="text-lg font-semibold text-slate-900 dark:text-slate-100">Últimas incidencias</h2><a href="/backlog" class="text-sm font-medium text-blue-600 hover:underline">Ver incidencias</a></div><p class="mt-1 text-sm text-slate-600 dark:text-slate-300">Últimos 5 registros</p></div>',1)),e("div",ta,[(a(!0),o(de,null,ie(n.value.recent_incidences,r=>(a(),o("div",{key:r.id,class:"p-6"},[e("div",sa,p(r.correlative)+" · "+p(r.title),1),e("div",aa," Prioridad: "+p(r.priority||"—")+" · Fecha: "+p(r.date||"—")+" · "+p(B(r.created_at)),1)]))),128)),(w=n.value.recent_incidences)!=null&&w.length?_("",!0):(a(),o("div",la,"Sin incidencias."))])])):_("",!0)])]))])}}},ra={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},na={class:"relative w-full max-w-2xl rounded-xl bg-white shadow-xl dark:bg-slate-900"},da={key:0,class:"mb-4 rounded-lg border border-red-200 bg-red-50 p-3 text-sm text-red-700 dark:border-red-900/40 dark:bg-red-950/30 dark:text-red-200"},ia={class:"grid grid-cols-1 gap-3 md:grid-cols-2"},ua={class:"md:col-span-2"},ca={class:"md:col-span-2"},ma={class:"relative"},ba={key:0,class:"absolute z-10 mt-1 w-full rounded-lg border border-gray-200 bg-white p-1 shadow-lg dark:border-slate-800 dark:bg-slate-950"},ga=["onClick"],xa={class:"truncate"},pa={class:"ml-3 text-xs text-gray-500 dark:text-slate-400"},va={key:1,class:"mt-1 text-xs text-gray-600 dark:text-slate-300"},fa={class:"md:col-span-2"},ha={class:"mt-5 flex items-center justify-end gap-2"},wa=["disabled"],ya={__name:"IncidenceQuickModal",setup(c){const A=$(!1),T=$(!1),g=$(""),n=$({title:"",date:"",priority:"media",notes:"",customer_id:null}),y=$(""),d=$(""),E=$([]),B=$(!1);let u=null;const N=()=>{const s=new Date,t=s.getFullYear(),l=String(s.getMonth()+1).padStart(2,"0"),x=String(s.getDate()).padStart(2,"0");return`${t}-${l}-${x}`},L=()=>{g.value="",n.value={title:"",date:N(),priority:"media",notes:"",customer_id:null},y.value="",d.value="",E.value=[],B.value=!1},k=()=>{A.value=!1,B.value=!1},b=()=>{n.value.customer_id=null,d.value=""},C=s=>{n.value.customer_id=Number(s.id),d.value=String(s.label||""),y.value=String(s.label||""),B.value=!1},j=async s=>{var t,l;try{const x=await te.get("/related-lookup",{params:{type:"customer",id:s}}),h=(l=(t=x==null?void 0:x.data)==null?void 0:t.data)==null?void 0:l.label;h?(d.value=String(h),y.value=String(h)):(d.value=`#${s}`,y.value=`#${s}`)}catch{d.value=`#${s}`,y.value=`#${s}`}},D=async()=>{var t;const s=(y.value||"").trim();if(!s||s.length<2){E.value=[],B.value=!1;return}try{const l=await te.get("/related-lookup",{params:{type:"customer",q:s,limit:8}}),x=((t=l==null?void 0:l.data)==null?void 0:t.data)??[];E.value=Array.isArray(x)?x:[],B.value=E.value.length>0}catch{E.value=[],B.value=!1}},w=()=>{n.value.customer_id=null,d.value="",u&&window.clearTimeout(u),u=window.setTimeout(()=>{D()},250)},r=s=>{var h,O,R;const t=(O=(h=s==null?void 0:s.response)==null?void 0:h.data)==null?void 0:O.errors;if(!t||typeof t!="object")return null;const l=Object.keys(t)[0],x=l?(R=t[l])==null?void 0:R[0]:null;return typeof x=="string"?x:null},m=async()=>{var t,l;T.value=!0,g.value="";const s={title:n.value.title,date:n.value.date||null,priority:n.value.priority||"media",notes:n.value.notes||null,customer_id:n.value.customer_id||null};try{await te.post("/incidencias",s),Ie("Incidencia creada"),k(),window.dispatchEvent(new CustomEvent("incidencias:created"))}catch(x){g.value=r(x)??((l=(t=x==null?void 0:x.response)==null?void 0:t.data)==null?void 0:l.message)??"No se pudo crear la incidencia.",Te(g.value)}finally{T.value=!1}},f=async(s={})=>{L(),A.value=!0;const t=(s==null?void 0:s.customer_id)??(s==null?void 0:s.customerId)??null,l=(s==null?void 0:s.customer_label)??(s==null?void 0:s.customerLabel)??null;t&&(n.value.customer_id=Number(t),l?(d.value=String(l),y.value=String(l)):await j(Number(t)))},S=s=>{f((s==null?void 0:s.detail)??{})};return ce(()=>{window.addEventListener("incidencias:create",S)}),we(()=>{window.removeEventListener("incidencias:create",S),u&&window.clearTimeout(u)}),(s,t)=>(a(),U(pe,{name:"fade"},{default:xe(()=>[A.value?(a(),o("div",ra,[e("div",{class:"absolute inset-0 bg-black/50",onClick:k}),ne(pe,{name:"pop"},{default:xe(()=>[e("div",na,[t[11]||(t[11]=e("div",{class:"p-5 border-b border-gray-200 dark:border-slate-800"},[e("div",{class:"text-lg font-semibold text-gray-900 dark:text-slate-100"},"Nueva incidencia"),e("div",{class:"mt-1 text-sm text-gray-600 dark:text-slate-300"}," Registra una incidencia y asígnala a un cliente. ")],-1)),e("form",{class:"p-5",onSubmit:Ce(m,["prevent"])},[g.value?(a(),o("div",da,p(g.value),1)):_("",!0),e("div",ia,[e("div",ua,[t[5]||(t[5]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300"},"Nombre de la incidencia",-1)),P(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>n.value.title=l),type:"text",required:"",class:"mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100"},null,512),[[ee,n.value.title,void 0,{trim:!0}]])]),e("div",null,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300"},"Fecha",-1)),P(e("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>n.value.date=l),type:"date",class:"mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100"},null,512),[[ee,n.value.date]])]),e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300"},"Prioridad",-1)),P(e("select",{"onUpdate:modelValue":t[2]||(t[2]=l=>n.value.priority=l),class:"mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100"},[...t[7]||(t[7]=[e("option",{value:"alta"},"Alta",-1),e("option",{value:"media"},"Media",-1),e("option",{value:"baja"},"Baja",-1)])],512),[[$e,n.value.priority]])]),e("div",ca,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300"},"Cliente",-1)),e("div",ma,[P(e("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>y.value=l),type:"text",class:"mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100",placeholder:"Buscar cliente…",onInput:w,onFocus:w},null,544),[[ee,y.value,void 0,{trim:!0}]]),B.value&&E.value.length?(a(),o("div",ba,[(a(!0),o(de,null,ie(E.value,l=>(a(),o("button",{key:l.id,type:"button",class:"flex w-full items-center justify-between rounded-md px-2 py-2 text-left text-sm text-gray-800 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-200 dark:text-slate-100 dark:hover:bg-slate-900 dark:focus:ring-blue-500/30",onClick:x=>C(l)},[e("span",xa,p(l.label),1),e("span",pa,"#"+p(l.id),1)],8,ga))),128))])):_("",!0),d.value?(a(),o("div",va,[ye(" Seleccionado: "+p(d.value)+" ",1),e("button",{type:"button",class:"ml-2 text-xs font-medium text-blue-600 hover:underline",onClick:b}," Quitar ")])):_("",!0)])]),e("div",fa,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300"},"Observaciones",-1)),P(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=l=>n.value.notes=l),rows:"4",class:"mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100",placeholder:"Detalle / notas…"},null,512),[[ee,n.value.notes,void 0,{trim:!0}]])])]),e("div",ha,[e("button",{type:"button",class:"inline-flex items-center rounded-lg border border-gray-200 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-200 dark:hover:bg-slate-800",onClick:k}," Cancelar "),e("button",{type:"submit",class:"inline-flex items-center rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-blue-700 disabled:opacity-60",disabled:T.value},p(T.value?"Creando…":"Crear incidencia"),9,wa)])],32)])]),_:1})])):_("",!0)]),_:1}))}},ka=Ee(ya,[["__scopeId","data-v-f7e6933a"]]),_a={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},Ca={class:"relative w-full max-w-2xl rounded-xl bg-white shadow-xl dark:bg-slate-900"},$a={key:0,class:"mb-4 rounded-lg border border-red-200 bg-red-50 p-3 text-sm text-red-700 dark:border-red-900/40 dark:bg-red-950/30 dark:text-red-200"},Ea={class:"grid grid-cols-1 gap-3 md:grid-cols-2"},Ia={class:"md:col-span-2"},Ta={class:"md:col-span-2"},Ba={class:"relative"},Sa={key:0,class:"absolute z-10 mt-1 w-full rounded-lg border border-gray-200 bg-white p-1 shadow-lg dark:border-slate-800 dark:bg-slate-950"},Ma=["onClick"],Aa={class:"truncate"},La={class:"ml-3 text-xs text-gray-500 dark:text-slate-400"},Va={key:1,class:"mt-1 text-xs text-gray-600 dark:text-slate-300"},ja={class:"md:col-span-2"},Pa={class:"mt-5 flex items-center justify-end gap-2"},Na=["disabled"],Da={__name:"IncidenceEditModal",setup(c){const A=$(!1),T=$(!1),g=$(""),n=$({id:null,title:"",date:"",priority:"media",notes:"",customer_id:null}),y=$(""),d=$(""),E=$([]),B=$(!1);let u=null;const N=()=>{g.value="",n.value={id:null,title:"",date:"",priority:"media",notes:"",customer_id:null},y.value="",d.value="",E.value=[],B.value=!1},L=()=>{A.value=!1,B.value=!1},k=()=>{n.value.customer_id=null,d.value=""},b=s=>{n.value.customer_id=Number(s.id),d.value=String(s.label||""),y.value=String(s.label||""),B.value=!1},C=async s=>{var t,l;try{const x=await te.get("/related-lookup",{params:{type:"customer",id:s}}),h=(l=(t=x==null?void 0:x.data)==null?void 0:t.data)==null?void 0:l.label;h?(d.value=String(h),y.value=String(h)):(d.value=`#${s}`,y.value=`#${s}`)}catch{d.value=`#${s}`,y.value=`#${s}`}},j=async()=>{var t;const s=(y.value||"").trim();if(!s||s.length<2){E.value=[],B.value=!1;return}try{const l=await te.get("/related-lookup",{params:{type:"customer",q:s,limit:8}}),x=((t=l==null?void 0:l.data)==null?void 0:t.data)??[];E.value=Array.isArray(x)?x:[],B.value=E.value.length>0}catch{E.value=[],B.value=!1}},D=()=>{n.value.customer_id=null,d.value="",u&&window.clearTimeout(u),u=window.setTimeout(()=>{j()},250)},w=s=>{var h,O,R;const t=(O=(h=s==null?void 0:s.response)==null?void 0:h.data)==null?void 0:O.errors;if(!t||typeof t!="object")return null;const l=Object.keys(t)[0],x=l?(R=t[l])==null?void 0:R[0]:null;return typeof x=="string"?x:null},r=s=>{if(!s)return"";try{const t=String(s);if(/^\d{4}-\d{2}-\d{2}$/.test(t))return t;const l=new Date(t);if(Number.isNaN(l.getTime()))return"";const x=l.getFullYear(),h=String(l.getMonth()+1).padStart(2,"0"),O=String(l.getDate()).padStart(2,"0");return`${x}-${h}-${O}`}catch{return""}},m=async(s={})=>{var O,R;N();const t=(s==null?void 0:s.incidence)??(s==null?void 0:s.item)??s,l=(t==null?void 0:t.id)??(s==null?void 0:s.id)??null;if(!l)return;n.value.id=Number(l),n.value.title=String((t==null?void 0:t.title)??""),n.value.date=r((t==null?void 0:t.date)??""),n.value.priority=String((t==null?void 0:t.priority)??"media")||"media",n.value.notes=String((t==null?void 0:t.notes)??"");const x=(t==null?void 0:t.customer_id)??(s==null?void 0:s.customer_id)??null;n.value.customer_id=x?Number(x):null,A.value=!0;const h=((O=t==null?void 0:t.customer)==null?void 0:O.company_name)||((R=t==null?void 0:t.customer)==null?void 0:R.name)||(s==null?void 0:s.customer_label)||null;n.value.customer_id&&(h?(d.value=String(h),y.value=String(h)):await C(n.value.customer_id))},f=async()=>{var t,l,x;if(!n.value.id)return;T.value=!0,g.value="";const s={title:n.value.title,date:n.value.date||null,priority:n.value.priority||"media",notes:n.value.notes||null,customer_id:n.value.customer_id||null};try{const h=await te.put(`/incidencias/${n.value.id}`,s),O=(t=h==null?void 0:h.data)==null?void 0:t.data;Ie("Incidencia actualizada"),L(),window.dispatchEvent(new CustomEvent("incidencias:updated",{detail:{incidence:O}}))}catch(h){g.value=w(h)??((x=(l=h==null?void 0:h.response)==null?void 0:l.data)==null?void 0:x.message)??"No se pudo actualizar la incidencia.",Te(g.value)}finally{T.value=!1}},S=s=>{m((s==null?void 0:s.detail)??{})};return ce(()=>{window.addEventListener("incidencias:edit",S)}),we(()=>{window.removeEventListener("incidencias:edit",S),u&&window.clearTimeout(u)}),(s,t)=>(a(),U(pe,{name:"fade"},{default:xe(()=>[A.value?(a(),o("div",_a,[e("div",{class:"absolute inset-0 bg-black/50",onClick:L}),ne(pe,{name:"pop"},{default:xe(()=>[e("div",Ca,[t[11]||(t[11]=e("div",{class:"p-5 border-b border-gray-200 dark:border-slate-800"},[e("div",{class:"text-lg font-semibold text-gray-900 dark:text-slate-100"},"Editar incidencia"),e("div",{class:"mt-1 text-sm text-gray-600 dark:text-slate-300"}," Actualiza título, cliente, prioridad, fecha y notas. ")],-1)),e("form",{class:"p-5",onSubmit:Ce(f,["prevent"])},[g.value?(a(),o("div",$a,p(g.value),1)):_("",!0),e("div",Ea,[e("div",Ia,[t[5]||(t[5]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300"},"Nombre de la incidencia",-1)),P(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>n.value.title=l),type:"text",required:"",class:"mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100"},null,512),[[ee,n.value.title,void 0,{trim:!0}]])]),e("div",null,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300"},"Fecha",-1)),P(e("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>n.value.date=l),type:"date",class:"mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100"},null,512),[[ee,n.value.date]])]),e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300"},"Prioridad",-1)),P(e("select",{"onUpdate:modelValue":t[2]||(t[2]=l=>n.value.priority=l),class:"mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100"},[...t[7]||(t[7]=[e("option",{value:"alta"},"Alta",-1),e("option",{value:"media"},"Media",-1),e("option",{value:"baja"},"Baja",-1)])],512),[[$e,n.value.priority]])]),e("div",Ta,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300"},"Cliente",-1)),e("div",Ba,[P(e("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>y.value=l),type:"text",class:"mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100",placeholder:"Buscar cliente…",onInput:D,onFocus:D},null,544),[[ee,y.value,void 0,{trim:!0}]]),B.value&&E.value.length?(a(),o("div",Sa,[(a(!0),o(de,null,ie(E.value,l=>(a(),o("button",{key:l.id,type:"button",class:"flex w-full items-center justify-between rounded-md px-2 py-2 text-left text-sm text-gray-800 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-200 dark:text-slate-100 dark:hover:bg-slate-900 dark:focus:ring-blue-500/30",onClick:x=>b(l)},[e("span",Aa,p(l.label),1),e("span",La,"#"+p(l.id),1)],8,Ma))),128))])):_("",!0),d.value?(a(),o("div",Va,[ye(" Seleccionado: "+p(d.value)+" ",1),e("button",{type:"button",class:"ml-2 text-xs font-medium text-blue-600 hover:underline",onClick:k}," Quitar ")])):_("",!0)])]),e("div",ja,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300"},"Observaciones",-1)),P(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=l=>n.value.notes=l),rows:"4",class:"mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100",placeholder:"Detalle / notas…"},null,512),[[ee,n.value.notes,void 0,{trim:!0}]])])]),e("div",Pa,[e("button",{type:"button",class:"inline-flex items-center rounded-lg border border-gray-200 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-200 dark:hover:bg-slate-800",onClick:L}," Cancelar "),e("button",{type:"submit",class:"inline-flex items-center rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-blue-700 disabled:opacity-60",disabled:T.value||!n.value.id},p(T.value?"Guardando…":"Guardar cambios"),9,Na)])],32)])]),_:1})])):_("",!0)]),_:1}))}},Oa=Ee(Da,[["__scopeId","data-v-39ef46d1"]]),Ra={class:"min-h-screen flex flex-col bg-gradient-to-br from-blue-50/60 via-gray-50 to-gray-50 dark:from-slate-950 dark:via-slate-950 dark:to-slate-900"},Ua={class:"flex-1 p-4 pt-20"},Ha={class:"max-w-7xl mx-auto w-full"},za={class:"flex items-center justify-between mb-6"},Za={class:"border-l-4 border-blue-600 pl-4"},Fa={class:"text-2xl font-semibold text-gray-900 dark:text-slate-100"},qa={class:"mt-1 text-sm text-gray-600 dark:text-slate-300"},Wa={__name:"App",setup(c){const A=F(()=>Z(()=>import("./UsersTable-3QfunplF.js"),__vite__mapDeps([0,1,2,3]))),T=F(()=>Z(()=>import("./RolesTable-Djih1zir.js"),__vite__mapDeps([4,1,3]))),g=F(()=>Z(()=>import("./LeadsBoard-BY-gPbRx.js"),__vite__mapDeps([5,1,3,6,2,7]))),n=F(()=>Z(()=>import("./LeadsTable-nM9Bnm8v.js"),__vite__mapDeps([8,3,2,1]))),y=F(()=>Z(()=>import("./LeadsWhatsAppCampaign-Cwyge7Ru.js"),__vite__mapDeps([9,1,3]))),d=F(()=>Z(()=>import("./LeadsEmailCampaign-9PGB2g6x.js"),__vite__mapDeps([10,1,3]))),E=F(()=>Z(()=>import("./CustomersTable-DZWdLbJC.js"),__vite__mapDeps([11,1,3,6,2,7]))),B=F(()=>Z(()=>import("./CalendarView-DhHcOrgM.js"),__vite__mapDeps([12,6,3,1,2,7,13]))),u=F(()=>Z(()=>import("./IncidenciasTable-CC7TtjZk.js"),__vite__mapDeps([14,1,3,6,2,7]))),N=F(()=>Z(()=>import("./BacklogBoard-Bw_uP771.js"),__vite__mapDeps([15,1,3,6,2,7]))),L=F(()=>Z(()=>import("./PostventaCustomersTable-D3gixeWA.js"),__vite__mapDeps([16,1,3,6,2,7]))),k=F(()=>Z(()=>import("./ContadoresTable-DHHI94ca.js"),__vite__mapDeps([17,1,3,6,2,7]))),b=F(()=>Z(()=>import("./CertificadosTable-Dywm1f1-.js"),__vite__mapDeps([18,1,3,6,2,7]))),C=F(()=>Z(()=>import("./LostLeadsList-z9PYUu64.js"),__vite__mapDeps([19,1,3,6,2,7]))),j=F(()=>Z(()=>import("./WaitingLeadsList-CQmUT7Uh.js"),__vite__mapDeps([20,1,3,6,2,7]))),D=F(()=>Z(()=>import("./SettingsView-B0VieDNS.js"),__vite__mapDeps([21,1]))),w=window.location.pathname.replace(/\/+$/,"")||"/",r=I(()=>w.startsWith("/users")),m=I(()=>w.startsWith("/roles")),f=I(()=>w==="/leads"),S=I(()=>w==="/leads/list"),s=I(()=>w==="/leads/whatsapp"),t=I(()=>w==="/leads/email"),l=I(()=>w.startsWith("/leads")),x=I(()=>w.startsWith("/customers")),h=I(()=>w.startsWith("/calendar")),O=I(()=>w.startsWith("/incidencias")),R=I(()=>w.startsWith("/backlog")),q=I(()=>w==="/postventa/clientes"),W=I(()=>w==="/postventa/contadores"),Y=I(()=>w==="/postventa/certificados"),G=I(()=>w.startsWith("/configuracion")),J=I(()=>O.value||R.value),le=I(()=>r.value?"Usuarios":m.value?"Roles":G.value?"Configuración":s.value?"WhatsApp":t.value?"Email":l.value?"Leads":w==="/desistidos"?"Desistidos":w==="/espera"?"Zona de espera":x.value?"Clientes":h.value?"Calendario":J.value?"Incidencias":q.value?"Clientes":W.value?"Contadores":Y.value?"Certificados":"Dashboard"),ue=I(()=>r.value?"Gestión de usuarios del sistema":m.value?"Crea roles y asigna permisos":G.value?"Personalización del sistema":s.value?"Campañas manuales asistidas (sin API)":t.value?"Campañas informativas por correo (con baja automática)":f.value?"Pipeline de oportunidades":S.value?"Gestión de leads por etapas":w==="/desistidos"?"Leads marcados como desistidos":w==="/espera"?"Leads enviados a zona de espera":x.value?"Listado de clientes":h.value?"Agenda y recordatorios":O.value?"Registro y seguimiento de incidencias (vista lista)":R.value?"Registro y seguimiento de incidencias (vista backlog)":q.value?"Clientes (postventa)":W.value?"Gestión de contadores":Y.value?"Gestión de certificados":"Resumen general del sistema");I(()=>J.value||q.value||W.value||Y.value);const X=I(()=>w==="/desistidos"),se=I(()=>w==="/espera"),oe=()=>{l.value&&window.location.assign(f.value?"/leads/list":"/leads")},re=()=>{J.value&&window.location.assign(R.value?"/incidencias":"/backlog")},ae=()=>{window.dispatchEvent(new CustomEvent("roles:create"))},be=()=>{window.dispatchEvent(new CustomEvent("leads:create-quick"))},ge=()=>{window.dispatchEvent(new CustomEvent("incidencias:create"))},ve=()=>{window.dispatchEvent(new CustomEvent("contadores:create"))},H=()=>{window.dispatchEvent(new CustomEvent("certificados:create"))},i=$(!0),Q=()=>{i.value=!i.value};return ce(()=>{}),(Ga,Qa)=>(a(),o("div",Ra,[ne(mt,{"sidebar-collapsed":i.value,onToggleSidebar:Q},null,8,["sidebar-collapsed"]),ne(qt,{collapsed:i.value},null,8,["collapsed"]),e("main",{class:V(["transition-[margin] duration-200 flex-1 flex flex-col",i.value?"sm:ml-20":"sm:ml-64"])},[e("div",Ua,[e("div",Ha,[e("div",za,[e("div",Za,[e("h1",Fa,p(le.value),1),e("p",qa,p(ue.value),1)]),m.value?(a(),o("button",{key:0,type:"button",class:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg shadow-sm hover:bg-blue-700 hover:shadow focus:outline-none focus:ring-4 focus:ring-blue-300",onClick:ae}," Crear rol ")):f.value||S.value?(a(),o("button",{key:1,type:"button",class:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg shadow-sm hover:bg-blue-700 hover:shadow focus:outline-none focus:ring-4 focus:ring-blue-300",onClick:be}," Lead rápido ")):_("",!0),f.value||S.value?(a(),o("button",{key:2,type:"button",class:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-200 rounded-lg shadow-sm hover:bg-blue-50 hover:border-blue-200 hover:text-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 dark:text-slate-200 dark:bg-slate-900 dark:border-slate-800 dark:hover:bg-slate-800",onClick:oe},p(f.value?"Vista lista":"Vista pipeline"),1)):J.value?(a(),o("button",{key:3,type:"button",class:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-200 rounded-lg shadow-sm hover:bg-blue-50 hover:border-blue-200 hover:text-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 dark:text-slate-200 dark:bg-slate-900 dark:border-slate-800 dark:hover:bg-slate-800",onClick:re},p(R.value?"Vista lista":"Vista backlog"),1)):_("",!0),J.value||q.value?(a(),o("button",{key:5,type:"button",class:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg shadow-sm hover:bg-blue-700 hover:shadow focus:outline-none focus:ring-4 focus:ring-blue-300",onClick:ge}," Nueva incidencia ")):W.value?(a(),o("button",{key:6,type:"button",class:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg shadow-sm hover:bg-blue-700 hover:shadow focus:outline-none focus:ring-4 focus:ring-blue-300",onClick:ve}," Nuevo contador ")):Y.value?(a(),o("button",{key:7,type:"button",class:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg shadow-sm hover:bg-blue-700 hover:shadow focus:outline-none focus:ring-4 focus:ring-blue-300",onClick:H}," Nuevo certificado ")):_("",!0)]),r.value?(a(),U(v(A),{key:0})):m.value?(a(),U(v(T),{key:1})):f.value?(a(),U(v(g),{key:2})):S.value?(a(),U(v(n),{key:3})):s.value?(a(),U(v(y),{key:4})):t.value?(a(),U(v(d),{key:5})):O.value?(a(),U(v(u),{key:6})):R.value?(a(),U(v(N),{key:7})):q.value?(a(),U(v(L),{key:8})):W.value?(a(),U(v(k),{key:9})):Y.value?(a(),U(v(b),{key:10})):x.value?(a(),U(v(E),{key:11})):X.value?(a(),U(v(C),{key:12})):se.value?(a(),U(v(j),{key:13})):G.value?(a(),U(v(D),{key:14})):h.value?(a(),U(v(B),{key:15})):(a(),U(oa,{key:16}))])]),ne(Yt,{class:"mt-auto w-full"})],2),ne(ka),ne(Oa)]))}},rl=Object.freeze(Object.defineProperty({__proto__:null,default:Wa},Symbol.toStringTag,{value:"Module"}));export{rl as A,Ie as a,al as b,tl as c,ll as d,Ae as e,ol as f,Le as g,sl as p,Te as t};
