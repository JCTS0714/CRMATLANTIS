const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/UsersTable-DngZ3-6L.js","assets/vendor-vue-Db-AqoDh.js","assets/vendor-ui-DEm6YKEA.js","assets/BaseModal-DiudK4Y3.js","assets/vendor-utils-Czy7fllw.js","assets/RolesTable-ChO9PHeK.js","assets/LeadsBoard-CWuYQzCb.js","assets/app-BNf3UcIS.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/LeadsTable-YEMTfbXT.js","assets/LeadsWhatsAppCampaign-CruOvj3h.js","assets/LeadsEmailCampaign-BxbhdKc1.js","assets/CustomersTable-DJzjJ62n.js","assets/CalendarView-QuDMRBJa.js","assets/CalendarView-BFEl6N-c.css","assets/IncidenciasTable-CSDfStHu.js","assets/IncidenciasBoard-DXbychUo.js","assets/BacklogBoard-nyIU_hgg.js","assets/PostventaCustomersTable-Bh8SgCUA.js","assets/ContadoresTable-CF3m5rvG.js","assets/CertificadosTable-Bi4ICypG.js","assets/LostLeadsList-DVX-UU05.js","assets/WaitingLeadsList-BBdIfewz.js","assets/SettingsView-DiIDaH1M.js"])))=>i.map(i=>d[i]);
import{t as Se,_ as G}from"./app-BNf3UcIS.js";import{e as C,r as _,o as me,f as ye,g as o,i as a,j as e,w as L,k as y,t as x,v as z,l as ke,F as ie,m as ue,u as v,n as A,p as Ae,q as U,s as he,T as we,x as ae,y as Ee,z as _e,A as ve,B as de,C as pe,D as Ie,b as Q}from"./vendor-vue-Db-AqoDh.js";import{a as X}from"./vendor-utils-Czy7fllw.js";import{S as Y}from"./vendor-ui-DEm6YKEA.js";import{_ as Te}from"./_plugin-vue_export-helper-DlAUqK2U.js";const be=Y.mixin({buttonsStyling:!1,customClass:{popup:"rounded-xl border border-gray-200 bg-white text-gray-900 shadow-xl dark:!border-slate-800 dark:!bg-slate-900 dark:!text-slate-100",backdrop:"bg-black/60",title:"text-base font-semibold text-gray-900 dark:text-slate-100",htmlContainer:"text-sm text-gray-600 dark:text-slate-300",actions:"gap-2",confirmButton:"inline-flex items-center rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-300 disabled:opacity-60",cancelButton:"inline-flex items-center rounded-lg border border-gray-200 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-4 focus:ring-blue-100 disabled:opacity-60 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-200 dark:hover:bg-slate-800"}}),Ce=Y.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:2500,timerProgressBar:!0,didOpen:u=>{u.addEventListener("mouseenter",Y.stopTimer),u.addEventListener("mouseleave",Y.resumeTimer)},customClass:{popup:"rounded-xl border border-gray-200 bg-white text-gray-900 shadow-lg dark:!border-slate-800 dark:!bg-slate-900 dark:!text-slate-100",title:"text-sm font-medium",htmlContainer:"text-sm"}});async function tl({title:u,text:S,confirmText:E="Aceptar",cancelText:g="Cancelar",icon:r="question"}={}){return(await be.fire({title:u,text:S,icon:r,showCancelButton:!0,confirmButtonText:E,cancelButtonText:g})).isConfirmed===!0}function $e(u){return Ce.fire({icon:"success",title:u})}function Be(u){return Ce.fire({icon:"error",title:u})}function Le(u){return Ce.fire({icon:"info",title:u})}function M(u){return String(u??"").replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;")}async function sl(u={}){const S=`
    <div class="grid gap-3 text-left">
      <div>
        <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Nombre</label>
        <input id="sw-cust-name" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(u.name)}" />
      </div>

      <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Contacto</label>
          <input id="sw-cust-contact_name" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(u.contact_name)}" />
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Empresa</label>
          <input id="sw-cust-company_name" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(u.company_name)}" />
        </div>
      </div>

      <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Teléfono</label>
          <input id="sw-cust-contact_phone" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(u.contact_phone)}" />
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Email</label>
          <input id="sw-cust-contact_email" type="email" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(u.contact_email)}" />
        </div>
      </div>

      <div>
        <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Dirección</label>
        <input id="sw-cust-company_address" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(u.company_address)}" />
      </div>

      <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Tipo doc</label>
          <select id="sw-cust-document_type" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100">
            <option value="" ${u.document_type?"":"selected"}>(opcional)</option>
            <option value="dni" ${u.document_type==="dni"?"selected":""}>DNI</option>
            <option value="ruc" ${u.document_type==="ruc"?"selected":""}>RUC</option>
          </select>
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Número doc</label>
          <input id="sw-cust-document_number" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(u.document_number)}" />
        </div>
      </div>
    </div>
  `,E=await be.fire({title:"Editar cliente",html:S,focusConfirm:!1,showCancelButton:!0,confirmButtonText:"Guardar",cancelButtonText:"Cancelar",preConfirm:()=>{var I,w,b,h,j,D,O,c,R,P,V,l,t,s,d;const g=((w=(I=document.getElementById("sw-cust-name"))==null?void 0:I.value)==null?void 0:w.trim())??"",r=((h=(b=document.getElementById("sw-cust-contact_name"))==null?void 0:b.value)==null?void 0:h.trim())??"",f=((D=(j=document.getElementById("sw-cust-company_name"))==null?void 0:j.value)==null?void 0:D.trim())??"",n=((c=(O=document.getElementById("sw-cust-contact_phone"))==null?void 0:O.value)==null?void 0:c.trim())??"",$=((P=(R=document.getElementById("sw-cust-contact_email"))==null?void 0:R.value)==null?void 0:P.trim())??"",k=((l=(V=document.getElementById("sw-cust-company_address"))==null?void 0:V.value)==null?void 0:l.trim())??"",i=((t=document.getElementById("sw-cust-document_type"))==null?void 0:t.value)??"",N=((d=(s=document.getElementById("sw-cust-document_number"))==null?void 0:s.value)==null?void 0:d.trim())??"";return g?N&&!i?(Y.showValidationMessage("El tipo de documento es requerido si envías número de documento."),!1):i&&!N?(Y.showValidationMessage("El número de documento es requerido."),!1):{name:g,contact_name:r||null,company_name:f||null,contact_phone:n||null,contact_email:$||null,company_address:k||null,document_type:i||null,document_number:N||null}:(Y.showValidationMessage("El nombre es requerido."),!1)}});return E.isConfirmed?E.value:null}async function al(){const u={name:"",contact_name:"",company_name:"",contact_phone:"",contact_email:"",company_address:"",document_number:""},S=`
    <div class="grid gap-3 text-left">
      <div>
        <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Nombre</label>
        <input id="sw-cust-name" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(u.name)}" />
      </div>

      <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Contacto</label>
          <input id="sw-cust-contact_name" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(u.contact_name)}" />
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Empresa</label>
          <input id="sw-cust-company_name" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(u.company_name)}" />
        </div>
      </div>

      <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Teléfono</label>
          <input id="sw-cust-contact_phone" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(u.contact_phone)}" />
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Email</label>
          <input id="sw-cust-contact_email" type="email" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(u.contact_email)}" />
        </div>
      </div>

      <div>
        <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Dirección</label>
        <input id="sw-cust-company_address" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(u.company_address)}" />
      </div>

      <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Tipo doc</label>
          <select id="sw-cust-document_type" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100">
            <option value="" selected>(opcional)</option>
            <option value="dni">DNI</option>
            <option value="ruc">RUC</option>
          </select>
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Número doc</label>
          <input id="sw-cust-document_number" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(u.document_number)}" />
        </div>
      </div>
    </div>
  `,E=await be.fire({title:"Crear cliente",html:S,focusConfirm:!1,showCancelButton:!0,confirmButtonText:"Crear",cancelButtonText:"Cancelar",preConfirm:()=>{var I,w,b,h,j,D,O,c,R,P,V,l,t,s,d;const g=((w=(I=document.getElementById("sw-cust-name"))==null?void 0:I.value)==null?void 0:w.trim())??"",r=((h=(b=document.getElementById("sw-cust-contact_name"))==null?void 0:b.value)==null?void 0:h.trim())??"",f=((D=(j=document.getElementById("sw-cust-company_name"))==null?void 0:j.value)==null?void 0:D.trim())??"",n=((c=(O=document.getElementById("sw-cust-contact_phone"))==null?void 0:O.value)==null?void 0:c.trim())??"",$=((P=(R=document.getElementById("sw-cust-contact_email"))==null?void 0:R.value)==null?void 0:P.trim())??"",k=((l=(V=document.getElementById("sw-cust-company_address"))==null?void 0:V.value)==null?void 0:l.trim())??"",i=((t=document.getElementById("sw-cust-document_type"))==null?void 0:t.value)??"",N=((d=(s=document.getElementById("sw-cust-document_number"))==null?void 0:s.value)==null?void 0:d.trim())??"";return g?N&&!i?(Y.showValidationMessage("El tipo de documento es requerido si envías número de documento."),!1):i&&!N?(Y.showValidationMessage("El número de documento es requerido."),!1):{name:g,contact_name:r||null,company_name:f||null,contact_phone:n||null,contact_email:$||null,company_address:k||null,document_type:i||null,document_number:N||null}:(Y.showValidationMessage("El nombre es requerido."),!1)}});return E.isConfirmed?E.value:null}async function ll(){return Ve({nro:"",comercio:"",nom_contador:"",titular_tlf:"",telefono:"",telefono_actu:"",link:"",usuario:"",contrasena:"",servidor:"",customer:null},!0)}async function Ve(u={},S=!1){var f;const E=((f=u==null?void 0:u.customer)==null?void 0:f.id)??"",g=`
    <div class="grid gap-3 text-left">
      <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Nro</label>
          <input id="sw-cont-nro" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(u.nro)}" />
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Comercio</label>
          <input id="sw-cont-comercio" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(u.comercio)}" />
        </div>
      </div>

      <div>
        <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Nombre del contador</label>
        <input id="sw-cont-nom_contador" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(u.nom_contador)}" />
      </div>

      <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Titular tlf</label>
          <input id="sw-cont-titular_tlf" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(u.titular_tlf)}" />
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Teléfono</label>
          <input id="sw-cont-telefono" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(u.telefono)}" />
        </div>
      </div>

      <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Teléfono act.</label>
          <input id="sw-cont-telefono_actu" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(u.telefono_actu)}" />
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Servidor</label>
          <input id="sw-cont-servidor" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(u.servidor)}" />
        </div>
      </div>

      <div>
        <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Link</label>
        <input id="sw-cont-link" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(u.link)}" />
      </div>

      <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Usuario</label>
          <input id="sw-cont-usuario" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(u.usuario)}" />
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Contraseña</label>
          <input id="sw-cont-contrasena" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(u.contrasena)}" />
        </div>
      </div>

      <div>
        <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Cliente ID (opcional)</label>
        <input id="sw-cont-customer_id" inputmode="numeric" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(E)}" placeholder="Ej: 12" />
        <div class="mt-1 text-xs text-gray-500 dark:text-slate-400">Si lo dejas vacío, queda sin asignar.</div>
      </div>
    </div>
  `,r=await be.fire({title:S?"Crear contador":"Editar contador",html:g,focusConfirm:!1,showCancelButton:!0,confirmButtonText:S?"Crear":"Guardar",cancelButtonText:"Cancelar",preConfirm:()=>{var c,R,P,V,l,t,s,d,p,T,B,Z,F,q,W,J,ee,te,se,le,re,ne;const n=((R=(c=document.getElementById("sw-cont-nro"))==null?void 0:c.value)==null?void 0:R.trim())??"",$=((V=(P=document.getElementById("sw-cont-comercio"))==null?void 0:P.value)==null?void 0:V.trim())??"",k=((t=(l=document.getElementById("sw-cont-nom_contador"))==null?void 0:l.value)==null?void 0:t.trim())??"",i=((d=(s=document.getElementById("sw-cont-titular_tlf"))==null?void 0:s.value)==null?void 0:d.trim())??"",N=((T=(p=document.getElementById("sw-cont-telefono"))==null?void 0:p.value)==null?void 0:T.trim())??"",I=((Z=(B=document.getElementById("sw-cont-telefono_actu"))==null?void 0:B.value)==null?void 0:Z.trim())??"",w=((q=(F=document.getElementById("sw-cont-servidor"))==null?void 0:F.value)==null?void 0:q.trim())??"",b=((J=(W=document.getElementById("sw-cont-link"))==null?void 0:W.value)==null?void 0:J.trim())??"",h=((te=(ee=document.getElementById("sw-cont-usuario"))==null?void 0:ee.value)==null?void 0:te.trim())??"",j=((le=(se=document.getElementById("sw-cont-contrasena"))==null?void 0:se.value)==null?void 0:le.trim())??"",D=((ne=(re=document.getElementById("sw-cont-customer_id"))==null?void 0:re.value)==null?void 0:ne.trim())??"";if(!n&&!$&&!k)return Y.showValidationMessage("Completa al menos Nro, Comercio o Nombre del contador."),!1;const O=D?Number(D):null;return D&&(!Number.isInteger(O)||O<=0)?(Y.showValidationMessage("Cliente ID inválido."),!1):{nro:n||null,comercio:$||null,nom_contador:k||null,titular_tlf:i||null,telefono:N||null,telefono_actu:I||null,servidor:w||null,link:b||null,usuario:h||null,contrasena:j||null,customer_id:O}}});return r.isConfirmed?r.value:null}async function ol(){return Pe({nombre:"",ruc:"",usuario:"",clave:"",fecha_creacion:"",fecha_vencimiento:"",estado:"activo",tipo:"",observacion:""},!0)}async function Pe(u={},S=!1){const E=`
    <div class="grid gap-3 text-left">
      <div>
        <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Nombre</label>
        <input id="sw-cert-nombre" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(u.nombre)}" />
      </div>

      <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">RUC</label>
          <input id="sw-cert-ruc" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(u.ruc)}" />
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Tipo</label>
          <select id="sw-cert-tipo" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100">
            <option value="" ${u.tipo?"":"selected"}>(opcional)</option>
            <option value="OSE" ${u.tipo==="OSE"?"selected":""}>OSE</option>
            <option value="PSE" ${u.tipo==="PSE"?"selected":""}>PSE</option>
          </select>
        </div>
      </div>

      <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Estado</label>
          <select id="sw-cert-estado" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100">
            <option value="activo" ${u.estado==="activo"||!u.estado?"selected":""}>Activo</option>
            <option value="inactivo" ${u.estado==="inactivo"?"selected":""}>Inactivo</option>
          </select>
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Fecha vencimiento</label>
          <input id="sw-cert-fecha_vencimiento" type="date" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(u.fecha_vencimiento)}" />
        </div>
      </div>

      <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Usuario</label>
          <input id="sw-cert-usuario" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(u.usuario)}" />
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Clave</label>
          <input id="sw-cert-clave" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(u.clave)}" />
        </div>
      </div>

      <div>
        <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Fecha creación</label>
        <input id="sw-cert-fecha_creacion" type="date" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${M(u.fecha_creacion)}" />
      </div>

      <div>
        <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Imagen</label>
        <input id="sw-cert-imagen" type="file" accept="image/*" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" />
        ${u.imagen?`<div class="mt-1 text-xs text-gray-500 dark:text-slate-400">Actual: ${M(u.imagen)}</div>`:""}
      </div>

      <div>
        <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Observación</label>
        <textarea id="sw-cert-observacion" rows="3" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100">${M(u.observacion)}</textarea>
      </div>
    </div>
  `,g=await be.fire({title:S?"Crear certificado":"Editar certificado",html:E,focusConfirm:!1,showCancelButton:!0,confirmButtonText:S?"Crear":"Guardar",cancelButtonText:"Cancelar",preConfirm:()=>{var j,D,O,c,R,P,V,l,t,s,d,p,T,B,Z,F;const r=((D=(j=document.getElementById("sw-cert-nombre"))==null?void 0:j.value)==null?void 0:D.trim())??"",f=((c=(O=document.getElementById("sw-cert-ruc"))==null?void 0:O.value)==null?void 0:c.trim())??"",n=((R=document.getElementById("sw-cert-tipo"))==null?void 0:R.value)??"",$=((P=document.getElementById("sw-cert-estado"))==null?void 0:P.value)??"activo",k=((V=document.getElementById("sw-cert-fecha_vencimiento"))==null?void 0:V.value)??"",i=((t=(l=document.getElementById("sw-cert-usuario"))==null?void 0:l.value)==null?void 0:t.trim())??"",N=((d=(s=document.getElementById("sw-cert-clave"))==null?void 0:s.value)==null?void 0:d.trim())??"",I=((p=document.getElementById("sw-cert-fecha_creacion"))==null?void 0:p.value)??"",w=((B=(T=document.getElementById("sw-cert-imagen"))==null?void 0:T.files)==null?void 0:B[0])??null,b=((F=(Z=document.getElementById("sw-cert-observacion"))==null?void 0:Z.value)==null?void 0:F.trim())??"";if(!r)return Y.showValidationMessage("El nombre es requerido."),!1;const h={nombre:r,ruc:f||null,tipo:n||null,estado:$||"activo",fecha_vencimiento:k||null,usuario:i||null,clave:N||null,fecha_creacion:I||null,observacion:b||null};return w&&(h.imagen=w),h}});return g.isConfirmed?g.value:null}const je={class:"h-full px-3 lg:px-5 lg:pl-3"},Ne={class:"h-full flex items-center justify-between"},De={class:"flex items-center justify-start rtl:justify-end"},Oe={key:0,class:"w-6 h-6","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},Re={key:1,class:"w-6 h-6","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},Ue={class:"flex items-center gap-2"},He={class:"relative","data-notifications-container":""},ze={key:0,class:"absolute -top-1 -right-1 min-w-5 h-5 px-1 rounded-full bg-white text-sky-700 text-[10px] font-semibold flex items-center justify-center ring-1 ring-sky-700"},Ze={class:"px-4 py-3"},Fe={class:"text-xs text-gray-500 dark:text-slate-300"},qe={class:"py-2 max-h-72 overflow-auto"},We={key:0,class:"px-4 py-2 text-gray-500 dark:text-slate-300"},Ge=["onClick"],Qe={class:"text-sm text-gray-900 dark:text-slate-100"},Ke={key:0,class:"text-xs text-gray-500 dark:text-slate-300"},Ye={class:"text-[11px] text-gray-400 dark:text-slate-400"},Je={key:0,class:"px-4 py-2 border-t border-gray-100 dark:border-slate-800"},Xe=["aria-label"],et={key:0,class:"w-5 h-5","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},tt={key:1,class:"w-5 h-5","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},st={class:"relative flex items-center ms-3","data-user-dropdown-container":""},at=["src","alt"],lt={key:1,class:"w-8 h-8 rounded-full bg-white text-sky-700 flex items-center justify-center text-xs font-semibold"},ot={class:"absolute right-0 top-12 z-50 my-4 text-base list-none bg-white divide-y divide-gray-100 rounded-lg shadow dark:bg-slate-900 dark:divide-slate-800"},rt={class:"px-4 py-3"},nt={class:"text-sm text-gray-900 dark:text-slate-100"},dt={class:"text-sm font-medium text-gray-500 truncate dark:text-slate-300"},it={class:"py-2"},ut={method:"POST",action:"/logout",class:"block"},ct=["value"],mt={__name:"Header",props:{sidebarCollapsed:{type:Boolean,default:!1}},emits:["toggle-sidebar"],setup(u){var l;const S=((l=document.querySelector('meta[name="csrf-token"]'))==null?void 0:l.getAttribute("content"))??"",E=C(()=>window.__AUTH_USER__??null),g=C(()=>{var t;return((t=E.value)==null?void 0:t.name)??"Usuario"}),r=C(()=>{var t;return((t=E.value)==null?void 0:t.email)??""}),f=C(()=>{var t;return((t=E.value)==null?void 0:t.profile_photo_url)??""}),n=C(()=>{var B;const t=String(((B=E.value)==null?void 0:B.name)??"").trim();if(!t)return"U";const s=t.split(/\s+/).map(Z=>Z.trim()).filter(Boolean);if(s.length===0)return"U";const d=Array.from(s[0])[0]??"",p=s.length>1?Array.from(s[s.length-1])[0]??"":"";return(`${d}${p}`.trim()||"U").toLocaleUpperCase("es-ES")}),$=_(!1),k=_(!1),i=_(!1),N=_([]),I=_(0);let w=null,b=new Set;const h=async({toastNew:t=!1}={})=>{var s,d;try{const p=await X.get("/notifications"),T=(s=p==null?void 0:p.data)==null?void 0:s.data,B=(T==null?void 0:T.notifications)??[],Z=(T==null?void 0:T.count)??0;if(t){const F=B.filter(q=>!b.has(q.id));for(const q of F.slice(0,2)){const W=(d=q==null?void 0:q.data)!=null&&d.title?`Recordatorio: ${q.data.title}`:"Nuevo recordatorio";Le(W)}}N.value=B,I.value=Number(Z)||0,b=new Set(B.map(F=>F.id))}catch{}},j=async t=>{var d;if(!(t!=null&&t.id))return;try{await X.post(`/notifications/${t.id}/read`),k.value=!1}catch{}const s=(d=t==null?void 0:t.data)==null?void 0:d.url;s?window.location.assign(s):h({toastNew:!1})},D=t=>{if(!t)return"";const s=new Date(t);return Number.isNaN(s.getTime())?String(t):s.toLocaleString()},O=()=>{k.value=!k.value},c=()=>{i.value=!i.value},R=async()=>{try{await X.post("/notifications/mark-all-read"),await h({toastNew:!1}),k.value=!1,$e("Notificaciones marcadas como leídas")}catch(t){console.error("Error marking notifications as read:",t)}},P=()=>{$.value=document.documentElement.classList.contains("dark")},V=()=>{const t=Se();$.value=t==="dark"};return me(()=>{P(),window.addEventListener("theme:changed",P),h({toastNew:!1}),w=setInterval(()=>h({toastNew:!0}),3e4),document.addEventListener("click",t=>{k.value&&!t.target.closest("[data-notifications-container]")&&(k.value=!1),i.value&&!t.target.closest("[data-user-dropdown-container]")&&(i.value=!1)})}),ye(()=>{window.removeEventListener("theme:changed",P),w&&clearInterval(w)}),(t,s)=>(a(),o("nav",{class:A(["fixed top-0 right-0 z-50 h-16 bg-sky-600 border-b border-sky-700 shadow-sm",u.sidebarCollapsed?"left-0 sm:left-20":"left-0 sm:left-64"])},[e("div",je,[e("div",Ne,[e("div",De,[s[5]||(s[5]=e("button",{"data-drawer-target":"logo-sidebar","data-drawer-toggle":"logo-sidebar","aria-controls":"logo-sidebar",type:"button",class:"inline-flex items-center p-2 text-sm text-white/90 rounded-lg sm:hidden hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-white/40"},[e("span",{class:"sr-only"},"Abrir sidebar"),e("svg",{class:"w-6 h-6","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"clip-rule":"evenodd","fill-rule":"evenodd",d:"M2 4.75A.75.75 0 0 1 2.75 4h14.5a.75.75 0 0 1 0 1.5H2.75A.75.75 0 0 1 2 4.75Zm0 10.5a.75.75 0 0 1 .75-.75h14.5a.75.75 0 0 1 0 1.5H2.75a.75.75 0 0 1-.75-.75ZM2 10a.75.75 0 0 1 .75-.75h14.5a.75.75 0 0 1 0 1.5H2.75A.75.75 0 0 1 2 10Z"})])],-1)),e("button",{type:"button",class:"hidden sm:inline-flex items-center p-2 text-sm text-white/90 rounded-lg hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-white/40",onClick:s[0]||(s[0]=d=>t.$emit("toggle-sidebar"))},[s[4]||(s[4]=e("span",{class:"sr-only"},"Contraer/expandir sidebar",-1)),u.sidebarCollapsed?(a(),o("svg",Re,[...s[3]||(s[3]=[e("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 0 1 1-1h8a1 1 0 1 1 0 2H5v10h7a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1V4Zm12.707 2.293a1 1 0 0 1 0 1.414L15.414 8H9a1 1 0 1 0 0 2h6.414l.293.293a1 1 0 0 1 0 1.414l-2 2a1 1 0 1 0 1.414 1.414l2-2a1 1 0 0 0 0-1.414L16.414 10l.707-.707a1 1 0 0 0 0-1.414l-2-2a1 1 0 0 0-1.414 1.414l2 2Z","clip-rule":"evenodd"},null,-1)])])):(a(),o("svg",Oe,[...s[2]||(s[2]=[e("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 0 1 1-1h8a1 1 0 1 1 0 2H5v10h7a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1V4Zm12.293 2.293a1 1 0 0 1 1.414 0l2 2a1 1 0 0 1 0 1.414l-2 2a1 1 0 1 1-1.414-1.414L15.586 10l-.293-.293a1 1 0 0 1 0-1.414ZM9 10a1 1 0 0 1 1-1h7a1 1 0 1 1 0 2h-7a1 1 0 0 1-1-1Z","clip-rule":"evenodd"},null,-1)])]))])]),e("div",Ue,[e("div",He,[e("button",{type:"button",class:"inline-flex items-center justify-center w-9 h-9 text-sm text-white/90 rounded-lg hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-white/40","aria-expanded":"false","aria-label":"Notificaciones",onClick:O},[s[6]||(s[6]=e("svg",{class:"w-5 h-5","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M10 2a6 6 0 0 0-6 6v2.586l-.707.707A1 1 0 0 0 3 13h14a1 1 0 0 0 .707-1.707L17 10.586V8a6 6 0 0 0-6-6Zm0 16a2.5 2.5 0 0 0 2.45-2H7.55A2.5 2.5 0 0 0 10 18Z"})],-1)),I.value>0?(a(),o("span",ze,x(I.value>99?"99+":I.value),1)):y("",!0)]),L(e("div",{class:"absolute right-0 z-50 mt-2 w-80 max-w-[90vw] text-sm bg-white divide-y divide-gray-100 rounded-lg shadow-lg border border-gray-200 dark:bg-slate-900 dark:divide-slate-800 dark:border-slate-700",onClick:s[1]||(s[1]=ke(()=>{},["stop"]))},[e("div",Ze,[s[7]||(s[7]=e("p",{class:"text-sm font-semibold text-gray-900 dark:text-slate-100"},"Notificaciones",-1)),e("p",Fe,"No leídas: "+x(I.value),1)]),e("ul",qe,[N.value.length===0?(a(),o("li",We," No hay notificaciones nuevas. ")):y("",!0),(a(!0),o(ie,null,ue(N.value,d=>{var p,T;return a(),o("li",{key:d.id},[e("button",{type:"button",class:"w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-slate-800",onClick:B=>j(d)},[e("p",Qe,x(((p=d==null?void 0:d.data)==null?void 0:p.title)??"Notificación"),1),(T=d==null?void 0:d.data)!=null&&T.message?(a(),o("p",Ke,x(d.data.message),1)):y("",!0),e("p",Ye,x(D(d==null?void 0:d.created_at)),1)],8,Ge)])}),128))]),N.value.length>0?(a(),o("div",Je,[e("button",{type:"button",class:"text-xs text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",onClick:R}," Marcar todas como leídas ")])):y("",!0)],512),[[z,k.value]])]),e("button",{type:"button",class:"inline-flex items-center justify-center w-9 h-9 text-sm text-white/90 rounded-lg hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-white/40","aria-label":$.value?"Cambiar a modo claro":"Cambiar a modo oscuro",onClick:V},[$.value?(a(),o("svg",et,[...s[8]||(s[8]=[e("path",{d:"M10 2a1 1 0 0 1 1 1v1a1 1 0 1 1-2 0V3a1 1 0 0 1 1-1Zm4.95 3.05a1 1 0 0 1 0 1.41l-.7.7a1 1 0 1 1-1.41-1.41l.7-.7a1 1 0 0 1 1.41 0ZM17 9a1 1 0 1 1 0 2h-1a1 1 0 1 1 0-2h1ZM10 6a4 4 0 1 0 0 8 4 4 0 0 0 0-8ZM4 9a1 1 0 1 0 0 2H3a1 1 0 1 0 0-2h1Zm2.16-3.54a1 1 0 0 1 1.41 0l.7.7a1 1 0 0 1-1.41 1.41l-.7-.7a1 1 0 0 1 0-1.41ZM10 16a1 1 0 0 1 1 1v1a1 1 0 1 1-2 0v-1a1 1 0 0 1 1-1Zm5.54.46a1 1 0 0 1 0 1.41l-.7.7a1 1 0 1 1-1.41-1.41l.7-.7a1 1 0 0 1 1.41 0ZM6.57 15.76a1 1 0 0 1 0 1.41l-.7.7a1 1 0 1 1-1.41-1.41l.7-.7a1 1 0 0 1 1.41 0Z"},null,-1)])])):(a(),o("svg",tt,[...s[9]||(s[9]=[e("path",{d:"M17.293 13.293A8 8 0 0 1 6.707 2.707a1 1 0 0 1 1.11-1.66A10 10 0 1 0 18.953 12.183a1 1 0 0 1-1.66 1.11Z"},null,-1)])]))],8,Xe),e("div",st,[e("button",{type:"button",class:"flex text-sm rounded-full ring-1 ring-sky-700 hover:ring-white/60 focus:ring-4 focus:ring-white/30","aria-expanded":"false",onClick:c},[s[10]||(s[10]=e("span",{class:"sr-only"},"Abrir menú de usuario",-1)),f.value?(a(),o("img",{key:0,src:f.value,alt:g.value,class:"w-8 h-8 rounded-full object-cover bg-white ring-1 ring-sky-700",loading:"lazy"},null,8,at)):(a(),o("div",lt,x(n.value),1))]),L(e("div",ot,[e("div",rt,[e("p",nt,x(g.value),1),e("p",dt,x(r.value),1)]),e("ul",it,[s[12]||(s[12]=e("li",null,[e("a",{href:"/profile",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-slate-200 dark:hover:bg-slate-800"}," Perfil ")],-1)),s[13]||(s[13]=e("li",null,[e("a",{href:"/configuracion",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-slate-200 dark:hover:bg-slate-800"}," Configuración ")],-1)),e("li",null,[e("form",ut,[e("input",{type:"hidden",name:"_token",value:v(S)},null,8,ct),s[11]||(s[11]=e("button",{type:"submit",class:"w-full text-left block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-slate-200 dark:hover:bg-slate-800"}," Salir ",-1))])])])],512),[[z,i.value]])])])])])],2))}},bt="/build/assets/LOGO-cdeU89Pk.png",gt="/build/assets/LOGO_TEXTO-CJ7UpWu5.png",xt={class:"h-full flex flex-col bg-slate-900"},vt={href:"/dashboard",class:"flex items-center w-full gap-2"},pt=["src"],ft=["src"],ht={class:"flex-1 px-3 pb-4 overflow-y-auto"},wt={class:"px-2 pt-2 pb-3 text-xs font-semibold text-slate-300 uppercase tracking-wider"},yt={class:"space-y-2 font-medium"},kt={class:"ms-3"},_t={key:0},Ct={class:"flex-1 ms-3 whitespace-nowrap"},$t={key:1},Et={class:"flex-1 ms-3 whitespace-nowrap"},It={key:2},Tt={class:"flex-1 ms-3 whitespace-nowrap"},Bt={class:"mt-2 space-y-1 pl-2"},Mt={key:3},St={class:"flex-1 ms-3 whitespace-nowrap"},At={class:"mt-2 space-y-1 pl-2"},Lt={key:0},Vt={key:1},Pt={key:4},jt={class:"flex-1 ms-3 whitespace-nowrap"},Nt={key:5},Dt={class:"flex-1 ms-3 whitespace-nowrap"},Ot={key:6},Rt={class:"flex-1 ms-3 whitespace-nowrap"},Ut={class:"mt-2 space-y-1 pl-2"},Ht={class:"min-w-56 bg-slate-900 border border-slate-800 rounded-lg shadow-sm overflow-hidden"},zt={class:"py-2"},Zt={key:0},Ft={key:1},qt={__name:"Sidebar",props:{collapsed:{type:Boolean,default:!1}},setup(u){const S=window.__APP_LOGO_MARK__??"",E=window.__APP_LOGO_FULL__??"",g=C(()=>S||bt),r=C(()=>E||gt),f=window.location.pathname,n=H=>H==="/dashboard"?f==="/dashboard":f.startsWith(H),$=H=>f===H,k=u,{collapsed:i}=Ae(k),N=C(()=>window.__AUTH_USER__??null),I=H=>{var K;const m=(K=N.value)==null?void 0:K.permissions;return Array.isArray(m)&&m.includes(H)},w=C(()=>I("menu.users")),b=C(()=>I("menu.roles")),h=C(()=>I("menu.leads")),j=C(()=>I("menu.email")||I("menu.leads")),D=C(()=>h.value||j.value),O=C(()=>I("menu.customers")),c=C(()=>I("menu.calendar")||I("calendar.view")),R=C(()=>I("menu.postventa")),P=_(n("/incidencias")||n("/backlog")||n("/postventa")),V=_(!1),l=_(null),t=_({left:"0px",top:"0px"});let s=null;const d=()=>{var m,K;if(!i.value)return;s&&(clearTimeout(s),s=null);const H=(K=(m=l.value)==null?void 0:m.getBoundingClientRect)==null?void 0:K.call(m);H&&(t.value={left:`${Math.round(H.right+8)}px`,top:`${Math.round(H.top)}px`}),V.value=!0},p=()=>{i.value&&(s&&clearTimeout(s),s=setTimeout(()=>{V.value=!1},120))},T=()=>{if(i.value){window.location.assign("/backlog");return}P.value=!P.value},B=_($("/leads")||n("/desistidos")||n("/espera")),Z=_(!1),F=_(null),q=_({left:"0px",top:"0px"});let W=null;const J=()=>{var m,K;if(!i.value)return;W&&(clearTimeout(W),W=null);const H=(K=(m=F.value)==null?void 0:m.getBoundingClientRect)==null?void 0:K.call(m);H&&(q.value={left:`${Math.round(H.right+8)}px`,top:`${Math.round(H.top)}px`}),Z.value=!0},ee=()=>{i.value&&(W&&clearTimeout(W),W=setTimeout(()=>{Z.value=!1},120))},te=()=>{if(i.value){window.location.assign("/leads");return}B.value=!B.value},se=_(n("/leads/whatsapp")||n("/leads/email")),le=_(!1),re=_(null),ne=_({left:"0px",top:"0px"});let oe=null;const ge=()=>{var m,K;if(!i.value)return;oe&&(clearTimeout(oe),oe=null);const H=(K=(m=re.value)==null?void 0:m.getBoundingClientRect)==null?void 0:K.call(m);H&&(ne.value={left:`${Math.round(H.right+8)}px`,top:`${Math.round(H.top)}px`}),le.value=!0},xe=()=>{i.value&&(oe&&clearTimeout(oe),oe=setTimeout(()=>{le.value=!1},120))},fe=()=>{if(i.value){window.location.assign("/leads/whatsapp");return}se.value=!se.value};return(H,m)=>(a(),o("aside",{id:"logo-sidebar",class:A(["fixed top-0 left-0 z-40 h-screen transition-all duration-200 -translate-x-full bg-slate-900 border-r border-slate-950 sm:translate-x-0",v(i)?"w-20":"w-64"]),"aria-label":"Sidebar"},[e("div",xt,[e("div",{class:A(["h-16 px-2 flex items-center bg-sky-600 border-b border-sky-700 overflow-hidden",v(i)?"justify-center":"justify-start"])},[e("a",vt,[v(i)?(a(),o("img",{key:0,src:g.value,alt:"Atlantis",class:"h-14 w-14 object-contain"},null,8,pt)):(a(),o("img",{key:1,src:r.value,alt:"Atlantis",class:"h-14 w-full max-w-full flex-1 object-contain object-left"},null,8,ft))])],2),e("div",ht,[L(e("div",wt," Menú ",512),[[z,!v(i)]]),e("ul",yt,[e("li",null,[e("a",{href:"/dashboard",title:"Inicio","aria-current":"page",class:A(["flex items-center p-2 rounded-lg group",[v(i)?"justify-center":"",n("/dashboard")?"text-white bg-slate-800 border border-slate-700":"text-slate-200 hover:bg-slate-800"]])},[(a(),o("svg",{class:A(["w-5 h-5",n("/dashboard")?"text-white/90":"text-slate-300 group-hover:text-white"]),"aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[...m[0]||(m[0]=[e("path",{d:"M10 2a1 1 0 0 1 .7.3l7 7a1 1 0 0 1-1.4 1.4L16 10.4V17a1 1 0 0 1-1 1h-3a1 1 0 0 1-1-1v-3H9v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-6.6l-.3.3A1 1 0 1 1 2.3 9.3l7-7A1 1 0 0 1 10 2Z"},null,-1)])],2)),L(e("span",kt,"Inicio",512),[[z,!v(i)]])],2)]),w.value?(a(),o("li",_t,[e("a",{href:"/users",title:"Usuarios",class:A(["flex items-center p-2 rounded-lg group",[v(i)?"justify-center":"",n("/users")?"text-white bg-slate-800 border border-slate-700":"text-slate-200 hover:bg-slate-800"]])},[(a(),o("svg",{class:A(["w-5 h-5",n("/users")?"text-white/90":"text-slate-300 group-hover:text-white"]),"aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[...m[1]||(m[1]=[e("path",{d:"M10 10a4 4 0 1 0-4-4 4 4 0 0 0 4 4Zm-7 8a7 7 0 0 1 14 0 1 1 0 0 1-2 0 5 5 0 0 0-10 0 1 1 0 0 1-2 0Z"},null,-1)])],2)),L(e("span",Ct,"Usuarios",512),[[z,!v(i)]])],2)])):y("",!0),b.value?(a(),o("li",$t,[e("a",{href:"/roles",title:"Roles",class:A(["flex items-center p-2 rounded-lg group",[v(i)?"justify-center":"",n("/roles")?"text-white bg-slate-800 border border-slate-700":"text-slate-200 hover:bg-slate-800"]])},[(a(),o("svg",{class:A(["w-5 h-5",n("/roles")?"text-white/90":"text-slate-300 group-hover:text-white"]),"aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[...m[2]||(m[2]=[e("path",{d:"M10 2l7 3v5c0 5-3.58 9.74-7 10-3.42-.26-7-5-7-10V5l7-3z"},null,-1)])],2)),L(e("span",Et,"Roles",512),[[z,!v(i)]])],2)])):y("",!0),h.value?(a(),o("li",It,[e("div",{class:"relative",ref_key:"pipelineAnchor",ref:F,onMouseenter:J,onMouseleave:ee},[e("button",{type:"button",class:A(["w-full flex items-center p-2 rounded-lg group",[v(i)?"justify-center":"",$("/leads")||n("/desistidos")||n("/espera")?"text-white bg-slate-800 border border-slate-700":"text-slate-200 hover:bg-slate-800"]]),onClick:te},[(a(),o("svg",{class:A(["w-5 h-5",$("/leads")||n("/desistidos")||n("/espera")?"text-white/90":"text-slate-300 group-hover:text-white"]),"aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[...m[3]||(m[3]=[e("path",{d:"M3 3h14v4H3V3zm0 6h6v8H3v-8zm8 0h6v8h-6v-8z"},null,-1)])],2)),L(e("span",Tt,"Pipeline",512),[[z,!v(i)]]),L((a(),o("svg",{class:A(["w-4 h-4",B.value?"rotate-180":""]),"aria-hidden":"true",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[...m[4]||(m[4]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2)),[[z,!v(i)]])],2),L(e("ul",Bt,[e("li",null,[e("a",{href:"/leads",class:A(["flex items-center gap-3 p-2 rounded-lg group",["text-slate-200 hover:bg-slate-800",v(f)==="/leads"?"bg-slate-800 border border-slate-700":""]])},[...m[5]||(m[5]=[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"},null,-1),e("span",{class:"whitespace-nowrap"},"Leads",-1)])],2)]),e("li",null,[e("a",{href:"/espera",class:A(["flex items-center gap-3 p-2 rounded-lg group",["text-slate-200 hover:bg-slate-800",n("/espera")?"bg-slate-800 border border-slate-700":""]])},[...m[6]||(m[6]=[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"},null,-1),e("span",{class:"whitespace-nowrap"},"Zona de espera",-1)])],2)]),e("li",null,[e("a",{href:"/desistidos",class:A(["flex items-center gap-3 p-2 rounded-lg group",["text-slate-200 hover:bg-slate-800",n("/desistidos")?"bg-slate-800 border border-slate-700":""]])},[...m[7]||(m[7]=[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"},null,-1),e("span",{class:"whitespace-nowrap"},"Desistidos",-1)])],2)])],512),[[z,!v(i)&&B.value]])],544)])):y("",!0),D.value?(a(),o("li",Mt,[e("div",{class:"relative",ref_key:"inboxAnchor",ref:re,onMouseenter:ge,onMouseleave:xe},[e("button",{type:"button",class:A(["w-full flex items-center p-2 rounded-lg group",[v(i)?"justify-center":"",n("/leads/whatsapp")||n("/leads/email")?"text-white bg-slate-800 border border-slate-700":"text-slate-200 hover:bg-slate-800"]]),onClick:fe},[(a(),o("svg",{class:A(["w-5 h-5",n("/leads/whatsapp")||n("/leads/email")?"text-white/90":"text-slate-300 group-hover:text-white"]),"aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[...m[8]||(m[8]=[e("path",{d:"M2 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4zm2 0 6 4 6-4H4zm14 2.2-8 5.3-8-5.3V16h16V6.2z"},null,-1)])],2)),L(e("span",St,"Bandeja de entrada",512),[[z,!v(i)]]),L((a(),o("svg",{class:A(["w-4 h-4",se.value?"rotate-180":""]),"aria-hidden":"true",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[...m[9]||(m[9]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2)),[[z,!v(i)]])],2),L(e("ul",At,[h.value?(a(),o("li",Lt,[e("a",{href:"/leads/whatsapp",class:A(["flex items-center gap-3 p-2 rounded-lg group",["text-slate-200 hover:bg-slate-800",v(f)==="/leads/whatsapp"?"bg-slate-800 border border-slate-700":""]])},[...m[10]||(m[10]=[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"},null,-1),e("span",{class:"whitespace-nowrap"},"WhatsApp masivo",-1)])],2)])):y("",!0),j.value?(a(),o("li",Vt,[e("a",{href:"/leads/email",class:A(["flex items-center gap-3 p-2 rounded-lg group",["text-slate-200 hover:bg-slate-800",v(f)==="/leads/email"?"bg-slate-800 border border-slate-700":""]])},[...m[11]||(m[11]=[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"},null,-1),e("span",{class:"whitespace-nowrap"},"Email masivo",-1)])],2)])):y("",!0)],512),[[z,!v(i)&&se.value]])],544)])):y("",!0),O.value?(a(),o("li",Pt,[e("a",{href:"/customers",title:"Clientes",class:A(["flex items-center p-2 rounded-lg group",[v(i)?"justify-center":"",n("/customers")?"text-white bg-slate-800 border border-slate-700":"text-slate-200 hover:bg-slate-800"]])},[(a(),o("svg",{class:A(["w-5 h-5",n("/customers")?"text-white/90":"text-slate-300 group-hover:text-white"]),"aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[...m[12]||(m[12]=[e("path",{d:"M3 21h14v-8H3v8zM5 10h10v11H5V10zM7 3h6v4H7V3zM3 7h14v2H3V7z"},null,-1)])],2)),L(e("span",jt,"Clientes",512),[[z,!v(i)]])],2)])):y("",!0),c.value?(a(),o("li",Nt,[e("a",{href:"/calendar",title:"Calendario",class:A(["flex items-center p-2 rounded-lg group",[v(i)?"justify-center":"",n("/calendar")?"text-white bg-slate-800 border border-slate-700":"text-slate-200 hover:bg-slate-800"]])},[(a(),o("svg",{class:A(["w-5 h-5",n("/calendar")?"text-white/90":"text-slate-300 group-hover:text-white"]),"aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[...m[13]||(m[13]=[e("path",{d:"M6 2a1 1 0 1 0 0 2h8a1 1 0 1 0 0-2H6Z"},null,-1),e("path",{"fill-rule":"evenodd",d:"M4 5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V5Zm3 4a1 1 0 0 0 0 2h6a1 1 0 1 0 0-2H7Zm0 4a1 1 0 1 0 0 2h4a1 1 0 1 0 0-2H7Z","clip-rule":"evenodd"},null,-1)])],2)),L(e("span",Dt,"Calendario",512),[[z,!v(i)]])],2)])):y("",!0),R.value?(a(),o("li",Ot,[e("div",{class:"relative",ref_key:"postventaAnchor",ref:l,onMouseenter:d,onMouseleave:p},[e("button",{type:"button",class:A(["w-full flex items-center p-2 rounded-lg group",[v(i)?"justify-center":"",n("/incidencias")||n("/backlog")||n("/postventa")?"text-white bg-slate-800 border border-slate-700":"text-slate-200 hover:bg-slate-800"]]),onClick:T},[(a(),o("svg",{class:A(["w-5 h-5",n("/incidencias")||n("/backlog")||n("/postventa")?"text-white/90":"text-slate-300 group-hover:text-white"]),"aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[...m[14]||(m[14]=[e("path",{d:"M11.3 1.046a1 1 0 0 0-2.6 0l-.2.682a6.96 6.96 0 0 0-1.18.49l-.63-.35a1 1 0 0 0-1.24.22l-.9.9a1 1 0 0 0-.22 1.24l.35.63a6.96 6.96 0 0 0-.49 1.18l-.682.2a1 1 0 0 0 0 2.6l.682.2c.12.42.28.82.49 1.2l-.35.63a1 1 0 0 0 .22 1.24l.9.9a1 1 0 0 0 1.24.22l.63-.35c.38.2.78.37 1.2.49l.2.682a1 1 0 0 0 2.6 0l.2-.682c.42-.12.82-.28 1.2-.49l.63.35a1 1 0 0 0 1.24-.22l.9-.9a1 1 0 0 0 .22-1.24l-.35-.63c.2-.38.37-.78.49-1.2l.682-.2a1 1 0 0 0 0-2.6l-.682-.2a6.96 6.96 0 0 0-.49-1.18l.35-.63a1 1 0 0 0-.22-1.24l-.9-.9a1 1 0 0 0-1.24-.22l-.63.35c-.38-.2-.78-.37-1.2-.49l-.2-.682ZM10 13a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z"},null,-1)])],2)),L(e("span",Rt,"Postventa",512),[[z,!v(i)]]),L((a(),o("svg",{class:A(["w-4 h-4",P.value?"rotate-180":""]),"aria-hidden":"true",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[...m[15]||(m[15]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2)),[[z,!v(i)]])],2),L(e("ul",Ut,[e("li",null,[e("a",{href:"/backlog",class:A(["flex items-center gap-3 p-2 rounded-lg group",["text-slate-200 hover:bg-slate-800",n("/incidencias")||n("/backlog")?"bg-slate-800 border border-slate-700":""]])},[...m[16]||(m[16]=[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"},null,-1),e("span",{class:"whitespace-nowrap"},"Incidencias",-1)])],2)]),e("li",null,[e("a",{href:"/postventa/clientes",class:A(["flex items-center gap-3 p-2 rounded-lg group",["text-slate-200 hover:bg-slate-800",n("/postventa/clientes")?"bg-slate-800 border border-slate-700":""]])},[...m[17]||(m[17]=[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"},null,-1),e("span",{class:"whitespace-nowrap"},"Clientes",-1)])],2)]),e("li",null,[e("a",{href:"/postventa/contadores",class:A(["flex items-center gap-3 p-2 rounded-lg group",["text-slate-200 hover:bg-slate-800",n("/postventa/contadores")?"bg-slate-800 border border-slate-700":""]])},[...m[18]||(m[18]=[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"},null,-1),e("span",{class:"whitespace-nowrap"},"Contadores",-1)])],2)]),e("li",null,[e("a",{href:"/postventa/certificados",class:A(["flex items-center gap-3 p-2 rounded-lg group",["text-slate-200 hover:bg-slate-800",n("/postventa/certificados")?"bg-slate-800 border border-slate-700":""]])},[...m[19]||(m[19]=[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"},null,-1),e("span",{class:"whitespace-nowrap"},"Certificados",-1)])],2)])],512),[[z,!v(i)&&P.value]])],544)])):y("",!0)])])]),(a(),U(we,{to:"body"},[v(i)?L((a(),o("div",{key:0,class:"fixed z-[9999]",style:he(t.value),onMouseenter:d,onMouseleave:p},[...m[20]||(m[20]=[e("div",{class:"min-w-56 bg-slate-900 border border-slate-800 rounded-lg shadow-sm overflow-hidden"},[e("div",{class:"px-4 py-3 flex items-center justify-between border-b border-slate-800"},[e("div",{class:"text-sm font-semibold text-slate-100"},"Postventa"),e("svg",{class:"w-4 h-4 text-slate-300","aria-hidden":"true",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])]),e("ul",{class:"py-2"},[e("li",null,[e("a",{href:"/backlog",class:"flex items-center gap-3 px-4 py-2 text-sm text-slate-200 hover:bg-slate-800"},[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"}),e("span",{class:"whitespace-nowrap"},"Incidencias")])]),e("li",null,[e("a",{href:"/postventa/clientes",class:"flex items-center gap-3 px-4 py-2 text-sm text-slate-200 hover:bg-slate-800"},[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"}),e("span",{class:"whitespace-nowrap"},"Clientes")])]),e("li",null,[e("a",{href:"/postventa/contadores",class:"flex items-center gap-3 px-4 py-2 text-sm text-slate-200 hover:bg-slate-800"},[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"}),e("span",{class:"whitespace-nowrap"},"Contadores")])]),e("li",null,[e("a",{href:"/postventa/certificados",class:"flex items-center gap-3 px-4 py-2 text-sm text-slate-200 hover:bg-slate-800"},[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"}),e("span",{class:"whitespace-nowrap"},"Certificados")])])])],-1)])],36)),[[z,V.value]]):y("",!0)])),(a(),U(we,{to:"body"},[v(i)?L((a(),o("div",{key:0,class:"fixed z-[9999]",style:he(q.value),onMouseenter:J,onMouseleave:ee},[...m[21]||(m[21]=[e("div",{class:"min-w-56 bg-slate-900 border border-slate-800 rounded-lg shadow-sm overflow-hidden"},[e("div",{class:"px-4 py-3 flex items-center justify-between border-b border-slate-800"},[e("div",{class:"text-sm font-semibold text-slate-100"},"Pipeline"),e("svg",{class:"w-4 h-4 text-slate-300","aria-hidden":"true",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])]),e("ul",{class:"py-2"},[e("li",null,[e("a",{href:"/leads",class:"flex items-center gap-3 px-4 py-2 text-sm text-slate-200 hover:bg-slate-800"},[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"}),e("span",{class:"whitespace-nowrap"},"Leads")])]),e("li",null,[e("a",{href:"/espera",class:"flex items-center gap-3 px-4 py-2 text-sm text-slate-200 hover:bg-slate-800"},[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"}),e("span",{class:"whitespace-nowrap"},"Zona de espera")])]),e("li",null,[e("a",{href:"/desistidos",class:"flex items-center gap-3 px-4 py-2 text-sm text-slate-200 hover:bg-slate-800"},[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"}),e("span",{class:"whitespace-nowrap"},"Desistidos")])])])],-1)])],36)),[[z,Z.value]]):y("",!0)])),(a(),U(we,{to:"body"},[v(i)?L((a(),o("div",{key:0,class:"fixed z-[9999]",style:he(ne.value),onMouseenter:ge,onMouseleave:xe},[e("div",Ht,[m[24]||(m[24]=e("div",{class:"px-4 py-3 flex items-center justify-between border-b border-slate-800"},[e("div",{class:"text-sm font-semibold text-slate-100"},"Bandeja de entrada"),e("svg",{class:"w-4 h-4 text-slate-300","aria-hidden":"true",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1)),e("ul",zt,[h.value?(a(),o("li",Zt,[...m[22]||(m[22]=[e("a",{href:"/leads/whatsapp",class:"flex items-center gap-3 px-4 py-2 text-sm text-slate-200 hover:bg-slate-800"},[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"}),e("span",{class:"whitespace-nowrap"},"WhatsApp masivo")],-1)])])):y("",!0),j.value?(a(),o("li",Ft,[...m[23]||(m[23]=[e("a",{href:"/leads/email",class:"flex items-center gap-3 px-4 py-2 text-sm text-slate-200 hover:bg-slate-800"},[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"}),e("span",{class:"whitespace-nowrap"},"Email masivo")],-1)])])):y("",!0)])])],36)),[[z,le.value]]):y("",!0)]))],2))}},Wt={class:"bg-white border-t border-gray-200 dark:bg-slate-950 dark:border-slate-800"},Gt={class:"max-w-7xl mx-auto px-4 py-6"},Qt={class:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"},Kt={class:"text-sm text-gray-500 dark:text-slate-300"},Yt={__name:"Footer",setup(u){const S=new Date().getFullYear();return(E,g)=>(a(),o("footer",Wt,[e("div",Gt,[e("div",Qt,[e("span",Kt,"© "+x(v(S))+" CRM ATLANTIS",1),g[0]||(g[0]=e("div",{class:"flex gap-4"},[e("a",{href:"#",class:"text-sm text-gray-500 hover:text-gray-900 dark:text-slate-300 dark:hover:text-slate-100"},"Ayuda"),e("a",{href:"#",class:"text-sm text-gray-500 hover:text-gray-900 dark:text-slate-300 dark:hover:text-slate-100"},"Privacidad"),e("a",{href:"#",class:"text-sm text-gray-500 hover:text-gray-900 dark:text-slate-300 dark:hover:text-slate-100"},"Términos")],-1))])])]))}},Jt={key:0,class:"rounded-lg border border-slate-200 bg-white p-6 text-sm text-slate-600 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-300"},Xt={key:1,class:"rounded-lg border border-red-200 bg-white p-6 text-sm text-red-700 dark:border-red-900/40 dark:bg-slate-900 dark:text-red-300"},es={key:2,class:"space-y-6"},ts={class:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-end"},ss={class:"flex items-center gap-2"},as=["disabled"],ls={class:"grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-4"},os={key:0,href:"/leads",class:"block rounded-lg border border-slate-200 bg-white p-6 shadow-sm hover:bg-slate-50 dark:border-slate-800 dark:bg-slate-900 dark:hover:bg-slate-800"},rs={class:"mt-3 text-3xl font-semibold text-slate-900 dark:text-slate-100"},ns={class:"mt-2 text-sm text-slate-600 dark:text-slate-300"},ds={key:1,href:"/customers",class:"block rounded-lg border border-slate-200 bg-white p-6 shadow-sm hover:bg-slate-50 dark:border-slate-800 dark:bg-slate-900 dark:hover:bg-slate-800"},is={class:"mt-3 text-3xl font-semibold text-slate-900 dark:text-slate-100"},us={key:2,href:"/backlog",class:"block rounded-lg border border-slate-200 bg-white p-6 shadow-sm hover:bg-slate-50 dark:border-slate-800 dark:bg-slate-900 dark:hover:bg-slate-800"},cs={class:"mt-3 text-3xl font-semibold text-slate-900 dark:text-slate-100"},ms={class:"mt-2 text-sm text-slate-600 dark:text-slate-300"},bs={key:3,href:"/postventa/certificados",class:"block rounded-lg border border-slate-200 bg-white p-6 shadow-sm hover:bg-slate-50 dark:border-slate-800 dark:bg-slate-900 dark:hover:bg-slate-800"},gs={class:"mt-3 text-3xl font-semibold text-slate-900 dark:text-slate-100"},xs={class:"mt-2 text-sm text-slate-600 dark:text-slate-300"},vs={key:4,href:"/postventa/contadores",class:"block rounded-lg border border-slate-200 bg-white p-6 shadow-sm hover:bg-slate-50 dark:border-slate-800 dark:bg-slate-900 dark:hover:bg-slate-800"},ps={class:"mt-3 text-3xl font-semibold text-slate-900 dark:text-slate-100"},fs={class:"mt-2 text-sm text-slate-600 dark:text-slate-300"},hs={key:5,href:"/calendar",class:"block rounded-lg border border-slate-200 bg-white p-6 shadow-sm hover:bg-slate-50 dark:border-slate-800 dark:bg-slate-900 dark:hover:bg-slate-800"},ws={class:"mt-3 text-3xl font-semibold text-slate-900 dark:text-slate-100"},ys={class:"grid grid-cols-1 gap-6 lg:grid-cols-3"},ks={class:"lg:col-span-2"},_s={class:"rounded-lg border border-slate-200 bg-white shadow-sm dark:border-slate-800 dark:bg-slate-900"},Cs={class:"border-b border-slate-200 p-6 dark:border-slate-800"},$s={class:"flex items-center justify-between"},Es={key:0,href:"/postventa/certificados",class:"text-sm font-medium text-blue-600 hover:underline"},Is={class:"overflow-x-auto"},Ts={class:"min-w-full text-left text-sm text-slate-700 dark:text-slate-200"},Bs={class:"px-6 py-3 font-medium text-slate-900 dark:text-slate-100"},Ms={class:"px-6 py-3"},Ss={class:"px-6 py-3"},As={class:"px-6 py-3"},Ls={key:0},Vs={class:"rounded-lg border border-slate-200 bg-white shadow-sm dark:border-slate-800 dark:bg-slate-900"},Ps={class:"border-b border-slate-200 p-6 dark:border-slate-800"},js={class:"flex items-center justify-between"},Ns={key:0,href:"/calendar",class:"text-sm font-medium text-blue-600 hover:underline"},Ds={class:"p-6"},Os={key:0,class:"text-sm text-slate-500 dark:text-slate-300"},Rs={key:1,class:"space-y-3"},Us={class:"text-sm font-semibold text-slate-900 dark:text-slate-100"},Hs={class:"mt-1 text-xs text-slate-600 dark:text-slate-300"},zs={key:0},Zs={class:"grid grid-cols-1 gap-6 lg:grid-cols-2"},Fs={key:0,class:"rounded-lg border border-slate-200 bg-white shadow-sm dark:border-slate-800 dark:bg-slate-900"},qs={class:"divide-y divide-slate-200 dark:divide-slate-800"},Ws={class:"flex items-center justify-between gap-3"},Gs={class:"text-sm font-semibold text-slate-900 dark:text-slate-100"},Qs={class:"mt-1 text-xs text-slate-600 dark:text-slate-300"},Ks={class:"text-right"},Ys={class:"text-sm font-medium text-slate-900 dark:text-slate-100"},Js={class:"mt-1 text-xs text-slate-600 dark:text-slate-300"},Xs={key:0,class:"p-6 text-sm text-slate-500 dark:text-slate-300"},ea={key:1,class:"rounded-lg border border-slate-200 bg-white shadow-sm dark:border-slate-800 dark:bg-slate-900"},ta={class:"divide-y divide-slate-200 dark:divide-slate-800"},sa={class:"text-sm font-semibold text-slate-900 dark:text-slate-100"},aa={class:"mt-1 text-xs text-slate-600 dark:text-slate-300"},la={key:0,class:"p-6 text-sm text-slate-500 dark:text-slate-300"},oa={__name:"DashboardView",setup(u){const S=_(!0),E=_(""),g=_({}),r=_({certificados_por_vencer:[],upcoming_events:[],recent_leads:null,recent_incidences:null}),f=_(null),n=_(""),$=()=>{const w=f.value;w&&(w.focus(),typeof w.showPicker=="function"&&w.showPicker())},k=w=>{if(!w)return"—";try{const b=new Date(w);return new Intl.DateTimeFormat("es-PE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(b)}catch{return String(w)}},i=(w,b)=>{if(w==null||w==="")return"—";const h=Number(w);if(!Number.isFinite(h))return String(w);const j=b||"PEN";try{return new Intl.NumberFormat("es-PE",{style:"currency",currency:j,maximumFractionDigits:2}).format(h)}catch{return`${h.toFixed(2)} ${j}`}},N=async()=>{var w,b;S.value=!0,E.value="";try{const{data:h}=await X.get("/dashboard/summary",{params:{month:n.value||void 0}});g.value=(h==null?void 0:h.cards)||{},r.value={...r.value,...(h==null?void 0:h.lists)||{}}}catch(h){E.value=((b=(w=h==null?void 0:h.response)==null?void 0:w.data)==null?void 0:b.message)??"No se pudo cargar el dashboard."}finally{S.value=!1}},I=()=>{N()};return me(()=>{N()}),(w,b)=>{var h,j,D,O;return a(),o("div",null,[S.value?(a(),o("div",Jt," Cargando dashboard… ")):E.value?(a(),o("div",Xt,x(E.value),1)):(a(),o("div",es,[e("section",ts,[e("div",ss,[b[1]||(b[1]=e("label",{class:"text-sm text-slate-600 dark:text-slate-300"},"Mes",-1)),L(e("input",{ref_key:"monthInput",ref:f,"onUpdate:modelValue":b[0]||(b[0]=c=>n.value=c),type:"month",class:"rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 focus:border-sky-500 focus:ring-sky-500 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100",onClick:$},null,512),[[ae,n.value]]),e("button",{type:"button",class:"rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 hover:bg-slate-50 disabled:opacity-50 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-200 dark:hover:bg-slate-800",disabled:S.value,onClick:I}," Ver ",8,as)])]),e("section",ls,[g.value.leads?(a(),o("a",os,[b[2]||(b[2]=e("div",{class:"flex items-center justify-between"},[e("span",{class:"text-sm font-medium text-slate-500 dark:text-slate-300"},"Leads"),e("span",{class:"inline-flex items-center rounded bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700 dark:bg-slate-800 dark:text-slate-200"},"Total")],-1)),e("div",rs,x(g.value.leads.total),1),e("div",ns," Abiertos: "+x(g.value.leads.open)+" · Archivados: "+x(g.value.leads.archived),1)])):y("",!0),g.value.customers?(a(),o("a",ds,[b[3]||(b[3]=e("div",{class:"flex items-center justify-between"},[e("span",{class:"text-sm font-medium text-slate-500 dark:text-slate-300"},"Clientes"),e("span",{class:"inline-flex items-center rounded bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700 dark:bg-slate-800 dark:text-slate-200"},"Total")],-1)),e("div",is,x(g.value.customers.total),1),b[4]||(b[4]=e("div",{class:"mt-2 text-sm text-slate-600 dark:text-slate-300"},"Clientes registrados",-1))])):y("",!0),g.value.incidencias?(a(),o("a",us,[b[5]||(b[5]=e("div",{class:"flex items-center justify-between"},[e("span",{class:"text-sm font-medium text-slate-500 dark:text-slate-300"},"Incidencias"),e("span",{class:"inline-flex items-center rounded bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700 dark:bg-slate-800 dark:text-slate-200"},"Postventa")],-1)),e("div",cs,x(g.value.incidencias.open),1),e("div",ms,"Abiertas · Archivadas: "+x(g.value.incidencias.archived),1)])):y("",!0),g.value.certificados?(a(),o("a",bs,[b[6]||(b[6]=e("div",{class:"flex items-center justify-between"},[e("span",{class:"text-sm font-medium text-slate-500 dark:text-slate-300"},"Certificados"),e("span",{class:"inline-flex items-center rounded bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700 dark:bg-slate-800 dark:text-slate-200"},"Activos")],-1)),e("div",gs,x(g.value.certificados.activos),1),e("div",xs," Por vencer (30d): "+x(g.value.certificados.por_vencer_30d)+" · Vencidos: "+x(g.value.certificados.vencidos),1)])):y("",!0),g.value.contadores?(a(),o("a",vs,[b[7]||(b[7]=e("div",{class:"flex items-center justify-between"},[e("span",{class:"text-sm font-medium text-slate-500 dark:text-slate-300"},"Contadores"),e("span",{class:"inline-flex items-center rounded bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700 dark:bg-slate-800 dark:text-slate-200"},"Total")],-1)),e("div",ps,x(g.value.contadores.total),1),e("div",fs," Asignados: "+x(g.value.contadores.assigned)+" · Sin asignar: "+x(g.value.contadores.unassigned),1)])):y("",!0),g.value.calendar?(a(),o("a",hs,[b[8]||(b[8]=e("div",{class:"flex items-center justify-between"},[e("span",{class:"text-sm font-medium text-slate-500 dark:text-slate-300"},"Calendario"),e("span",{class:"inline-flex items-center rounded bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700 dark:bg-slate-800 dark:text-slate-200"},"7 días")],-1)),e("div",ws,x(g.value.calendar.upcoming_7d),1),b[9]||(b[9]=e("div",{class:"mt-2 text-sm text-slate-600 dark:text-slate-300"},"Eventos asignados próximos",-1))])):y("",!0)]),e("section",ys,[e("div",ks,[e("div",_s,[e("div",Cs,[e("div",$s,[b[10]||(b[10]=e("h2",{class:"text-lg font-semibold text-slate-900 dark:text-slate-100"},"Certificados por vencer",-1)),g.value.certificados?(a(),o("a",Es," Ver certificados ")):y("",!0)]),b[11]||(b[11]=e("p",{class:"mt-1 text-sm text-slate-600 dark:text-slate-300"},"Próximos 30 días (máx. 5)",-1))]),e("div",Is,[e("table",Ts,[b[13]||(b[13]=e("thead",{class:"bg-slate-50 text-xs uppercase text-slate-600 dark:bg-slate-800 dark:text-slate-200"},[e("tr",null,[e("th",{class:"px-6 py-3"},"Nombre"),e("th",{class:"px-6 py-3"},"RUC"),e("th",{class:"px-6 py-3"},"Tipo"),e("th",{class:"px-6 py-3"},"Vence")])],-1)),e("tbody",null,[(a(!0),o(ie,null,ue(r.value.certificados_por_vencer,c=>(a(),o("tr",{key:c.id,class:"border-t border-slate-200 hover:bg-slate-50 dark:border-slate-800 dark:hover:bg-slate-800"},[e("td",Bs,x(c.nombre),1),e("td",Ms,x(c.ruc||"—"),1),e("td",Ss,x(c.tipo||"—"),1),e("td",As,x(c.fecha_vencimiento||"—"),1)]))),128)),(h=r.value.certificados_por_vencer)!=null&&h.length?y("",!0):(a(),o("tr",Ls,[...b[12]||(b[12]=[e("td",{class:"px-6 py-4 text-sm text-slate-500 dark:text-slate-300",colspan:"4"},"Sin vencimientos próximos.",-1)])]))])])])])]),e("div",null,[e("div",Vs,[e("div",Ps,[e("div",js,[b[14]||(b[14]=e("h2",{class:"text-lg font-semibold text-slate-900 dark:text-slate-100"},"Próximos eventos",-1)),g.value.calendar?(a(),o("a",Ns,"Ver calendario")):y("",!0)]),b[15]||(b[15]=e("p",{class:"mt-1 text-sm text-slate-600 dark:text-slate-300"},"Asignados a ti (máx. 5)",-1))]),e("div",Ds,[(j=r.value.upcoming_events)!=null&&j.length?(a(),o("ul",Rs,[(a(!0),o(ie,null,ue(r.value.upcoming_events,c=>(a(),o("li",{key:c.id,class:"rounded-lg border border-slate-200 p-3 dark:border-slate-800"},[e("div",Us,x(c.title),1),e("div",Hs,[_e(x(k(c.start_at))+" ",1),c.location?(a(),o("span",zs,"· "+x(c.location),1)):y("",!0)])]))),128))])):(a(),o("div",Os,"Sin eventos próximos."))])])])]),e("section",Zs,[r.value.recent_leads?(a(),o("div",Fs,[b[16]||(b[16]=Ee('<div class="border-b border-slate-200 p-6 dark:border-slate-800"><div class="flex items-center justify-between"><h2 class="text-lg font-semibold text-slate-900 dark:text-slate-100">Últimos leads</h2><a href="/leads" class="text-sm font-medium text-blue-600 hover:underline">Ver leads</a></div><p class="mt-1 text-sm text-slate-600 dark:text-slate-300">Últimos 5 registros</p></div>',1)),e("div",qs,[(a(!0),o(ie,null,ue(r.value.recent_leads,c=>(a(),o("div",{key:c.id,class:"p-6"},[e("div",Ws,[e("div",null,[e("div",Gs,x(c.name),1),e("div",Qs,x(c.company_name||"—"),1)]),e("div",Ks,[e("div",Ys,x(i(c.amount,c.currency)),1),e("div",Js,x(k(c.created_at)),1)])])]))),128)),(D=r.value.recent_leads)!=null&&D.length?y("",!0):(a(),o("div",Xs,"Sin leads."))])])):y("",!0),r.value.recent_incidences?(a(),o("div",ea,[b[17]||(b[17]=Ee('<div class="border-b border-slate-200 p-6 dark:border-slate-800"><div class="flex items-center justify-between"><h2 class="text-lg font-semibold text-slate-900 dark:text-slate-100">Últimas incidencias</h2><a href="/backlog" class="text-sm font-medium text-blue-600 hover:underline">Ver incidencias</a></div><p class="mt-1 text-sm text-slate-600 dark:text-slate-300">Últimos 5 registros</p></div>',1)),e("div",ta,[(a(!0),o(ie,null,ue(r.value.recent_incidences,c=>(a(),o("div",{key:c.id,class:"p-6"},[e("div",sa,x(c.correlative)+" · "+x(c.title),1),e("div",aa," Prioridad: "+x(c.priority||"—")+" · Fecha: "+x(c.date||"—")+" · "+x(k(c.created_at)),1)]))),128)),(O=r.value.recent_incidences)!=null&&O.length?y("",!0):(a(),o("div",la,"Sin incidencias."))])])):y("",!0)])]))])}}},ra={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},na={class:"relative w-full max-w-2xl rounded-xl bg-white shadow-xl dark:bg-slate-900"},da={key:0,class:"mb-4 rounded-lg border border-red-200 bg-red-50 p-3 text-sm text-red-700 dark:border-red-900/40 dark:bg-red-950/30 dark:text-red-200"},ia={class:"grid grid-cols-1 gap-3 md:grid-cols-2"},ua={class:"md:col-span-2"},ca={class:"md:col-span-2"},ma={class:"relative"},ba={key:0,class:"absolute z-10 mt-1 w-full rounded-lg border border-gray-200 bg-white p-1 shadow-lg dark:border-slate-800 dark:bg-slate-950"},ga=["onClick"],xa={class:"truncate"},va={class:"ml-3 text-xs text-gray-500 dark:text-slate-400"},pa={key:1,class:"mt-1 text-xs text-gray-600 dark:text-slate-300"},fa={class:"md:col-span-2"},ha={class:"mt-5 flex items-center justify-end gap-2"},wa=["disabled"],ya={__name:"IncidenceQuickModal",setup(u){const S=_(!1),E=_(!1),g=_(""),r=_({title:"",date:"",priority:"media",notes:"",customer_id:null}),f=_(""),n=_(""),$=_([]),k=_(!1);let i=null;const N=()=>{const l=new Date,t=l.getFullYear(),s=String(l.getMonth()+1).padStart(2,"0"),d=String(l.getDate()).padStart(2,"0");return`${t}-${s}-${d}`},I=()=>{g.value="",r.value={title:"",date:N(),priority:"media",notes:"",customer_id:null},f.value="",n.value="",$.value=[],k.value=!1},w=()=>{S.value=!1,k.value=!1},b=()=>{r.value.customer_id=null,n.value=""},h=l=>{r.value.customer_id=Number(l.id),n.value=String(l.label||""),f.value=String(l.label||""),k.value=!1},j=async l=>{var t,s;try{const d=await X.get("/related-lookup",{params:{type:"customer",id:l}}),p=(s=(t=d==null?void 0:d.data)==null?void 0:t.data)==null?void 0:s.label;p?(n.value=String(p),f.value=String(p)):(n.value=`#${l}`,f.value=`#${l}`)}catch{n.value=`#${l}`,f.value=`#${l}`}},D=async()=>{var t;const l=(f.value||"").trim();if(!l||l.length<2){$.value=[],k.value=!1;return}try{const s=await X.get("/related-lookup",{params:{type:"customer",q:l,limit:8}}),d=((t=s==null?void 0:s.data)==null?void 0:t.data)??[];$.value=Array.isArray(d)?d:[],k.value=$.value.length>0}catch{$.value=[],k.value=!1}},O=()=>{r.value.customer_id=null,n.value="",i&&window.clearTimeout(i),i=window.setTimeout(()=>{D()},250)},c=l=>{var p,T,B;const t=(T=(p=l==null?void 0:l.response)==null?void 0:p.data)==null?void 0:T.errors;if(!t||typeof t!="object")return null;const s=Object.keys(t)[0],d=s?(B=t[s])==null?void 0:B[0]:null;return typeof d=="string"?d:null},R=async()=>{var t,s;E.value=!0,g.value="";const l={title:r.value.title,date:r.value.date||null,priority:r.value.priority||"media",notes:r.value.notes||null,customer_id:r.value.customer_id||null};try{await X.post("/incidencias",l),$e("Incidencia creada"),w(),window.dispatchEvent(new CustomEvent("incidencias:created"))}catch(d){g.value=c(d)??((s=(t=d==null?void 0:d.response)==null?void 0:t.data)==null?void 0:s.message)??"No se pudo crear la incidencia.",Be(g.value)}finally{E.value=!1}},P=async(l={})=>{I(),S.value=!0;const t=(l==null?void 0:l.customer_id)??(l==null?void 0:l.customerId)??null,s=(l==null?void 0:l.customer_label)??(l==null?void 0:l.customerLabel)??null;t&&(r.value.customer_id=Number(t),s?(n.value=String(s),f.value=String(s)):await j(Number(t)))},V=l=>{P((l==null?void 0:l.detail)??{})};return me(()=>{window.addEventListener("incidencias:create",V)}),ye(()=>{window.removeEventListener("incidencias:create",V),i&&window.clearTimeout(i)}),(l,t)=>(a(),U(pe,{name:"fade"},{default:ve(()=>[S.value?(a(),o("div",ra,[e("div",{class:"absolute inset-0 bg-black/50",onClick:w}),de(pe,{name:"pop"},{default:ve(()=>[e("div",na,[t[11]||(t[11]=e("div",{class:"p-5 border-b border-gray-200 dark:border-slate-800"},[e("div",{class:"text-lg font-semibold text-gray-900 dark:text-slate-100"},"Nueva incidencia"),e("div",{class:"mt-1 text-sm text-gray-600 dark:text-slate-300"}," Registra una incidencia y asígnala a un cliente. ")],-1)),e("form",{class:"p-5",onSubmit:ke(R,["prevent"])},[g.value?(a(),o("div",da,x(g.value),1)):y("",!0),e("div",ia,[e("div",ua,[t[5]||(t[5]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300"},"Nombre de la incidencia",-1)),L(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>r.value.title=s),type:"text",required:"",class:"mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100"},null,512),[[ae,r.value.title,void 0,{trim:!0}]])]),e("div",null,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300"},"Fecha",-1)),L(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>r.value.date=s),type:"date",class:"mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100"},null,512),[[ae,r.value.date]])]),e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300"},"Prioridad",-1)),L(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>r.value.priority=s),class:"mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100"},[...t[7]||(t[7]=[e("option",{value:"alta"},"Alta",-1),e("option",{value:"media"},"Media",-1),e("option",{value:"baja"},"Baja",-1)])],512),[[Ie,r.value.priority]])]),e("div",ca,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300"},"Cliente",-1)),e("div",ma,[L(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>f.value=s),type:"text",class:"mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100",placeholder:"Buscar cliente…",onInput:O,onFocus:O},null,544),[[ae,f.value,void 0,{trim:!0}]]),k.value&&$.value.length?(a(),o("div",ba,[(a(!0),o(ie,null,ue($.value,s=>(a(),o("button",{key:s.id,type:"button",class:"flex w-full items-center justify-between rounded-md px-2 py-2 text-left text-sm text-gray-800 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-200 dark:text-slate-100 dark:hover:bg-slate-900 dark:focus:ring-blue-500/30",onClick:d=>h(s)},[e("span",xa,x(s.label),1),e("span",va,"#"+x(s.id),1)],8,ga))),128))])):y("",!0),n.value?(a(),o("div",pa,[_e(" Seleccionado: "+x(n.value)+" ",1),e("button",{type:"button",class:"ml-2 text-xs font-medium text-blue-600 hover:underline",onClick:b}," Quitar ")])):y("",!0)])]),e("div",fa,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300"},"Observaciones",-1)),L(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=s=>r.value.notes=s),rows:"4",class:"mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100",placeholder:"Detalle / notas…"},null,512),[[ae,r.value.notes,void 0,{trim:!0}]])])]),e("div",ha,[e("button",{type:"button",class:"inline-flex items-center rounded-lg border border-gray-200 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-200 dark:hover:bg-slate-800",onClick:w}," Cancelar "),e("button",{type:"submit",class:"inline-flex items-center rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-blue-700 disabled:opacity-60",disabled:E.value},x(E.value?"Creando…":"Crear incidencia"),9,wa)])],32)])]),_:1})])):y("",!0)]),_:1}))}},ka=Te(ya,[["__scopeId","data-v-f7e6933a"]]),_a={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},Ca={class:"relative w-full max-w-2xl rounded-xl bg-white shadow-xl dark:bg-slate-900"},$a={key:0,class:"mb-4 rounded-lg border border-red-200 bg-red-50 p-3 text-sm text-red-700 dark:border-red-900/40 dark:bg-red-950/30 dark:text-red-200"},Ea={class:"grid grid-cols-1 gap-3 md:grid-cols-2"},Ia={class:"md:col-span-2"},Ta={class:"md:col-span-2"},Ba={class:"relative"},Ma={key:0,class:"absolute z-10 mt-1 w-full rounded-lg border border-gray-200 bg-white p-1 shadow-lg dark:border-slate-800 dark:bg-slate-950"},Sa=["onClick"],Aa={class:"truncate"},La={class:"ml-3 text-xs text-gray-500 dark:text-slate-400"},Va={key:1,class:"mt-1 text-xs text-gray-600 dark:text-slate-300"},Pa={class:"md:col-span-2"},ja={class:"mt-5 flex items-center justify-end gap-2"},Na=["disabled"],Da={__name:"IncidenceEditModal",setup(u){const S=_(!1),E=_(!1),g=_(""),r=_({id:null,title:"",date:"",priority:"media",notes:"",customer_id:null}),f=_(""),n=_(""),$=_([]),k=_(!1);let i=null;const N=()=>{g.value="",r.value={id:null,title:"",date:"",priority:"media",notes:"",customer_id:null},f.value="",n.value="",$.value=[],k.value=!1},I=()=>{S.value=!1,k.value=!1},w=()=>{r.value.customer_id=null,n.value=""},b=l=>{r.value.customer_id=Number(l.id),n.value=String(l.label||""),f.value=String(l.label||""),k.value=!1},h=async l=>{var t,s;try{const d=await X.get("/related-lookup",{params:{type:"customer",id:l}}),p=(s=(t=d==null?void 0:d.data)==null?void 0:t.data)==null?void 0:s.label;p?(n.value=String(p),f.value=String(p)):(n.value=`#${l}`,f.value=`#${l}`)}catch{n.value=`#${l}`,f.value=`#${l}`}},j=async()=>{var t;const l=(f.value||"").trim();if(!l||l.length<2){$.value=[],k.value=!1;return}try{const s=await X.get("/related-lookup",{params:{type:"customer",q:l,limit:8}}),d=((t=s==null?void 0:s.data)==null?void 0:t.data)??[];$.value=Array.isArray(d)?d:[],k.value=$.value.length>0}catch{$.value=[],k.value=!1}},D=()=>{r.value.customer_id=null,n.value="",i&&window.clearTimeout(i),i=window.setTimeout(()=>{j()},250)},O=l=>{var p,T,B;const t=(T=(p=l==null?void 0:l.response)==null?void 0:p.data)==null?void 0:T.errors;if(!t||typeof t!="object")return null;const s=Object.keys(t)[0],d=s?(B=t[s])==null?void 0:B[0]:null;return typeof d=="string"?d:null},c=l=>{if(!l)return"";try{const t=String(l);if(/^\d{4}-\d{2}-\d{2}$/.test(t))return t;const s=new Date(t);if(Number.isNaN(s.getTime()))return"";const d=s.getFullYear(),p=String(s.getMonth()+1).padStart(2,"0"),T=String(s.getDate()).padStart(2,"0");return`${d}-${p}-${T}`}catch{return""}},R=async(l={})=>{var T,B;N();const t=(l==null?void 0:l.incidence)??(l==null?void 0:l.item)??l,s=(t==null?void 0:t.id)??(l==null?void 0:l.id)??null;if(!s)return;r.value.id=Number(s),r.value.title=String((t==null?void 0:t.title)??""),r.value.date=c((t==null?void 0:t.date)??""),r.value.priority=String((t==null?void 0:t.priority)??"media")||"media",r.value.notes=String((t==null?void 0:t.notes)??"");const d=(t==null?void 0:t.customer_id)??(l==null?void 0:l.customer_id)??null;r.value.customer_id=d?Number(d):null,S.value=!0;const p=((T=t==null?void 0:t.customer)==null?void 0:T.company_name)||((B=t==null?void 0:t.customer)==null?void 0:B.name)||(l==null?void 0:l.customer_label)||null;r.value.customer_id&&(p?(n.value=String(p),f.value=String(p)):await h(r.value.customer_id))},P=async()=>{var t,s,d;if(!r.value.id)return;E.value=!0,g.value="";const l={title:r.value.title,date:r.value.date||null,priority:r.value.priority||"media",notes:r.value.notes||null,customer_id:r.value.customer_id||null};try{const p=await X.put(`/incidencias/${r.value.id}`,l),T=(t=p==null?void 0:p.data)==null?void 0:t.data;$e("Incidencia actualizada"),I(),window.dispatchEvent(new CustomEvent("incidencias:updated",{detail:{incidence:T}}))}catch(p){g.value=O(p)??((d=(s=p==null?void 0:p.response)==null?void 0:s.data)==null?void 0:d.message)??"No se pudo actualizar la incidencia.",Be(g.value)}finally{E.value=!1}},V=l=>{R((l==null?void 0:l.detail)??{})};return me(()=>{window.addEventListener("incidencias:edit",V)}),ye(()=>{window.removeEventListener("incidencias:edit",V),i&&window.clearTimeout(i)}),(l,t)=>(a(),U(pe,{name:"fade"},{default:ve(()=>[S.value?(a(),o("div",_a,[e("div",{class:"absolute inset-0 bg-black/50",onClick:I}),de(pe,{name:"pop"},{default:ve(()=>[e("div",Ca,[t[11]||(t[11]=e("div",{class:"p-5 border-b border-gray-200 dark:border-slate-800"},[e("div",{class:"text-lg font-semibold text-gray-900 dark:text-slate-100"},"Editar incidencia"),e("div",{class:"mt-1 text-sm text-gray-600 dark:text-slate-300"}," Actualiza título, cliente, prioridad, fecha y notas. ")],-1)),e("form",{class:"p-5",onSubmit:ke(P,["prevent"])},[g.value?(a(),o("div",$a,x(g.value),1)):y("",!0),e("div",Ea,[e("div",Ia,[t[5]||(t[5]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300"},"Nombre de la incidencia",-1)),L(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>r.value.title=s),type:"text",required:"",class:"mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100"},null,512),[[ae,r.value.title,void 0,{trim:!0}]])]),e("div",null,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300"},"Fecha",-1)),L(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>r.value.date=s),type:"date",class:"mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100"},null,512),[[ae,r.value.date]])]),e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300"},"Prioridad",-1)),L(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>r.value.priority=s),class:"mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100"},[...t[7]||(t[7]=[e("option",{value:"alta"},"Alta",-1),e("option",{value:"media"},"Media",-1),e("option",{value:"baja"},"Baja",-1)])],512),[[Ie,r.value.priority]])]),e("div",Ta,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300"},"Cliente",-1)),e("div",Ba,[L(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>f.value=s),type:"text",class:"mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100",placeholder:"Buscar cliente…",onInput:D,onFocus:D},null,544),[[ae,f.value,void 0,{trim:!0}]]),k.value&&$.value.length?(a(),o("div",Ma,[(a(!0),o(ie,null,ue($.value,s=>(a(),o("button",{key:s.id,type:"button",class:"flex w-full items-center justify-between rounded-md px-2 py-2 text-left text-sm text-gray-800 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-200 dark:text-slate-100 dark:hover:bg-slate-900 dark:focus:ring-blue-500/30",onClick:d=>b(s)},[e("span",Aa,x(s.label),1),e("span",La,"#"+x(s.id),1)],8,Sa))),128))])):y("",!0),n.value?(a(),o("div",Va,[_e(" Seleccionado: "+x(n.value)+" ",1),e("button",{type:"button",class:"ml-2 text-xs font-medium text-blue-600 hover:underline",onClick:w}," Quitar ")])):y("",!0)])]),e("div",Pa,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300"},"Observaciones",-1)),L(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=s=>r.value.notes=s),rows:"4",class:"mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100",placeholder:"Detalle / notas…"},null,512),[[ae,r.value.notes,void 0,{trim:!0}]])])]),e("div",ja,[e("button",{type:"button",class:"inline-flex items-center rounded-lg border border-gray-200 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-200 dark:hover:bg-slate-800",onClick:I}," Cancelar "),e("button",{type:"submit",class:"inline-flex items-center rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-blue-700 disabled:opacity-60",disabled:E.value||!r.value.id},x(E.value?"Guardando…":"Guardar cambios"),9,Na)])],32)])]),_:1})])):y("",!0)]),_:1}))}},Oa=Te(Da,[["__scopeId","data-v-39ef46d1"]]),Ra={class:"min-h-screen flex flex-col bg-gradient-to-br from-blue-50/60 via-gray-50 to-gray-50 dark:from-slate-950 dark:via-slate-950 dark:to-slate-900"},Ua={class:"flex-1 p-4 pt-20"},Ha={class:"max-w-7xl mx-auto w-full"},za={class:"flex items-center justify-between mb-6"},Za={class:"border-l-4 border-blue-600 pl-4"},Fa={class:"text-2xl font-semibold text-gray-900 dark:text-slate-100"},qa={class:"mt-1 text-sm text-gray-600 dark:text-slate-300"},Wa={__name:"App",setup(u){const S=Q(()=>G(()=>import("./UsersTable-DngZ3-6L.js"),__vite__mapDeps([0,1,2,3,4]))),E=Q(()=>G(()=>import("./RolesTable-ChO9PHeK.js"),__vite__mapDeps([5,1,4]))),g=Q(()=>G(()=>import("./LeadsBoard-CWuYQzCb.js"),__vite__mapDeps([6,1,4,7,2,8]))),r=Q(()=>G(()=>import("./LeadsTable-YEMTfbXT.js"),__vite__mapDeps([9,4,2,1]))),f=Q(()=>G(()=>import("./LeadsWhatsAppCampaign-CruOvj3h.js"),__vite__mapDeps([10,1,4]))),n=Q(()=>G(()=>import("./LeadsEmailCampaign-BxbhdKc1.js"),__vite__mapDeps([11,1,4]))),$=Q(()=>G(()=>import("./CustomersTable-DJzjJ62n.js"),__vite__mapDeps([12,1,4,7,2,8]))),k=Q(()=>G(()=>import("./CalendarView-QuDMRBJa.js"),__vite__mapDeps([13,7,4,1,2,8,14]))),i=Q(()=>G(()=>import("./IncidenciasTable-CSDfStHu.js"),__vite__mapDeps([15,1,4,7,2,8]))),N=Q(()=>G(()=>import("./IncidenciasBoard-DXbychUo.js"),__vite__mapDeps([16,1,4,2,3]))),I=Q(()=>G(()=>import("./BacklogBoard-nyIU_hgg.js"),__vite__mapDeps([17,1,4,7,2,8]))),w=Q(()=>G(()=>import("./PostventaCustomersTable-Bh8SgCUA.js"),__vite__mapDeps([18,1,4,7,2,8]))),b=Q(()=>G(()=>import("./ContadoresTable-CF3m5rvG.js"),__vite__mapDeps([19,1,4,7,2,8]))),h=Q(()=>G(()=>import("./CertificadosTable-Bi4ICypG.js"),__vite__mapDeps([20,1,4,7,2,8]))),j=Q(()=>G(()=>import("./LostLeadsList-DVX-UU05.js"),__vite__mapDeps([21,1,4,7,2,8]))),D=Q(()=>G(()=>import("./WaitingLeadsList-BBdIfewz.js"),__vite__mapDeps([22,1,4,7,2,8]))),O=Q(()=>G(()=>import("./SettingsView-DiIDaH1M.js"),__vite__mapDeps([23,1]))),c=window.location.pathname.replace(/\/+$/,"")||"/",R=C(()=>c.startsWith("/users")),P=C(()=>c.startsWith("/roles")),V=C(()=>c==="/leads"),l=C(()=>c==="/leads/list"),t=C(()=>c==="/leads/whatsapp"),s=C(()=>c==="/leads/email"),d=C(()=>c.startsWith("/leads")),p=C(()=>c.startsWith("/customers")),T=C(()=>c.startsWith("/calendar")),B=C(()=>c.startsWith("/incidencias")),Z=C(()=>B.value&&c==="/incidencias/board"?"board":"table"),F=C(()=>c.startsWith("/backlog")),q=C(()=>c==="/postventa/clientes"),W=C(()=>c==="/postventa/contadores"),J=C(()=>c==="/postventa/certificados"),ee=C(()=>c.startsWith("/configuracion")),te=C(()=>B.value||F.value),se=C(()=>R.value?"Usuarios":P.value?"Roles":ee.value?"Configuración":t.value?"WhatsApp":s.value?"Email":d.value?"Leads":c==="/desistidos"?"Desistidos":c==="/espera"?"Zona de espera":p.value?"Clientes":T.value?"Calendario":te.value?"Incidencias":q.value?"Clientes":W.value?"Contadores":J.value?"Certificados":"Dashboard"),le=C(()=>R.value?"Gestión de usuarios del sistema":P.value?"Crea roles y asigna permisos":ee.value?"Personalización del sistema":t.value?"Campañas manuales asistidas (sin API)":s.value?"Campañas informativas por correo (con baja automática)":V.value?"Pipeline de oportunidades":l.value?"Gestión de leads por etapas":c==="/desistidos"?"Leads marcados como desistidos":c==="/espera"?"Leads enviados a zona de espera":p.value?"Listado de clientes":T.value?"Agenda y recordatorios":B.value?`Registro y seguimiento de incidencias (vista ${Z.value==="board"?"kanban":"lista"})`:F.value?"Registro y seguimiento de incidencias (vista backlog)":q.value?"Clientes (postventa)":W.value?"Gestión de contadores":J.value?"Gestión de certificados":"Resumen general del sistema");C(()=>te.value||q.value||W.value||J.value);const re=C(()=>c==="/desistidos"),ne=C(()=>c==="/espera"),oe=()=>{d.value&&window.location.assign(V.value?"/leads/list":"/leads")},ge=()=>{F.value?window.location.assign("/incidencias"):B.value&&(Z.value==="table"?window.location.assign("/incidencias/board"):window.location.assign("/backlog"))},xe=()=>{window.dispatchEvent(new CustomEvent("roles:create"))},fe=()=>{window.dispatchEvent(new CustomEvent("leads:create-quick"))},H=()=>{window.dispatchEvent(new CustomEvent("incidencias:create"))},m=()=>{window.dispatchEvent(new CustomEvent("contadores:create"))},K=()=>{window.dispatchEvent(new CustomEvent("certificados:create"))},ce=_(!0),Me=()=>{ce.value=!ce.value};return me(()=>{}),(Ga,Qa)=>(a(),o("div",Ra,[de(mt,{"sidebar-collapsed":ce.value,onToggleSidebar:Me},null,8,["sidebar-collapsed"]),de(qt,{collapsed:ce.value},null,8,["collapsed"]),e("main",{class:A(["transition-[margin] duration-200 flex-1 flex flex-col",ce.value?"sm:ml-20":"sm:ml-64"])},[e("div",Ua,[e("div",Ha,[e("div",za,[e("div",Za,[e("h1",Fa,x(se.value),1),e("p",qa,x(le.value),1)]),P.value?(a(),o("button",{key:0,type:"button",class:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg shadow-sm hover:bg-blue-700 hover:shadow focus:outline-none focus:ring-4 focus:ring-blue-300",onClick:xe}," Crear rol ")):V.value||l.value?(a(),o("button",{key:1,type:"button",class:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg shadow-sm hover:bg-blue-700 hover:shadow focus:outline-none focus:ring-4 focus:ring-blue-300",onClick:fe}," Lead rápido ")):y("",!0),V.value||l.value?(a(),o("button",{key:2,type:"button",class:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-200 rounded-lg shadow-sm hover:bg-blue-50 hover:border-blue-200 hover:text-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 dark:text-slate-200 dark:bg-slate-900 dark:border-slate-800 dark:hover:bg-slate-800",onClick:oe},x(V.value?"Vista lista":"Vista pipeline"),1)):te.value?(a(),o("button",{key:3,type:"button",class:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-200 rounded-lg shadow-sm hover:bg-blue-50 hover:border-blue-200 hover:text-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 dark:text-slate-200 dark:bg-slate-900 dark:border-slate-800 dark:hover:bg-slate-800",onClick:ge},x(F.value?"Vista lista":"Vista backlog"),1)):y("",!0),te.value||q.value?(a(),o("button",{key:5,type:"button",class:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg shadow-sm hover:bg-blue-700 hover:shadow focus:outline-none focus:ring-4 focus:ring-blue-300",onClick:H}," Nueva incidencia ")):W.value?(a(),o("button",{key:6,type:"button",class:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg shadow-sm hover:bg-blue-700 hover:shadow focus:outline-none focus:ring-4 focus:ring-blue-300",onClick:m}," Nuevo contador ")):J.value?(a(),o("button",{key:7,type:"button",class:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg shadow-sm hover:bg-blue-700 hover:shadow focus:outline-none focus:ring-4 focus:ring-blue-300",onClick:K}," Nuevo certificado ")):y("",!0)]),R.value?(a(),U(v(S),{key:0})):P.value?(a(),U(v(E),{key:1})):V.value?(a(),U(v(g),{key:2})):l.value?(a(),U(v(r),{key:3})):t.value?(a(),U(v(f),{key:4})):s.value?(a(),U(v(n),{key:5})):B.value&&Z.value==="table"?(a(),U(v(i),{key:6})):B.value&&Z.value==="board"?(a(),U(v(N),{key:7})):F.value?(a(),U(v(I),{key:8})):q.value?(a(),U(v(w),{key:9})):W.value?(a(),U(v(b),{key:10})):J.value?(a(),U(v(h),{key:11})):p.value?(a(),U(v($),{key:12})):re.value?(a(),U(v(j),{key:13})):ne.value?(a(),U(v(D),{key:14})):ee.value?(a(),U(v(O),{key:15})):T.value?(a(),U(v(k),{key:16})):(a(),U(oa,{key:17}))])]),de(Yt,{class:"mt-auto w-full"})],2),de(ka),de(Oa)]))}},rl=Object.freeze(Object.defineProperty({__proto__:null,default:Wa},Symbol.toStringTag,{value:"Module"}));export{rl as A,$e as a,al as b,tl as c,ll as d,Ve as e,ol as f,Pe as g,sl as p,Be as t};
