const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/UsersTable-D_j8AwST.js","assets/app-D0PWajC2.js","assets/vendor-utils-Czy7fllw.js","assets/vendor-vue-Diyp6CFE.js","assets/vendor-ui-BsDgRXDF.js","assets/BaseModal-Coysbt3i.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/RolesTable-HmGilZH4.js","assets/LeadsBoard-CrTc4yMQ.js","assets/LeadsTable-CNjLR_q5.js","assets/LeadsWhatsAppCampaign-CB9LY_8d.js","assets/LeadsEmailCampaign-DeXcPzbf.js","assets/CalendarView-BQAgF3bh.js","assets/notifications-Dl6xZJx9.js","assets/calendar-notifications-CrOVVuzr.js","assets/CalendarView-BFEl6N-c.css","assets/IncidenciasTable-BgXcpGij.js","assets/IncidenciasBoard-D_mHyYbN.js","assets/BacklogBoard-DAL5Qtnm.js","assets/PostventaCustomersTable-B6XFfo0Z.js","assets/ContadoresTable-BwEfST_i.js","assets/CertificadosTable-BeOijefR.js","assets/LostLeadsList-ADs-FJEI.js","assets/WaitingLeadsList-xL-NRics.js","assets/SettingsView-BY--BNwm.js","assets/SettingsView-C21dmcAW.css"])))=>i.map(i=>d[i]);
import{_ as Q,t as We}from"./app-D0PWajC2.js";import{e as V,r as L,o as ve,f as fe,g as c,i as o,j as e,w as z,k as A,t as $,v as G,l as Te,F as ue,m as ce,u as C,n as U,p as Ge,q as W,s as we,T as Ee,x as he,y as ke,z as be,A as me,B as De,C as Le,D as _e,E as Ce,G as Ue,b as J}from"./vendor-vue-Diyp6CFE.js";import{a as oe}from"./vendor-utils-Czy7fllw.js";import{S as q}from"./vendor-ui-BsDgRXDF.js";import{_ as He}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ye=q.mixin({buttonsStyling:!1,customClass:{popup:"rounded-xl border border-gray-200 bg-white text-gray-900 shadow-xl dark:!border-slate-800 dark:!bg-slate-900 dark:!text-slate-100",backdrop:"bg-black/60",title:"text-base font-semibold text-gray-900 dark:text-slate-100",htmlContainer:"text-sm text-gray-600 dark:text-slate-300",actions:"gap-2",confirmButton:"inline-flex items-center rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-300 disabled:opacity-60",cancelButton:"inline-flex items-center rounded-lg border border-gray-200 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-4 focus:ring-blue-100 disabled:opacity-60 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-200 dark:hover:bg-slate-800"}}),Me=q.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:2500,timerProgressBar:!0,didOpen:l=>{l.addEventListener("mouseenter",q.stopTimer),l.addEventListener("mouseleave",q.resumeTimer)},customClass:{popup:"rounded-xl border border-gray-200 bg-white text-gray-900 shadow-lg dark:!border-slate-800 dark:!bg-slate-900 dark:!text-slate-100",title:"text-sm font-medium",htmlContainer:"text-sm"}});async function Ke({title:l,text:y,confirmText:v="Aceptar",cancelText:x="Cancelar",icon:E="question"}={}){return(await ye.fire({title:l,text:y,icon:E,showCancelButton:!0,confirmButtonText:v,cancelButtonText:x})).isConfirmed===!0}function $e(l){return Me.fire({icon:"success",title:l})}function Ie(l){return Me.fire({icon:"error",title:l})}function Qe(l){return Me.fire({icon:"info",title:l})}function T(l){return String(l??"").replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;")}const Ae=["ATLANTIS ONLINE","ATLANTIS VIP","ATLANTIS POS","ATLANTIS FAST","LORITO"],Je=[{value:1,label:"Enero"},{value:2,label:"Febrero"},{value:3,label:"Marzo"},{value:4,label:"Abril"},{value:5,label:"Mayo"},{value:6,label:"Junio"},{value:7,label:"Julio"},{value:8,label:"Agosto"},{value:9,label:"Septiembre"},{value:10,label:"Octubre"},{value:11,label:"Noviembre"},{value:12,label:"Diciembre"}];let Se=null;function Fe(){if(typeof window>"u")return!1;const l=window.location.hostname;return l==="localhost"||l==="127.0.0.1"||l==="::1"}function Be(l="sw-local-autofill-btn"){return Fe()?`
    <div class="rounded-lg border border-amber-200 bg-amber-50 px-3 py-2 text-xs text-amber-800 dark:border-amber-800/40 dark:bg-amber-950/20 dark:text-amber-300">
      Solo local: usa el botón <span class="font-semibold">Rellenar test</span> para autocompletar el formulario con datos aleatorios.
      <button id="${l}" type="button" class="ml-2 inline-flex items-center rounded-md border border-amber-300 bg-white px-2 py-1 text-xs font-medium text-amber-800 hover:bg-amber-100 dark:border-amber-700 dark:bg-slate-900 dark:text-amber-300 dark:hover:bg-amber-900/30">Rellenar test</button>
    </div>
  `:""}async function Ne(){return Fe()?(Se||(Se=Q(()=>import("./customerModalAutofill.local-CpHl0RE-.js"),[]).catch(()=>null)),Se):null}async function Ve(l,y){const v=document.getElementById(l);v&&v.addEventListener("click",y)}function Ze(l=""){const y=String(l??"").trim();return[`<option value="" ${y?"":"selected"}>(opcional)</option>`,...Ae.map(x=>`<option value="${x}" ${y===x?"selected":""}>${x}</option>`)].join("")}function qe(l=""){const y=Number.parseInt(String(l??""),10);return[`<option value="" ${Number.isInteger(y)?"":"selected"}>(mes)</option>`,...Je.map(x=>`<option value="${x.value}" ${y===x.value?"selected":""}>${x.label}</option>`)].join("")}async function Sl(l={}){const y=(l.document_number??"").trim(),v=l.precio??"",x=l.rubro??"",E=l.observacion??"",b=`
    <div class="w-full max-h-[70vh] overflow-y-auto pr-1 text-left">
      <div class="text-xs text-gray-500 dark:text-slate-400">Los campos con <span class="font-semibold text-red-500">*</span> son obligatorios.</div>

      <div class="mt-3 grid w-full grid-cols-2 gap-4">
        <div class="w-full">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Comercio <span class="text-red-500">*</span></label>
          <input id="sw-cust-company_name" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${T(l.company_name)}" />
        </div>
        <div class="w-full">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Rubro</label>
          <input id="sw-cust-rubro" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${T(x)}" />
        </div>

        <div class="w-full">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Contacto <span class="text-red-500">*</span></label>
          <input id="sw-cust-contact_name" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${T(l.contact_name)}" />
        </div>
        <div class="w-full">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Año <span class="text-red-500">*</span></label>
          <input id="sw-cust-fecha_contacto_anio" type="number" min="2000" max="2100" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${T(l.fecha_contacto_anio)}" />
        </div>

        <div class="w-full">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Celular <span class="text-red-500">*</span></label>
          <input id="sw-cust-contact_phone" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${T(l.contact_phone)}" />
        </div>
        <div class="w-full">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Mes <span class="text-red-500">*</span></label>
          <select id="sw-cust-fecha_contacto_mes" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100">
            ${qe(l.fecha_contacto_mes)}
          </select>
        </div>

        <div class="w-full">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Ciudad</label>
          <input id="sw-cust-company_address" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${T(l.company_address)}" />
        </div>
        <div class="w-full">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Link</label>
          <input id="sw-cust-link" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${T(l.link)}" />
        </div>

        <div class="w-full">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Precio <span class="text-red-500">*</span></label>
          <input id="sw-cust-precio" type="number" step="0.01" min="0" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${T(v)}" />
        </div>
        <div class="w-full">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Usuario</label>
          <input id="sw-cust-usuario" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${T(l.usuario)}" />
        </div>

        <div class="w-full">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">RUC <span class="text-red-500">*</span></label>
          <input id="sw-cust-document_number" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" maxlength="11" value="${T(y)}" />
          <div class="mt-1 text-xs text-gray-500 dark:text-slate-400">Exactamente 11 dígitos numéricos</div>
        </div>
        <div class="w-full">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Contraseña</label>
          <input id="sw-cust-contrasena" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${T(l.contrasena)}" />
        </div>

        <div class="w-full col-span-2">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Servidor</label>
          <select id="sw-cust-servidor" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100">
            ${Ze(l.servidor)}
          </select>
        </div>

        <div class="w-full col-span-2">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Observación</label>
          <textarea id="sw-cust-observacion" rows="3" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" placeholder="Observaciones del cliente...">${T(E)}</textarea>
        </div>
      </div>

      <input id="sw-cust-name" type="hidden" value="${T(l.name)}" />
      <input id="sw-cust-contact_email" type="hidden" value="${T(l.contact_email)}" />
      <input id="sw-cust-document_type" type="hidden" value="ruc" />
    </div>
  `,u=await ye.fire({title:"Editar Cliente Postventa",html:b,width:"980px",focusConfirm:!1,showCancelButton:!0,confirmButtonText:"Guardar",cancelButtonText:"Cancelar",preConfirm:()=>{var a,n,r,S,O,j,Z,Y,X,ee,ae,te,le,se,ne,de,ie,F,p,K,re,ge,pe,xe,Oe,Pe,Re,je;const g=((n=(a=document.getElementById("sw-cust-contact_name"))==null?void 0:a.value)==null?void 0:n.trim())??"",_=((S=(r=document.getElementById("sw-cust-company_name"))==null?void 0:r.value)==null?void 0:S.trim())??"",i=((j=(O=document.getElementById("sw-cust-contact_phone"))==null?void 0:O.value)==null?void 0:j.trim())??"",h=((Y=(Z=document.getElementById("sw-cust-company_address"))==null?void 0:Z.value)==null?void 0:Y.trim())??"",k=((ee=(X=document.getElementById("sw-cust-precio"))==null?void 0:X.value)==null?void 0:ee.trim())??"",f=((te=(ae=document.getElementById("sw-cust-rubro"))==null?void 0:ae.value)==null?void 0:te.trim())??"",w=((se=(le=document.getElementById("sw-cust-link"))==null?void 0:le.value)==null?void 0:se.trim())??"",I=((de=(ne=document.getElementById("sw-cust-usuario"))==null?void 0:ne.value)==null?void 0:de.trim())??"",R=((F=(ie=document.getElementById("sw-cust-contrasena"))==null?void 0:ie.value)==null?void 0:F.trim())??"",H=((K=(p=document.getElementById("sw-cust-servidor"))==null?void 0:p.value)==null?void 0:K.trim())??"",m=((ge=(re=document.getElementById("sw-cust-observacion"))==null?void 0:re.value)==null?void 0:ge.trim())??"",B=((xe=(pe=document.getElementById("sw-cust-fecha_contacto_mes"))==null?void 0:pe.value)==null?void 0:xe.trim())??"",P=((Pe=(Oe=document.getElementById("sw-cust-fecha_contacto_anio"))==null?void 0:Oe.value)==null?void 0:Pe.trim())??"",N=((je=(Re=document.getElementById("sw-cust-document_number"))==null?void 0:Re.value)==null?void 0:je.trim())??"",D=k.replace(",","."),M=Number.parseFloat(D),d=g||_;if(!_)return q.showValidationMessage("El comercio es requerido."),!1;if(!g)return q.showValidationMessage("El contacto es requerido."),!1;if(!i)return q.showValidationMessage("El celular es requerido."),!1;if(!k||Number.isNaN(M)||M<0)return q.showValidationMessage("El precio es requerido y debe ser válido."),!1;if(H&&!Ae.includes(H))return q.showValidationMessage("El servidor debe ser ATLANTIS ONLINE, ATLANTIS VIP o ATLANTIS POS."),!1;if(!B||!P)return q.showValidationMessage("Mes y año son obligatorios."),!1;const s=Number.parseInt(B,10),t=Number.parseInt(P,10);return!Number.isInteger(s)||s<1||s>12?(q.showValidationMessage("El mes de contacto debe estar entre 1 y 12."),!1):!Number.isInteger(t)||t<2e3||t>2100?(q.showValidationMessage("El año de contacto no es válido."),!1):/^\d{11}$/.test(N)?{name:d,contact_name:g||null,company_name:_||null,contact_phone:i||null,contact_email:l.contact_email||null,company_address:h||null,precio:M,rubro:f||null,mes:String(s),link:w||null,usuario:I||null,contrasena:R||null,servidor:H||null,observacion:m||null,fecha_contacto_mes:s,fecha_contacto_anio:t,document_type:"ruc",document_number:N||null}:(q.showValidationMessage("El RUC es obligatorio y debe tener 11 dígitos."),!1)}});return u.isConfirmed?u.value:null}async function Il(){const l={contact_name:"",company_name:"",contact_phone:"",company_address:"",precio:"",rubro:"",link:"",usuario:"",contrasena:"",servidor:"",observacion:"",fecha_contacto_mes:String(new Date().getMonth()+1),fecha_contacto_anio:String(new Date().getFullYear()),document_number:""},y=`
    <div class="w-full max-h-[70vh] overflow-y-auto pr-1 text-left">
      <div class="text-xs text-gray-500 dark:text-slate-400">Los campos con <span class="font-semibold text-red-500">*</span> son obligatorios.</div>
      <div class="mt-2">${Be("sw-cust-autofill-create-local")}</div>

      <div class="mt-3 grid w-full grid-cols-2 gap-4">
        <div class="w-full">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Comercio <span class="text-red-500">*</span></label>
          <input id="sw-cust-company_name" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${T(l.company_name)}" />
        </div>
        <div class="w-full">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Rubro</label>
          <input id="sw-cust-rubro" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${T(l.rubro)}" />
        </div>

        <div class="w-full">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Contacto <span class="text-red-500">*</span></label>
          <input id="sw-cust-contact_name" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${T(l.contact_name)}" />
        </div>
        <div class="w-full">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Año <span class="text-red-500">*</span></label>
          <input id="sw-cust-fecha_contacto_anio" type="number" min="2000" max="2100" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${T(l.fecha_contacto_anio)}" />
        </div>

        <div class="w-full">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Celular <span class="text-red-500">*</span></label>
          <input id="sw-cust-contact_phone" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${T(l.contact_phone)}" />
        </div>
        <div class="w-full">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Mes <span class="text-red-500">*</span></label>
          <select id="sw-cust-fecha_contacto_mes" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100">
            ${qe(l.fecha_contacto_mes)}
          </select>
        </div>

        <div class="w-full">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Ciudad</label>
          <input id="sw-cust-company_address" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${T(l.company_address)}" />
        </div>
        <div class="w-full">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Link</label>
          <input id="sw-cust-link" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${T(l.link)}" />
        </div>

        <div class="w-full">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Precio <span class="text-red-500">*</span></label>
          <input id="sw-cust-precio" type="number" step="0.01" min="0" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${T(l.precio)}" />
        </div>
        <div class="w-full">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Usuario</label>
          <input id="sw-cust-usuario" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${T(l.usuario)}" />
        </div>

        <div class="w-full">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">RUC <span class="text-red-500">*</span></label>
          <input id="sw-cust-document_number" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" maxlength="11" value="${T(l.document_number)}" />
          <div class="mt-1 text-xs text-gray-500 dark:text-slate-400">Exactamente 11 dígitos numéricos</div>
        </div>
        <div class="w-full">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Contraseña</label>
          <input id="sw-cust-contrasena" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${T(l.contrasena)}" />
        </div>

        <div class="w-full col-span-2">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Servidor</label>
          <select id="sw-cust-servidor" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100">
            ${Ze(l.servidor)}
          </select>
        </div>

        <div class="w-full col-span-2">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Observación</label>
          <textarea id="sw-cust-observacion" rows="3" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" placeholder="Observaciones del cliente...">${T(l.observacion)}</textarea>
        </div>
      </div>

      <input id="sw-cust-name" type="hidden" value="" />
      <input id="sw-cust-contact_email" type="hidden" value="" />
      <input id="sw-cust-document_type" type="hidden" value="ruc" />
    </div>
  `,v=await ye.fire({title:"Agregar Cliente Postventa",html:y,width:"980px",focusConfirm:!1,showCancelButton:!0,confirmButtonText:"Crear",cancelButtonText:"Cancelar",didOpen:async()=>{const x=await Ne();x!=null&&x.autofillCustomerModalForm&&await Ve("sw-cust-autofill-create-local",()=>x.autofillCustomerModalForm())},preConfirm:()=>{var M,d,s,t,a,n,r,S,O,j,Z,Y,X,ee,ae,te,le,se,ne,de,ie,F,p,K,re,ge,pe,xe;const x=((d=(M=document.getElementById("sw-cust-contact_name"))==null?void 0:M.value)==null?void 0:d.trim())??"",E=((t=(s=document.getElementById("sw-cust-company_name"))==null?void 0:s.value)==null?void 0:t.trim())??"",b=((n=(a=document.getElementById("sw-cust-contact_phone"))==null?void 0:a.value)==null?void 0:n.trim())??"",u=((S=(r=document.getElementById("sw-cust-company_address"))==null?void 0:r.value)==null?void 0:S.trim())??"",g=((j=(O=document.getElementById("sw-cust-precio"))==null?void 0:O.value)==null?void 0:j.trim())??"",_=((Y=(Z=document.getElementById("sw-cust-rubro"))==null?void 0:Z.value)==null?void 0:Y.trim())??"",i=((ee=(X=document.getElementById("sw-cust-link"))==null?void 0:X.value)==null?void 0:ee.trim())??"",h=((te=(ae=document.getElementById("sw-cust-usuario"))==null?void 0:ae.value)==null?void 0:te.trim())??"",k=((se=(le=document.getElementById("sw-cust-contrasena"))==null?void 0:le.value)==null?void 0:se.trim())??"",f=((de=(ne=document.getElementById("sw-cust-servidor"))==null?void 0:ne.value)==null?void 0:de.trim())??"",w=((F=(ie=document.getElementById("sw-cust-observacion"))==null?void 0:ie.value)==null?void 0:F.trim())??"",I=((K=(p=document.getElementById("sw-cust-fecha_contacto_mes"))==null?void 0:p.value)==null?void 0:K.trim())??"",R=((ge=(re=document.getElementById("sw-cust-fecha_contacto_anio"))==null?void 0:re.value)==null?void 0:ge.trim())??"",H=((xe=(pe=document.getElementById("sw-cust-document_number"))==null?void 0:pe.value)==null?void 0:xe.trim())??"",m=g.replace(",","."),B=Number.parseFloat(m),P=x||E;if(!E)return q.showValidationMessage("El comercio es requerido."),!1;if(!x)return q.showValidationMessage("El contacto es requerido."),!1;if(!b)return q.showValidationMessage("El celular es requerido."),!1;if(!g||Number.isNaN(B)||B<0)return q.showValidationMessage("El precio es requerido y debe ser válido."),!1;if(!/^\d{11}$/.test(H))return q.showValidationMessage("El RUC es obligatorio y debe tener 11 dígitos."),!1;if(!I||!R)return q.showValidationMessage("Mes y año son obligatorios."),!1;if(f&&!Ae.includes(f))return q.showValidationMessage("El servidor debe ser ATLANTIS ONLINE, ATLANTIS VIP o ATLANTIS POS."),!1;const N=Number.parseInt(I,10),D=Number.parseInt(R,10);return!Number.isInteger(N)||N<1||N>12?(q.showValidationMessage("El mes de contacto debe estar entre 1 y 12."),!1):!Number.isInteger(D)||D<2e3||D>2100?(q.showValidationMessage("El año de contacto no es válido."),!1):{name:P,contact_name:x||null,company_name:E||null,contact_phone:b||null,contact_email:null,company_address:u||null,precio:B,rubro:_||null,mes:String(N),link:i||null,usuario:h||null,contrasena:k||null,servidor:f||null,observacion:w||null,fecha_contacto_mes:N,fecha_contacto_anio:D,document_type:"ruc",document_number:H||null}}});return v.isConfirmed?v.value:null}async function Tl(){return Ye({nro:"",comercio:"",nom_contador:"",titular_tlf:"",telefono:"",telefono_actu:"",link:"",usuario:"",contrasena:"",servidor:"",customer:null},!0)}async function Ye(l={},y=!1){var E;(E=l==null?void 0:l.customer)==null||E.id;const v=`
    <div class="grid gap-3 text-left">
      ${y?Be("sw-cont-autofill-create-local"):""}
      <div class="grid grid-cols-1 gap-3 ${y?"":"sm:grid-cols-2"}">
        <div${y?' style="display: none;"':""}>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Nro</label>
          <input id="sw-cont-nro" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${T(l.nro)}"${y?"":" readonly"} />
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Comercio</label>
          <input id="sw-cont-comercio" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${T(l.comercio)}" />
        </div>
      </div>

      <div>
        <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Nombre del contador</label>
        <input id="sw-cont-nom_contador" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${T(l.nom_contador)}" />
      </div>

      <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Titular tlf</label>
          <input id="sw-cont-titular_tlf" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${T(l.titular_tlf)}" />
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Teléfono</label>
          <input id="sw-cont-telefono" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${T(l.telefono)}" />
        </div>
      </div>

      <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Teléfono act.</label>
          <input id="sw-cont-telefono_actu" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${T(l.telefono_actu)}" />
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Servidor</label>
          <input id="sw-cont-servidor" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${T(l.servidor)}" />
        </div>
      </div>

      <div>
        <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Link</label>
        <input id="sw-cont-link" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${T(l.link)}" />
      </div>

      <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Usuario</label>
          <input id="sw-cont-usuario" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${T(l.usuario)}" />
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Contraseña</label>
          <input id="sw-cont-contrasena" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${T(l.contrasena)}" />
        </div>
      </div>

      <div>
        <label class="block text-xs font-medium text-gray-600 dark:text-slate-300 mb-2">Clientes</label>
        <div id="sw-customers-container">
          <div class="customer-search-group mb-3" data-index="0">
            <div class="flex gap-2">
              <div class="flex-1 relative">
                <input 
                  type="text" 
                  class="customer-search-input w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" 
                  placeholder="Buscar cliente por nombre, empresa o documento..." 
                  autocomplete="off"
                />
                <div class="customer-dropdown absolute z-50 w-full mt-1 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 rounded-lg shadow-lg hidden max-h-48 overflow-y-auto"></div>
                <input type="hidden" class="customer-id-input" />
              </div>
              <button type="button" class="add-customer-btn px-3 py-2 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 focus:ring-4 focus:ring-green-300">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>
              </button>
              <button type="button" class="remove-customer-btn px-3 py-2 text-sm bg-red-600 text-white rounded-lg hover:bg-red-700 focus:ring-4 focus:ring-red-300 hidden">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
              </button>
            </div>
            <div class="selected-customer mt-2 hidden p-2 bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-800 rounded text-sm"></div>
          </div>
        </div>
        <div class="mt-1 text-xs text-gray-500 dark:text-slate-400">Busca y selecciona los clientes para asignar al contador.</div>
      </div>
    </div>
  `,x=await ye.fire({title:y?"Crear contador":"Editar contador",html:v,focusConfirm:!1,showCancelButton:!0,confirmButtonText:y?"Crear":"Guardar",cancelButtonText:"Cancelar",didOpen:async b=>{if(et(b,l.customers||[]),!y)return;const u=await Ne();u!=null&&u.autofillContadorCreateModalForm&&await Ve("sw-cont-autofill-create-local",()=>u.autofillContadorCreateModalForm())},preConfirm:()=>{var H,m,B,P,N,D,M,d,s,t,a,n,r,S,O,j,Z,Y,X,ee;const b=((m=(H=document.getElementById("sw-cont-nro"))==null?void 0:H.value)==null?void 0:m.trim())??"",u=((P=(B=document.getElementById("sw-cont-comercio"))==null?void 0:B.value)==null?void 0:P.trim())??"",g=((D=(N=document.getElementById("sw-cont-nom_contador"))==null?void 0:N.value)==null?void 0:D.trim())??"",_=((d=(M=document.getElementById("sw-cont-titular_tlf"))==null?void 0:M.value)==null?void 0:d.trim())??"",i=((t=(s=document.getElementById("sw-cont-telefono"))==null?void 0:s.value)==null?void 0:t.trim())??"",h=((n=(a=document.getElementById("sw-cont-telefono_actu"))==null?void 0:a.value)==null?void 0:n.trim())??"",k=((S=(r=document.getElementById("sw-cont-servidor"))==null?void 0:r.value)==null?void 0:S.trim())??"",f=((j=(O=document.getElementById("sw-cont-link"))==null?void 0:O.value)==null?void 0:j.trim())??"",w=((Y=(Z=document.getElementById("sw-cont-usuario"))==null?void 0:Z.value)==null?void 0:Y.trim())??"",I=((ee=(X=document.getElementById("sw-cont-contrasena"))==null?void 0:X.value)==null?void 0:ee.trim())??"",R=[];if(document.querySelectorAll(".customer-id-input").forEach(ae=>{var le;const te=(le=ae.value)==null?void 0:le.trim();te&&!R.includes(parseInt(te))&&R.push(parseInt(te))}),y){if(!u&&!g)return q.showValidationMessage("Completa al menos Comercio o Nombre del contador."),!1}else if(!b&&!u&&!g)return q.showValidationMessage("Completa al menos Nro, Comercio o Nombre del contador."),!1;return{nro:b||null,comercio:u||null,nom_contador:g||null,titular_tlf:_||null,telefono:i||null,telefono_actu:h||null,servidor:k||null,link:f||null,usuario:w||null,contrasena:I||null,customer_ids:R}}});return x.isConfirmed?x.value:null}async function Ll(){return Xe({nombre:"",ruc:"",usuario:"",clave:"",fecha_creacion:"",fecha_vencimiento:"",estado:"activo",tipo:"",observacion:""},!0)}function ze(l){if(!l)return"";const y=String(l).trim();if(y==="")return"";const v=y.match(/^(\d{4}-\d{2}-\d{2})/);if(v)return v[1];const x=y.match(/^(\d{2})\/(\d{2})\/(\d{4})$/);if(x)return`${x[3]}-${x[2]}-${x[1]}`;const E=new Date(y);if(Number.isNaN(E.getTime()))return"";const b=E.getFullYear(),u=String(E.getMonth()+1).padStart(2,"0"),g=String(E.getDate()).padStart(2,"0");return`${b}-${u}-${g}`}async function Xe(l={},y=!1){const v=ze(l.fecha_creacion),x=ze(l.fecha_vencimiento),E=`
    <div class="grid gap-3 text-left">
      ${y?Be("sw-cert-autofill-create-local"):""}
      <div>
        <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Nombre</label>
        <input id="sw-cert-nombre" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${T(l.nombre)}" />
      </div>

      <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">RUC</label>
          <input id="sw-cert-ruc" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${T(l.ruc)}" />
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Tipo</label>
          <select id="sw-cert-tipo" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100">
            <option value="" ${l.tipo?"":"selected"}>(opcional)</option>
            <option value="OSE" ${l.tipo==="OSE"?"selected":""}>OSE</option>
            <option value="PSE" ${l.tipo==="PSE"?"selected":""}>PSE</option>
          </select>
        </div>
      </div>

      <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Estado</label>
          <select id="sw-cert-estado" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100">
            <option value="activo" ${l.estado==="activo"||!l.estado?"selected":""}>Activo</option>
            <option value="inactivo" ${l.estado==="inactivo"?"selected":""}>Inactivo</option>
          </select>
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Fecha vencimiento</label>
          <input id="sw-cert-fecha_vencimiento" type="date" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${T(x)}" />
        </div>
      </div>

      <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Usuario</label>
          <input id="sw-cert-usuario" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${T(l.usuario)}" />
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Clave</label>
          <input id="sw-cert-clave" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${T(l.clave)}" />
        </div>
      </div>

      <div>
        <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Fecha creación</label>
        <input id="sw-cert-fecha_creacion" type="date" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${T(v)}" />
      </div>

      <div>
        <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Imagen</label>
        <input id="sw-cert-imagen" type="file" accept="image/*" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" />
        ${l.imagen?`<div class="mt-1 text-xs text-gray-500 dark:text-slate-400">Actual: ${T(l.imagen)}</div>`:""}
      </div>

      <div>
        <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Observación</label>
        <textarea id="sw-cert-observacion" rows="3" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100">${T(l.observacion)}</textarea>
      </div>
    </div>
  `,b=await ye.fire({title:y?"Crear certificado":"Editar certificado",html:E,focusConfirm:!1,showCancelButton:!0,confirmButtonText:y?"Crear":"Guardar",cancelButtonText:"Cancelar",didOpen:async()=>{if(!y)return;const u=await Ne();u!=null&&u.autofillCertificadoCreateModalForm&&await Ve("sw-cert-autofill-create-local",()=>u.autofillCertificadoCreateModalForm())},preConfirm:()=>{var m,B,P,N,D,M,d,s,t,a,n,r,S,O,j,Z;const u=((B=(m=document.getElementById("sw-cert-nombre"))==null?void 0:m.value)==null?void 0:B.trim())??"",g=((N=(P=document.getElementById("sw-cert-ruc"))==null?void 0:P.value)==null?void 0:N.trim())??"",_=((D=document.getElementById("sw-cert-tipo"))==null?void 0:D.value)??"",i=((M=document.getElementById("sw-cert-estado"))==null?void 0:M.value)??"activo",h=((d=document.getElementById("sw-cert-fecha_vencimiento"))==null?void 0:d.value)??"",k=((t=(s=document.getElementById("sw-cert-usuario"))==null?void 0:s.value)==null?void 0:t.trim())??"",f=((n=(a=document.getElementById("sw-cert-clave"))==null?void 0:a.value)==null?void 0:n.trim())??"",w=((r=document.getElementById("sw-cert-fecha_creacion"))==null?void 0:r.value)??"",I=((O=(S=document.getElementById("sw-cert-imagen"))==null?void 0:S.files)==null?void 0:O[0])??null,R=((Z=(j=document.getElementById("sw-cert-observacion"))==null?void 0:j.value)==null?void 0:Z.trim())??"";if(!u)return q.showValidationMessage("El nombre es requerido."),!1;const H={nombre:u,ruc:g||null,tipo:_||null,estado:i||"activo",fecha_vencimiento:h||null,usuario:k||null,clave:f||null,fecha_creacion:w||null,observacion:R||null};return I&&(H.imagen=I),H}});return b.isConfirmed?b.value:null}function et(l,y=[]){const v=l.querySelector("#sw-customers-container");let x=0;y.length>0&&(v.innerHTML="",y.forEach((i,h)=>{b(v,i,h),x=h+1}),u()),v.addEventListener("click",i=>{i.target.closest(".add-customer-btn")?(b(v,null,x++),u()):i.target.closest(".remove-customer-btn")&&(i.target.closest(".customer-search-group").remove(),u())});let E;v.addEventListener("input",i=>{i.target.classList.contains("customer-search-input")&&(clearTimeout(E),E=setTimeout(()=>g(i.target),300))}),document.addEventListener("click",i=>{i.target.closest(".customer-search-group")||l.querySelectorAll(".customer-dropdown").forEach(h=>{h.classList.add("hidden")})});function b(i,h=null,k=0){const f=document.createElement("div");f.className="customer-search-group mb-3",f.setAttribute("data-index",k);const w=h?`${h.name}${h.company_name?" - "+h.company_name:""}`:"",I=h?h.id:"";f.innerHTML=`
      <div class="flex gap-2">
        <div class="flex-1 relative">
          <input 
            type="text" 
            class="customer-search-input w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" 
            placeholder="Buscar cliente por nombre, empresa o documento..." 
            autocomplete="off"
            value="${T(w)}"
          />
          <div class="customer-dropdown absolute z-50 w-full mt-1 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 rounded-lg shadow-lg hidden max-h-48 overflow-y-auto"></div>
          <input type="hidden" class="customer-id-input" value="${I}" />
        </div>
        <button type="button" class="add-customer-btn px-3 py-2 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 focus:ring-4 focus:ring-green-300">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>
        </button>
        <button type="button" class="remove-customer-btn px-3 py-2 text-sm bg-red-600 text-white rounded-lg hover:bg-red-700 focus:ring-4 focus:ring-red-300 hidden">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
        </button>
      </div>
      <div class="selected-customer mt-2 ${h?"":"hidden"} p-2 bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-800 rounded text-sm">
        ${h?`<strong>${T(h.name)}</strong>${h.company_name?" - "+T(h.company_name):""}<br><small class="text-gray-600">${h.document_number||"Sin documento"}</small>`:""}
      </div>
    `,i.appendChild(f)}function u(){const i=v.querySelectorAll(".customer-search-group");i.forEach((h,k)=>{h.querySelector(".remove-customer-btn").classList.toggle("hidden",i.length===1)})}async function g(i){const h=i.value.trim(),k=i.nextElementSibling;if(h.length<2){k.classList.add("hidden");return}try{const w=await(await fetch(`/customers/search?q=${encodeURIComponent(h)}`)).json();k.innerHTML="",w.customers&&w.customers.length>0?(w.customers.forEach(I=>{const R=document.createElement("div");R.className="p-3 hover:bg-gray-50 dark:hover:bg-slate-800 cursor-pointer border-b border-gray-100 dark:border-slate-700 last:border-b-0",R.innerHTML=`
            <div class="font-medium text-gray-900 dark:text-slate-100">${T(I.name)}</div>
            ${I.company_name?`<div class="text-sm text-gray-600 dark:text-slate-400">${T(I.company_name)}</div>`:""}
            <div class="text-xs text-gray-500 dark:text-slate-500">${I.document_number||"Sin documento"}</div>
          `,R.addEventListener("click",()=>{_(i,I)}),k.appendChild(R)}),k.classList.remove("hidden")):(k.innerHTML='<div class="p-3 text-gray-500 dark:text-slate-400 text-sm">No se encontraron clientes</div>',k.classList.remove("hidden"))}catch(f){console.error("Error searching customers:",f),k.classList.add("hidden")}}function _(i,h){const k=i.closest(".customer-search-group"),f=k.querySelector(".customer-id-input"),w=k.querySelector(".selected-customer"),I=i.nextElementSibling;i.value=`${h.name}${h.company_name?" - "+h.company_name:""}`,f.value=h.id,w.innerHTML=`
      <strong>${T(h.name)}</strong>${h.company_name?" - "+T(h.company_name):""}<br>
      <small class="text-gray-600">${h.document_number||"Sin documento"}</small>
    `,w.classList.remove("hidden"),I.classList.add("hidden")}}const tt={class:"h-full px-3 lg:px-5 lg:pl-3"},st={class:"h-full flex items-center justify-between"},at={class:"flex items-center justify-start rtl:justify-end"},lt={key:0,class:"w-6 h-6","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},rt={key:1,class:"w-6 h-6","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},ot={class:"flex items-center gap-2"},nt={class:"relative","data-notifications-container":""},dt={key:0,class:"absolute -top-1 -right-1 min-w-5 h-5 px-1 rounded-full bg-white text-sky-700 text-[10px] font-semibold flex items-center justify-center ring-1 ring-sky-700"},it={class:"px-4 py-3"},ut={class:"text-xs text-gray-500 dark:text-slate-300"},ct={class:"py-2 max-h-72 overflow-auto"},bt={key:0,class:"px-4 py-2 text-gray-500 dark:text-slate-300"},mt=["onClick"],gt={class:"text-sm text-gray-900 dark:text-slate-100"},vt={key:0,class:"text-xs text-gray-500 dark:text-slate-300"},pt={class:"text-[11px] text-gray-400 dark:text-slate-400"},xt={key:0,class:"px-4 py-2 border-t border-gray-100 dark:border-slate-800"},ft=["aria-label"],ht={key:0,class:"w-5 h-5","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},wt={key:1,class:"w-5 h-5","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},yt={class:"relative flex items-center ms-3","data-user-dropdown-container":""},kt=["src","alt"],_t={key:1,class:"w-8 h-8 rounded-full bg-white text-sky-700 flex items-center justify-center text-xs font-semibold"},Ct={class:"absolute right-0 top-12 z-50 my-4 text-base list-none bg-white divide-y divide-gray-100 rounded-lg shadow dark:bg-slate-900 dark:divide-slate-800"},$t={class:"px-4 py-3"},Et={class:"text-sm text-gray-900 dark:text-slate-100"},St={class:"text-sm font-medium text-gray-500 truncate dark:text-slate-300"},It={class:"py-2"},Tt={method:"POST",action:"/logout",class:"block"},Lt=["value"],Mt={__name:"Header",props:{sidebarCollapsed:{type:Boolean,default:!1}},emits:["toggle-sidebar"],setup(l){var M;const y=((M=document.querySelector('meta[name="csrf-token"]'))==null?void 0:M.getAttribute("content"))??"",v=V(()=>window.__AUTH_USER__??null),x=V(()=>{var d;return((d=v.value)==null?void 0:d.name)??"Usuario"}),E=V(()=>{var d;return((d=v.value)==null?void 0:d.email)??""}),b=V(()=>{var d;return((d=v.value)==null?void 0:d.profile_photo_url)??""}),u=V(()=>{var r;const d=String(((r=v.value)==null?void 0:r.name)??"").trim();if(!d)return"U";const s=d.split(/\s+/).map(S=>S.trim()).filter(Boolean);if(s.length===0)return"U";const t=Array.from(s[0])[0]??"",a=s.length>1?Array.from(s[s.length-1])[0]??"":"";return(`${t}${a}`.trim()||"U").toLocaleUpperCase("es-ES")}),g=L(!1),_=L(!1),i=L(!1),h=L([]),k=L(0);let f=null,w=new Set;const I=async({toastNew:d=!1}={})=>{var s,t;try{const a=await oe.get("/notifications"),n=(s=a==null?void 0:a.data)==null?void 0:s.data,r=(n==null?void 0:n.notifications)??[],S=(n==null?void 0:n.count)??0;if(d){const O=r.filter(j=>!w.has(j.id));for(const j of O.slice(0,2)){const Z=(t=j==null?void 0:j.data)!=null&&t.title?`Recordatorio: ${j.data.title}`:"Nuevo recordatorio";Qe(Z)}}h.value=r,k.value=Number(S)||0,w=new Set(r.map(O=>O.id))}catch{}},R=async d=>{var t;if(!(d!=null&&d.id))return;try{await oe.post(`/notifications/${d.id}/read`),_.value=!1}catch{}const s=(t=d==null?void 0:d.data)==null?void 0:t.url;s?window.location.assign(s):I({toastNew:!1})},H=d=>{if(!d)return"";const s=new Date(d);return Number.isNaN(s.getTime())?String(d):s.toLocaleString()},m=()=>{_.value=!_.value},B=()=>{i.value=!i.value},P=async()=>{try{await oe.post("/notifications/mark-all-read"),await I({toastNew:!1}),_.value=!1,$e("Notificaciones marcadas como leídas")}catch(d){console.error("Error marking notifications as read:",d)}},N=()=>{g.value=document.documentElement.classList.contains("dark")},D=()=>{const d=We();g.value=d==="dark"};return ve(()=>{N(),window.addEventListener("theme:changed",N),I({toastNew:!1}),f=setInterval(()=>I({toastNew:!0}),3e4),document.addEventListener("click",d=>{_.value&&!d.target.closest("[data-notifications-container]")&&(_.value=!1),i.value&&!d.target.closest("[data-user-dropdown-container]")&&(i.value=!1)})}),fe(()=>{window.removeEventListener("theme:changed",N),f&&clearInterval(f)}),(d,s)=>(o(),c("nav",{class:U(["fixed top-0 right-0 z-50 h-16 bg-sky-600 border-b border-sky-700 shadow-sm",l.sidebarCollapsed?"left-0 sm:left-20":"left-0 sm:left-64"])},[e("div",tt,[e("div",st,[e("div",at,[s[5]||(s[5]=e("button",{"data-drawer-target":"logo-sidebar","data-drawer-toggle":"logo-sidebar","aria-controls":"logo-sidebar",type:"button",class:"inline-flex items-center p-2 text-sm text-white/90 rounded-lg sm:hidden hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-white/40"},[e("span",{class:"sr-only"},"Abrir sidebar"),e("svg",{class:"w-6 h-6","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"clip-rule":"evenodd","fill-rule":"evenodd",d:"M2 4.75A.75.75 0 0 1 2.75 4h14.5a.75.75 0 0 1 0 1.5H2.75A.75.75 0 0 1 2 4.75Zm0 10.5a.75.75 0 0 1 .75-.75h14.5a.75.75 0 0 1 0 1.5H2.75a.75.75 0 0 1-.75-.75ZM2 10a.75.75 0 0 1 .75-.75h14.5a.75.75 0 0 1 0 1.5H2.75A.75.75 0 0 1 2 10Z"})])],-1)),e("button",{type:"button",class:"hidden sm:inline-flex items-center p-2 text-sm text-white/90 rounded-lg hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-white/40",onClick:s[0]||(s[0]=t=>d.$emit("toggle-sidebar"))},[s[4]||(s[4]=e("span",{class:"sr-only"},"Contraer/expandir sidebar",-1)),l.sidebarCollapsed?(o(),c("svg",rt,[...s[3]||(s[3]=[e("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 0 1 1-1h8a1 1 0 1 1 0 2H5v10h7a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1V4Zm12.707 2.293a1 1 0 0 1 0 1.414L15.414 8H9a1 1 0 1 0 0 2h6.414l.293.293a1 1 0 0 1 0 1.414l-2 2a1 1 0 1 0 1.414 1.414l2-2a1 1 0 0 0 0-1.414L16.414 10l.707-.707a1 1 0 0 0 0-1.414l-2-2a1 1 0 0 0-1.414 1.414l2 2Z","clip-rule":"evenodd"},null,-1)])])):(o(),c("svg",lt,[...s[2]||(s[2]=[e("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 0 1 1-1h8a1 1 0 1 1 0 2H5v10h7a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1V4Zm12.293 2.293a1 1 0 0 1 1.414 0l2 2a1 1 0 0 1 0 1.414l-2 2a1 1 0 1 1-1.414-1.414L15.586 10l-.293-.293a1 1 0 0 1 0-1.414ZM9 10a1 1 0 0 1 1-1h7a1 1 0 1 1 0 2h-7a1 1 0 0 1-1-1Z","clip-rule":"evenodd"},null,-1)])]))])]),e("div",ot,[e("div",nt,[e("button",{type:"button",class:"inline-flex items-center justify-center w-9 h-9 text-sm text-white/90 rounded-lg hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-white/40","aria-expanded":"false","aria-label":"Notificaciones",onClick:m},[s[6]||(s[6]=e("svg",{class:"w-5 h-5","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M10 2a6 6 0 0 0-6 6v2.586l-.707.707A1 1 0 0 0 3 13h14a1 1 0 0 0 .707-1.707L17 10.586V8a6 6 0 0 0-6-6Zm0 16a2.5 2.5 0 0 0 2.45-2H7.55A2.5 2.5 0 0 0 10 18Z"})],-1)),k.value>0?(o(),c("span",dt,$(k.value>99?"99+":k.value),1)):A("",!0)]),z(e("div",{class:"absolute right-0 z-50 mt-2 w-80 max-w-[90vw] text-sm bg-white divide-y divide-gray-100 rounded-lg shadow-lg border border-gray-200 dark:bg-slate-900 dark:divide-slate-800 dark:border-slate-700",onClick:s[1]||(s[1]=Te(()=>{},["stop"]))},[e("div",it,[s[7]||(s[7]=e("p",{class:"text-sm font-semibold text-gray-900 dark:text-slate-100"},"Notificaciones",-1)),e("p",ut,"No leídas: "+$(k.value),1)]),e("ul",ct,[h.value.length===0?(o(),c("li",bt," No hay notificaciones nuevas. ")):A("",!0),(o(!0),c(ue,null,ce(h.value,t=>{var a,n;return o(),c("li",{key:t.id},[e("button",{type:"button",class:"w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-slate-800",onClick:r=>R(t)},[e("p",gt,$(((a=t==null?void 0:t.data)==null?void 0:a.title)??"Notificación"),1),(n=t==null?void 0:t.data)!=null&&n.message?(o(),c("p",vt,$(t.data.message),1)):A("",!0),e("p",pt,$(H(t==null?void 0:t.created_at)),1)],8,mt)])}),128))]),h.value.length>0?(o(),c("div",xt,[e("button",{type:"button",class:"text-xs text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",onClick:P}," Marcar todas como leídas ")])):A("",!0)],512),[[G,_.value]])]),e("button",{type:"button",class:"inline-flex items-center justify-center w-9 h-9 text-sm text-white/90 rounded-lg hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-white/40","aria-label":g.value?"Cambiar a modo claro":"Cambiar a modo oscuro",onClick:D},[g.value?(o(),c("svg",ht,[...s[8]||(s[8]=[e("path",{d:"M10 2a1 1 0 0 1 1 1v1a1 1 0 1 1-2 0V3a1 1 0 0 1 1-1Zm4.95 3.05a1 1 0 0 1 0 1.41l-.7.7a1 1 0 1 1-1.41-1.41l.7-.7a1 1 0 0 1 1.41 0ZM17 9a1 1 0 1 1 0 2h-1a1 1 0 1 1 0-2h1ZM10 6a4 4 0 1 0 0 8 4 4 0 0 0 0-8ZM4 9a1 1 0 1 0 0 2H3a1 1 0 1 0 0-2h1Zm2.16-3.54a1 1 0 0 1 1.41 0l.7.7a1 1 0 0 1-1.41 1.41l-.7-.7a1 1 0 0 1 0-1.41ZM10 16a1 1 0 0 1 1 1v1a1 1 0 1 1-2 0v-1a1 1 0 0 1 1-1Zm5.54.46a1 1 0 0 1 0 1.41l-.7.7a1 1 0 1 1-1.41-1.41l.7-.7a1 1 0 0 1 1.41 0ZM6.57 15.76a1 1 0 0 1 0 1.41l-.7.7a1 1 0 1 1-1.41-1.41l.7-.7a1 1 0 0 1 1.41 0Z"},null,-1)])])):(o(),c("svg",wt,[...s[9]||(s[9]=[e("path",{d:"M17.293 13.293A8 8 0 0 1 6.707 2.707a1 1 0 0 1 1.11-1.66A10 10 0 1 0 18.953 12.183a1 1 0 0 1-1.66 1.11Z"},null,-1)])]))],8,ft),e("div",yt,[e("button",{type:"button",class:"flex text-sm rounded-full ring-1 ring-sky-700 hover:ring-white/60 focus:ring-4 focus:ring-white/30","aria-expanded":"false",onClick:B},[s[10]||(s[10]=e("span",{class:"sr-only"},"Abrir menú de usuario",-1)),b.value?(o(),c("img",{key:0,src:b.value,alt:x.value,class:"w-8 h-8 rounded-full object-cover bg-white ring-1 ring-sky-700",loading:"lazy"},null,8,kt)):(o(),c("div",_t,$(u.value),1))]),z(e("div",Ct,[e("div",$t,[e("p",Et,$(x.value),1),e("p",St,$(E.value),1)]),e("ul",It,[s[12]||(s[12]=e("li",null,[e("a",{href:"/profile",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-slate-200 dark:hover:bg-slate-800"}," Perfil ")],-1)),s[13]||(s[13]=e("li",null,[e("a",{href:"/configuracion",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-slate-200 dark:hover:bg-slate-800"}," Configuración ")],-1)),e("li",null,[e("form",Tt,[e("input",{type:"hidden",name:"_token",value:C(y)},null,8,Lt),s[11]||(s[11]=e("button",{type:"submit",class:"w-full text-left block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-slate-200 dark:hover:bg-slate-800"}," Salir ",-1))])])])],512),[[G,i.value]])])])])])],2))}},At="/build/assets/LOGO-cdeU89Pk.png",Bt="/build/assets/LOGO_TEXTO-CJ7UpWu5.png",Nt={class:"h-full flex flex-col bg-slate-900"},Vt={href:"/dashboard",class:"flex items-center w-full gap-2"},Ot=["src"],Pt=["src"],Rt={class:"flex-1 px-3 pb-4 overflow-y-auto"},jt={class:"px-2 pt-2 pb-3 text-xs font-semibold text-slate-300 uppercase tracking-wider"},Dt={class:"space-y-2 font-medium"},zt={class:"ms-3"},Ut={key:0},Ht={class:"flex-1 ms-3 whitespace-nowrap"},Ft={key:1},Zt={class:"flex-1 ms-3 whitespace-nowrap"},qt={key:2},Wt={class:"flex-1 ms-3 whitespace-nowrap"},Gt={class:"mt-2 space-y-1 pl-2"},Kt={key:3},Qt={class:"flex-1 ms-3 whitespace-nowrap"},Jt={class:"mt-2 space-y-1 pl-2"},Yt={key:0},Xt={key:1},es={key:4},ts={class:"flex-1 ms-3 whitespace-nowrap"},ss={key:5},as={class:"flex-1 ms-3 whitespace-nowrap"},ls={class:"mt-2 space-y-1 pl-2"},rs={class:"min-w-56 bg-slate-900 border border-slate-800 rounded-lg shadow-sm overflow-hidden"},os={class:"py-2"},ns={key:0},ds={key:1},is={__name:"Sidebar",props:{collapsed:{type:Boolean,default:!1}},setup(l){const y=window.__APP_LOGO_MARK__??"",v=window.__APP_LOGO_FULL__??"",x=V(()=>y||At),E=V(()=>v||Bt),b=window.location.pathname,u=F=>F==="/dashboard"?b==="/dashboard":b.startsWith(F),g=F=>b===F,_=l,{collapsed:i}=Ge(_),h=V(()=>window.__AUTH_USER__??null),k=F=>{var K;const p=(K=h.value)==null?void 0:K.permissions;return Array.isArray(p)&&p.includes(F)},f=V(()=>k("menu.users")),w=V(()=>k("menu.roles")),I=V(()=>k("menu.leads")),R=V(()=>k("menu.email")||k("menu.leads")),H=V(()=>k("menu.inbox")),m=V(()=>k("menu.calendar")||k("calendar.view")),B=V(()=>k("menu.postventa")),P=L(u("/incidencias")||u("/backlog")||u("/postventa")),N=L(!1),D=L(null),M=L({left:"0px",top:"0px"});let d=null;const s=()=>{var p,K;if(!i.value)return;d&&(clearTimeout(d),d=null);const F=(K=(p=D.value)==null?void 0:p.getBoundingClientRect)==null?void 0:K.call(p);F&&(M.value={left:`${Math.round(F.right+8)}px`,top:`${Math.round(F.top)}px`}),N.value=!0},t=()=>{i.value&&(d&&clearTimeout(d),d=setTimeout(()=>{N.value=!1},120))},a=()=>{if(i.value){window.location.assign("/backlog");return}P.value=!P.value},n=L(g("/leads")||u("/desistidos")||u("/espera")),r=L(!1),S=L(null),O=L({left:"0px",top:"0px"});let j=null;const Z=()=>{var p,K;if(!i.value)return;j&&(clearTimeout(j),j=null);const F=(K=(p=S.value)==null?void 0:p.getBoundingClientRect)==null?void 0:K.call(p);F&&(O.value={left:`${Math.round(F.right+8)}px`,top:`${Math.round(F.top)}px`}),r.value=!0},Y=()=>{i.value&&(j&&clearTimeout(j),j=setTimeout(()=>{r.value=!1},120))},X=()=>{if(i.value){window.location.assign("/leads");return}n.value=!n.value},ee=L(u("/leads/whatsapp")||u("/leads/email")),ae=L(!1),te=L(null),le=L({left:"0px",top:"0px"});let se=null;const ne=()=>{var p,K;if(!i.value)return;se&&(clearTimeout(se),se=null);const F=(K=(p=te.value)==null?void 0:p.getBoundingClientRect)==null?void 0:K.call(p);F&&(le.value={left:`${Math.round(F.right+8)}px`,top:`${Math.round(F.top)}px`}),ae.value=!0},de=()=>{i.value&&(se&&clearTimeout(se),se=setTimeout(()=>{ae.value=!1},120))},ie=()=>{if(i.value){window.location.assign("/leads/whatsapp");return}ee.value=!ee.value};return(F,p)=>(o(),c("aside",{id:"logo-sidebar",class:U(["fixed top-0 left-0 z-40 h-screen transition-all duration-200 -translate-x-full bg-slate-900 border-r border-slate-950 sm:translate-x-0",C(i)?"w-20":"w-64"]),"aria-label":"Sidebar"},[e("div",Nt,[e("div",{class:U(["h-16 px-2 flex items-center bg-sky-600 border-b border-sky-700 overflow-hidden",C(i)?"justify-center":"justify-start"])},[e("a",Vt,[C(i)?(o(),c("img",{key:0,src:x.value,alt:"Atlantis",class:"h-14 w-14 object-contain"},null,8,Ot)):(o(),c("img",{key:1,src:E.value,alt:"Atlantis",class:"h-14 w-full max-w-full flex-1 object-contain object-left"},null,8,Pt))])],2),e("div",Rt,[z(e("div",jt," Menú ",512),[[G,!C(i)]]),e("ul",Dt,[e("li",null,[e("a",{href:"/dashboard",title:"Inicio","aria-current":"page",class:U(["flex items-center p-2 rounded-lg group",[C(i)?"justify-center":"",u("/dashboard")?"text-white bg-slate-800 border border-slate-700":"text-slate-200 hover:bg-slate-800"]])},[(o(),c("svg",{class:U(["w-5 h-5",u("/dashboard")?"text-white/90":"text-slate-300 group-hover:text-white"]),"aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[...p[0]||(p[0]=[e("path",{d:"M10 2a1 1 0 0 1 .7.3l7 7a1 1 0 0 1-1.4 1.4L16 10.4V17a1 1 0 0 1-1 1h-3a1 1 0 0 1-1-1v-3H9v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-6.6l-.3.3A1 1 0 1 1 2.3 9.3l7-7A1 1 0 0 1 10 2Z"},null,-1)])],2)),z(e("span",zt,"Inicio",512),[[G,!C(i)]])],2)]),f.value?(o(),c("li",Ut,[e("a",{href:"/users",title:"Usuarios",class:U(["flex items-center p-2 rounded-lg group",[C(i)?"justify-center":"",u("/users")?"text-white bg-slate-800 border border-slate-700":"text-slate-200 hover:bg-slate-800"]])},[(o(),c("svg",{class:U(["w-5 h-5",u("/users")?"text-white/90":"text-slate-300 group-hover:text-white"]),"aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[...p[1]||(p[1]=[e("path",{d:"M10 10a4 4 0 1 0-4-4 4 4 0 0 0 4 4Zm-7 8a7 7 0 0 1 14 0 1 1 0 0 1-2 0 5 5 0 0 0-10 0 1 1 0 0 1-2 0Z"},null,-1)])],2)),z(e("span",Ht,"Usuarios",512),[[G,!C(i)]])],2)])):A("",!0),w.value?(o(),c("li",Ft,[e("a",{href:"/roles",title:"Roles",class:U(["flex items-center p-2 rounded-lg group",[C(i)?"justify-center":"",u("/roles")?"text-white bg-slate-800 border border-slate-700":"text-slate-200 hover:bg-slate-800"]])},[(o(),c("svg",{class:U(["w-5 h-5",u("/roles")?"text-white/90":"text-slate-300 group-hover:text-white"]),"aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[...p[2]||(p[2]=[e("path",{d:"M10 2l7 3v5c0 5-3.58 9.74-7 10-3.42-.26-7-5-7-10V5l7-3z"},null,-1)])],2)),z(e("span",Zt,"Roles",512),[[G,!C(i)]])],2)])):A("",!0),I.value?(o(),c("li",qt,[e("div",{class:"relative",ref_key:"pipelineAnchor",ref:S,onMouseenter:Z,onMouseleave:Y},[e("button",{type:"button",class:U(["w-full flex items-center p-2 rounded-lg group",[C(i)?"justify-center":"",g("/leads")||u("/desistidos")||u("/espera")?"text-white bg-slate-800 border border-slate-700":"text-slate-200 hover:bg-slate-800"]]),onClick:X},[(o(),c("svg",{class:U(["w-5 h-5",g("/leads")||u("/desistidos")||u("/espera")?"text-white/90":"text-slate-300 group-hover:text-white"]),"aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[...p[3]||(p[3]=[e("path",{d:"M3 3h14v4H3V3zm0 6h6v8H3v-8zm8 0h6v8h-6v-8z"},null,-1)])],2)),z(e("span",Wt,"Pipeline",512),[[G,!C(i)]]),z((o(),c("svg",{class:U(["w-4 h-4",n.value?"rotate-180":""]),"aria-hidden":"true",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[...p[4]||(p[4]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2)),[[G,!C(i)]])],2),z(e("ul",Gt,[e("li",null,[e("a",{href:"/leads",class:U(["flex items-center gap-3 p-2 rounded-lg group",["text-slate-200 hover:bg-slate-800",C(b)==="/leads"?"bg-slate-800 border border-slate-700":""]])},[...p[5]||(p[5]=[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"},null,-1),e("span",{class:"whitespace-nowrap"},"Leads",-1)])],2)]),e("li",null,[e("a",{href:"/espera",class:U(["flex items-center gap-3 p-2 rounded-lg group",["text-slate-200 hover:bg-slate-800",u("/espera")?"bg-slate-800 border border-slate-700":""]])},[...p[6]||(p[6]=[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"},null,-1),e("span",{class:"whitespace-nowrap"},"Zona de espera",-1)])],2)]),e("li",null,[e("a",{href:"/desistidos",class:U(["flex items-center gap-3 p-2 rounded-lg group",["text-slate-200 hover:bg-slate-800",u("/desistidos")?"bg-slate-800 border border-slate-700":""]])},[...p[7]||(p[7]=[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"},null,-1),e("span",{class:"whitespace-nowrap"},"Desistidos",-1)])],2)])],512),[[G,!C(i)&&n.value]])],544)])):A("",!0),H.value?(o(),c("li",Kt,[e("div",{class:"relative",ref_key:"inboxAnchor",ref:te,onMouseenter:ne,onMouseleave:de},[e("button",{type:"button",class:U(["w-full flex items-center p-2 rounded-lg group",[C(i)?"justify-center":"",u("/leads/whatsapp")||u("/leads/email")?"text-white bg-slate-800 border border-slate-700":"text-slate-200 hover:bg-slate-800"]]),onClick:ie},[(o(),c("svg",{class:U(["w-5 h-5",u("/leads/whatsapp")||u("/leads/email")?"text-white/90":"text-slate-300 group-hover:text-white"]),"aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[...p[8]||(p[8]=[e("path",{d:"M2 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4zm2 0 6 4 6-4H4zm14 2.2-8 5.3-8-5.3V16h16V6.2z"},null,-1)])],2)),z(e("span",Qt,"Bandeja de entrada",512),[[G,!C(i)]]),z((o(),c("svg",{class:U(["w-4 h-4",ee.value?"rotate-180":""]),"aria-hidden":"true",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[...p[9]||(p[9]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2)),[[G,!C(i)]])],2),z(e("ul",Jt,[I.value?(o(),c("li",Yt,[e("a",{href:"/leads/whatsapp",class:U(["flex items-center gap-3 p-2 rounded-lg group",["text-slate-200 hover:bg-slate-800",C(b)==="/leads/whatsapp"?"bg-slate-800 border border-slate-700":""]])},[...p[10]||(p[10]=[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"},null,-1),e("span",{class:"whitespace-nowrap"},"WhatsApp masivo",-1)])],2)])):A("",!0),R.value?(o(),c("li",Xt,[e("a",{href:"/leads/email",class:U(["flex items-center gap-3 p-2 rounded-lg group",["text-slate-200 hover:bg-slate-800",C(b)==="/leads/email"?"bg-slate-800 border border-slate-700":""]])},[...p[11]||(p[11]=[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"},null,-1),e("span",{class:"whitespace-nowrap"},"Email masivo",-1)])],2)])):A("",!0)],512),[[G,!C(i)&&ee.value]])],544)])):A("",!0),m.value?(o(),c("li",es,[e("a",{href:"/calendar",title:"Calendario",class:U(["flex items-center p-2 rounded-lg group",[C(i)?"justify-center":"",u("/calendar")?"text-white bg-slate-800 border border-slate-700":"text-slate-200 hover:bg-slate-800"]])},[(o(),c("svg",{class:U(["w-5 h-5",u("/calendar")?"text-white/90":"text-slate-300 group-hover:text-white"]),"aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[...p[12]||(p[12]=[e("path",{d:"M6 2a1 1 0 1 0 0 2h8a1 1 0 1 0 0-2H6Z"},null,-1),e("path",{"fill-rule":"evenodd",d:"M4 5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V5Zm3 4a1 1 0 0 0 0 2h6a1 1 0 1 0 0-2H7Zm0 4a1 1 0 1 0 0 2h4a1 1 0 1 0 0-2H7Z","clip-rule":"evenodd"},null,-1)])],2)),z(e("span",ts,"Calendario",512),[[G,!C(i)]])],2)])):A("",!0),B.value?(o(),c("li",ss,[e("div",{class:"relative",ref_key:"postventaAnchor",ref:D,onMouseenter:s,onMouseleave:t},[e("button",{type:"button",class:U(["w-full flex items-center p-2 rounded-lg group",[C(i)?"justify-center":"",u("/incidencias")||u("/backlog")||u("/postventa")?"text-white bg-slate-800 border border-slate-700":"text-slate-200 hover:bg-slate-800"]]),onClick:a},[(o(),c("svg",{class:U(["w-5 h-5",u("/incidencias")||u("/backlog")||u("/postventa")?"text-white/90":"text-slate-300 group-hover:text-white"]),"aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[...p[13]||(p[13]=[e("path",{d:"M11.3 1.046a1 1 0 0 0-2.6 0l-.2.682a6.96 6.96 0 0 0-1.18.49l-.63-.35a1 1 0 0 0-1.24.22l-.9.9a1 1 0 0 0-.22 1.24l.35.63a6.96 6.96 0 0 0-.49 1.18l-.682.2a1 1 0 0 0 0 2.6l.682.2c.12.42.28.82.49 1.2l-.35.63a1 1 0 0 0 .22 1.24l.9.9a1 1 0 0 0 1.24.22l.63-.35c.38.2.78.37 1.2.49l.2.682a1 1 0 0 0 2.6 0l.2-.682c.42-.12.82-.28 1.2-.49l.63.35a1 1 0 0 0 1.24-.22l.9-.9a1 1 0 0 0 .22-1.24l-.35-.63c.2-.38.37-.78.49-1.2l.682-.2a1 1 0 0 0 0-2.6l-.682-.2a6.96 6.96 0 0 0-.49-1.18l.35-.63a1 1 0 0 0-.22-1.24l-.9-.9a1 1 0 0 0-1.24-.22l-.63.35c-.38-.2-.78-.37-1.2-.49l-.2-.682ZM10 13a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z"},null,-1)])],2)),z(e("span",as,"Postventa",512),[[G,!C(i)]]),z((o(),c("svg",{class:U(["w-4 h-4",P.value?"rotate-180":""]),"aria-hidden":"true",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[...p[14]||(p[14]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2)),[[G,!C(i)]])],2),z(e("ul",ls,[e("li",null,[e("a",{href:"/backlog",class:U(["flex items-center gap-3 p-2 rounded-lg group",["text-slate-200 hover:bg-slate-800",u("/incidencias")||u("/backlog")?"bg-slate-800 border border-slate-700":""]])},[...p[15]||(p[15]=[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"},null,-1),e("span",{class:"whitespace-nowrap"},"Incidencias",-1)])],2)]),e("li",null,[e("a",{href:"/postventa/clientes",class:U(["flex items-center gap-3 p-2 rounded-lg group",["text-slate-200 hover:bg-slate-800",u("/postventa/clientes")?"bg-slate-800 border border-slate-700":""]])},[...p[16]||(p[16]=[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"},null,-1),e("span",{class:"whitespace-nowrap"},"Clientes",-1)])],2)]),e("li",null,[e("a",{href:"/postventa/contadores",class:U(["flex items-center gap-3 p-2 rounded-lg group",["text-slate-200 hover:bg-slate-800",u("/postventa/contadores")?"bg-slate-800 border border-slate-700":""]])},[...p[17]||(p[17]=[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"},null,-1),e("span",{class:"whitespace-nowrap"},"Contadores",-1)])],2)]),e("li",null,[e("a",{href:"/postventa/certificados",class:U(["flex items-center gap-3 p-2 rounded-lg group",["text-slate-200 hover:bg-slate-800",u("/postventa/certificados")?"bg-slate-800 border border-slate-700":""]])},[...p[18]||(p[18]=[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"},null,-1),e("span",{class:"whitespace-nowrap"},"Certificados",-1)])],2)])],512),[[G,!C(i)&&P.value]])],544)])):A("",!0)])])]),(o(),W(Ee,{to:"body"},[C(i)?z((o(),c("div",{key:0,class:"fixed z-[9999]",style:we(M.value),onMouseenter:s,onMouseleave:t},[...p[19]||(p[19]=[e("div",{class:"min-w-56 bg-slate-900 border border-slate-800 rounded-lg shadow-sm overflow-hidden"},[e("div",{class:"px-4 py-3 flex items-center justify-between border-b border-slate-800"},[e("div",{class:"text-sm font-semibold text-slate-100"},"Postventa"),e("svg",{class:"w-4 h-4 text-slate-300","aria-hidden":"true",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])]),e("ul",{class:"py-2"},[e("li",null,[e("a",{href:"/backlog",class:"flex items-center gap-3 px-4 py-2 text-sm text-slate-200 hover:bg-slate-800"},[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"}),e("span",{class:"whitespace-nowrap"},"Incidencias")])]),e("li",null,[e("a",{href:"/postventa/clientes",class:"flex items-center gap-3 px-4 py-2 text-sm text-slate-200 hover:bg-slate-800"},[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"}),e("span",{class:"whitespace-nowrap"},"Clientes")])]),e("li",null,[e("a",{href:"/postventa/contadores",class:"flex items-center gap-3 px-4 py-2 text-sm text-slate-200 hover:bg-slate-800"},[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"}),e("span",{class:"whitespace-nowrap"},"Contadores")])]),e("li",null,[e("a",{href:"/postventa/certificados",class:"flex items-center gap-3 px-4 py-2 text-sm text-slate-200 hover:bg-slate-800"},[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"}),e("span",{class:"whitespace-nowrap"},"Certificados")])])])],-1)])],36)),[[G,N.value]]):A("",!0)])),(o(),W(Ee,{to:"body"},[C(i)?z((o(),c("div",{key:0,class:"fixed z-[9999]",style:we(O.value),onMouseenter:Z,onMouseleave:Y},[...p[20]||(p[20]=[e("div",{class:"min-w-56 bg-slate-900 border border-slate-800 rounded-lg shadow-sm overflow-hidden"},[e("div",{class:"px-4 py-3 flex items-center justify-between border-b border-slate-800"},[e("div",{class:"text-sm font-semibold text-slate-100"},"Pipeline"),e("svg",{class:"w-4 h-4 text-slate-300","aria-hidden":"true",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])]),e("ul",{class:"py-2"},[e("li",null,[e("a",{href:"/leads",class:"flex items-center gap-3 px-4 py-2 text-sm text-slate-200 hover:bg-slate-800"},[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"}),e("span",{class:"whitespace-nowrap"},"Leads")])]),e("li",null,[e("a",{href:"/espera",class:"flex items-center gap-3 px-4 py-2 text-sm text-slate-200 hover:bg-slate-800"},[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"}),e("span",{class:"whitespace-nowrap"},"Zona de espera")])]),e("li",null,[e("a",{href:"/desistidos",class:"flex items-center gap-3 px-4 py-2 text-sm text-slate-200 hover:bg-slate-800"},[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"}),e("span",{class:"whitespace-nowrap"},"Desistidos")])])])],-1)])],36)),[[G,r.value]]):A("",!0)])),(o(),W(Ee,{to:"body"},[C(i)?z((o(),c("div",{key:0,class:"fixed z-[9999]",style:we(le.value),onMouseenter:ne,onMouseleave:de},[e("div",rs,[p[23]||(p[23]=e("div",{class:"px-4 py-3 flex items-center justify-between border-b border-slate-800"},[e("div",{class:"text-sm font-semibold text-slate-100"},"Bandeja de entrada"),e("svg",{class:"w-4 h-4 text-slate-300","aria-hidden":"true",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1)),e("ul",os,[I.value?(o(),c("li",ns,[...p[21]||(p[21]=[e("a",{href:"/leads/whatsapp",class:"flex items-center gap-3 px-4 py-2 text-sm text-slate-200 hover:bg-slate-800"},[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"}),e("span",{class:"whitespace-nowrap"},"WhatsApp masivo")],-1)])])):A("",!0),R.value?(o(),c("li",ds,[...p[22]||(p[22]=[e("a",{href:"/leads/email",class:"flex items-center gap-3 px-4 py-2 text-sm text-slate-200 hover:bg-slate-800"},[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"}),e("span",{class:"whitespace-nowrap"},"Email masivo")],-1)])])):A("",!0)])])],36)),[[G,ae.value]]):A("",!0)]))],2))}},us={class:"bg-white border-t border-gray-200 dark:bg-slate-950 dark:border-slate-800"},cs={class:"max-w-7xl mx-auto px-4 py-6"},bs={class:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"},ms={class:"text-sm text-gray-500 dark:text-slate-300"},gs={__name:"Footer",setup(l){const y=new Date().getFullYear();return(v,x)=>(o(),c("footer",us,[e("div",cs,[e("div",bs,[e("span",ms,"© "+$(C(y))+" CRM ATLANTIS",1),x[0]||(x[0]=e("div",{class:"flex gap-4"},[e("a",{href:"#",class:"text-sm text-gray-500 hover:text-gray-900 dark:text-slate-300 dark:hover:text-slate-100"},"Ayuda"),e("a",{href:"#",class:"text-sm text-gray-500 hover:text-gray-900 dark:text-slate-300 dark:hover:text-slate-100"},"Privacidad"),e("a",{href:"#",class:"text-sm text-gray-500 hover:text-gray-900 dark:text-slate-300 dark:hover:text-slate-100"},"Términos")],-1))])])]))}},vs={key:0,class:"absolute right-0 z-30 mt-2 w-64 rounded-lg border border-gray-200 bg-white p-2 shadow-lg dark:border-slate-800 dark:bg-slate-900"},ps={class:"mb-2 flex items-center justify-between px-2 pt-1"},xs={class:"max-h-72 overflow-y-auto pr-1"},fs=["checked","onChange"],hs={class:"truncate"},ws={__name:"TableColumnsDropdown",props:{columns:{type:Array,default:()=>[]},visibleKeys:{type:Array,default:()=>[]}},emits:["toggle","reset"],setup(l){const y=l,v=L(null),x=L(!1),E=V(()=>(y.columns||[]).filter(u=>(u==null?void 0:u.key)&&(u==null?void 0:u.label))),b=u=>{var g;x.value&&((g=v.value)!=null&&g.contains(u.target)||(x.value=!1))};return ve(()=>{document.addEventListener("click",b)}),fe(()=>{document.removeEventListener("click",b)}),(u,g)=>E.value.length>1?(o(),c("div",{key:0,ref_key:"root",ref:v,class:"relative"},[e("button",{type:"button",class:"inline-flex items-center gap-2 rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-700 shadow-sm hover:bg-gray-50 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-200 dark:hover:bg-slate-800",onClick:g[0]||(g[0]=_=>x.value=!x.value)},[...g[2]||(g[2]=[e("span",null,"Columnas",-1),e("svg",{class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.51a.75.75 0 01-1.08 0l-4.25-4.51a.75.75 0 01.02-1.06z","clip-rule":"evenodd"})],-1)])]),x.value?(o(),c("div",vs,[e("div",ps,[g[3]||(g[3]=e("span",{class:"text-xs font-semibold uppercase text-gray-500 dark:text-slate-400"},"Mostrar columnas",-1)),e("button",{type:"button",class:"text-xs text-blue-600 hover:underline dark:text-blue-400",onClick:g[1]||(g[1]=_=>u.$emit("reset"))}," Restablecer ")]),e("div",xs,[(o(!0),c(ue,null,ce(E.value,_=>(o(),c("label",{key:_.key,class:"flex items-center gap-2 rounded-md px-2 py-1.5 text-sm text-gray-700 hover:bg-gray-50 dark:text-slate-200 dark:hover:bg-slate-800"},[e("input",{type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500",checked:l.visibleKeys.includes(_.key),onChange:i=>u.$emit("toggle",_.key)},null,40,fs),e("span",hs,$(_.label),1)]))),128))])])):A("",!0)],512)):A("",!0)}},ys="crm:table-columns",ks=l=>{try{return JSON.parse(l)}catch{return null}},_s=({tableId:l,columns:y})=>{const v=L([]),x=L(!1),E=L(null),b=L(null),u=V(()=>(C(y)||[]).filter(m=>(m==null?void 0:m.key)&&(m==null?void 0:m.label))),g=V(()=>u.value.map(m=>m.key)),_=V(()=>`${ys}:${l||"default"}`),i=()=>{if(typeof window>"u")return null;const m=window.localStorage.getItem(_.value),B=ks(m);return Array.isArray(B)?B:null},h=m=>{typeof window>"u"||window.localStorage.setItem(_.value,JSON.stringify(m))};he(g,m=>{if(m.length===0){v.value=[];return}if(!x.value){const N=(i()||[]).filter(D=>m.includes(D));v.value=N.length>0?N:[...m],x.value=!0;return}const B=v.value.filter(P=>m.includes(P));v.value=B.length>0?B:[...m]},{immediate:!0}),he([v,_],([m])=>{x.value&&h(m)},{deep:!0});const k=V(()=>{const m=new Set(v.value);return u.value.filter(B=>m.has(B.key))}),f=()=>{const m=E.value;if(!m)return;const B=new Set(v.value),P=g.value,N=Math.max(1,P.filter(d=>B.has(d)).length);m.style.width="100%",m.style.tableLayout="auto";const D=m.querySelectorAll("colgroup col");P.forEach((d,s)=>{const t=D[s];if(!t)return;const a=B.has(d);t.style.display=a?"":"none",t.style.width="",t.style.minWidth="",t.style.maxWidth=""}),m.querySelectorAll("tr").forEach(d=>{const s=Array.from(d.children).filter(t=>{const a=t==null?void 0:t.tagName;return a==="TH"||a==="TD"});if(P.forEach((t,a)=>{const n=s[a];if(!n)return;const r=B.has(t);n.style.display=r?"":"none",n.style.width="",n.style.minWidth="",n.style.maxWidth="",n.style.overflow=""}),s.length===1){const t=s[0];(t.hasAttribute("colspan")||Number(t.colSpan)>1)&&(t.colSpan=N)}})};he([v,g,E],async()=>{await ke(),f()},{deep:!0,flush:"post"});const w=()=>{b.value&&(b.value.disconnect(),b.value=null)};return he(E,async m=>{w(),!(!m||typeof MutationObserver>"u")&&(b.value=new MutationObserver(()=>{f()}),b.value.observe(m,{childList:!0,subtree:!0}),await ke(),f())},{flush:"post"}),fe(()=>{w()}),{tableRef:E,visibleKeys:v,visibleColumns:k,isColumnVisible:m=>v.value.includes(m),toggleColumn:m=>{if(g.value.includes(m)){if(v.value.includes(m)){if(v.value.length===1)return;v.value=v.value.filter(B=>B!==m);return}v.value=[...v.value,m]}},resetColumns:()=>{v.value=[...g.value]},applyVisibilityToTable:f}};function Cs({tableRef:l}){const y=L(null),v=L(null),x=L(0),E=L(!1);let b=!1,u=null;const g=()=>{const f=y.value,w=v.value;!f||!w||b||(b=!0,w.scrollLeft=f.scrollLeft,b=!1)},_=()=>{const f=y.value,w=v.value;!f||!w||b||(b=!0,f.scrollLeft=w.scrollLeft,b=!1)},i=()=>{const f=y.value;if(!f)return;const w=f.scrollWidth>f.clientWidth+1,I=f.getBoundingClientRect(),R=I.bottom<=window.innerHeight&&I.bottom>=0;x.value=f.scrollWidth,E.value=w&&!R,w&&v.value&&(v.value.scrollLeft=f.scrollLeft)},h=()=>{const f=y.value,w=v.value;!f||!w||(f.addEventListener("scroll",g,{passive:!0}),w.addEventListener("scroll",_,{passive:!0}),typeof ResizeObserver<"u"&&(u=new ResizeObserver(()=>{i()}),u.observe(f),l!=null&&l.value&&u.observe(l.value)),window.addEventListener("resize",i),window.addEventListener("scroll",i,{passive:!0}),i())},k=()=>{const f=y.value,w=v.value;f&&f.removeEventListener("scroll",g),w&&w.removeEventListener("scroll",_),u&&(u.disconnect(),u=null),window.removeEventListener("resize",i),window.removeEventListener("scroll",i)};return ve(async()=>{await ke(),h()}),fe(()=>{k()}),he(l,async()=>{await ke(),i()}),{tableScrollRef:y,stickyScrollRef:v,stickyScrollWidth:x,showStickyXScroll:E,refreshStickyScroll:i}}const $s={key:0,class:"rounded-lg border border-slate-200 bg-white p-6 text-sm text-slate-600 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-300"},Es={key:1,class:"rounded-lg border border-red-200 bg-white p-6 text-sm text-red-700 dark:border-red-900/40 dark:bg-slate-900 dark:text-red-300"},Ss={key:2,class:"space-y-6"},Is={class:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-end"},Ts={class:"flex items-center gap-2"},Ls=["disabled"],Ms={class:"grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-4"},As={key:0,href:"/leads",class:"block rounded-lg border border-slate-200 bg-white p-6 shadow-sm hover:bg-slate-50 dark:border-slate-800 dark:bg-slate-900 dark:hover:bg-slate-800"},Bs={class:"mt-3 text-3xl font-semibold text-slate-900 dark:text-slate-100"},Ns={class:"mt-2 text-sm text-slate-600 dark:text-slate-300"},Vs={key:1,href:"/postventa/clientes",class:"block rounded-lg border border-slate-200 bg-white p-6 shadow-sm hover:bg-slate-50 dark:border-slate-800 dark:bg-slate-900 dark:hover:bg-slate-800"},Os={class:"mt-3 text-3xl font-semibold text-slate-900 dark:text-slate-100"},Ps={key:2,href:"/backlog",class:"block rounded-lg border border-slate-200 bg-white p-6 shadow-sm hover:bg-slate-50 dark:border-slate-800 dark:bg-slate-900 dark:hover:bg-slate-800"},Rs={class:"mt-3 text-3xl font-semibold text-slate-900 dark:text-slate-100"},js={class:"mt-2 text-sm text-slate-600 dark:text-slate-300"},Ds={key:3,href:"/postventa/certificados",class:"block rounded-lg border border-slate-200 bg-white p-6 shadow-sm hover:bg-slate-50 dark:border-slate-800 dark:bg-slate-900 dark:hover:bg-slate-800"},zs={class:"mt-3 text-3xl font-semibold text-slate-900 dark:text-slate-100"},Us={class:"mt-2 text-sm text-slate-600 dark:text-slate-300"},Hs={key:4,href:"/postventa/contadores",class:"block rounded-lg border border-slate-200 bg-white p-6 shadow-sm hover:bg-slate-50 dark:border-slate-800 dark:bg-slate-900 dark:hover:bg-slate-800"},Fs={class:"mt-3 text-3xl font-semibold text-slate-900 dark:text-slate-100"},Zs={class:"mt-2 text-sm text-slate-600 dark:text-slate-300"},qs={key:5,href:"/calendar",class:"block rounded-lg border border-slate-200 bg-white p-6 shadow-sm hover:bg-slate-50 dark:border-slate-800 dark:bg-slate-900 dark:hover:bg-slate-800"},Ws={class:"mt-3 text-3xl font-semibold text-slate-900 dark:text-slate-100"},Gs={class:"grid grid-cols-1 gap-6 lg:grid-cols-3"},Ks={class:"lg:col-span-2"},Qs={class:"rounded-lg border border-slate-200 bg-white shadow-sm dark:border-slate-800 dark:bg-slate-900"},Js={class:"border-b border-slate-200 p-6 dark:border-slate-800"},Ys={class:"flex items-center justify-between"},Xs={class:"flex items-center gap-2"},ea={key:0,href:"/postventa/certificados",class:"text-sm font-medium text-blue-600 hover:underline"},ta={class:"px-6 py-3 font-medium text-slate-900 dark:text-slate-100"},sa={class:"px-6 py-3"},aa={class:"px-6 py-3"},la={class:"px-6 py-3"},ra={key:0},oa={class:"rounded-lg border border-slate-200 bg-white shadow-sm dark:border-slate-800 dark:bg-slate-900"},na={class:"border-b border-slate-200 p-6 dark:border-slate-800"},da={class:"flex items-center justify-between"},ia={key:0,href:"/calendar",class:"text-sm font-medium text-blue-600 hover:underline"},ua={class:"p-6"},ca={key:0,class:"text-sm text-slate-500 dark:text-slate-300"},ba={key:1,class:"space-y-3"},ma={class:"text-sm font-semibold text-slate-900 dark:text-slate-100"},ga={class:"mt-1 text-xs text-slate-600 dark:text-slate-300"},va={key:0},pa={class:"grid grid-cols-1 gap-6 lg:grid-cols-2"},xa={key:0,class:"rounded-lg border border-slate-200 bg-white shadow-sm dark:border-slate-800 dark:bg-slate-900"},fa={class:"divide-y divide-slate-200 dark:divide-slate-800"},ha={class:"flex items-center justify-between gap-3"},wa={class:"text-sm font-semibold text-slate-900 dark:text-slate-100"},ya={class:"mt-1 text-xs text-slate-600 dark:text-slate-300"},ka={class:"text-right"},_a={class:"text-sm font-medium text-slate-900 dark:text-slate-100"},Ca={class:"mt-1 text-xs text-slate-600 dark:text-slate-300"},$a={key:0,class:"p-6 text-sm text-slate-500 dark:text-slate-300"},Ea={key:1,class:"rounded-lg border border-slate-200 bg-white shadow-sm dark:border-slate-800 dark:bg-slate-900"},Sa={class:"divide-y divide-slate-200 dark:divide-slate-800"},Ia={class:"text-sm font-semibold text-slate-900 dark:text-slate-100"},Ta={class:"mt-1 text-xs text-slate-600 dark:text-slate-300"},La={key:0,class:"p-6 text-sm text-slate-500 dark:text-slate-300"},Ma={__name:"DashboardView",setup(l){const y=[{key:"nombre",label:"Nombre"},{key:"ruc",label:"RUC"},{key:"tipo",label:"Tipo"},{key:"vence",label:"Vence"}],{tableRef:v,visibleKeys:x,isColumnVisible:E,toggleColumn:b,resetColumns:u}=_s({tableId:"dashboard-certificados-table",columns:y}),{tableScrollRef:g,stickyScrollRef:_,stickyScrollWidth:i,showStickyXScroll:h}=Cs({tableRef:v}),k=L(!0),f=L(""),w=L({}),I=L({certificados_por_vencer:[],upcoming_events:[],recent_leads:null,recent_incidences:null}),R=L(null),H=L(""),m=()=>{const M=R.value;M&&(M.focus(),typeof M.showPicker=="function"&&M.showPicker())},B=M=>{if(!M)return"—";try{const d=new Date(M);return new Intl.DateTimeFormat("es-PE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(d)}catch{return String(M)}},P=(M,d)=>{if(M==null||M==="")return"—";const s=Number(M);if(!Number.isFinite(s))return String(M);const t=d||"PEN";try{return new Intl.NumberFormat("es-PE",{style:"currency",currency:t,maximumFractionDigits:2}).format(s)}catch{return`${s.toFixed(2)} ${t}`}},N=async()=>{var M,d;k.value=!0,f.value="";try{const{data:s}=await oe.get("/dashboard/summary",{params:{month:H.value||void 0}});w.value=(s==null?void 0:s.cards)||{},I.value={...I.value,...(s==null?void 0:s.lists)||{}}}catch(s){f.value=((d=(M=s==null?void 0:s.response)==null?void 0:M.data)==null?void 0:d.message)??"No se pudo cargar el dashboard."}finally{k.value=!1}},D=()=>{N()};return ve(()=>{N()}),(M,d)=>{var s,t,a,n;return o(),c("div",null,[k.value?(o(),c("div",$s," Cargando dashboard… ")):f.value?(o(),c("div",Es,$(f.value),1)):(o(),c("div",Ss,[e("section",Is,[e("div",Ts,[d[1]||(d[1]=e("label",{class:"text-sm text-slate-600 dark:text-slate-300"},"Mes",-1)),z(e("input",{ref_key:"monthInput",ref:R,"onUpdate:modelValue":d[0]||(d[0]=r=>H.value=r),type:"month",class:"rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 focus:border-sky-500 focus:ring-sky-500 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100",onClick:m},null,512),[[be,H.value]]),e("button",{type:"button",class:"rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 hover:bg-slate-50 disabled:opacity-50 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-200 dark:hover:bg-slate-800",disabled:k.value,onClick:D}," Ver ",8,Ls)])]),e("section",Ms,[w.value.leads?(o(),c("a",As,[d[2]||(d[2]=e("div",{class:"flex items-center justify-between"},[e("span",{class:"text-sm font-medium text-slate-500 dark:text-slate-300"},"Leads"),e("span",{class:"inline-flex items-center rounded bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700 dark:bg-slate-800 dark:text-slate-200"},"Total")],-1)),e("div",Bs,$(w.value.leads.total),1),e("div",Ns," Abiertos: "+$(w.value.leads.open)+" · Archivados: "+$(w.value.leads.archived),1)])):A("",!0),w.value.customers?(o(),c("a",Vs,[d[3]||(d[3]=e("div",{class:"flex items-center justify-between"},[e("span",{class:"text-sm font-medium text-slate-500 dark:text-slate-300"},"Clientes"),e("span",{class:"inline-flex items-center rounded bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700 dark:bg-slate-800 dark:text-slate-200"},"Total")],-1)),e("div",Os,$(w.value.customers.total),1),d[4]||(d[4]=e("div",{class:"mt-2 text-sm text-slate-600 dark:text-slate-300"},"Clientes registrados",-1))])):A("",!0),w.value.incidencias?(o(),c("a",Ps,[d[5]||(d[5]=e("div",{class:"flex items-center justify-between"},[e("span",{class:"text-sm font-medium text-slate-500 dark:text-slate-300"},"Incidencias"),e("span",{class:"inline-flex items-center rounded bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700 dark:bg-slate-800 dark:text-slate-200"},"Postventa")],-1)),e("div",Rs,$(w.value.incidencias.open),1),e("div",js,"Abiertas · Archivadas: "+$(w.value.incidencias.archived),1)])):A("",!0),w.value.certificados?(o(),c("a",Ds,[d[6]||(d[6]=e("div",{class:"flex items-center justify-between"},[e("span",{class:"text-sm font-medium text-slate-500 dark:text-slate-300"},"Certificados"),e("span",{class:"inline-flex items-center rounded bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700 dark:bg-slate-800 dark:text-slate-200"},"Activos")],-1)),e("div",zs,$(w.value.certificados.activos),1),e("div",Us," Por vencer (30d): "+$(w.value.certificados.por_vencer_30d)+" · Vencidos: "+$(w.value.certificados.vencidos),1)])):A("",!0),w.value.contadores?(o(),c("a",Hs,[d[7]||(d[7]=e("div",{class:"flex items-center justify-between"},[e("span",{class:"text-sm font-medium text-slate-500 dark:text-slate-300"},"Contadores"),e("span",{class:"inline-flex items-center rounded bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700 dark:bg-slate-800 dark:text-slate-200"},"Total")],-1)),e("div",Fs,$(w.value.contadores.total),1),e("div",Zs," Asignados: "+$(w.value.contadores.assigned)+" · Sin asignar: "+$(w.value.contadores.unassigned),1)])):A("",!0),w.value.calendar?(o(),c("a",qs,[d[8]||(d[8]=e("div",{class:"flex items-center justify-between"},[e("span",{class:"text-sm font-medium text-slate-500 dark:text-slate-300"},"Calendario"),e("span",{class:"inline-flex items-center rounded bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700 dark:bg-slate-800 dark:text-slate-200"},"7 días")],-1)),e("div",Ws,$(w.value.calendar.upcoming_7d),1),d[9]||(d[9]=e("div",{class:"mt-2 text-sm text-slate-600 dark:text-slate-300"},"Eventos asignados próximos",-1))])):A("",!0)]),e("section",Gs,[e("div",Ks,[e("div",Qs,[e("div",Js,[e("div",Ys,[d[10]||(d[10]=e("h2",{class:"text-lg font-semibold text-slate-900 dark:text-slate-100"},"Certificados por vencer",-1)),e("div",Xs,[me(ws,{columns:y,"visible-keys":C(x),onToggle:C(b),onReset:C(u)},null,8,["visible-keys","onToggle","onReset"]),w.value.certificados?(o(),c("a",ea," Ver certificados ")):A("",!0)])]),d[11]||(d[11]=e("p",{class:"mt-1 text-sm text-slate-600 dark:text-slate-300"},"Próximos 30 días (máx. 5)",-1))]),e("div",{ref_key:"tableScrollRef",ref:g,class:"overflow-x-auto"},[e("table",{ref_key:"tableRef",ref:v,class:"min-w-full text-left text-sm text-slate-700 dark:text-slate-200"},[e("colgroup",null,[(o(),c(ue,null,ce(y,r=>e("col",{key:r.key,style:we({display:C(E)(r.key)?"":"none"})},null,4)),64))]),d[13]||(d[13]=e("thead",{class:"bg-slate-50 text-xs uppercase text-slate-600 dark:bg-slate-800 dark:text-slate-200"},[e("tr",null,[e("th",{class:"px-6 py-3"},"Nombre"),e("th",{class:"px-6 py-3"},"RUC"),e("th",{class:"px-6 py-3"},"Tipo"),e("th",{class:"px-6 py-3"},"Vence")])],-1)),e("tbody",null,[(o(!0),c(ue,null,ce(I.value.certificados_por_vencer,r=>(o(),c("tr",{key:r.id,class:"border-t border-slate-200 hover:bg-slate-50 dark:border-slate-800 dark:hover:bg-slate-800"},[e("td",ta,$(r.nombre),1),e("td",sa,$(r.ruc||"—"),1),e("td",aa,$(r.tipo||"—"),1),e("td",la,$(r.fecha_vencimiento||"—"),1)]))),128)),(s=I.value.certificados_por_vencer)!=null&&s.length?A("",!0):(o(),c("tr",ra,[...d[12]||(d[12]=[e("td",{class:"px-6 py-4 text-sm text-slate-500 dark:text-slate-300",colspan:"4"},"Sin vencimientos próximos.",-1)])]))])],512)],512),z(e("div",{ref_key:"stickyScrollRef",ref:_,class:"sticky bottom-0 z-20 mt-2 overflow-x-auto rounded-lg border border-slate-200 bg-white/95 dark:border-slate-700 dark:bg-slate-900/95"},[e("div",{style:we({width:`${C(i)}px`,height:"1px"})},null,4)],512),[[G,C(h)]])])]),e("div",null,[e("div",oa,[e("div",na,[e("div",da,[d[14]||(d[14]=e("h2",{class:"text-lg font-semibold text-slate-900 dark:text-slate-100"},"Próximos eventos",-1)),w.value.calendar?(o(),c("a",ia,"Ver calendario")):A("",!0)]),d[15]||(d[15]=e("p",{class:"mt-1 text-sm text-slate-600 dark:text-slate-300"},"Asignados a ti (máx. 5)",-1))]),e("div",ua,[(t=I.value.upcoming_events)!=null&&t.length?(o(),c("ul",ba,[(o(!0),c(ue,null,ce(I.value.upcoming_events,r=>(o(),c("li",{key:r.id,class:"rounded-lg border border-slate-200 p-3 dark:border-slate-800"},[e("div",ma,$(r.title),1),e("div",ga,[Le($(B(r.start_at))+" ",1),r.location?(o(),c("span",va,"· "+$(r.location),1)):A("",!0)])]))),128))])):(o(),c("div",ca,"Sin eventos próximos."))])])])]),e("section",pa,[I.value.recent_leads?(o(),c("div",xa,[d[16]||(d[16]=De('<div class="border-b border-slate-200 p-6 dark:border-slate-800"><div class="flex items-center justify-between"><h2 class="text-lg font-semibold text-slate-900 dark:text-slate-100">Últimos leads</h2><a href="/leads" class="text-sm font-medium text-blue-600 hover:underline">Ver leads</a></div><p class="mt-1 text-sm text-slate-600 dark:text-slate-300">Últimos 5 registros</p></div>',1)),e("div",fa,[(o(!0),c(ue,null,ce(I.value.recent_leads,r=>(o(),c("div",{key:r.id,class:"p-6"},[e("div",ha,[e("div",null,[e("div",wa,$(r.name),1),e("div",ya,$(r.company_name||"—"),1)]),e("div",ka,[e("div",_a,$(P(r.amount,r.currency)),1),e("div",Ca,$(B(r.created_at)),1)])])]))),128)),(a=I.value.recent_leads)!=null&&a.length?A("",!0):(o(),c("div",$a,"Sin leads."))])])):A("",!0),I.value.recent_incidences?(o(),c("div",Ea,[d[17]||(d[17]=De('<div class="border-b border-slate-200 p-6 dark:border-slate-800"><div class="flex items-center justify-between"><h2 class="text-lg font-semibold text-slate-900 dark:text-slate-100">Últimas incidencias</h2><a href="/backlog" class="text-sm font-medium text-blue-600 hover:underline">Ver incidencias</a></div><p class="mt-1 text-sm text-slate-600 dark:text-slate-300">Últimos 5 registros</p></div>',1)),e("div",Sa,[(o(!0),c(ue,null,ce(I.value.recent_incidences,r=>(o(),c("div",{key:r.id,class:"p-6"},[e("div",Ia,$(r.correlative)+" · "+$(r.title),1),e("div",Ta," Prioridad: "+$(r.priority||"—")+" · Fecha: "+$(r.date||"—")+" · "+$(B(r.created_at)),1)]))),128)),(n=I.value.recent_incidences)!=null&&n.length?A("",!0):(o(),c("div",La,"Sin incidencias."))])])):A("",!0)])]))])}}},Aa={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},Ba={class:"relative w-full max-w-2xl rounded-xl bg-white shadow-xl dark:bg-slate-900"},Na={key:0,class:"mb-4 rounded-lg border border-red-200 bg-red-50 p-3 text-sm text-red-700 dark:border-red-900/40 dark:bg-red-950/30 dark:text-red-200"},Va={class:"grid grid-cols-1 gap-3 md:grid-cols-2"},Oa={class:"md:col-span-2"},Pa={class:"md:col-span-2"},Ra={class:"relative"},ja={key:0,class:"absolute z-10 mt-1 w-full rounded-lg border border-gray-200 bg-white p-1 shadow-lg dark:border-slate-800 dark:bg-slate-950"},Da=["onClick"],za={class:"truncate"},Ua={class:"ml-3 text-xs text-gray-500 dark:text-slate-400"},Ha={key:1,class:"mt-1 text-xs text-gray-600 dark:text-slate-300"},Fa={class:"md:col-span-2"},Za={class:"mt-5 flex items-center justify-end gap-2"},qa=["disabled"],Wa={__name:"IncidenceQuickModal",setup(l){const y=L(!1),v=L(!1),x=L(""),E=(()=>{if(typeof window>"u")return!1;const a=window.location.hostname;return a==="localhost"||a==="127.0.0.1"||a==="::1"})();let b=null;const u=async()=>E?(b||(b=Q(()=>import("./customerModalAutofill.local-CpHl0RE-.js"),[]).catch(()=>null)),b):null,g=L({title:"",date:"",priority:"media",notes:"",customer_id:null}),_=L(""),i=L(""),h=L([]),k=L(!1);let f=null;const w=()=>{const a=new Date,n=a.getFullYear(),r=String(a.getMonth()+1).padStart(2,"0"),S=String(a.getDate()).padStart(2,"0");return`${n}-${r}-${S}`},I=()=>{x.value="",g.value={title:"",date:w(),priority:"media",notes:"",customer_id:null},_.value="",i.value="",h.value=[],k.value=!1},R=()=>{y.value=!1,k.value=!1},H=()=>{g.value.customer_id=null,i.value=""},m=a=>{g.value.customer_id=Number(a.id),i.value=String(a.label||""),_.value=String(a.label||""),k.value=!1},B=async a=>{var n,r;try{const S=await oe.get("/related-lookup",{params:{type:"customer",id:a}}),O=(r=(n=S==null?void 0:S.data)==null?void 0:n.data)==null?void 0:r.label;O?(i.value=String(O),_.value=String(O)):(i.value=`#${a}`,_.value=`#${a}`)}catch{i.value=`#${a}`,_.value=`#${a}`}},P=async()=>{var n;const a=(_.value||"").trim();if(!a||a.length<2){h.value=[],k.value=!1;return}try{const r=await oe.get("/related-lookup",{params:{type:"customer",q:a,limit:8}}),S=((n=r==null?void 0:r.data)==null?void 0:n.data)??[];h.value=Array.isArray(S)?S:[],k.value=h.value.length>0}catch{h.value=[],k.value=!1}},N=()=>{g.value.customer_id=null,i.value="",f&&window.clearTimeout(f),f=window.setTimeout(()=>{P()},250)},D=a=>{var O,j,Z;const n=(j=(O=a==null?void 0:a.response)==null?void 0:O.data)==null?void 0:j.errors;if(!n||typeof n!="object")return null;const r=Object.keys(n)[0],S=r?(Z=n[r])==null?void 0:Z[0]:null;return typeof S=="string"?S:null},M=async()=>{var n,r;v.value=!0,x.value="";const a={title:g.value.title,date:g.value.date||null,priority:g.value.priority||"media",notes:g.value.notes||null,customer_id:g.value.customer_id||null};try{await oe.post("/incidencias",a),$e("Incidencia creada"),R(),window.dispatchEvent(new CustomEvent("incidencias:created"))}catch(S){x.value=D(S)??((r=(n=S==null?void 0:S.response)==null?void 0:n.data)==null?void 0:r.message)??"No se pudo crear la incidencia.",Ie(x.value)}finally{v.value=!1}},d=async()=>{var n;const a=await u();(n=a==null?void 0:a.autofillIncidenceQuickForm)==null||n.call(a,g)},s=async(a={})=>{I(),y.value=!0;const n=(a==null?void 0:a.customer_id)??(a==null?void 0:a.customerId)??null,r=(a==null?void 0:a.customer_label)??(a==null?void 0:a.customerLabel)??null;n&&(g.value.customer_id=Number(n),r?(i.value=String(r),_.value=String(r)):await B(Number(n)))},t=a=>{s((a==null?void 0:a.detail)??{})};return ve(()=>{window.addEventListener("incidencias:create",t)}),fe(()=>{window.removeEventListener("incidencias:create",t),f&&window.clearTimeout(f)}),(a,n)=>(o(),W(Ce,{name:"fade"},{default:_e(()=>[y.value?(o(),c("div",Aa,[e("div",{class:"absolute inset-0 bg-black/50",onClick:R}),me(Ce,{name:"pop"},{default:_e(()=>[e("div",Ba,[n[11]||(n[11]=e("div",{class:"p-5 border-b border-gray-200 dark:border-slate-800"},[e("div",{class:"text-lg font-semibold text-gray-900 dark:text-slate-100"},"Nueva incidencia"),e("div",{class:"mt-1 text-sm text-gray-600 dark:text-slate-300"}," Registra una incidencia y asígnala a un cliente. ")],-1)),e("form",{class:"p-5",onSubmit:Te(M,["prevent"])},[x.value?(o(),c("div",Na,$(x.value),1)):A("",!0),e("div",Va,[e("div",Oa,[n[5]||(n[5]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300"},"Nombre de la incidencia",-1)),z(e("input",{"onUpdate:modelValue":n[0]||(n[0]=r=>g.value.title=r),type:"text",required:"",class:"mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100"},null,512),[[be,g.value.title,void 0,{trim:!0}]])]),e("div",null,[n[6]||(n[6]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300"},"Fecha",-1)),z(e("input",{"onUpdate:modelValue":n[1]||(n[1]=r=>g.value.date=r),type:"date",class:"mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100"},null,512),[[be,g.value.date]])]),e("div",null,[n[8]||(n[8]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300"},"Prioridad",-1)),z(e("select",{"onUpdate:modelValue":n[2]||(n[2]=r=>g.value.priority=r),class:"mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100"},[...n[7]||(n[7]=[e("option",{value:"alta"},"Alta",-1),e("option",{value:"media"},"Media",-1),e("option",{value:"baja"},"Baja",-1)])],512),[[Ue,g.value.priority]])]),e("div",Pa,[n[9]||(n[9]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300"},"Cliente",-1)),e("div",Ra,[z(e("input",{"onUpdate:modelValue":n[3]||(n[3]=r=>_.value=r),type:"text",class:"mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100",placeholder:"Buscar cliente…",onInput:N,onFocus:N},null,544),[[be,_.value,void 0,{trim:!0}]]),k.value&&h.value.length?(o(),c("div",ja,[(o(!0),c(ue,null,ce(h.value,r=>(o(),c("button",{key:r.id,type:"button",class:"flex w-full items-center justify-between rounded-md px-2 py-2 text-left text-sm text-gray-800 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-200 dark:text-slate-100 dark:hover:bg-slate-900 dark:focus:ring-blue-500/30",onClick:S=>m(r)},[e("span",za,$(r.label),1),e("span",Ua,"#"+$(r.id),1)],8,Da))),128))])):A("",!0),i.value?(o(),c("div",Ha,[Le(" Seleccionado: "+$(i.value)+" ",1),e("button",{type:"button",class:"ml-2 text-xs font-medium text-blue-600 hover:underline",onClick:H}," Quitar ")])):A("",!0)])]),e("div",Fa,[n[10]||(n[10]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300"},"Observaciones",-1)),z(e("textarea",{"onUpdate:modelValue":n[4]||(n[4]=r=>g.value.notes=r),rows:"4",class:"mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100",placeholder:"Detalle / notas…"},null,512),[[be,g.value.notes,void 0,{trim:!0}]])])]),e("div",Za,[C(E)?(o(),c("button",{key:0,type:"button",class:"inline-flex items-center rounded-lg border border-amber-300 bg-amber-50 px-3 py-2 text-xs font-medium text-amber-800 hover:bg-amber-100 dark:border-amber-800/40 dark:bg-amber-950/20 dark:text-amber-300 dark:hover:bg-amber-900/30",onClick:d}," Rellenar test ")):A("",!0),e("button",{type:"button",class:"inline-flex items-center rounded-lg border border-gray-200 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-200 dark:hover:bg-slate-800",onClick:R}," Cancelar "),e("button",{type:"submit",class:"inline-flex items-center rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-blue-700 disabled:opacity-60",disabled:v.value},$(v.value?"Creando…":"Crear incidencia"),9,qa)])],32)])]),_:1})])):A("",!0)]),_:1}))}},Ga=He(Wa,[["__scopeId","data-v-9b304425"]]),Ka={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},Qa={class:"relative w-full max-w-2xl rounded-xl bg-white shadow-xl dark:bg-slate-900"},Ja={key:0,class:"mb-4 rounded-lg border border-red-200 bg-red-50 p-3 text-sm text-red-700 dark:border-red-900/40 dark:bg-red-950/30 dark:text-red-200"},Ya={class:"grid grid-cols-1 gap-3 md:grid-cols-2"},Xa={class:"md:col-span-2"},el={class:"md:col-span-2"},tl={class:"relative"},sl={key:0,class:"absolute z-10 mt-1 w-full rounded-lg border border-gray-200 bg-white p-1 shadow-lg dark:border-slate-800 dark:bg-slate-950"},al=["onClick"],ll={class:"truncate"},rl={class:"ml-3 text-xs text-gray-500 dark:text-slate-400"},ol={key:1,class:"mt-1 text-xs text-gray-600 dark:text-slate-300"},nl={class:"md:col-span-2"},dl={class:"mt-5 flex items-center justify-between gap-2"},il=["disabled"],ul={class:"ml-auto flex items-center gap-2"},cl=["disabled"],bl={__name:"IncidenceEditModal",setup(l){const y=L(!1),v=L(!1),x=L(!1),E=L(""),b=L({id:null,title:"",date:"",priority:"media",notes:"",customer_id:null}),u=L(""),g=L(""),_=L([]),i=L(!1);let h=null;const k=()=>{E.value="",x.value=!1,b.value={id:null,title:"",date:"",priority:"media",notes:"",customer_id:null},u.value="",g.value="",_.value=[],i.value=!1},f=()=>{y.value=!1,i.value=!1},w=()=>{b.value.customer_id=null,g.value=""},I=s=>{b.value.customer_id=Number(s.id),g.value=String(s.label||""),u.value=String(s.label||""),i.value=!1},R=async s=>{var t,a;try{const n=await oe.get("/related-lookup",{params:{type:"customer",id:s}}),r=(a=(t=n==null?void 0:n.data)==null?void 0:t.data)==null?void 0:a.label;r?(g.value=String(r),u.value=String(r)):(g.value=`#${s}`,u.value=`#${s}`)}catch{g.value=`#${s}`,u.value=`#${s}`}},H=async()=>{var t;const s=(u.value||"").trim();if(!s||s.length<2){_.value=[],i.value=!1;return}try{const a=await oe.get("/related-lookup",{params:{type:"customer",q:s,limit:8}}),n=((t=a==null?void 0:a.data)==null?void 0:t.data)??[];_.value=Array.isArray(n)?n:[],i.value=_.value.length>0}catch{_.value=[],i.value=!1}},m=()=>{b.value.customer_id=null,g.value="",h&&window.clearTimeout(h),h=window.setTimeout(()=>{H()},250)},B=s=>{var r,S,O;const t=(S=(r=s==null?void 0:s.response)==null?void 0:r.data)==null?void 0:S.errors;if(!t||typeof t!="object")return null;const a=Object.keys(t)[0],n=a?(O=t[a])==null?void 0:O[0]:null;return typeof n=="string"?n:null},P=s=>{if(!s)return"";try{const t=String(s);if(/^\d{4}-\d{2}-\d{2}$/.test(t))return t;const a=new Date(t);if(Number.isNaN(a.getTime()))return"";const n=a.getFullYear(),r=String(a.getMonth()+1).padStart(2,"0"),S=String(a.getDate()).padStart(2,"0");return`${n}-${r}-${S}`}catch{return""}},N=async(s={})=>{var S,O;k();const t=(s==null?void 0:s.incidence)??(s==null?void 0:s.item)??s,a=(t==null?void 0:t.id)??(s==null?void 0:s.id)??null;if(!a)return;b.value.id=Number(a),b.value.title=String((t==null?void 0:t.title)??""),b.value.date=P((t==null?void 0:t.date)??""),b.value.priority=String((t==null?void 0:t.priority)??"media")||"media",b.value.notes=String((t==null?void 0:t.notes)??"");const n=(t==null?void 0:t.customer_id)??(s==null?void 0:s.customer_id)??null;b.value.customer_id=n?Number(n):null,y.value=!0;const r=((S=t==null?void 0:t.customer)==null?void 0:S.company_name)||((O=t==null?void 0:t.customer)==null?void 0:O.name)||(s==null?void 0:s.customer_label)||null;b.value.customer_id&&(r?(g.value=String(r),u.value=String(r)):await R(b.value.customer_id))},D=async()=>{var t,a,n;if(!b.value.id)return;v.value=!0,E.value="";const s={title:b.value.title,date:b.value.date||null,priority:b.value.priority||"media",notes:b.value.notes||null,customer_id:b.value.customer_id||null};try{const r=await oe.put(`/incidencias/${b.value.id}`,s),S=(t=r==null?void 0:r.data)==null?void 0:t.data;$e("Incidencia actualizada"),f(),window.dispatchEvent(new CustomEvent("incidencias:updated",{detail:{incidence:S}}))}catch(r){E.value=B(r)??((n=(a=r==null?void 0:r.response)==null?void 0:a.data)==null?void 0:n.message)??"No se pudo actualizar la incidencia.",Ie(E.value)}finally{v.value=!1}},M=async()=>{var t,a;if(!(!b.value.id||!await Ke({title:"¿Seguro que quieres eliminar la incidencia?",text:"Esta acción no se puede deshacer.",icon:"warning",confirmText:"Eliminar",cancelText:"Cancelar"}))){x.value=!0,E.value="";try{await oe.delete(`/incidencias/${b.value.id}`),$e("Incidencia eliminada correctamente"),f(),window.dispatchEvent(new CustomEvent("incidencias:deleted",{detail:{id:b.value.id}}))}catch(n){E.value=((a=(t=n==null?void 0:n.response)==null?void 0:t.data)==null?void 0:a.message)??"No se pudo eliminar la incidencia.",Ie(E.value)}finally{x.value=!1}}},d=s=>{N((s==null?void 0:s.detail)??{})};return ve(()=>{window.addEventListener("incidencias:edit",d)}),fe(()=>{window.removeEventListener("incidencias:edit",d),h&&window.clearTimeout(h)}),(s,t)=>(o(),W(Ce,{name:"fade"},{default:_e(()=>[y.value?(o(),c("div",Ka,[e("div",{class:"absolute inset-0 bg-black/50",onClick:f}),me(Ce,{name:"pop"},{default:_e(()=>[e("div",Qa,[t[11]||(t[11]=e("div",{class:"p-5 border-b border-gray-200 dark:border-slate-800"},[e("div",{class:"text-lg font-semibold text-gray-900 dark:text-slate-100"},"Editar incidencia"),e("div",{class:"mt-1 text-sm text-gray-600 dark:text-slate-300"}," Actualiza título, cliente, prioridad, fecha y notas. ")],-1)),e("form",{class:"p-5",onSubmit:Te(D,["prevent"])},[E.value?(o(),c("div",Ja,$(E.value),1)):A("",!0),e("div",Ya,[e("div",Xa,[t[5]||(t[5]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300"},"Nombre de la incidencia",-1)),z(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>b.value.title=a),type:"text",required:"",class:"mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100"},null,512),[[be,b.value.title,void 0,{trim:!0}]])]),e("div",null,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300"},"Fecha",-1)),z(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>b.value.date=a),type:"date",class:"mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100"},null,512),[[be,b.value.date]])]),e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300"},"Prioridad",-1)),z(e("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>b.value.priority=a),class:"mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100"},[...t[7]||(t[7]=[e("option",{value:"alta"},"Alta",-1),e("option",{value:"media"},"Media",-1),e("option",{value:"baja"},"Baja",-1)])],512),[[Ue,b.value.priority]])]),e("div",el,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300"},"Cliente",-1)),e("div",tl,[z(e("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>u.value=a),type:"text",class:"mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100",placeholder:"Buscar cliente…",onInput:m,onFocus:m},null,544),[[be,u.value,void 0,{trim:!0}]]),i.value&&_.value.length?(o(),c("div",sl,[(o(!0),c(ue,null,ce(_.value,a=>(o(),c("button",{key:a.id,type:"button",class:"flex w-full items-center justify-between rounded-md px-2 py-2 text-left text-sm text-gray-800 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-200 dark:text-slate-100 dark:hover:bg-slate-900 dark:focus:ring-blue-500/30",onClick:n=>I(a)},[e("span",ll,$(a.label),1),e("span",rl,"#"+$(a.id),1)],8,al))),128))])):A("",!0),g.value?(o(),c("div",ol,[Le(" Seleccionado: "+$(g.value)+" ",1),e("button",{type:"button",class:"ml-2 text-xs font-medium text-blue-600 hover:underline",onClick:w}," Quitar ")])):A("",!0)])]),e("div",nl,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300"},"Observaciones",-1)),z(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=a=>b.value.notes=a),rows:"4",class:"mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100",placeholder:"Detalle / notas…"},null,512),[[be,b.value.notes,void 0,{trim:!0}]])])]),e("div",dl,[b.value.id?(o(),c("button",{key:0,type:"button",class:"inline-flex items-center rounded-lg border border-red-200 bg-red-50 px-4 py-2 text-sm font-medium text-red-700 shadow-sm hover:bg-red-100 disabled:opacity-60 dark:border-red-700 dark:bg-red-900/20 dark:text-red-400 dark:hover:bg-red-900/30",disabled:v.value||x.value,onClick:M},$(x.value?"Eliminando…":"Eliminar"),9,il)):A("",!0),e("div",ul,[e("button",{type:"button",class:"inline-flex items-center rounded-lg border border-gray-200 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-200 dark:hover:bg-slate-800",onClick:f}," Cancelar "),e("button",{type:"submit",class:"inline-flex items-center rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-blue-700 disabled:opacity-60",disabled:v.value||x.value||!b.value.id},$(v.value?"Guardando…":"Guardar cambios"),9,cl)])])],32)])]),_:1})])):A("",!0)]),_:1}))}},ml=He(bl,[["__scopeId","data-v-cbeecece"]]),gl={class:"min-h-screen flex flex-col bg-gradient-to-br from-blue-50/60 via-gray-50 to-gray-50 dark:from-slate-950 dark:via-slate-950 dark:to-slate-900"},vl={class:"flex-1 p-4 pt-20"},pl={class:"max-w-7xl mx-auto w-full"},xl={class:"flex items-center justify-between mb-6"},fl={class:"border-l-4 border-blue-600 pl-4"},hl={class:"text-2xl font-semibold text-gray-900 dark:text-slate-100"},wl={class:"mt-1 text-sm text-gray-600 dark:text-slate-300"},yl={__name:"App",setup(l){const y=J(()=>Q(()=>import("./UsersTable-D_j8AwST.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),v=J(()=>Q(()=>import("./RolesTable-HmGilZH4.js"),__vite__mapDeps([7,1,2,3,4,6]))),x=J(()=>Q(()=>import("./LeadsBoard-CrTc4yMQ.js"),__vite__mapDeps([8,1,2,3,4,6]))),E=J(()=>Q(()=>import("./LeadsTable-CNjLR_q5.js"),__vite__mapDeps([9,3,2,4,1,6]))),b=J(()=>Q(()=>import("./LeadsWhatsAppCampaign-CB9LY_8d.js"),__vite__mapDeps([10,3,2]))),u=J(()=>Q(()=>import("./LeadsEmailCampaign-DeXcPzbf.js"),__vite__mapDeps([11,3,2]))),g=J(()=>Q(()=>import("./CalendarView-BQAgF3bh.js"),__vite__mapDeps([12,1,2,3,4,13,14,6,15]))),_=J(()=>Q(()=>import("./IncidenciasTable-BgXcpGij.js"),__vite__mapDeps([16,3,2,1,4,6]))),i=J(()=>Q(()=>import("./IncidenciasBoard-D_mHyYbN.js"),__vite__mapDeps([17,3,2,4,5]))),h=J(()=>Q(()=>import("./BacklogBoard-DAL5Qtnm.js"),__vite__mapDeps([18,3,2,1,4,6]))),k=J(()=>Q(()=>import("./PostventaCustomersTable-B6XFfo0Z.js"),__vite__mapDeps([19,3,2,1,4,6]))),f=J(()=>Q(()=>import("./ContadoresTable-BwEfST_i.js"),__vite__mapDeps([20,3,2,1,4,6]))),w=J(()=>Q(()=>import("./CertificadosTable-BeOijefR.js"),__vite__mapDeps([21,3,2,1,4,6]))),I=J(()=>Q(()=>import("./LostLeadsList-ADs-FJEI.js"),__vite__mapDeps([22,3,2,1,4,6]))),R=J(()=>Q(()=>import("./WaitingLeadsList-xL-NRics.js"),__vite__mapDeps([23,3,2,1,4,6]))),H=J(()=>Q(()=>import("./SettingsView-BY--BNwm.js"),__vite__mapDeps([24,3,6,25]))),m=window.location.pathname.replace(/\/+$/,"")||"/",B=V(()=>m.startsWith("/users")),P=V(()=>m.startsWith("/roles")),N=V(()=>m==="/leads"),D=V(()=>m==="/leads/list"),M=V(()=>m==="/leads/whatsapp"),d=V(()=>m==="/leads/email"),s=V(()=>m.startsWith("/leads")),t=V(()=>m.startsWith("/customers")),a=V(()=>m.startsWith("/calendar")),n=V(()=>m.startsWith("/incidencias")),r=V(()=>n.value&&m==="/incidencias/board"?"board":"table"),S=V(()=>m.startsWith("/backlog")),O=V(()=>m==="/postventa/clientes"),j=V(()=>m==="/postventa/contadores"),Z=V(()=>m==="/postventa/certificados"),Y=V(()=>m.startsWith("/configuracion")),X=V(()=>n.value||S.value),ee=V(()=>B.value?"Usuarios":P.value?"Roles":Y.value?"Configuración":M.value?"WhatsApp":d.value?"Email":s.value?"Leads":m==="/desistidos"?"Desistidos":m==="/espera"?"Zona de espera":t.value?"Clientes":a.value?"Calendario":X.value?"Incidencias":O.value?"Clientes":j.value?"Contadores":Z.value?"Certificados":"Dashboard"),ae=V(()=>B.value?"Gestión de usuarios del sistema":P.value?"Crea roles y asigna permisos":Y.value?"Personalización del sistema":M.value?"Campañas manuales asistidas (sin API)":d.value?"Campañas informativas por correo (con baja automática)":N.value?"Pipeline de oportunidades":D.value?"Gestión de leads por etapas":m==="/desistidos"?"Leads marcados como desistidos":m==="/espera"?"Leads enviados a zona de espera":t.value?"Listado de clientes":a.value?"Agenda y recordatorios":n.value?`Registro y seguimiento de incidencias (vista ${r.value==="board"?"kanban":"lista"})`:S.value?"Registro y seguimiento de incidencias (vista backlog)":O.value?"Clientes (postventa)":j.value?"Gestión de contadores":Z.value?"Gestión de certificados":"Resumen general del sistema");V(()=>X.value||O.value||j.value||Z.value);const te=V(()=>m==="/desistidos"),le=V(()=>m==="/espera"),se=()=>{s.value&&window.location.assign(N.value?"/leads/list":"/leads")},ne=()=>{S.value?window.location.assign("/incidencias"):n.value&&(r.value==="table"?window.location.assign("/incidencias/board"):window.location.assign("/backlog"))},de=()=>{window.dispatchEvent(new CustomEvent("roles:create"))},ie=()=>{window.dispatchEvent(new CustomEvent("leads:create-quick"))},F=()=>{window.dispatchEvent(new CustomEvent("incidencias:create"))},p=()=>{window.dispatchEvent(new CustomEvent("contadores:create"))},K=()=>{window.dispatchEvent(new CustomEvent("certificados:create"))},re=L(!0),ge=()=>{re.value=!re.value};return ve(()=>{}),(pe,xe)=>(o(),c("div",gl,[me(Mt,{"sidebar-collapsed":re.value,onToggleSidebar:ge},null,8,["sidebar-collapsed"]),me(is,{collapsed:re.value},null,8,["collapsed"]),e("main",{class:U(["transition-[margin] duration-200 flex-1 flex flex-col",re.value?"sm:ml-20":"sm:ml-64"])},[e("div",vl,[e("div",pl,[e("div",xl,[e("div",fl,[e("h1",hl,$(ee.value),1),e("p",wl,$(ae.value),1)]),P.value?(o(),c("button",{key:0,type:"button",class:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg shadow-sm hover:bg-blue-700 hover:shadow focus:outline-none focus:ring-4 focus:ring-blue-300",onClick:de}," Crear rol ")):N.value||D.value?(o(),c("button",{key:1,type:"button",class:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg shadow-sm hover:bg-blue-700 hover:shadow focus:outline-none focus:ring-4 focus:ring-blue-300",onClick:ie}," Lead rápido ")):A("",!0),N.value||D.value?(o(),c("button",{key:2,type:"button",class:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-200 rounded-lg shadow-sm hover:bg-blue-50 hover:border-blue-200 hover:text-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 dark:text-slate-200 dark:bg-slate-900 dark:border-slate-800 dark:hover:bg-slate-800",onClick:se},$(N.value?"Vista lista":"Vista pipeline"),1)):X.value?(o(),c("button",{key:3,type:"button",class:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-200 rounded-lg shadow-sm hover:bg-blue-50 hover:border-blue-200 hover:text-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 dark:text-slate-200 dark:bg-slate-900 dark:border-slate-800 dark:hover:bg-slate-800",onClick:ne},$(S.value?"Vista lista":"Vista backlog"),1)):A("",!0),X.value||O.value?(o(),c("button",{key:5,type:"button",class:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg shadow-sm hover:bg-blue-700 hover:shadow focus:outline-none focus:ring-4 focus:ring-blue-300",onClick:F}," Nueva incidencia ")):j.value?(o(),c("button",{key:6,type:"button",class:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg shadow-sm hover:bg-blue-700 hover:shadow focus:outline-none focus:ring-4 focus:ring-blue-300",onClick:p}," Nuevo contador ")):Z.value?(o(),c("button",{key:7,type:"button",class:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg shadow-sm hover:bg-blue-700 hover:shadow focus:outline-none focus:ring-4 focus:ring-blue-300",onClick:K}," Nuevo certificado ")):A("",!0)]),B.value?(o(),W(C(y),{key:0})):P.value?(o(),W(C(v),{key:1})):N.value?(o(),W(C(x),{key:2})):D.value?(o(),W(C(E),{key:3})):M.value?(o(),W(C(b),{key:4})):d.value?(o(),W(C(u),{key:5})):n.value&&r.value==="table"?(o(),W(C(_),{key:6})):n.value&&r.value==="board"?(o(),W(C(i),{key:7})):S.value?(o(),W(C(h),{key:8})):O.value||t.value?(o(),W(C(k),{key:9})):j.value?(o(),W(C(f),{key:10})):Z.value?(o(),W(C(w),{key:11})):te.value?(o(),W(C(I),{key:12})):le.value?(o(),W(C(R),{key:13})):Y.value?(o(),W(C(H),{key:14})):a.value?(o(),W(C(g),{key:15})):(o(),W(Ma,{key:16}))])]),me(gs,{class:"mt-auto w-full"})],2),me(Ga),me(ml)]))}},Ml=Object.freeze(Object.defineProperty({__proto__:null,default:yl},Symbol.toStringTag,{value:"Module"}));export{Ml as A,ws as _,Cs as a,$e as b,Ke as c,Sl as d,Tl as e,Ye as f,Ll as g,Xe as h,Il as p,Ie as t,_s as u};
