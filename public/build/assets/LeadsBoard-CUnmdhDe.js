import{r as g,e as ne,o as Ue,f as Se,g as b,i as p,j as a,B as R,w as c,D as L,x as v,t as x,n as de,F as ae,m as ie,l as w,k,s as Ve,A as G,C as Q,v as H,z as oe,I as Ie}from"./vendor-vue-Db-AqoDh.js";import{a as C}from"./vendor-utils-Czy7fllw.js";import{t as K,c as J,a as A}from"./App-Bt9-hbAg.js";import"./app-DjmpOHxG.js";import"./vendor-ui-DEm6YKEA.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Le={class:"mb-4 flex items-center gap-3"},Ae={class:"flex items-center gap-2"},Me={class:"flex items-center gap-2"},Te={class:"flex items-center gap-2"},je={key:0,class:"text-sm text-gray-600 dark:text-slate-300"},ze={key:1,class:"mb-3 text-sm text-red-600"},Pe=["data-stage-id","onDrop"],qe={class:"p-4 border-b border-gray-200 dark:border-slate-800"},Fe={class:"flex items-center justify-between gap-3"},$e={class:"text-sm font-semibold text-gray-900 dark:text-slate-100"},Be={class:"text-xs text-gray-600 dark:text-slate-300"},Oe={class:"p-3 space-y-3 min-h-[140px]"},Ye={key:0,class:"text-sm text-gray-500 dark:text-slate-400 px-1"},Re=["data-lead-id"],Ge={key:0,class:"h-1 bg-blue-500 rounded-full mx-3 mb-2 animate-pulse transition-all duration-200"},Qe=["data-lead-id","draggable","onDragstart","onClick"],He={class:"flex items-start justify-between gap-3"},Ke={class:"text-sm font-semibold text-gray-900 dark:text-slate-100"},Je={key:0,class:"text-xs text-gray-600 dark:text-slate-300 mt-1"},We={key:1,class:"text-xs text-gray-600 dark:text-slate-300 mt-1"},Xe={key:0,class:"text-xs text-gray-700 dark:text-slate-200"},Ze={key:0,class:"mt-2 text-xs text-gray-600 dark:text-slate-300"},et={key:0},tt={key:1},at={key:1,class:"mt-3 flex justify-end"},ot=["disabled","onClick"],rt={key:1,class:"h-1 bg-blue-500 rounded-full mx-3 mt-2 animate-pulse transition-all duration-200"},st={class:"relative w-full max-w-lg"},lt={class:"relative bg-white rounded-lg shadow dark:bg-slate-900"},nt={class:"grid gap-3"},dt={class:"flex gap-3"},it={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},ut=["placeholder"],ct={key:0,class:"text-sm text-red-600"},mt={class:"mt-5 flex items-center justify-between"},bt=["disabled"],pt={class:"relative w-full max-w-lg"},gt={class:"relative bg-white rounded-lg shadow dark:bg-slate-900"},vt={class:"grid gap-3"},yt={class:"flex gap-3"},ft={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},xt={key:0,class:"text-sm text-red-600"},kt={class:"mt-5 flex items-center justify-between"},_t=["disabled"],ht={key:0,class:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},wt={class:"flex items-center gap-2"},Ct=["disabled"],Dt=["disabled"],At={__name:"LeadsBoard",setup(Et){const W=g(!0),f=g([]),M=g(20),T=g(""),j=g(""),D=g(""),_=g(null),X=g(null),z=g(null),P=g(null),ue=ne(()=>{const o=f.value.length||1;return o<=1?"grid-cols-1":o===2?"grid-cols-1 md:grid-cols-2":o===3?"grid-cols-1 md:grid-cols-3":"grid-cols-1 md:grid-cols-2 xl:grid-cols-4"}),ce=(o,t)=>{const e=Number(o);return Number.isNaN(e)?"":t==="USD"?`$${e.toFixed(2)}`:`S/ ${e.toFixed(2)}`},N=async({showLoading:o=!0}={})=>{var t,e,s,l;o&&(W.value=!0);try{const r={limit:M.value||void 0,date_from:T.value||void 0,date_to:j.value||void 0},d=await C.get("/leads/board-data",{params:r});f.value=((e=(t=d==null?void 0:d.data)==null?void 0:t.data)==null?void 0:e.stages)??[]}catch(r){f.value=[];const d=((l=(s=r==null?void 0:r.response)==null?void 0:s.data)==null?void 0:l.message)??"No se pudo cargar el pipeline.";K(d),console.error("Leads board load error",r)}finally{o&&(W.value=!1)}},me=async()=>{await N()},be=async()=>{M.value=100,T.value="",j.value="",await N()},q=g(new Set),U=(o,t)=>!!(o!=null&&o.archived_at||o!=null&&o.won_at||t!=null&&t.is_won),pe=(o,t,e)=>{U(o,t)||(_.value=o,X.value=f.value.find(s=>s.id===o.stage_id),e!=null&&e.target&&(e.target.style.transform="scale(1.02)",e.target.style.opacity="0.7",e.target.style.transition="transform 0.1s ease"))},ge=o=>{o!=null&&o.target&&(o.target.style.transform="",o.target.style.opacity="",o.target.style.transition=""),z.value=null,P.value=null,_.value=null,X.value=null},ve=o=>{if(!_.value)return;o.preventDefault();const t=o.currentTarget.closest("section[data-stage-id]");if(!t)return;const e=parseInt(t.getAttribute("data-stage-id")),s=f.value.find(r=>r.id===e);if(!s)return;z.value=e;const l=o.clientY;P.value=Z(s,l,_.value.id)},ye=async(o,t)=>{if(t.preventDefault(),!_.value||!o)return;const e=_.value,s=X.value;if(U(e,s)){D.value="Este lead está bloqueado y no se puede mover.";return}if(!(o.is_won&&!e.customer_id&&!await J({title:"Confirmar GANADO",text:"¿Marcar este lead como GANADO? Esto lo convertirá en cliente automáticamente.",confirmText:"Sí, marcar como ganado",cancelText:"Cancelar",icon:"warning"}))){D.value="";try{if(s.id===o.id){const r=t.clientY,d=Z(o,r,e.id);fe(o.id,e.id,d)}else{const r=t.clientY,d=Z(o,r,e.id);se(s.id,e.id),xe(o.id,{...e,stage_id:o.id},d),C.patch(`/leads/${e.id}/move-stage`,{stage_id:o.id}).then(()=>{const u=o.leads.map(m=>m.id);return C.patch("/leads/reorder",{stage_id:o.id,ordered_ids:u})}).catch(u=>{console.error("Error moving lead:",u),D.value="Error al mover el lead. Recargando...",N({showLoading:!1})})}}catch{D.value="Error al mover el lead. Inténtalo de nuevo.",await N({showLoading:!1})}}},re=new Map,Z=(o,t,e=null)=>{let s=re.get(o.id);if(!s||!document.contains(s)){if(s=document.querySelector(`[data-stage-id="${o.id}"] .p-3`),!s)return 0;re.set(o.id,s)}const l=s.querySelectorAll("article[data-lead-id]");let r=0;for(let d=0;d<l.length;d++){const u=l[d],m=parseInt(u.getAttribute("data-lead-id"));if(e&&m===e)continue;const y=u.getBoundingClientRect();if(t<y.top+y.height/2)return r;r++}return r},fe=async(o,t,e)=>{const s=f.value.find(m=>m.id===o);if(!s||!Array.isArray(s.leads))return;const l=s.leads.findIndex(m=>m.id===t);if(l===-1||l===e)return;const[r]=s.leads.splice(l,1),d=Math.min(Math.max(0,e),s.leads.length);s.leads.splice(d,0,r),s.count=s.leads.length;const u=s.leads.map(m=>m.id);C.patch("/leads/reorder",{stage_id:o,ordered_ids:u}).catch(m=>{console.error("Error reordering leads:",m),N({showLoading:!1})})},se=(o,t)=>{const e=f.value.find(l=>l.id===o);if(!(e!=null&&e.leads))return;const s=e.leads.findIndex(l=>l.id===t);s!==-1&&(e.leads.splice(s,1),e.count=e.leads.length)},xe=(o,t,e=0)=>{const s=f.value.find(d=>d.id===o);if(!s)return;Array.isArray(s.leads)||(s.leads=[]);const l=s.leads.findIndex(d=>d.id===t.id);l!==-1&&s.leads.splice(l,1);const r=Math.min(Math.max(0,e),s.leads.length);s.leads.splice(r,0,t),s.count=s.leads.length},ke=async(o,t)=>{var s,l;if(!(!(o!=null&&o.id)||!(t!=null&&t.is_won)&&!(o!=null&&o.won_at)||!await J({title:"Archivar lead",text:"Se ocultará del pipeline, pero seguirá visible en la tabla (historial).",confirmText:"Archivar",cancelText:"Cancelar",icon:"warning"}))){q.value.add(o.id),D.value="";try{await C.patch(`/leads/${o.id}/archive`);const r=se(t.id,o.id);A("Lead archivado")}catch(r){const d=((l=(s=r==null?void 0:r.response)==null?void 0:s.data)==null?void 0:l.message)??"No se pudo archivar el lead.";D.value=d,K(d)}finally{q.value.delete(o.id)}}},F=g(!1),$=g(!1),S=g(""),i=g({name:"",amount:null,currency:"PEN",contact_name:"",contact_phone:"",contact_email:"",company_name:"",company_address:"",document_type:"",document_number:""}),_e=ne(()=>i.value.document_type==="dni"?"Documento: DNI (8 dígitos)":i.value.document_type==="ruc"?"Documento: RUC (11 dígitos)":"Documento: Número (opcional)"),he=()=>{S.value="",i.value={name:"",amount:null,currency:"PEN",contact_name:"",contact_phone:"",contact_email:"",company_name:"",company_address:"",document_type:"",document_number:""},F.value=!0},ee=()=>{F.value=!1},B=o=>{var l,r,d;const t=(r=(l=o==null?void 0:o.response)==null?void 0:l.data)==null?void 0:r.errors;if(!t||typeof t!="object")return null;const e=Object.keys(t)[0],s=e?(d=t[e])==null?void 0:d[0]:null;return typeof s=="string"?s:null},we=async()=>{var t,e;$.value=!0,S.value="";const o={name:i.value.name,amount:i.value.amount,currency:i.value.currency,contact_name:i.value.contact_name||null,contact_phone:i.value.contact_phone||null,contact_email:i.value.contact_email||null,company_name:i.value.company_name||null,company_address:i.value.company_address||null,document_type:i.value.document_type||null,document_number:i.value.document_number||null};try{const l=(await C.post("/leads",o)).data.data,r=f.value.find(d=>d.sort_order===10||d.key==="follow_up")||f.value[0];r&&(Array.isArray(r.leads)||(r.leads=[]),r.leads.unshift(l),r.count=r.leads.length),A("Lead creado exitosamente"),ee()}catch(s){S.value=B(s)??((e=(t=s==null?void 0:s.response)==null?void 0:t.data)==null?void 0:e.message)??"No se pudo crear el lead."}finally{$.value=!1}},O=g(!1),E=g(!1),V=g(""),Y=g(null),n=g({id:null,name:"",amount:null,currency:"PEN",contact_name:"",contact_phone:"",contact_email:"",company_name:"",company_address:"",document_type:"",document_number:"",observacion:""}),Ce=o=>{V.value="",n.value={id:o.id,name:o.name||"",amount:o.amount??null,currency:o.currency??"PEN",contact_name:o.contact_name??"",contact_phone:o.contact_phone??"",contact_email:o.contact_email??"",company_name:o.company_name??"",company_address:o.company_address??"",document_type:o.document_type??"",document_number:o.document_number??"",observacion:o.observacion??""},O.value=!0,Ie(()=>{var t,e,s;(t=Y.value)!=null&&t.focus&&(Y.value.focus(),(s=(e=Y.value).select)==null||s.call(e))})},De=async()=>{var t,e,s,l,r,d;if(!(!((t=n.value)!=null&&t.id)||!await J({title:"Marcar como desistido",text:"¿Estás seguro? Esto archivará el lead y lo moverá a la lista de desistidos.",confirmText:"Sí, marcar",cancelText:"Cancelar",icon:"warning"})))try{const u=await C.post(`/leads/${n.value.id}/desist`,{observacion:n.value.observacion||""});I();for(const y of f.value){const h=((s=(e=y.leads)==null?void 0:e.findIndex)==null?void 0:s.call(e,te=>te.id===n.value.id))??-1;if(h!==-1){y.leads.splice(h,1),y.count=y.leads.length;break}}A("Lead marcado como desistido");const m=((l=u==null?void 0:u.data)==null?void 0:l.location)||"/desistidos";window.location.assign(m)}catch(u){const m=B(u)??((d=(r=u==null?void 0:u.response)==null?void 0:r.data)==null?void 0:d.message)??"No se pudo marcar como desistido.";K(m)}},Ee=async()=>{var t,e,s,l,r,d;if(!(!((t=n.value)!=null&&t.id)||!await J({title:"Enviar a zona de espera",text:"¿Estás seguro? Esto archivará el lead y lo moverá a la zona de espera.",confirmText:"Sí, enviar",cancelText:"Cancelar",icon:"warning"})))try{const u=await C.post(`/leads/${n.value.id}/wait`,{observacion:n.value.observacion||""});I();for(const y of f.value){const h=((s=(e=y.leads)==null?void 0:e.findIndex)==null?void 0:s.call(e,te=>te.id===n.value.id))??-1;if(h!==-1){y.leads.splice(h,1),y.count=y.leads.length;break}}A("Lead enviado a zona de espera");const m=((l=u==null?void 0:u.data)==null?void 0:l.location)||"/espera";window.location.assign(m)}catch(u){const m=B(u)??((d=(r=u==null?void 0:u.response)==null?void 0:r.data)==null?void 0:d.message)??"No se pudo enviar a zona de espera.";K(m)}},I=()=>{O.value=!1},Ne=async()=>{var t,e,s;E.value=!0,V.value="";const o={name:n.value.name,amount:n.value.amount,currency:n.value.currency,observacion:n.value.observacion||null,contact_name:n.value.contact_name||null,contact_phone:n.value.contact_phone||null,contact_email:n.value.contact_email||null,company_name:n.value.company_name||null,company_address:n.value.company_address||null,document_type:n.value.document_type||null,document_number:n.value.document_number||null};try{const l=await C.put(`/leads/${n.value.id}`,o),r=(t=l==null?void 0:l.data)==null?void 0:t.data;if(r)for(const d of f.value){if(!Array.isArray(d.leads))continue;const u=d.leads.findIndex(m=>m.id===r.id);if(u!==-1){d.leads.splice(u,1,r);break}}A("Lead actualizado"),I()}catch(l){V.value=B(l)??((s=(e=l==null?void 0:l.response)==null?void 0:e.data)==null?void 0:s.message)??"No se pudo actualizar el lead."}finally{E.value=!1}},le=()=>he();return Ue(async()=>{window.addEventListener("leads:create-quick",le),await N()}),Se(()=>{window.removeEventListener("leads:create-quick",le)}),(o,t)=>(p(),b(ae,null,[a("div",null,[t[28]||(t[28]=a("div",{class:"mb-4 text-sm text-gray-600 dark:text-slate-300"}," Arrastra un lead entre columnas para cambiar su etapa. ",-1)),a("div",Le,[a("div",Ae,[t[25]||(t[25]=a("label",{class:"text-xs text-gray-600 dark:text-slate-300"},"Limite:",-1)),c(a("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>M.value=e),class:"rounded-lg border border-gray-200 bg-white px-2 py-1 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-100 dark:focus:ring-blue-900/30"},[...t[24]||(t[24]=[a("option",{value:20},"20",-1),a("option",{value:50},"50",-1),a("option",{value:100},"100",-1),a("option",{value:250},"250",-1)])],512),[[L,M.value,void 0,{number:!0}]])]),a("div",Me,[t[26]||(t[26]=a("label",{class:"text-xs text-gray-600 dark:text-slate-300"},"Desde:",-1)),c(a("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>T.value=e),type:"date",class:"rounded-lg border border-gray-200 bg-white px-2 py-1 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 placeholder:text-gray-400 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-100 dark:placeholder:text-slate-500 dark:focus:ring-blue-900/30 dark:[color-scheme:dark]"},null,512),[[v,T.value]])]),a("div",Te,[t[27]||(t[27]=a("label",{class:"text-xs text-gray-600 dark:text-slate-300"},"Hasta:",-1)),c(a("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>j.value=e),type:"date",class:"rounded-lg border border-gray-200 bg-white px-2 py-1 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 placeholder:text-gray-400 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-100 dark:placeholder:text-slate-500 dark:focus:ring-blue-900/30 dark:[color-scheme:dark]"},null,512),[[v,j.value]])]),a("div",{class:"flex items-center gap-2 ms-auto"},[a("button",{onClick:me,class:"inline-flex items-center rounded-lg bg-blue-600 px-3 py-1 text-sm text-white"},"Aplicar"),a("button",{onClick:be,class:"inline-flex items-center rounded-lg border border-gray-200 bg-white px-3 py-1 text-sm text-gray-700 shadow-sm hover:bg-gray-50 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-200 dark:hover:bg-slate-800"}," Limpiar ")])]),W.value?(p(),b("div",je,"Cargando...")):D.value?(p(),b("div",ze,x(D.value),1)):(p(),b("div",{key:2,class:de(["grid gap-4",ue.value])},[(p(!0),b(ae,null,ie(f.value,e=>{var s,l;return p(),b("section",{key:e.id,"data-stage-id":e.id,class:"bg-white border border-gray-200 rounded-lg shadow-sm overflow-hidden dark:bg-slate-900 dark:border-slate-800",onDragover:w(ve,["prevent"]),onDrop:w(r=>ye(e,r),["prevent"])},[a("div",qe,[a("div",Fe,[a("div",$e,x(e.name),1),a("div",Be,x(e.count),1)])]),a("div",Oe,[(((s=e.leads)==null?void 0:s.length)??0)===0?(p(),b("div",Ye," Sin leads. ")):k("",!0),(p(!0),b(ae,null,ie(e.leads,(r,d)=>{var u,m,y;return p(),b("div",{key:r.id,"data-lead-id":r.id},[z.value===e.id&&P.value===d&&((u=_.value)==null?void 0:u.id)!==r.id?(p(),b("div",Ge)):k("",!0),a("article",{"data-lead-id":r.id,class:de(["select-none bg-gray-50 border border-gray-200 rounded-lg p-3 mb-3 dark:bg-slate-800 dark:border-slate-700 will-change-transform",{"opacity-60 scale-95 shadow-lg":((m=_.value)==null?void 0:m.id)===r.id,"cursor-not-allowed opacity-80":U(r,e),"cursor-grab hover:bg-blue-50/30 dark:hover:bg-slate-800/50 hover:shadow-md":!U(r,e)}]),style:Ve(((y=_.value)==null?void 0:y.id)===r.id?"transition: none !important; transform: scale(1.02);":"transition: transform 0.1s ease, opacity 0.1s ease;"),draggable:!U(r,e),onDragstart:h=>pe(r,e,h),onDragend:ge,onClick:h=>Ce(r)},[a("div",He,[a("div",null,[a("div",Ke,x(r.name),1),r.company_name?(p(),b("div",Je,x(r.company_name),1)):r.contact_name?(p(),b("div",We,x(r.contact_name),1)):k("",!0)]),r.amount!==null&&r.amount!==void 0?(p(),b("div",Xe,x(ce(r.amount,r.currency)),1)):k("",!0)]),r.contact_phone||r.contact_email?(p(),b("div",Ze,[r.contact_phone?(p(),b("div",et,x(r.contact_phone),1)):k("",!0),r.contact_email?(p(),b("div",tt,x(r.contact_email),1)):k("",!0)])):k("",!0),e.is_won?(p(),b("div",at,[a("button",{type:"button",class:"inline-flex items-center rounded-lg border border-gray-200 bg-white px-3 py-1.5 text-xs font-medium text-gray-700 shadow-sm hover:bg-gray-50 disabled:opacity-60 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-200 dark:hover:bg-slate-800",disabled:q.value.has(r.id),onClick:w(h=>ke(r,e),["stop","prevent"])},x(q.value.has(r.id)?"Archivando…":"Archivar"),9,ot)])):k("",!0)],46,Qe)],8,Re)}),128)),z.value===e.id&&P.value>=(((l=e.leads)==null?void 0:l.length)||0)?(p(),b("div",rt)):k("",!0)])],40,Pe)}),128))],2))]),R(Q,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:G(()=>[c(a("div",{class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/50",role:"dialog","aria-modal":"true",onClick:w(ee,["self"])},[R(Q,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:G(()=>[c(a("div",st,[a("div",lt,[t[31]||(t[31]=a("div",{class:"p-4 md:p-5 border-b rounded-t dark:border-slate-800"},[a("div",{class:"text-xs font-semibold text-gray-500 dark:text-slate-300 uppercase tracking-wider"},"Contacto inicial"),a("div",{class:"mt-1 text-sm text-gray-600 dark:text-slate-300"}," 0 Clientes potenciales: 0 S/ "),a("div",{class:"mt-3 text-lg font-semibold text-gray-900 dark:text-slate-100 text-center"},"Lead rápido")],-1)),a("form",{class:"p-4 md:p-5",onSubmit:w(we,["prevent"])},[a("div",nt,[c(a("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>i.value.name=e),type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",placeholder:"Nombre",required:""},null,512),[[v,i.value.name,void 0,{trim:!0}]]),a("div",dt,[c(a("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>i.value.amount=e),type:"number",min:"0",step:"0.01",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",placeholder:"0"},null,512),[[v,i.value.amount,void 0,{number:!0}]]),c(a("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>i.value.currency=e),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100"},[...t[29]||(t[29]=[a("option",{value:"PEN"},"S/",-1),a("option",{value:"USD"},"USD",-1)])],512),[[L,i.value.currency]])]),c(a("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>i.value.contact_name=e),type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",placeholder:"Contacto: Nombre"},null,512),[[v,i.value.contact_name,void 0,{trim:!0}]]),c(a("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>i.value.contact_phone=e),type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",placeholder:"Contacto: Teléfono"},null,512),[[v,i.value.contact_phone,void 0,{trim:!0}]]),c(a("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>i.value.contact_email=e),type:"email",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",placeholder:"Contacto: Correo"},null,512),[[v,i.value.contact_email,void 0,{trim:!0}]]),c(a("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>i.value.company_name=e),type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",placeholder:"Compañía: Nombre"},null,512),[[v,i.value.company_name,void 0,{trim:!0}]]),c(a("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>i.value.company_address=e),type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",placeholder:"Compañía: Dirección"},null,512),[[v,i.value.company_address,void 0,{trim:!0}]]),a("div",it,[c(a("select",{"onUpdate:modelValue":t[11]||(t[11]=e=>i.value.document_type=e),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100"},[...t[30]||(t[30]=[a("option",{value:""},"Documento: (opcional)",-1),a("option",{value:"dni"},"DNI",-1),a("option",{value:"ruc"},"RUC",-1)])],512),[[L,i.value.document_type]]),c(a("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>i.value.document_number=e),type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",placeholder:_e.value},null,8,ut),[[v,i.value.document_number,void 0,{trim:!0}]])]),S.value?(p(),b("p",ct,x(S.value),1)):k("",!0)]),a("div",mt,[a("button",{type:"submit",class:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-300",disabled:$.value},x($.value?"Creando...":"Crear"),9,bt),a("div",{class:"flex items-center gap-3"},[a("button",{type:"button",class:"text-sm font-medium text-gray-600 hover:text-gray-900 dark:text-slate-300 dark:hover:text-slate-100",onClick:ee}," Cancelar ")])])],32)])],512),[[H,F.value]])]),_:1})],512),[[H,F.value]])]),_:1}),R(Q,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:G(()=>[c(a("div",{class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/50",role:"dialog","aria-modal":"true",onClick:w(I,["self"])},[R(Q,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:G(()=>[c(a("div",pt,[a("div",gt,[t[37]||(t[37]=a("div",{class:"p-4 md:p-5 border-b rounded-t dark:border-slate-800"},[a("div",{class:"text-lg font-semibold text-gray-900 dark:text-slate-100 text-center"},"Editar lead")],-1)),a("form",{class:"p-4 md:p-5",onSubmit:w(Ne,["prevent"])},[a("div",vt,[c(a("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>n.value.name=e),type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",placeholder:"Nombre",required:""},null,512),[[v,n.value.name,void 0,{trim:!0}]]),a("div",yt,[c(a("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>n.value.amount=e),type:"number",min:"0",step:"0.01",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",placeholder:"0"},null,512),[[v,n.value.amount,void 0,{number:!0}]]),c(a("select",{"onUpdate:modelValue":t[15]||(t[15]=e=>n.value.currency=e),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100"},[...t[32]||(t[32]=[a("option",{value:"PEN"},"S/",-1),a("option",{value:"USD"},"USD",-1)])],512),[[L,n.value.currency]])]),c(a("input",{"onUpdate:modelValue":t[16]||(t[16]=e=>n.value.contact_name=e),type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",placeholder:"Contacto: Nombre"},null,512),[[v,n.value.contact_name,void 0,{trim:!0}]]),c(a("input",{"onUpdate:modelValue":t[17]||(t[17]=e=>n.value.contact_phone=e),type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",placeholder:"Contacto: Teléfono"},null,512),[[v,n.value.contact_phone,void 0,{trim:!0}]]),c(a("input",{"onUpdate:modelValue":t[18]||(t[18]=e=>n.value.contact_email=e),type:"email",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",placeholder:"Contacto: Correo"},null,512),[[v,n.value.contact_email,void 0,{trim:!0}]]),c(a("input",{"onUpdate:modelValue":t[19]||(t[19]=e=>n.value.company_name=e),type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",placeholder:"Compañía: Nombre"},null,512),[[v,n.value.company_name,void 0,{trim:!0}]]),c(a("input",{"onUpdate:modelValue":t[20]||(t[20]=e=>n.value.company_address=e),type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",placeholder:"Compañía: Dirección"},null,512),[[v,n.value.company_address,void 0,{trim:!0}]]),a("div",ft,[c(a("select",{"onUpdate:modelValue":t[21]||(t[21]=e=>n.value.document_type=e),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100"},[...t[33]||(t[33]=[a("option",{value:""},"Documento: (opcional)",-1),a("option",{value:"dni"},"DNI",-1),a("option",{value:"ruc"},"RUC",-1)])],512),[[L,n.value.document_type]]),c(a("input",{"onUpdate:modelValue":t[22]||(t[22]=e=>n.value.document_number=e),type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",placeholder:"Documento: Número (opcional)"},null,512),[[v,n.value.document_number,void 0,{trim:!0}]]),c(a("textarea",{ref_key:"observacionInput",ref:Y,"onUpdate:modelValue":t[23]||(t[23]=e=>n.value.observacion=e),rows:"3",placeholder:"Observación (motivo de desistimiento o notas)",class:"mt-2 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100"},null,512),[[v,n.value.observacion,void 0,{trim:!0}]])]),V.value?(p(),b("p",xt,x(V.value),1)):k("",!0)]),a("div",kt,[a("button",{type:"submit",class:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-300",disabled:E.value},[E.value?k("",!0):(p(),b("svg",ht,[...t[34]||(t[34]=[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])),oe(" "+x(E.value?"Guardando...":"Guardar"),1)],8,_t),a("div",wt,[a("button",{type:"button",class:"inline-flex items-center px-3 py-1.5 text-xs font-medium text-blue-700 bg-blue-50 border border-blue-200 rounded-lg hover:bg-blue-100 dark:border-blue-800 dark:bg-blue-950 dark:text-blue-300 dark:hover:bg-blue-900",disabled:E.value,onClick:w(Ee,["prevent"])},[...t[35]||(t[35]=[a("svg",{class:"w-3.5 h-3.5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),oe(" En Espera ",-1)])],8,Ct),a("button",{type:"button",class:"inline-flex items-center px-3 py-1.5 text-xs font-medium text-red-700 bg-red-50 border border-red-200 rounded-lg hover:bg-red-100 dark:border-red-800 dark:bg-red-950 dark:text-red-300 dark:hover:bg-red-900",disabled:E.value,onClick:w(De,["prevent"])},[...t[36]||(t[36]=[a("svg",{class:"w-3.5 h-3.5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),oe(" Desistir ",-1)])],8,Dt),a("button",{type:"button",class:"inline-flex items-center px-3 py-1.5 text-xs font-medium text-gray-700 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-300 dark:hover:bg-slate-700",onClick:I}," Cancelar ")])])],32)])],512),[[H,O.value]])]),_:1})],512),[[H,O.value]])]),_:1})],64))}};export{At as default};
