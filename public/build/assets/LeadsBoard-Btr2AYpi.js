import{r as m,e as _e,o as Be,f as Ge,g as v,i as b,j as r,B as ae,w as u,D as G,x as p,t as y,n as he,F as me,m as we,l as _,k as w,A as re,C as oe,v as le,z as ve}from"./vendor-vue-Db-AqoDh.js";import{a as C}from"./vendor-utils-Czy7fllw.js";import{t as se,c as Q,a as Ce}from"./App-CzJcKiwl.js";import"./app-DyfDmrjH.js";import"./vendor-ui-DEm6YKEA.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Qe={class:"mb-4 flex items-center gap-3"},Re={class:"flex items-center gap-2"},He={class:"flex items-center gap-2"},Ke={class:"flex items-center gap-2"},Ye={key:0,class:"text-sm text-gray-600 dark:text-slate-300"},Je={key:1,class:"mb-3 text-sm text-red-600"},We=["data-stage-id","onDrop"],Xe={class:"p-4 border-b border-gray-200 dark:border-slate-800"},Ze={class:"flex items-center justify-between gap-3"},et={class:"text-sm font-semibold text-gray-900 dark:text-slate-100"},tt={class:"text-xs text-gray-600 dark:text-slate-300"},at={class:"p-3 space-y-3 min-h-[140px]"},rt={key:0,class:"text-sm text-gray-500 dark:text-slate-400 px-1"},ot=["data-lead-id"],lt=["data-lead-id","draggable","onDragstart","onDragover","onDrop","onClick"],st={class:"flex items-start justify-between gap-3"},nt={class:"text-sm font-semibold text-gray-900 dark:text-slate-100"},dt={key:0,class:"text-xs text-gray-600 dark:text-slate-300 mt-1"},it={key:1,class:"text-xs text-gray-600 dark:text-slate-300 mt-1"},ut={key:0,class:"text-xs text-gray-700 dark:text-slate-200"},ct={key:0,class:"mt-2 text-xs text-gray-600 dark:text-slate-300"},mt={key:0},vt={key:1},bt={key:1,class:"mt-3 flex justify-end"},pt=["disabled","onClick"],gt={class:"relative w-full max-w-lg"},ft={class:"relative bg-white rounded-lg shadow dark:bg-slate-900"},yt={class:"grid gap-3"},xt={class:"flex gap-3"},kt={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},_t=["placeholder"],ht={key:0,class:"text-sm text-red-600"},wt={class:"mt-5 flex items-center justify-between"},Ct=["disabled"],Dt={class:"relative w-full max-w-lg"},It={class:"relative bg-white rounded-lg shadow dark:bg-slate-900"},At={class:"grid gap-3"},Nt={class:"flex gap-3"},Et={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},St={key:0,class:"text-sm text-red-600"},Ut={class:"mt-5 flex items-center justify-between"},Vt=["disabled"],Tt={key:0,class:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Lt={class:"flex items-center gap-2"},Mt=["disabled"],jt=["disabled"],Gt={__name:"LeadsBoard",setup(Ot){const ne=m(!0),g=m([]),R=m(20),H=m(""),K=m(""),A=m(""),c=m(null),N=m(null),z=m({leadId:null,position:"after",stageId:null}),T=m(null),D=m(!1),E=m(null),P=m(!1),De=_e(()=>{const a=g.value.length||1;return a<=1?"grid-cols-1":a===2?"grid-cols-1 md:grid-cols-2":a===3?"grid-cols-1 md:grid-cols-3":"grid-cols-1 md:grid-cols-2 xl:grid-cols-4"}),Ie=(a,e)=>{const t=Number(a);return Number.isNaN(t)?"":e==="USD"?`$${t.toFixed(2)}`:`S/ ${t.toFixed(2)}`},L=async({showLoading:a=!0}={})=>{var e,t,l,o;a&&(ne.value=!0);try{const s={limit:R.value||void 0,date_from:H.value||void 0,date_to:K.value||void 0},i=await C.get("/leads/board-data",{params:s});g.value=((t=(e=i==null?void 0:i.data)==null?void 0:e.data)==null?void 0:t.stages)??[]}catch(s){g.value=[];const i=((o=(l=s==null?void 0:s.response)==null?void 0:l.data)==null?void 0:o.message)??"No se pudo cargar el pipeline.";se(i),console.error("Leads board load error",s)}finally{a&&(ne.value=!1)}},Ae=async()=>{await L()},Ne=async()=>{R.value=100,H.value="",K.value="",await L()},Y=m(new Set),J=(a,e)=>!!(a!=null&&a.archived_at||a!=null&&a.won_at||e!=null&&e.is_won),Ee=(a,e)=>{if(J(a,e))return;c.value=a,N.value=(a==null?void 0:a.stage_id)??null,T.value=a.id,P.value=!1;const t=g.value.find(l=>l.id===((a==null?void 0:a.stage_id)??null));if(t&&Array.isArray(t.leads)){const l=t.leads.findIndex(o=>o.id===a.id);E.value={stageId:t.id,index:l}}else E.value=null;D.value=!1},de=(a=!1)=>{var t;if(!D.value)return;const e=((t=c.value)==null?void 0:t.id)??null;if(e!=null){for(const l of g.value){if(!Array.isArray(l.leads))continue;const o=l.leads.findIndex(s=>s.id===e);o!==-1&&l.leads.splice(o,1)}if(a&&E.value){const l=g.value.find(o=>o.id===E.value.stageId);if(l){Array.isArray(l.leads)||(l.leads=[]);const o=Math.max(0,Math.min(E.value.index??l.leads.length,l.leads.length));l.leads.splice(o,0,c.value)}}D.value=!1,z.value={leadId:null,position:"after",stageId:null}}},Se=()=>{M&&(clearTimeout(M),M=null),!P.value&&D.value&&de(!0),c.value=null,N.value=null,T.value=null,D.value=!1,P.value=!1,z.value={leadId:null,position:"after",stageId:null},E.value=null};let M=null;const Ue=(a,e,t)=>{c.value&&(M&&clearTimeout(M),M=setTimeout(()=>{Ve(a,e,t)},16))},Ve=(a,e,t)=>{var B;if(!c.value)return;const l=t.currentTarget.closest("section[data-stage-id]");if(!l)return;const o=l.querySelector(".p-3");if(!o)return;const s=o.querySelectorAll("article[data-lead-id]"),i=Array.from(s).filter(I=>Number(I.getAttribute("data-lead-id"))!==c.value.id);if(i.length===0){be(e.id,0),z.value={leadId:null,position:"top",stageId:e.id};return}const f=t.clientY;let x=i.length;for(let I=0;I<i.length;I++){const O=i[I].getBoundingClientRect(),te=O.top+O.height/2;if(f<te){x=I;break}}be(e.id,x);const j=x>0?Number((B=i[x-1])==null?void 0:B.getAttribute("data-lead-id")):null;z.value={leadId:j,position:x===0?"before":"after",stageId:e.id}},be=(a,e)=>{var i;if(!c.value||D.value)return;const t=c.value,l=g.value.find(f=>f.id===a);if(!l||(((i=l.leads)==null?void 0:i.findIndex(f=>f.id===t.id))??-1)===e)return;g.value.forEach(f=>{if(!Array.isArray(f.leads))return;const x=f.leads.findIndex(j=>j.id===t.id);x!==-1&&f.leads.splice(x,1)}),Array.isArray(l.leads)||(l.leads=[]);const s=Math.max(0,Math.min(e,l.leads.length));l.leads.splice(s,0,t),D.value=!0},pe=(a,e)=>{const t=g.value.find(s=>s.id===a);if(!t||!Array.isArray(t.leads))return null;const l=t.leads.findIndex(s=>s.id===e);if(l===-1)return null;const[o]=t.leads.splice(l,1);return t.count=Math.max(0,(t.count??0)-1),o??null},Te=(a,e,{toTop:t=!0}={})=>{const l=g.value.find(s=>s.id===a);if(!l)return;Array.isArray(l.leads)||(l.leads=[]);const o=l.leads.findIndex(s=>s.id===e.id);o!==-1&&l.leads.splice(o,1),t?l.leads.unshift(e):l.leads.push(e),l.count=l.count??l.leads.length,l.count=l.leads.length},ie=(a,e)=>{if(!(!a||typeof a!="object"))for(const[t,l]of Object.entries(e??{}))a[t]=l},ge=async(a,e=null)=>{var x,j,B,I,O,te,ye,xe,ke;if(!((x=c.value)!=null&&x.id)||!(a!=null&&a.id))return;if(D.value){P.value=!0;const k=c.value.id,U=((j=E.value)==null?void 0:j.stageId)??null,$=g.value.find(h=>h.id===a.id);if(!$)return;const V=g.value.find(h=>h.id===U);if(V!=null&&V.is_won||(B=c.value)!=null&&B.won_at){A.value="Este lead ya está GANADO: no se puede mover de columna. Solo se puede archivar.",de(!0);return}if(a!=null&&a.is_won&&!((I=c.value)!=null&&I.customer_id)&&!await Q({title:"Confirmar GANADO",text:"¿Marcar este lead como GANADO? Esto lo convertirá en cliente automáticamente.",confirmText:"Sí, marcar como ganado",cancelText:"Cancelar",icon:"warning"})){de(!0);return}try{U&&U!==a.id&&await C.patch(`/leads/${k}/move-stage`,{stage_id:a.id});const h=$.leads.map(qe=>qe.id);await C.patch("/leads/reorder",{stage_id:a.id,ordered_ids:h}),D.value=!1,z.value={leadId:null,position:"after",stageId:null},c.value=null,N.value=null,T.value=null,E.value=null,P.value=!1}catch{await L({showLoading:!1})}return}if(c.value.stage_id===a.id)return;const t=g.value.find(k=>k.id===(N.value??c.value.stage_id));if(t!=null&&t.is_won||(O=c.value)!=null&&O.won_at){A.value="Este lead ya está GANADO: no se puede mover de columna. Solo se puede archivar.",c.value=null,N.value=null;return}if(a!=null&&a.is_won&&!((te=c.value)!=null&&te.customer_id)&&!await Q({title:"Confirmar GANADO",text:"¿Marcar este lead como GANADO? Esto lo convertirá en cliente automáticamente.",confirmText:"Sí, marcar como ganado",cancelText:"Cancelar",icon:"warning"})){c.value=null,N.value=null;return}const l=c.value.id,o=N.value,s=c.value;c.value=null,N.value=null,A.value="";const f=(o?pe(o,l):null)??s;ie(f,{stage_id:a.id}),Te(a.id,f,{toTop:!0});try{const k=await C.patch(`/leads/${l}/move-stage`,{stage_id:a.id}),U=(ye=k==null?void 0:k.data)==null?void 0:ye.data;U&&typeof U=="object"&&ie(f,U);const $=g.value.find(V=>V.id===a.id);if($&&Array.isArray($.leads)){const V=$.leads.map(h=>h.id);try{await C.patch("/leads/reorder",{stage_id:a.id,ordered_ids:V})}catch{}}}catch(k){A.value=((ke=(xe=k==null?void 0:k.response)==null?void 0:xe.data)==null?void 0:ke.message)??"No se pudo mover el lead.",await L({showLoading:!1})}},Le=async(a,e)=>{var l,o;if(!(!(a!=null&&a.id)||!(e!=null&&e.is_won)&&!(a!=null&&a.won_at)||!await Q({title:"Archivar lead",text:"Se ocultará del pipeline, pero seguirá visible en la tabla (historial).",confirmText:"Archivar",cancelText:"Cancelar",icon:"warning"}))){Y.value.add(a.id),A.value="";try{await C.patch(`/leads/${a.id}/archive`);const s=pe(e.id,a.id);Ce("Lead archivado")}catch(s){const i=((o=(l=s==null?void 0:s.response)==null?void 0:l.data)==null?void 0:o.message)??"No se pudo archivar el lead.";A.value=i,se(i)}finally{Y.value.delete(a.id)}}},W=m(!1),X=m(!1),F=m(""),d=m({name:"",amount:null,currency:"PEN",contact_name:"",contact_phone:"",contact_email:"",company_name:"",company_address:"",document_type:"",document_number:""}),Me=_e(()=>d.value.document_type==="dni"?"Documento: DNI (8 dígitos)":d.value.document_type==="ruc"?"Documento: RUC (11 dígitos)":"Documento: Número (opcional)"),je=()=>{F.value="",d.value={name:"",amount:null,currency:"PEN",contact_name:"",contact_phone:"",contact_email:"",company_name:"",company_address:"",document_type:"",document_number:""},W.value=!0},ue=()=>{W.value=!1},Z=a=>{var o,s,i;const e=(s=(o=a==null?void 0:a.response)==null?void 0:o.data)==null?void 0:s.errors;if(!e||typeof e!="object")return null;const t=Object.keys(e)[0],l=t?(i=e[t])==null?void 0:i[0]:null;return typeof l=="string"?l:null},Oe=async()=>{var e,t;X.value=!0,F.value="";const a={name:d.value.name,amount:d.value.amount,currency:d.value.currency,contact_name:d.value.contact_name||null,contact_phone:d.value.contact_phone||null,contact_email:d.value.contact_email||null,company_name:d.value.company_name||null,company_address:d.value.company_address||null,document_type:d.value.document_type||null,document_number:d.value.document_number||null};try{await C.post("/leads",a),ue(),await L()}catch(l){F.value=Z(l)??((t=(e=l==null?void 0:l.response)==null?void 0:e.data)==null?void 0:t.message)??"No se pudo crear el lead."}finally{X.value=!1}},ee=m(!1),S=m(!1),q=m(""),n=m({id:null,name:"",amount:null,currency:"PEN",contact_name:"",contact_phone:"",contact_email:"",company_name:"",company_address:"",document_type:"",document_number:"",observacion:""}),$e=a=>{q.value="",n.value={id:a.id,name:a.name||"",amount:a.amount??null,currency:a.currency??"PEN",contact_name:a.contact_name??"",contact_phone:a.contact_phone??"",contact_email:a.contact_email??"",company_name:a.company_name??"",company_address:a.company_address??"",document_type:a.document_type??"",document_number:a.document_number??"",observacion:a.observacion??""},ee.value=!0},ze=async()=>{var e,t,l,o;if(!(!((e=n.value)!=null&&e.id)||!await Q({title:"Marcar como desistido",text:"¿Estás seguro? Esto archivará el lead y lo moverá a la lista de desistidos.",confirmText:"Sí, marcar",cancelText:"Cancelar",icon:"warning"})))try{const s=await C.post(`/leads/${n.value.id}/desist`,{observacion:n.value.observacion||""}),i=((t=s==null?void 0:s.data)==null?void 0:t.location)||"/desistidos";window.location.assign(i)}catch(s){const i=Z(s)??((o=(l=s==null?void 0:s.response)==null?void 0:l.data)==null?void 0:o.message)??"No se pudo marcar como desistido.";se(i)}},Pe=async()=>{var e,t,l,o;if(!(!((e=n.value)!=null&&e.id)||!await Q({title:"Enviar a zona de espera",text:"¿Estás seguro? Esto archivará el lead y lo moverá a la zona de espera.",confirmText:"Sí, enviar",cancelText:"Cancelar",icon:"warning"})))try{const s=await C.post(`/leads/${n.value.id}/wait`,{observacion:n.value.observacion||""}),i=((t=s==null?void 0:s.data)==null?void 0:t.location)||"/espera";window.location.assign(i)}catch(s){const i=Z(s)??((o=(l=s==null?void 0:s.response)==null?void 0:l.data)==null?void 0:o.message)??"No se pudo enviar a zona de espera.";se(i)}},ce=()=>{ee.value=!1},Fe=async()=>{var e,t,l;S.value=!0,q.value="";const a={name:n.value.name,amount:n.value.amount,currency:n.value.currency,observacion:n.value.observacion||null,contact_name:n.value.contact_name||null,contact_phone:n.value.contact_phone||null,contact_email:n.value.contact_email||null,company_name:n.value.company_name||null,company_address:n.value.company_address||null,document_type:n.value.document_type||null,document_number:n.value.document_number||null};try{const o=await C.put(`/leads/${n.value.id}`,a),s=(e=o==null?void 0:o.data)==null?void 0:e.data;if(s){ie(s,s);for(const i of g.value){if(!Array.isArray(i.leads))continue;const f=i.leads.findIndex(x=>x.id===s.id);if(f!==-1){i.leads.splice(f,1,s);break}}}Ce("Lead actualizado"),ce()}catch(o){q.value=Z(o)??((l=(t=o==null?void 0:o.response)==null?void 0:t.data)==null?void 0:l.message)??"No se pudo actualizar el lead."}finally{S.value=!1}},fe=()=>je();return Be(async()=>{window.addEventListener("leads:create-quick",fe),await L()}),Ge(()=>{window.removeEventListener("leads:create-quick",fe)}),(a,e)=>(b(),v(me,null,[r("div",null,[e[29]||(e[29]=r("div",{class:"mb-4 text-sm text-gray-600 dark:text-slate-300"}," Arrastra un lead entre columnas para cambiar su etapa. ",-1)),r("div",Qe,[r("div",Re,[e[26]||(e[26]=r("label",{class:"text-xs text-gray-600 dark:text-slate-300"},"Limite:",-1)),u(r("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>R.value=t),class:"rounded-lg border border-gray-200 bg-white px-2 py-1 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-100 dark:focus:ring-blue-900/30"},[...e[25]||(e[25]=[r("option",{value:20},"20",-1),r("option",{value:50},"50",-1),r("option",{value:100},"100",-1),r("option",{value:250},"250",-1)])],512),[[G,R.value,void 0,{number:!0}]])]),r("div",He,[e[27]||(e[27]=r("label",{class:"text-xs text-gray-600 dark:text-slate-300"},"Desde:",-1)),u(r("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>H.value=t),type:"date",class:"rounded-lg border border-gray-200 bg-white px-2 py-1 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 placeholder:text-gray-400 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-100 dark:placeholder:text-slate-500 dark:focus:ring-blue-900/30 dark:[color-scheme:dark]"},null,512),[[p,H.value]])]),r("div",Ke,[e[28]||(e[28]=r("label",{class:"text-xs text-gray-600 dark:text-slate-300"},"Hasta:",-1)),u(r("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>K.value=t),type:"date",class:"rounded-lg border border-gray-200 bg-white px-2 py-1 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 placeholder:text-gray-400 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-100 dark:placeholder:text-slate-500 dark:focus:ring-blue-900/30 dark:[color-scheme:dark]"},null,512),[[p,K.value]])]),r("div",{class:"flex items-center gap-2 ms-auto"},[r("button",{onClick:Ae,class:"inline-flex items-center rounded-lg bg-blue-600 px-3 py-1 text-sm text-white"},"Aplicar"),r("button",{onClick:Ne,class:"inline-flex items-center rounded-lg border border-gray-200 bg-white px-3 py-1 text-sm text-gray-700 shadow-sm hover:bg-gray-50 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-200 dark:hover:bg-slate-800"}," Limpiar ")])]),ne.value?(b(),v("div",Ye,"Cargando...")):A.value?(b(),v("div",Je,y(A.value),1)):(b(),v("div",{key:2,class:he(["grid gap-4",De.value])},[(b(!0),v(me,null,we(g.value,t=>{var l;return b(),v("section",{key:t.id,"data-stage-id":t.id,class:"bg-white border border-gray-200 rounded-lg shadow-sm overflow-hidden dark:bg-slate-900 dark:border-slate-800",onDragover:e[3]||(e[3]=_(()=>{},["prevent"])),onDrop:_(o=>ge(t),["prevent"])},[r("div",Xe,[r("div",Ze,[r("div",et,y(t.name),1),r("div",tt,y(t.count),1)])]),r("div",at,[(((l=t.leads)==null?void 0:l.length)??0)===0?(b(),v("div",rt," Sin leads. ")):w("",!0),(b(!0),v(me,null,we(t.leads,o=>(b(),v("div",{key:o.id,"data-lead-id":o.id},[r("article",{"data-lead-id":o.id,class:he(["select-none bg-gray-50 border border-gray-200 rounded-lg p-3 dark:bg-slate-800 dark:border-slate-700",{"scale-105 shadow-lg opacity-90 z-50 transform":T.value===o.id,"opacity-50":T.value&&T.value!==o.id,"cursor-not-allowed opacity-80":J(o,t),"cursor-grab active:cursor-grabbing hover:bg-blue-50/30 dark:hover:bg-slate-800/50":!J(o,t)}]),draggable:!J(o,t),onDragstart:s=>Ee(o,t),onDragend:Se,onDragover:_(s=>Ue(o,t,s),["prevent"]),onDrop:_(s=>ge(t,o),["prevent"]),onClick:s=>$e(o)},[r("div",st,[r("div",null,[r("div",nt,y(o.name),1),o.company_name?(b(),v("div",dt,y(o.company_name),1)):o.contact_name?(b(),v("div",it,y(o.contact_name),1)):w("",!0)]),o.amount!==null&&o.amount!==void 0?(b(),v("div",ut,y(Ie(o.amount,o.currency)),1)):w("",!0)]),o.contact_phone||o.contact_email?(b(),v("div",ct,[o.contact_phone?(b(),v("div",mt,y(o.contact_phone),1)):w("",!0),o.contact_email?(b(),v("div",vt,y(o.contact_email),1)):w("",!0)])):w("",!0),t.is_won?(b(),v("div",bt,[r("button",{type:"button",class:"inline-flex items-center rounded-lg border border-gray-200 bg-white px-3 py-1.5 text-xs font-medium text-gray-700 shadow-sm hover:bg-gray-50 disabled:opacity-60 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-200 dark:hover:bg-slate-800",disabled:Y.value.has(o.id),onClick:_(s=>Le(o,t),["stop","prevent"])},y(Y.value.has(o.id)?"Archivando…":"Archivar"),9,pt)])):w("",!0)],42,lt)],8,ot))),128))])],40,We)}),128))],2))]),ae(oe,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:re(()=>[u(r("div",{class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/50",role:"dialog","aria-modal":"true",onClick:_(ue,["self"])},[ae(oe,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:re(()=>[u(r("div",gt,[r("div",ft,[e[32]||(e[32]=r("div",{class:"p-4 md:p-5 border-b rounded-t dark:border-slate-800"},[r("div",{class:"text-xs font-semibold text-gray-500 dark:text-slate-300 uppercase tracking-wider"},"Contacto inicial"),r("div",{class:"mt-1 text-sm text-gray-600 dark:text-slate-300"}," 0 Clientes potenciales: 0 S/ "),r("div",{class:"mt-3 text-lg font-semibold text-gray-900 dark:text-slate-100 text-center"},"Lead rápido")],-1)),r("form",{class:"p-4 md:p-5",onSubmit:_(Oe,["prevent"])},[r("div",yt,[u(r("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>d.value.name=t),type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",placeholder:"Nombre",required:""},null,512),[[p,d.value.name,void 0,{trim:!0}]]),r("div",xt,[u(r("input",{"onUpdate:modelValue":e[5]||(e[5]=t=>d.value.amount=t),type:"number",min:"0",step:"0.01",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",placeholder:"0"},null,512),[[p,d.value.amount,void 0,{number:!0}]]),u(r("select",{"onUpdate:modelValue":e[6]||(e[6]=t=>d.value.currency=t),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100"},[...e[30]||(e[30]=[r("option",{value:"PEN"},"S/",-1),r("option",{value:"USD"},"USD",-1)])],512),[[G,d.value.currency]])]),u(r("input",{"onUpdate:modelValue":e[7]||(e[7]=t=>d.value.contact_name=t),type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",placeholder:"Contacto: Nombre"},null,512),[[p,d.value.contact_name,void 0,{trim:!0}]]),u(r("input",{"onUpdate:modelValue":e[8]||(e[8]=t=>d.value.contact_phone=t),type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",placeholder:"Contacto: Teléfono"},null,512),[[p,d.value.contact_phone,void 0,{trim:!0}]]),u(r("input",{"onUpdate:modelValue":e[9]||(e[9]=t=>d.value.contact_email=t),type:"email",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",placeholder:"Contacto: Correo"},null,512),[[p,d.value.contact_email,void 0,{trim:!0}]]),u(r("input",{"onUpdate:modelValue":e[10]||(e[10]=t=>d.value.company_name=t),type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",placeholder:"Compañía: Nombre"},null,512),[[p,d.value.company_name,void 0,{trim:!0}]]),u(r("input",{"onUpdate:modelValue":e[11]||(e[11]=t=>d.value.company_address=t),type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",placeholder:"Compañía: Dirección"},null,512),[[p,d.value.company_address,void 0,{trim:!0}]]),r("div",kt,[u(r("select",{"onUpdate:modelValue":e[12]||(e[12]=t=>d.value.document_type=t),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100"},[...e[31]||(e[31]=[r("option",{value:""},"Documento: (opcional)",-1),r("option",{value:"dni"},"DNI",-1),r("option",{value:"ruc"},"RUC",-1)])],512),[[G,d.value.document_type]]),u(r("input",{"onUpdate:modelValue":e[13]||(e[13]=t=>d.value.document_number=t),type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",placeholder:Me.value},null,8,_t),[[p,d.value.document_number,void 0,{trim:!0}]])]),F.value?(b(),v("p",ht,y(F.value),1)):w("",!0)]),r("div",wt,[r("button",{type:"submit",class:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-300",disabled:X.value},y(X.value?"Creando...":"Crear"),9,Ct),r("div",{class:"flex items-center gap-3"},[r("button",{type:"button",class:"text-sm font-medium text-gray-600 hover:text-gray-900 dark:text-slate-300 dark:hover:text-slate-100",onClick:ue}," Cancelar ")])])],32)])],512),[[le,W.value]])]),_:1})],512),[[le,W.value]])]),_:1}),ae(oe,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:re(()=>[u(r("div",{class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/50",role:"dialog","aria-modal":"true",onClick:_(ce,["self"])},[ae(oe,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:re(()=>[u(r("div",Dt,[r("div",It,[e[38]||(e[38]=r("div",{class:"p-4 md:p-5 border-b rounded-t dark:border-slate-800"},[r("div",{class:"text-lg font-semibold text-gray-900 dark:text-slate-100 text-center"},"Editar lead")],-1)),r("form",{class:"p-4 md:p-5",onSubmit:_(Fe,["prevent"])},[r("div",At,[u(r("input",{"onUpdate:modelValue":e[14]||(e[14]=t=>n.value.name=t),type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",placeholder:"Nombre",required:""},null,512),[[p,n.value.name,void 0,{trim:!0}]]),r("div",Nt,[u(r("input",{"onUpdate:modelValue":e[15]||(e[15]=t=>n.value.amount=t),type:"number",min:"0",step:"0.01",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",placeholder:"0"},null,512),[[p,n.value.amount,void 0,{number:!0}]]),u(r("select",{"onUpdate:modelValue":e[16]||(e[16]=t=>n.value.currency=t),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100"},[...e[33]||(e[33]=[r("option",{value:"PEN"},"S/",-1),r("option",{value:"USD"},"USD",-1)])],512),[[G,n.value.currency]])]),u(r("input",{"onUpdate:modelValue":e[17]||(e[17]=t=>n.value.contact_name=t),type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",placeholder:"Contacto: Nombre"},null,512),[[p,n.value.contact_name,void 0,{trim:!0}]]),u(r("input",{"onUpdate:modelValue":e[18]||(e[18]=t=>n.value.contact_phone=t),type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",placeholder:"Contacto: Teléfono"},null,512),[[p,n.value.contact_phone,void 0,{trim:!0}]]),u(r("input",{"onUpdate:modelValue":e[19]||(e[19]=t=>n.value.contact_email=t),type:"email",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",placeholder:"Contacto: Correo"},null,512),[[p,n.value.contact_email,void 0,{trim:!0}]]),u(r("input",{"onUpdate:modelValue":e[20]||(e[20]=t=>n.value.company_name=t),type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",placeholder:"Compañía: Nombre"},null,512),[[p,n.value.company_name,void 0,{trim:!0}]]),u(r("input",{"onUpdate:modelValue":e[21]||(e[21]=t=>n.value.company_address=t),type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",placeholder:"Compañía: Dirección"},null,512),[[p,n.value.company_address,void 0,{trim:!0}]]),r("div",Et,[u(r("select",{"onUpdate:modelValue":e[22]||(e[22]=t=>n.value.document_type=t),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100"},[...e[34]||(e[34]=[r("option",{value:""},"Documento: (opcional)",-1),r("option",{value:"dni"},"DNI",-1),r("option",{value:"ruc"},"RUC",-1)])],512),[[G,n.value.document_type]]),u(r("input",{"onUpdate:modelValue":e[23]||(e[23]=t=>n.value.document_number=t),type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",placeholder:"Documento: Número (opcional)"},null,512),[[p,n.value.document_number,void 0,{trim:!0}]]),u(r("textarea",{"onUpdate:modelValue":e[24]||(e[24]=t=>n.value.observacion=t),rows:"3",placeholder:"Observación (motivo de desistimiento o notas)",class:"mt-2 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100"},null,512),[[p,n.value.observacion,void 0,{trim:!0}]])]),q.value?(b(),v("p",St,y(q.value),1)):w("",!0)]),r("div",Ut,[r("button",{type:"submit",class:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-300",disabled:S.value},[S.value?w("",!0):(b(),v("svg",Tt,[...e[35]||(e[35]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])),ve(" "+y(S.value?"Guardando...":"Guardar"),1)],8,Vt),r("div",Lt,[r("button",{type:"button",class:"inline-flex items-center px-3 py-1.5 text-xs font-medium text-blue-700 bg-blue-50 border border-blue-200 rounded-lg hover:bg-blue-100 dark:border-blue-800 dark:bg-blue-950 dark:text-blue-300 dark:hover:bg-blue-900",disabled:S.value,onClick:_(Pe,["prevent"])},[...e[36]||(e[36]=[r("svg",{class:"w-3.5 h-3.5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),ve(" En Espera ",-1)])],8,Mt),r("button",{type:"button",class:"inline-flex items-center px-3 py-1.5 text-xs font-medium text-red-700 bg-red-50 border border-red-200 rounded-lg hover:bg-red-100 dark:border-red-800 dark:bg-red-950 dark:text-red-300 dark:hover:bg-red-900",disabled:S.value,onClick:_(ze,["prevent"])},[...e[37]||(e[37]=[r("svg",{class:"w-3.5 h-3.5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),ve(" Desistir ",-1)])],8,jt),r("button",{type:"button",class:"inline-flex items-center px-3 py-1.5 text-xs font-medium text-gray-700 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-300 dark:hover:bg-slate-700",onClick:ce}," Cancelar ")])])],32)])],512),[[le,ee.value]])]),_:1})],512),[[le,ee.value]])]),_:1})],64))}};export{Gt as default};
