const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/UsersTable-BxmTUpZf.js","assets/app-BDRZbfW-.js","assets/vendor-utils-Czy7fllw.js","assets/vendor-vue-Diyp6CFE.js","assets/vendor-ui-BsDgRXDF.js","assets/BaseModal-Coysbt3i.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/RolesTable-CfF1PJb1.js","assets/LeadsBoard-Bbf3Zos7.js","assets/LeadsTable-c1cmg-j5.js","assets/LeadsWhatsAppCampaign-CB9LY_8d.js","assets/LeadsEmailCampaign-DeXcPzbf.js","assets/CalendarView-BlRPCQQt.js","assets/notifications-Dl6xZJx9.js","assets/calendar-notifications-CrOVVuzr.js","assets/CalendarView-BFEl6N-c.css","assets/IncidenciasTable-B_pMhko8.js","assets/IncidenciasBoard-D_mHyYbN.js","assets/BacklogBoard-C2E7MHqB.js","assets/PostventaCustomersTable-B_Ba0k-Q.js","assets/PostventaCustomersTable-5WtAp99X.css","assets/ContadoresTable-Csmk7lke.js","assets/CertificadosTable-MIWHc-zx.js","assets/LostLeadsList-CvfxIebB.js","assets/WaitingLeadsList-C7uS49gk.js","assets/SettingsView-BY--BNwm.js","assets/SettingsView-C21dmcAW.css"])))=>i.map(i=>d[i]);
import{_ as Q,t as Ye}from"./app-BDRZbfW-.js";import{e as B,r as T,o as ve,f as fe,g as c,i as o,j as e,w as z,k as A,t as C,v as G,l as Ae,F as ue,m as ce,u as $,n as U,p as Xe,q as W,s as _e,T as Te,x as ke,y as Ce,z as be,A as me,B as Fe,C as Be,D as Ee,E as Se,G as qe,b as J}from"./vendor-vue-Diyp6CFE.js";import{a as oe}from"./vendor-utils-Czy7fllw.js";import{S as Z}from"./vendor-ui-BsDgRXDF.js";import{_ as We}from"./_plugin-vue_export-helper-DlAUqK2U.js";const $e=Z.mixin({buttonsStyling:!1,customClass:{popup:"rounded-xl border border-gray-200 bg-white text-gray-900 shadow-xl dark:!border-slate-800 dark:!bg-slate-900 dark:!text-slate-100",backdrop:"bg-black/60",title:"text-base font-semibold text-gray-900 dark:text-slate-100",htmlContainer:"text-sm text-gray-600 dark:text-slate-300",actions:"gap-2",confirmButton:"inline-flex items-center rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-300 disabled:opacity-60",cancelButton:"inline-flex items-center rounded-lg border border-gray-200 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-4 focus:ring-blue-100 disabled:opacity-60 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-200 dark:hover:bg-slate-800"}}),Ne=Z.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:2500,timerProgressBar:!0,didOpen:l=>{l.addEventListener("mouseenter",Z.stopTimer),l.addEventListener("mouseleave",Z.resumeTimer)},customClass:{popup:"rounded-xl border border-gray-200 bg-white text-gray-900 shadow-lg dark:!border-slate-800 dark:!bg-slate-900 dark:!text-slate-100",title:"text-sm font-medium",htmlContainer:"text-sm"}});async function et({title:l,text:h,confirmText:v="Aceptar",cancelText:p="Cancelar",icon:E="question"}={}){return(await $e.fire({title:l,text:h,icon:E,showCancelButton:!0,confirmButtonText:v,cancelButtonText:p})).isConfirmed===!0}function Ie(l){return Ne.fire({icon:"success",title:l})}function Le(l){return Ne.fire({icon:"error",title:l})}function tt(l){return Ne.fire({icon:"info",title:l})}function I(l){return String(l??"").replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;")}const Ve=["ATLANTIS ONLINE","ATLANTIS VIP","ATLANTIS POS","ATLANTIS FAST","LORITO"],Oe=["Mensual","Trimestral","Semestral","Anual"],st=[{value:1,label:"Enero"},{value:2,label:"Febrero"},{value:3,label:"Marzo"},{value:4,label:"Abril"},{value:5,label:"Mayo"},{value:6,label:"Junio"},{value:7,label:"Julio"},{value:8,label:"Agosto"},{value:9,label:"Septiembre"},{value:10,label:"Octubre"},{value:11,label:"Noviembre"},{value:12,label:"Diciembre"}];let Me=null;function Ge(){if(typeof window>"u")return!1;const l=window.location.hostname;return l==="localhost"||l==="127.0.0.1"||l==="::1"}function Pe(l="sw-local-autofill-btn"){return Ge()?`
    <div class="rounded-lg border border-amber-200 bg-amber-50 px-3 py-2 text-xs text-amber-800 dark:border-amber-800/40 dark:bg-amber-950/20 dark:text-amber-300">
      Solo local: usa el botón <span class="font-semibold">Rellenar test</span> para autocompletar el formulario con datos aleatorios.
      <button id="${l}" type="button" class="ml-2 inline-flex items-center rounded-md border border-amber-300 bg-white px-2 py-1 text-xs font-medium text-amber-800 hover:bg-amber-100 dark:border-amber-700 dark:bg-slate-900 dark:text-amber-300 dark:hover:bg-amber-900/30">Rellenar test</button>
    </div>
  `:""}async function Re(){return Ge()?(Me||(Me=Q(()=>import("./customerModalAutofill.local-CpHl0RE-.js"),[]).catch(()=>null)),Me):null}async function je(l,h){const v=document.getElementById(l);v&&v.addEventListener("click",h)}function Ke(l=""){const h=String(l??"").trim();return[`<option value="" ${h?"":"selected"}>(opcional)</option>`,...Ve.map(p=>`<option value="${p}" ${h===p?"selected":""}>${p}</option>`)].join("")}function Qe(l=""){const h=String(l??"").trim();return[`<option value="" ${h?"":"selected"}>(opcional)</option>`,...Oe.map(p=>`<option value="${p}" ${h===p?"selected":""}>${p}</option>`)].join("")}function Je(l=""){const h=Number.parseInt(String(l??""),10);return[`<option value="" ${Number.isInteger(h)?"":"selected"}>(mes)</option>`,...st.map(p=>`<option value="${p.value}" ${h===p.value?"selected":""}>${p.label}</option>`)].join("")}async function Al(l={}){const h=(l.document_number??"").trim(),v=l.precio??"",p=l.rubro??"",E=l.observacion??"",b=`
    <div class="w-full max-h-[70vh] overflow-y-auto pr-1 text-left">
      <div class="text-xs text-gray-500 dark:text-slate-400">Los campos con <span class="font-semibold text-red-500">*</span> son obligatorios.</div>

      <div class="mt-3 grid w-full grid-cols-2 gap-4">
        <div class="w-full">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Comercio <span class="text-red-500">*</span></label>
          <input id="sw-cust-company_name" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${I(l.company_name)}" />
        </div>
        <div class="w-full">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Rubro</label>
          <input id="sw-cust-rubro" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${I(p)}" />
        </div>

        <div class="w-full">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Contacto <span class="text-red-500">*</span></label>
          <input id="sw-cust-contact_name" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${I(l.contact_name)}" />
        </div>
        <div class="w-full">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Año <span class="text-red-500">*</span></label>
          <input id="sw-cust-fecha_contacto_anio" type="number" min="2000" max="2100" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${I(l.fecha_contacto_anio)}" />
        </div>

        <div class="w-full">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Celular <span class="text-red-500">*</span></label>
          <input id="sw-cust-contact_phone" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${I(l.contact_phone)}" />
        </div>
        <div class="w-full">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Mes <span class="text-red-500">*</span></label>
          <select id="sw-cust-fecha_contacto_mes" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100">
            ${Je(l.fecha_contacto_mes)}
          </select>
        </div>

        <div class="w-full">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Ciudad</label>
          <input id="sw-cust-company_address" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${I(l.company_address)}" />
        </div>
        <div class="w-full">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Link</label>
          <input id="sw-cust-link" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${I(l.link)}" />
        </div>

        <div class="w-full">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Precio <span class="text-red-500">*</span></label>
          <input id="sw-cust-precio" type="number" step="0.01" min="0" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${I(v)}" />
        </div>
        <div class="w-full">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Usuario</label>
          <input id="sw-cust-usuario" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${I(l.usuario)}" />
        </div>

        <div class="w-full">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">RUC <span class="text-red-500">*</span></label>
          <input id="sw-cust-document_number" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" maxlength="11" value="${I(h)}" />
          <div class="mt-1 text-xs text-gray-500 dark:text-slate-400">Exactamente 11 dígitos numéricos</div>
        </div>
        <div class="w-full">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Contraseña</label>
          <input id="sw-cust-contrasena" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${I(l.contrasena)}" />
        </div>

        <div class="w-full col-span-2">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Servidor</label>
          <select id="sw-cust-servidor" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100">
            ${Ke(l.servidor)}
          </select>
        </div>

        <div class="w-full col-span-2">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Menbresia</label>
          <select id="sw-cust-menbresia" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100">
            ${Qe(l.menbresia)}
          </select>
        </div>

        <div class="w-full col-span-2">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Observación</label>
          <textarea id="sw-cust-observacion" rows="3" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" placeholder="Observaciones del cliente...">${I(E)}</textarea>
        </div>
      </div>

      <input id="sw-cust-name" type="hidden" value="${I(l.name)}" />
      <input id="sw-cust-contact_email" type="hidden" value="${I(l.contact_email)}" />
      <input id="sw-cust-document_type" type="hidden" value="ruc" />
    </div>
  `,u=await $e.fire({title:"Editar Cliente Postventa",html:b,width:"980px",focusConfirm:!1,showCancelButton:!0,confirmButtonText:"Guardar",cancelButtonText:"Cancelar",preConfirm:()=>{var n,r,S,P,D,q,Y,X,ee,ae,te,le,se,ne,de,ie,F,x,K,re,ge,pe,xe,he,we,ye,De,ze,Ue,He;const g=((r=(n=document.getElementById("sw-cust-contact_name"))==null?void 0:n.value)==null?void 0:r.trim())??"",_=((P=(S=document.getElementById("sw-cust-company_name"))==null?void 0:S.value)==null?void 0:P.trim())??"",i=((q=(D=document.getElementById("sw-cust-contact_phone"))==null?void 0:D.value)==null?void 0:q.trim())??"",y=((X=(Y=document.getElementById("sw-cust-company_address"))==null?void 0:Y.value)==null?void 0:X.trim())??"",k=((ae=(ee=document.getElementById("sw-cust-precio"))==null?void 0:ee.value)==null?void 0:ae.trim())??"",w=((le=(te=document.getElementById("sw-cust-rubro"))==null?void 0:te.value)==null?void 0:le.trim())??"",f=((ne=(se=document.getElementById("sw-cust-link"))==null?void 0:se.value)==null?void 0:ne.trim())??"",M=((ie=(de=document.getElementById("sw-cust-usuario"))==null?void 0:de.value)==null?void 0:ie.trim())??"",R=((x=(F=document.getElementById("sw-cust-contrasena"))==null?void 0:F.value)==null?void 0:x.trim())??"",H=((re=(K=document.getElementById("sw-cust-servidor"))==null?void 0:K.value)==null?void 0:re.trim())??"",m=((pe=(ge=document.getElementById("sw-cust-menbresia"))==null?void 0:ge.value)==null?void 0:pe.trim())??"",N=((he=(xe=document.getElementById("sw-cust-observacion"))==null?void 0:xe.value)==null?void 0:he.trim())??"",O=((ye=(we=document.getElementById("sw-cust-fecha_contacto_mes"))==null?void 0:we.value)==null?void 0:ye.trim())??"",V=((ze=(De=document.getElementById("sw-cust-fecha_contacto_anio"))==null?void 0:De.value)==null?void 0:ze.trim())??"",j=((He=(Ue=document.getElementById("sw-cust-document_number"))==null?void 0:Ue.value)==null?void 0:He.trim())??"",L=k.replace(",","."),d=Number.parseFloat(L),s=g||_;if(!_)return Z.showValidationMessage("El comercio es requerido."),!1;if(!g)return Z.showValidationMessage("El contacto es requerido."),!1;if(!i)return Z.showValidationMessage("El celular es requerido."),!1;if(!k||Number.isNaN(d)||d<0)return Z.showValidationMessage("El precio es requerido y debe ser válido."),!1;if(H&&!Ve.includes(H))return Z.showValidationMessage("El servidor debe ser ATLANTIS ONLINE, ATLANTIS VIP o ATLANTIS POS."),!1;if(m&&!Oe.includes(m))return Z.showValidationMessage("La menbresia debe ser Mensual, Anual, Trimestral o Semestral."),!1;if(!O||!V)return Z.showValidationMessage("Mes y año son obligatorios."),!1;const t=Number.parseInt(O,10),a=Number.parseInt(V,10);return!Number.isInteger(t)||t<1||t>12?(Z.showValidationMessage("El mes de contacto debe estar entre 1 y 12."),!1):!Number.isInteger(a)||a<2e3||a>2100?(Z.showValidationMessage("El año de contacto no es válido."),!1):/^\d{11}$/.test(j)?{name:s,contact_name:g||null,company_name:_||null,contact_phone:i||null,contact_email:l.contact_email||null,company_address:y||null,precio:d,rubro:w||null,mes:String(t),link:f||null,usuario:M||null,contrasena:R||null,servidor:H||null,menbresia:m||null,observacion:N||null,fecha_contacto_mes:t,fecha_contacto_anio:a,document_type:"ruc",document_number:j||null}:(Z.showValidationMessage("El RUC es obligatorio y debe tener 11 dígitos."),!1)}});return u.isConfirmed?u.value:null}async function Bl(){const l={contact_name:"",company_name:"",contact_phone:"",company_address:"",precio:"",rubro:"",link:"",usuario:"",contrasena:"",servidor:"",menbresia:"Mensual",observacion:"",fecha_contacto_mes:String(new Date().getMonth()+1),fecha_contacto_anio:String(new Date().getFullYear()),document_number:""},h=`
    <div class="w-full max-h-[70vh] overflow-y-auto pr-1 text-left">
      <div class="text-xs text-gray-500 dark:text-slate-400">Los campos con <span class="font-semibold text-red-500">*</span> son obligatorios.</div>
      <div class="mt-2">${Pe("sw-cust-autofill-create-local")}</div>

      <div class="mt-3 grid w-full grid-cols-2 gap-4">
        <div class="w-full">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Comercio <span class="text-red-500">*</span></label>
          <input id="sw-cust-company_name" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${I(l.company_name)}" />
        </div>
        <div class="w-full">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Rubro</label>
          <input id="sw-cust-rubro" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${I(l.rubro)}" />
        </div>

        <div class="w-full">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Contacto <span class="text-red-500">*</span></label>
          <input id="sw-cust-contact_name" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${I(l.contact_name)}" />
        </div>
        <div class="w-full">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Año <span class="text-red-500">*</span></label>
          <input id="sw-cust-fecha_contacto_anio" type="number" min="2000" max="2100" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${I(l.fecha_contacto_anio)}" />
        </div>

        <div class="w-full">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Celular <span class="text-red-500">*</span></label>
          <input id="sw-cust-contact_phone" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${I(l.contact_phone)}" />
        </div>
        <div class="w-full">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Mes <span class="text-red-500">*</span></label>
          <select id="sw-cust-fecha_contacto_mes" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100">
            ${Je(l.fecha_contacto_mes)}
          </select>
        </div>

        <div class="w-full">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Ciudad</label>
          <input id="sw-cust-company_address" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${I(l.company_address)}" />
        </div>
        <div class="w-full">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Link</label>
          <input id="sw-cust-link" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${I(l.link)}" />
        </div>

        <div class="w-full">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Precio <span class="text-red-500">*</span></label>
          <input id="sw-cust-precio" type="number" step="0.01" min="0" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${I(l.precio)}" />
        </div>
        <div class="w-full">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Usuario</label>
          <input id="sw-cust-usuario" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${I(l.usuario)}" />
        </div>

        <div class="w-full">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">RUC <span class="text-red-500">*</span></label>
          <input id="sw-cust-document_number" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" maxlength="11" value="${I(l.document_number)}" />
          <div class="mt-1 text-xs text-gray-500 dark:text-slate-400">Exactamente 11 dígitos numéricos</div>
        </div>
        <div class="w-full">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Contraseña</label>
          <input id="sw-cust-contrasena" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${I(l.contrasena)}" />
        </div>

        <div class="w-full col-span-2">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Servidor</label>
          <select id="sw-cust-servidor" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100">
            ${Ke(l.servidor)}
          </select>
        </div>

        <div class="w-full col-span-2">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Menbresia</label>
          <select id="sw-cust-menbresia" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100">
            ${Qe(l.menbresia)}
          </select>
        </div>

        <div class="w-full col-span-2">
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Observación</label>
          <textarea id="sw-cust-observacion" rows="3" class="mt-1 block w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" placeholder="Observaciones del cliente...">${I(l.observacion)}</textarea>
        </div>
      </div>

      <input id="sw-cust-name" type="hidden" value="" />
      <input id="sw-cust-contact_email" type="hidden" value="" />
      <input id="sw-cust-document_type" type="hidden" value="ruc" />
    </div>
  `,v=await $e.fire({title:"Agregar Cliente Postventa",html:h,width:"980px",focusConfirm:!1,showCancelButton:!0,confirmButtonText:"Crear",cancelButtonText:"Cancelar",didOpen:async()=>{const p=await Re();p!=null&&p.autofillCustomerModalForm&&await je("sw-cust-autofill-create-local",()=>p.autofillCustomerModalForm())},preConfirm:()=>{var d,s,t,a,n,r,S,P,D,q,Y,X,ee,ae,te,le,se,ne,de,ie,F,x,K,re,ge,pe,xe,he,we,ye;const p=((s=(d=document.getElementById("sw-cust-contact_name"))==null?void 0:d.value)==null?void 0:s.trim())??"",E=((a=(t=document.getElementById("sw-cust-company_name"))==null?void 0:t.value)==null?void 0:a.trim())??"",b=((r=(n=document.getElementById("sw-cust-contact_phone"))==null?void 0:n.value)==null?void 0:r.trim())??"",u=((P=(S=document.getElementById("sw-cust-company_address"))==null?void 0:S.value)==null?void 0:P.trim())??"",g=((q=(D=document.getElementById("sw-cust-precio"))==null?void 0:D.value)==null?void 0:q.trim())??"",_=((X=(Y=document.getElementById("sw-cust-rubro"))==null?void 0:Y.value)==null?void 0:X.trim())??"",i=((ae=(ee=document.getElementById("sw-cust-link"))==null?void 0:ee.value)==null?void 0:ae.trim())??"",y=((le=(te=document.getElementById("sw-cust-usuario"))==null?void 0:te.value)==null?void 0:le.trim())??"",k=((ne=(se=document.getElementById("sw-cust-contrasena"))==null?void 0:se.value)==null?void 0:ne.trim())??"",w=((ie=(de=document.getElementById("sw-cust-servidor"))==null?void 0:de.value)==null?void 0:ie.trim())??"",f=((x=(F=document.getElementById("sw-cust-menbresia"))==null?void 0:F.value)==null?void 0:x.trim())??"",M=((re=(K=document.getElementById("sw-cust-observacion"))==null?void 0:K.value)==null?void 0:re.trim())??"",R=((pe=(ge=document.getElementById("sw-cust-fecha_contacto_mes"))==null?void 0:ge.value)==null?void 0:pe.trim())??"",H=((he=(xe=document.getElementById("sw-cust-fecha_contacto_anio"))==null?void 0:xe.value)==null?void 0:he.trim())??"",m=((ye=(we=document.getElementById("sw-cust-document_number"))==null?void 0:we.value)==null?void 0:ye.trim())??"",N=g.replace(",","."),O=Number.parseFloat(N),V=p||E;if(!E)return Z.showValidationMessage("El comercio es requerido."),!1;if(!p)return Z.showValidationMessage("El contacto es requerido."),!1;if(!b)return Z.showValidationMessage("El celular es requerido."),!1;if(!g||Number.isNaN(O)||O<0)return Z.showValidationMessage("El precio es requerido y debe ser válido."),!1;if(!/^\d{11}$/.test(m))return Z.showValidationMessage("El RUC es obligatorio y debe tener 11 dígitos."),!1;if(!R||!H)return Z.showValidationMessage("Mes y año son obligatorios."),!1;if(w&&!Ve.includes(w))return Z.showValidationMessage("El servidor debe ser ATLANTIS ONLINE, ATLANTIS VIP o ATLANTIS POS."),!1;if(f&&!Oe.includes(f))return Z.showValidationMessage("La menbresia debe ser Mensual, Anual, Trimestral o Semestral."),!1;const j=Number.parseInt(R,10),L=Number.parseInt(H,10);return!Number.isInteger(j)||j<1||j>12?(Z.showValidationMessage("El mes de contacto debe estar entre 1 y 12."),!1):!Number.isInteger(L)||L<2e3||L>2100?(Z.showValidationMessage("El año de contacto no es válido."),!1):{name:V,contact_name:p||null,company_name:E||null,contact_phone:b||null,contact_email:null,company_address:u||null,precio:O,rubro:_||null,mes:String(j),link:i||null,usuario:y||null,contrasena:k||null,servidor:w||null,menbresia:f||null,observacion:M||null,fecha_contacto_mes:j,fecha_contacto_anio:L,document_type:"ruc",document_number:m||null}}});return v.isConfirmed?v.value:null}async function Nl(){return at({nro:"",comercio:"",nom_contador:"",titular_tlf:"",telefono:"",telefono_actu:"",link:"",usuario:"",contrasena:"",servidor:"",customer:null},!0)}async function at(l={},h=!1){var E;(E=l==null?void 0:l.customer)==null||E.id;const v=`
    <div class="grid gap-3 text-left">
      ${h?Pe("sw-cont-autofill-create-local"):""}
      <div class="grid grid-cols-1 gap-3 ${h?"":"sm:grid-cols-2"}">
        <div${h?' style="display: none;"':""}>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Nro</label>
          <input id="sw-cont-nro" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${I(l.nro)}"${h?"":" readonly"} />
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Comercio</label>
          <input id="sw-cont-comercio" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${I(l.comercio)}" />
        </div>
      </div>

      <div>
        <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Nombre del contador</label>
        <input id="sw-cont-nom_contador" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${I(l.nom_contador)}" />
      </div>

      <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Titular tlf</label>
          <input id="sw-cont-titular_tlf" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${I(l.titular_tlf)}" />
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Teléfono</label>
          <input id="sw-cont-telefono" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${I(l.telefono)}" />
        </div>
      </div>

      <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Teléfono act.</label>
          <input id="sw-cont-telefono_actu" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${I(l.telefono_actu)}" />
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Servidor</label>
          <input id="sw-cont-servidor" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${I(l.servidor)}" />
        </div>
      </div>

      <div>
        <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Link</label>
        <input id="sw-cont-link" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${I(l.link)}" />
      </div>

      <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Usuario</label>
          <input id="sw-cont-usuario" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${I(l.usuario)}" />
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Contraseña</label>
          <input id="sw-cont-contrasena" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${I(l.contrasena)}" />
        </div>
      </div>

      <div>
        <label class="block text-xs font-medium text-gray-600 dark:text-slate-300 mb-2">Clientes</label>
        <div id="sw-customers-container">
          <div class="customer-search-group mb-3" data-index="0">
            <div class="flex gap-2">
              <div class="flex-1 relative">
                <input 
                  type="text" 
                  class="customer-search-input w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" 
                  placeholder="Buscar cliente por nombre, empresa o documento..." 
                  autocomplete="off"
                />
                <div class="customer-dropdown absolute z-50 w-full mt-1 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 rounded-lg shadow-lg hidden max-h-48 overflow-y-auto"></div>
                <input type="hidden" class="customer-id-input" />
              </div>
              <button type="button" class="add-customer-btn px-3 py-2 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 focus:ring-4 focus:ring-green-300">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>
              </button>
              <button type="button" class="remove-customer-btn px-3 py-2 text-sm bg-red-600 text-white rounded-lg hover:bg-red-700 focus:ring-4 focus:ring-red-300 hidden">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
              </button>
            </div>
            <div class="selected-customer mt-2 hidden p-2 bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-800 rounded text-sm"></div>
          </div>
        </div>
        <div class="mt-1 text-xs text-gray-500 dark:text-slate-400">Busca y selecciona los clientes para asignar al contador.</div>
      </div>
    </div>
  `,p=await $e.fire({title:h?"Crear contador":"Editar contador",html:v,focusConfirm:!1,showCancelButton:!0,confirmButtonText:h?"Crear":"Guardar",cancelButtonText:"Cancelar",didOpen:async b=>{if(rt(b,l.customers||[]),!h)return;const u=await Re();u!=null&&u.autofillContadorCreateModalForm&&await je("sw-cont-autofill-create-local",()=>u.autofillContadorCreateModalForm())},preConfirm:()=>{var H,m,N,O,V,j,L,d,s,t,a,n,r,S,P,D,q,Y,X,ee;const b=((m=(H=document.getElementById("sw-cont-nro"))==null?void 0:H.value)==null?void 0:m.trim())??"",u=((O=(N=document.getElementById("sw-cont-comercio"))==null?void 0:N.value)==null?void 0:O.trim())??"",g=((j=(V=document.getElementById("sw-cont-nom_contador"))==null?void 0:V.value)==null?void 0:j.trim())??"",_=((d=(L=document.getElementById("sw-cont-titular_tlf"))==null?void 0:L.value)==null?void 0:d.trim())??"",i=((t=(s=document.getElementById("sw-cont-telefono"))==null?void 0:s.value)==null?void 0:t.trim())??"",y=((n=(a=document.getElementById("sw-cont-telefono_actu"))==null?void 0:a.value)==null?void 0:n.trim())??"",k=((S=(r=document.getElementById("sw-cont-servidor"))==null?void 0:r.value)==null?void 0:S.trim())??"",w=((D=(P=document.getElementById("sw-cont-link"))==null?void 0:P.value)==null?void 0:D.trim())??"",f=((Y=(q=document.getElementById("sw-cont-usuario"))==null?void 0:q.value)==null?void 0:Y.trim())??"",M=((ee=(X=document.getElementById("sw-cont-contrasena"))==null?void 0:X.value)==null?void 0:ee.trim())??"",R=[];if(document.querySelectorAll(".customer-id-input").forEach(ae=>{var le;const te=(le=ae.value)==null?void 0:le.trim();te&&!R.includes(parseInt(te))&&R.push(parseInt(te))}),h){if(!u&&!g)return Z.showValidationMessage("Completa al menos Comercio o Nombre del contador."),!1}else if(!b&&!u&&!g)return Z.showValidationMessage("Completa al menos Nro, Comercio o Nombre del contador."),!1;return{nro:b||null,comercio:u||null,nom_contador:g||null,titular_tlf:_||null,telefono:i||null,telefono_actu:y||null,servidor:k||null,link:w||null,usuario:f||null,contrasena:M||null,customer_ids:R}}});return p.isConfirmed?p.value:null}async function Vl(){return lt({nombre:"",ruc:"",usuario:"",clave:"",fecha_creacion:"",fecha_vencimiento:"",estado:"activo",tipo:"",observacion:""},!0)}function Ze(l){if(!l)return"";const h=String(l).trim();if(h==="")return"";const v=h.match(/^(\d{4}-\d{2}-\d{2})/);if(v)return v[1];const p=h.match(/^(\d{2})\/(\d{2})\/(\d{4})$/);if(p)return`${p[3]}-${p[2]}-${p[1]}`;const E=new Date(h);if(Number.isNaN(E.getTime()))return"";const b=E.getFullYear(),u=String(E.getMonth()+1).padStart(2,"0"),g=String(E.getDate()).padStart(2,"0");return`${b}-${u}-${g}`}async function lt(l={},h=!1){const v=Ze(l.fecha_creacion),p=Ze(l.fecha_vencimiento),E=`
    <div class="grid gap-3 text-left">
      ${h?Pe("sw-cert-autofill-create-local"):""}
      <div>
        <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Nombre</label>
        <input id="sw-cert-nombre" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${I(l.nombre)}" />
      </div>

      <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">RUC</label>
          <input id="sw-cert-ruc" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${I(l.ruc)}" />
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Tipo</label>
          <select id="sw-cert-tipo" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100">
            <option value="" ${l.tipo?"":"selected"}>(opcional)</option>
            <option value="OSE" ${l.tipo==="OSE"?"selected":""}>OSE</option>
            <option value="PSE" ${l.tipo==="PSE"?"selected":""}>PSE</option>
          </select>
        </div>
      </div>

      <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Estado</label>
          <select id="sw-cert-estado" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100">
            <option value="activo" ${l.estado==="activo"||!l.estado?"selected":""}>Activo</option>
            <option value="inactivo" ${l.estado==="inactivo"?"selected":""}>Inactivo</option>
          </select>
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Fecha vencimiento</label>
          <input id="sw-cert-fecha_vencimiento" type="date" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${I(p)}" />
        </div>
      </div>

      <div class="grid grid-cols-1 gap-3 sm:grid-cols-2">
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Usuario</label>
          <input id="sw-cert-usuario" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${I(l.usuario)}" />
        </div>
        <div>
          <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Clave</label>
          <input id="sw-cert-clave" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${I(l.clave)}" />
        </div>
      </div>

      <div>
        <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Fecha creación</label>
        <input id="sw-cert-fecha_creacion" type="date" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" value="${I(v)}" />
      </div>

      <div>
        <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Imagen</label>
        <input id="sw-cert-imagen" type="file" accept="image/*" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" />
        ${l.imagen?`<div class="mt-1 text-xs text-gray-500 dark:text-slate-400">Actual: ${I(l.imagen)}</div>`:""}
      </div>

      <div>
        <label class="block text-xs font-medium text-gray-600 dark:text-slate-300">Observación</label>
        <textarea id="sw-cert-observacion" rows="3" class="mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100">${I(l.observacion)}</textarea>
      </div>
    </div>
  `,b=await $e.fire({title:h?"Crear certificado":"Editar certificado",html:E,focusConfirm:!1,showCancelButton:!0,confirmButtonText:h?"Crear":"Guardar",cancelButtonText:"Cancelar",didOpen:async()=>{if(!h)return;const u=await Re();u!=null&&u.autofillCertificadoCreateModalForm&&await je("sw-cert-autofill-create-local",()=>u.autofillCertificadoCreateModalForm())},preConfirm:()=>{var m,N,O,V,j,L,d,s,t,a,n,r,S,P,D,q;const u=((N=(m=document.getElementById("sw-cert-nombre"))==null?void 0:m.value)==null?void 0:N.trim())??"",g=((V=(O=document.getElementById("sw-cert-ruc"))==null?void 0:O.value)==null?void 0:V.trim())??"",_=((j=document.getElementById("sw-cert-tipo"))==null?void 0:j.value)??"",i=((L=document.getElementById("sw-cert-estado"))==null?void 0:L.value)??"activo",y=((d=document.getElementById("sw-cert-fecha_vencimiento"))==null?void 0:d.value)??"",k=((t=(s=document.getElementById("sw-cert-usuario"))==null?void 0:s.value)==null?void 0:t.trim())??"",w=((n=(a=document.getElementById("sw-cert-clave"))==null?void 0:a.value)==null?void 0:n.trim())??"",f=((r=document.getElementById("sw-cert-fecha_creacion"))==null?void 0:r.value)??"",M=((P=(S=document.getElementById("sw-cert-imagen"))==null?void 0:S.files)==null?void 0:P[0])??null,R=((q=(D=document.getElementById("sw-cert-observacion"))==null?void 0:D.value)==null?void 0:q.trim())??"";if(!u)return Z.showValidationMessage("El nombre es requerido."),!1;const H={nombre:u,ruc:g||null,tipo:_||null,estado:i||"activo",fecha_vencimiento:y||null,usuario:k||null,clave:w||null,fecha_creacion:f||null,observacion:R||null};return M&&(H.imagen=M),H}});return b.isConfirmed?b.value:null}function rt(l,h=[]){const v=l.querySelector("#sw-customers-container");let p=0;h.length>0&&(v.innerHTML="",h.forEach((i,y)=>{b(v,i,y),p=y+1}),u()),v.addEventListener("click",i=>{i.target.closest(".add-customer-btn")?(b(v,null,p++),u()):i.target.closest(".remove-customer-btn")&&(i.target.closest(".customer-search-group").remove(),u())});let E;v.addEventListener("input",i=>{i.target.classList.contains("customer-search-input")&&(clearTimeout(E),E=setTimeout(()=>g(i.target),300))}),document.addEventListener("click",i=>{i.target.closest(".customer-search-group")||l.querySelectorAll(".customer-dropdown").forEach(y=>{y.classList.add("hidden")})});function b(i,y=null,k=0){const w=document.createElement("div");w.className="customer-search-group mb-3",w.setAttribute("data-index",k);const f=y?`${y.name}${y.company_name?" - "+y.company_name:""}`:"",M=y?y.id:"";w.innerHTML=`
      <div class="flex gap-2">
        <div class="flex-1 relative">
          <input 
            type="text" 
            class="customer-search-input w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100" 
            placeholder="Buscar cliente por nombre, empresa o documento..." 
            autocomplete="off"
            value="${I(f)}"
          />
          <div class="customer-dropdown absolute z-50 w-full mt-1 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 rounded-lg shadow-lg hidden max-h-48 overflow-y-auto"></div>
          <input type="hidden" class="customer-id-input" value="${M}" />
        </div>
        <button type="button" class="add-customer-btn px-3 py-2 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 focus:ring-4 focus:ring-green-300">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>
        </button>
        <button type="button" class="remove-customer-btn px-3 py-2 text-sm bg-red-600 text-white rounded-lg hover:bg-red-700 focus:ring-4 focus:ring-red-300 hidden">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
        </button>
      </div>
      <div class="selected-customer mt-2 ${y?"":"hidden"} p-2 bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-800 rounded text-sm">
        ${y?`<strong>${I(y.name)}</strong>${y.company_name?" - "+I(y.company_name):""}<br><small class="text-gray-600">${y.document_number||"Sin documento"}</small>`:""}
      </div>
    `,i.appendChild(w)}function u(){const i=v.querySelectorAll(".customer-search-group");i.forEach((y,k)=>{y.querySelector(".remove-customer-btn").classList.toggle("hidden",i.length===1)})}async function g(i){const y=i.value.trim(),k=i.nextElementSibling;if(y.length<2){k.classList.add("hidden");return}try{const f=await(await fetch(`/customers/search?q=${encodeURIComponent(y)}`)).json();k.innerHTML="",f.customers&&f.customers.length>0?(f.customers.forEach(M=>{const R=document.createElement("div");R.className="p-3 hover:bg-gray-50 dark:hover:bg-slate-800 cursor-pointer border-b border-gray-100 dark:border-slate-700 last:border-b-0",R.innerHTML=`
            <div class="font-medium text-gray-900 dark:text-slate-100">${I(M.name)}</div>
            ${M.company_name?`<div class="text-sm text-gray-600 dark:text-slate-400">${I(M.company_name)}</div>`:""}
            <div class="text-xs text-gray-500 dark:text-slate-500">${M.document_number||"Sin documento"}</div>
          `,R.addEventListener("click",()=>{_(i,M)}),k.appendChild(R)}),k.classList.remove("hidden")):(k.innerHTML='<div class="p-3 text-gray-500 dark:text-slate-400 text-sm">No se encontraron clientes</div>',k.classList.remove("hidden"))}catch(w){console.error("Error searching customers:",w),k.classList.add("hidden")}}function _(i,y){const k=i.closest(".customer-search-group"),w=k.querySelector(".customer-id-input"),f=k.querySelector(".selected-customer"),M=i.nextElementSibling;i.value=`${y.name}${y.company_name?" - "+y.company_name:""}`,w.value=y.id,f.innerHTML=`
      <strong>${I(y.name)}</strong>${y.company_name?" - "+I(y.company_name):""}<br>
      <small class="text-gray-600">${y.document_number||"Sin documento"}</small>
    `,f.classList.remove("hidden"),M.classList.add("hidden")}}const ot={class:"h-full px-3 lg:px-5 lg:pl-3"},nt={class:"h-full flex items-center justify-between"},dt={class:"flex items-center justify-start rtl:justify-end"},it={key:0,class:"w-6 h-6","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},ut={key:1,class:"w-6 h-6","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},ct={class:"flex items-center gap-2"},bt={class:"relative","data-notifications-container":""},mt={key:0,class:"absolute -top-1 -right-1 min-w-5 h-5 px-1 rounded-full bg-white text-sky-700 text-[10px] font-semibold flex items-center justify-center ring-1 ring-sky-700"},gt={class:"px-4 py-3"},vt={class:"text-xs text-gray-500 dark:text-slate-300"},pt={class:"py-2 max-h-72 overflow-auto"},xt={key:0,class:"px-4 py-2 text-gray-500 dark:text-slate-300"},ft=["onClick"],ht={class:"text-sm text-gray-900 dark:text-slate-100"},wt={key:0,class:"text-xs text-gray-500 dark:text-slate-300"},yt={class:"text-[11px] text-gray-400 dark:text-slate-400"},kt={key:0,class:"px-4 py-2 border-t border-gray-100 dark:border-slate-800"},_t=["aria-label"],$t={key:0,class:"w-5 h-5","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},Ct={key:1,class:"w-5 h-5","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},Et={class:"relative flex items-center ms-3","data-user-dropdown-container":""},St=["src","alt"],It={key:1,class:"w-8 h-8 rounded-full bg-white text-sky-700 flex items-center justify-center text-xs font-semibold"},Tt={class:"absolute right-0 top-12 z-50 my-4 text-base list-none bg-white divide-y divide-gray-100 rounded-lg shadow dark:bg-slate-900 dark:divide-slate-800"},Mt={class:"px-4 py-3"},Lt={class:"text-sm text-gray-900 dark:text-slate-100"},At={class:"text-sm font-medium text-gray-500 truncate dark:text-slate-300"},Bt={class:"py-2"},Nt={method:"POST",action:"/logout",class:"block"},Vt=["value"],Ot={__name:"Header",props:{sidebarCollapsed:{type:Boolean,default:!1}},emits:["toggle-sidebar"],setup(l){var L;const h=((L=document.querySelector('meta[name="csrf-token"]'))==null?void 0:L.getAttribute("content"))??"",v=B(()=>window.__AUTH_USER__??null),p=B(()=>{var d;return((d=v.value)==null?void 0:d.name)??"Usuario"}),E=B(()=>{var d;return((d=v.value)==null?void 0:d.email)??""}),b=B(()=>{var d;return((d=v.value)==null?void 0:d.profile_photo_url)??""}),u=B(()=>{var r;const d=String(((r=v.value)==null?void 0:r.name)??"").trim();if(!d)return"U";const s=d.split(/\s+/).map(S=>S.trim()).filter(Boolean);if(s.length===0)return"U";const t=Array.from(s[0])[0]??"",a=s.length>1?Array.from(s[s.length-1])[0]??"":"";return(`${t}${a}`.trim()||"U").toLocaleUpperCase("es-ES")}),g=T(!1),_=T(!1),i=T(!1),y=T([]),k=T(0);let w=null,f=new Set;const M=async({toastNew:d=!1}={})=>{var s,t;try{const a=await oe.get("/notifications"),n=(s=a==null?void 0:a.data)==null?void 0:s.data,r=(n==null?void 0:n.notifications)??[],S=(n==null?void 0:n.count)??0;if(d){const P=r.filter(D=>!f.has(D.id));for(const D of P.slice(0,2)){const q=(t=D==null?void 0:D.data)!=null&&t.title?`Recordatorio: ${D.data.title}`:"Nuevo recordatorio";tt(q)}}y.value=r,k.value=Number(S)||0,f=new Set(r.map(P=>P.id))}catch{}},R=async d=>{var t;if(!(d!=null&&d.id))return;try{await oe.post(`/notifications/${d.id}/read`),_.value=!1}catch{}const s=(t=d==null?void 0:d.data)==null?void 0:t.url;s?window.location.assign(s):M({toastNew:!1})},H=d=>{if(!d)return"";const s=new Date(d);return Number.isNaN(s.getTime())?String(d):s.toLocaleString()},m=()=>{_.value=!_.value},N=()=>{i.value=!i.value},O=async()=>{try{await oe.post("/notifications/mark-all-read"),await M({toastNew:!1}),_.value=!1,Ie("Notificaciones marcadas como leídas")}catch(d){console.error("Error marking notifications as read:",d)}},V=()=>{g.value=document.documentElement.classList.contains("dark")},j=()=>{const d=Ye();g.value=d==="dark"};return ve(()=>{V(),window.addEventListener("theme:changed",V),M({toastNew:!1}),w=setInterval(()=>M({toastNew:!0}),3e4),document.addEventListener("click",d=>{_.value&&!d.target.closest("[data-notifications-container]")&&(_.value=!1),i.value&&!d.target.closest("[data-user-dropdown-container]")&&(i.value=!1)})}),fe(()=>{window.removeEventListener("theme:changed",V),w&&clearInterval(w)}),(d,s)=>(o(),c("nav",{class:U(["fixed top-0 right-0 z-50 h-16 bg-sky-600 border-b border-sky-700 shadow-sm",l.sidebarCollapsed?"left-0 sm:left-20":"left-0 sm:left-64"])},[e("div",ot,[e("div",nt,[e("div",dt,[s[5]||(s[5]=e("button",{"data-drawer-target":"logo-sidebar","data-drawer-toggle":"logo-sidebar","aria-controls":"logo-sidebar",type:"button",class:"inline-flex items-center p-2 text-sm text-white/90 rounded-lg sm:hidden hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-white/40"},[e("span",{class:"sr-only"},"Abrir sidebar"),e("svg",{class:"w-6 h-6","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"clip-rule":"evenodd","fill-rule":"evenodd",d:"M2 4.75A.75.75 0 0 1 2.75 4h14.5a.75.75 0 0 1 0 1.5H2.75A.75.75 0 0 1 2 4.75Zm0 10.5a.75.75 0 0 1 .75-.75h14.5a.75.75 0 0 1 0 1.5H2.75a.75.75 0 0 1-.75-.75ZM2 10a.75.75 0 0 1 .75-.75h14.5a.75.75 0 0 1 0 1.5H2.75A.75.75 0 0 1 2 10Z"})])],-1)),e("button",{type:"button",class:"hidden sm:inline-flex items-center p-2 text-sm text-white/90 rounded-lg hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-white/40",onClick:s[0]||(s[0]=t=>d.$emit("toggle-sidebar"))},[s[4]||(s[4]=e("span",{class:"sr-only"},"Contraer/expandir sidebar",-1)),l.sidebarCollapsed?(o(),c("svg",ut,[...s[3]||(s[3]=[e("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 0 1 1-1h8a1 1 0 1 1 0 2H5v10h7a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1V4Zm12.707 2.293a1 1 0 0 1 0 1.414L15.414 8H9a1 1 0 1 0 0 2h6.414l.293.293a1 1 0 0 1 0 1.414l-2 2a1 1 0 1 0 1.414 1.414l2-2a1 1 0 0 0 0-1.414L16.414 10l.707-.707a1 1 0 0 0 0-1.414l-2-2a1 1 0 0 0-1.414 1.414l2 2Z","clip-rule":"evenodd"},null,-1)])])):(o(),c("svg",it,[...s[2]||(s[2]=[e("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 0 1 1-1h8a1 1 0 1 1 0 2H5v10h7a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1V4Zm12.293 2.293a1 1 0 0 1 1.414 0l2 2a1 1 0 0 1 0 1.414l-2 2a1 1 0 1 1-1.414-1.414L15.586 10l-.293-.293a1 1 0 0 1 0-1.414ZM9 10a1 1 0 0 1 1-1h7a1 1 0 1 1 0 2h-7a1 1 0 0 1-1-1Z","clip-rule":"evenodd"},null,-1)])]))])]),e("div",ct,[e("div",bt,[e("button",{type:"button",class:"inline-flex items-center justify-center w-9 h-9 text-sm text-white/90 rounded-lg hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-white/40","aria-expanded":"false","aria-label":"Notificaciones",onClick:m},[s[6]||(s[6]=e("svg",{class:"w-5 h-5","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M10 2a6 6 0 0 0-6 6v2.586l-.707.707A1 1 0 0 0 3 13h14a1 1 0 0 0 .707-1.707L17 10.586V8a6 6 0 0 0-6-6Zm0 16a2.5 2.5 0 0 0 2.45-2H7.55A2.5 2.5 0 0 0 10 18Z"})],-1)),k.value>0?(o(),c("span",mt,C(k.value>99?"99+":k.value),1)):A("",!0)]),z(e("div",{class:"absolute right-0 z-50 mt-2 w-80 max-w-[90vw] text-sm bg-white divide-y divide-gray-100 rounded-lg shadow-lg border border-gray-200 dark:bg-slate-900 dark:divide-slate-800 dark:border-slate-700",onClick:s[1]||(s[1]=Ae(()=>{},["stop"]))},[e("div",gt,[s[7]||(s[7]=e("p",{class:"text-sm font-semibold text-gray-900 dark:text-slate-100"},"Notificaciones",-1)),e("p",vt,"No leídas: "+C(k.value),1)]),e("ul",pt,[y.value.length===0?(o(),c("li",xt," No hay notificaciones nuevas. ")):A("",!0),(o(!0),c(ue,null,ce(y.value,t=>{var a,n;return o(),c("li",{key:t.id},[e("button",{type:"button",class:"w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-slate-800",onClick:r=>R(t)},[e("p",ht,C(((a=t==null?void 0:t.data)==null?void 0:a.title)??"Notificación"),1),(n=t==null?void 0:t.data)!=null&&n.message?(o(),c("p",wt,C(t.data.message),1)):A("",!0),e("p",yt,C(H(t==null?void 0:t.created_at)),1)],8,ft)])}),128))]),y.value.length>0?(o(),c("div",kt,[e("button",{type:"button",class:"text-xs text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",onClick:O}," Marcar todas como leídas ")])):A("",!0)],512),[[G,_.value]])]),e("button",{type:"button",class:"inline-flex items-center justify-center w-9 h-9 text-sm text-white/90 rounded-lg hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-white/40","aria-label":g.value?"Cambiar a modo claro":"Cambiar a modo oscuro",onClick:j},[g.value?(o(),c("svg",$t,[...s[8]||(s[8]=[e("path",{d:"M10 2a1 1 0 0 1 1 1v1a1 1 0 1 1-2 0V3a1 1 0 0 1 1-1Zm4.95 3.05a1 1 0 0 1 0 1.41l-.7.7a1 1 0 1 1-1.41-1.41l.7-.7a1 1 0 0 1 1.41 0ZM17 9a1 1 0 1 1 0 2h-1a1 1 0 1 1 0-2h1ZM10 6a4 4 0 1 0 0 8 4 4 0 0 0 0-8ZM4 9a1 1 0 1 0 0 2H3a1 1 0 1 0 0-2h1Zm2.16-3.54a1 1 0 0 1 1.41 0l.7.7a1 1 0 0 1-1.41 1.41l-.7-.7a1 1 0 0 1 0-1.41ZM10 16a1 1 0 0 1 1 1v1a1 1 0 1 1-2 0v-1a1 1 0 0 1 1-1Zm5.54.46a1 1 0 0 1 0 1.41l-.7.7a1 1 0 1 1-1.41-1.41l.7-.7a1 1 0 0 1 1.41 0ZM6.57 15.76a1 1 0 0 1 0 1.41l-.7.7a1 1 0 1 1-1.41-1.41l.7-.7a1 1 0 0 1 1.41 0Z"},null,-1)])])):(o(),c("svg",Ct,[...s[9]||(s[9]=[e("path",{d:"M17.293 13.293A8 8 0 0 1 6.707 2.707a1 1 0 0 1 1.11-1.66A10 10 0 1 0 18.953 12.183a1 1 0 0 1-1.66 1.11Z"},null,-1)])]))],8,_t),e("div",Et,[e("button",{type:"button",class:"flex text-sm rounded-full ring-1 ring-sky-700 hover:ring-white/60 focus:ring-4 focus:ring-white/30","aria-expanded":"false",onClick:N},[s[10]||(s[10]=e("span",{class:"sr-only"},"Abrir menú de usuario",-1)),b.value?(o(),c("img",{key:0,src:b.value,alt:p.value,class:"w-8 h-8 rounded-full object-cover bg-white ring-1 ring-sky-700",loading:"lazy"},null,8,St)):(o(),c("div",It,C(u.value),1))]),z(e("div",Tt,[e("div",Mt,[e("p",Lt,C(p.value),1),e("p",At,C(E.value),1)]),e("ul",Bt,[s[12]||(s[12]=e("li",null,[e("a",{href:"/profile",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-slate-200 dark:hover:bg-slate-800"}," Perfil ")],-1)),s[13]||(s[13]=e("li",null,[e("a",{href:"/configuracion",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-slate-200 dark:hover:bg-slate-800"}," Configuración ")],-1)),e("li",null,[e("form",Nt,[e("input",{type:"hidden",name:"_token",value:$(h)},null,8,Vt),s[11]||(s[11]=e("button",{type:"submit",class:"w-full text-left block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-slate-200 dark:hover:bg-slate-800"}," Salir ",-1))])])])],512),[[G,i.value]])])])])])],2))}},Pt="/build/assets/LOGO-cdeU89Pk.png",Rt="/build/assets/LOGO_TEXTO-CJ7UpWu5.png",jt={class:"h-full flex flex-col bg-slate-900"},Dt={href:"/dashboard",class:"flex items-center w-full gap-2"},zt=["src"],Ut=["src"],Ht={class:"flex-1 px-3 pb-4 overflow-y-auto"},Ft={class:"px-2 pt-2 pb-3 text-xs font-semibold text-slate-300 uppercase tracking-wider"},Zt={class:"space-y-2 font-medium"},qt={class:"ms-3"},Wt={key:0},Gt={class:"flex-1 ms-3 whitespace-nowrap"},Kt={key:1},Qt={class:"flex-1 ms-3 whitespace-nowrap"},Jt={key:2},Yt={class:"flex-1 ms-3 whitespace-nowrap"},Xt={class:"mt-2 space-y-1 pl-2"},es={key:3},ts={class:"flex-1 ms-3 whitespace-nowrap"},ss={class:"mt-2 space-y-1 pl-2"},as={key:0},ls={key:1},rs={key:4},os={class:"flex-1 ms-3 whitespace-nowrap"},ns={key:5},ds={class:"flex-1 ms-3 whitespace-nowrap"},is={class:"mt-2 space-y-1 pl-2"},us={class:"min-w-56 bg-slate-900 border border-slate-800 rounded-lg shadow-sm overflow-hidden"},cs={class:"py-2"},bs={key:0},ms={key:1},gs={__name:"Sidebar",props:{collapsed:{type:Boolean,default:!1}},setup(l){const h=window.__APP_LOGO_MARK__??"",v=window.__APP_LOGO_FULL__??"",p=B(()=>h||Pt),E=B(()=>v||Rt),b=window.location.pathname,u=F=>F==="/dashboard"?b==="/dashboard":b.startsWith(F),g=F=>b===F,_=l,{collapsed:i}=Xe(_),y=B(()=>window.__AUTH_USER__??null),k=F=>{var K;const x=(K=y.value)==null?void 0:K.permissions;return Array.isArray(x)&&x.includes(F)},w=B(()=>k("menu.users")),f=B(()=>k("menu.roles")),M=B(()=>k("menu.leads")),R=B(()=>k("menu.email")||k("menu.leads")),H=B(()=>k("menu.inbox")),m=B(()=>k("menu.calendar")||k("calendar.view")),N=B(()=>k("menu.postventa")),O=T(u("/incidencias")||u("/backlog")||u("/postventa")),V=T(!1),j=T(null),L=T({left:"0px",top:"0px"});let d=null;const s=()=>{var x,K;if(!i.value)return;d&&(clearTimeout(d),d=null);const F=(K=(x=j.value)==null?void 0:x.getBoundingClientRect)==null?void 0:K.call(x);F&&(L.value={left:`${Math.round(F.right+8)}px`,top:`${Math.round(F.top)}px`}),V.value=!0},t=()=>{i.value&&(d&&clearTimeout(d),d=setTimeout(()=>{V.value=!1},120))},a=()=>{if(i.value){window.location.assign("/backlog");return}O.value=!O.value},n=T(g("/leads")||u("/desistidos")||u("/espera")),r=T(!1),S=T(null),P=T({left:"0px",top:"0px"});let D=null;const q=()=>{var x,K;if(!i.value)return;D&&(clearTimeout(D),D=null);const F=(K=(x=S.value)==null?void 0:x.getBoundingClientRect)==null?void 0:K.call(x);F&&(P.value={left:`${Math.round(F.right+8)}px`,top:`${Math.round(F.top)}px`}),r.value=!0},Y=()=>{i.value&&(D&&clearTimeout(D),D=setTimeout(()=>{r.value=!1},120))},X=()=>{if(i.value){window.location.assign("/leads");return}n.value=!n.value},ee=T(u("/leads/whatsapp")||u("/leads/email")),ae=T(!1),te=T(null),le=T({left:"0px",top:"0px"});let se=null;const ne=()=>{var x,K;if(!i.value)return;se&&(clearTimeout(se),se=null);const F=(K=(x=te.value)==null?void 0:x.getBoundingClientRect)==null?void 0:K.call(x);F&&(le.value={left:`${Math.round(F.right+8)}px`,top:`${Math.round(F.top)}px`}),ae.value=!0},de=()=>{i.value&&(se&&clearTimeout(se),se=setTimeout(()=>{ae.value=!1},120))},ie=()=>{if(i.value){window.location.assign("/leads/whatsapp");return}ee.value=!ee.value};return(F,x)=>(o(),c("aside",{id:"logo-sidebar",class:U(["fixed top-0 left-0 z-40 h-screen transition-all duration-200 -translate-x-full bg-slate-900 border-r border-slate-950 sm:translate-x-0",$(i)?"w-20":"w-64"]),"aria-label":"Sidebar"},[e("div",jt,[e("div",{class:U(["h-16 px-2 flex items-center bg-sky-600 border-b border-sky-700 overflow-hidden",$(i)?"justify-center":"justify-start"])},[e("a",Dt,[$(i)?(o(),c("img",{key:0,src:p.value,alt:"Atlantis",class:"h-14 w-14 object-contain"},null,8,zt)):(o(),c("img",{key:1,src:E.value,alt:"Atlantis",class:"h-14 w-full max-w-full flex-1 object-contain object-left"},null,8,Ut))])],2),e("div",Ht,[z(e("div",Ft," Menú ",512),[[G,!$(i)]]),e("ul",Zt,[e("li",null,[e("a",{href:"/dashboard",title:"Inicio","aria-current":"page",class:U(["flex items-center p-2 rounded-lg group",[$(i)?"justify-center":"",u("/dashboard")?"text-white bg-slate-800 border border-slate-700":"text-slate-200 hover:bg-slate-800"]])},[(o(),c("svg",{class:U(["w-5 h-5",u("/dashboard")?"text-white/90":"text-slate-300 group-hover:text-white"]),"aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[...x[0]||(x[0]=[e("path",{d:"M10 2a1 1 0 0 1 .7.3l7 7a1 1 0 0 1-1.4 1.4L16 10.4V17a1 1 0 0 1-1 1h-3a1 1 0 0 1-1-1v-3H9v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-6.6l-.3.3A1 1 0 1 1 2.3 9.3l7-7A1 1 0 0 1 10 2Z"},null,-1)])],2)),z(e("span",qt,"Inicio",512),[[G,!$(i)]])],2)]),w.value?(o(),c("li",Wt,[e("a",{href:"/users",title:"Usuarios",class:U(["flex items-center p-2 rounded-lg group",[$(i)?"justify-center":"",u("/users")?"text-white bg-slate-800 border border-slate-700":"text-slate-200 hover:bg-slate-800"]])},[(o(),c("svg",{class:U(["w-5 h-5",u("/users")?"text-white/90":"text-slate-300 group-hover:text-white"]),"aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[...x[1]||(x[1]=[e("path",{d:"M10 10a4 4 0 1 0-4-4 4 4 0 0 0 4 4Zm-7 8a7 7 0 0 1 14 0 1 1 0 0 1-2 0 5 5 0 0 0-10 0 1 1 0 0 1-2 0Z"},null,-1)])],2)),z(e("span",Gt,"Usuarios",512),[[G,!$(i)]])],2)])):A("",!0),f.value?(o(),c("li",Kt,[e("a",{href:"/roles",title:"Roles",class:U(["flex items-center p-2 rounded-lg group",[$(i)?"justify-center":"",u("/roles")?"text-white bg-slate-800 border border-slate-700":"text-slate-200 hover:bg-slate-800"]])},[(o(),c("svg",{class:U(["w-5 h-5",u("/roles")?"text-white/90":"text-slate-300 group-hover:text-white"]),"aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[...x[2]||(x[2]=[e("path",{d:"M10 2l7 3v5c0 5-3.58 9.74-7 10-3.42-.26-7-5-7-10V5l7-3z"},null,-1)])],2)),z(e("span",Qt,"Roles",512),[[G,!$(i)]])],2)])):A("",!0),M.value?(o(),c("li",Jt,[e("div",{class:"relative",ref_key:"pipelineAnchor",ref:S,onMouseenter:q,onMouseleave:Y},[e("button",{type:"button",class:U(["w-full flex items-center p-2 rounded-lg group",[$(i)?"justify-center":"",g("/leads")||u("/desistidos")||u("/espera")?"text-white bg-slate-800 border border-slate-700":"text-slate-200 hover:bg-slate-800"]]),onClick:X},[(o(),c("svg",{class:U(["w-5 h-5",g("/leads")||u("/desistidos")||u("/espera")?"text-white/90":"text-slate-300 group-hover:text-white"]),"aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[...x[3]||(x[3]=[e("path",{d:"M3 3h14v4H3V3zm0 6h6v8H3v-8zm8 0h6v8h-6v-8z"},null,-1)])],2)),z(e("span",Yt,"Pipeline",512),[[G,!$(i)]]),z((o(),c("svg",{class:U(["w-4 h-4",n.value?"rotate-180":""]),"aria-hidden":"true",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[...x[4]||(x[4]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2)),[[G,!$(i)]])],2),z(e("ul",Xt,[e("li",null,[e("a",{href:"/leads",class:U(["flex items-center gap-3 p-2 rounded-lg group",["text-slate-200 hover:bg-slate-800",$(b)==="/leads"?"bg-slate-800 border border-slate-700":""]])},[...x[5]||(x[5]=[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"},null,-1),e("span",{class:"whitespace-nowrap"},"Leads",-1)])],2)]),e("li",null,[e("a",{href:"/espera",class:U(["flex items-center gap-3 p-2 rounded-lg group",["text-slate-200 hover:bg-slate-800",u("/espera")?"bg-slate-800 border border-slate-700":""]])},[...x[6]||(x[6]=[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"},null,-1),e("span",{class:"whitespace-nowrap"},"Zona de espera",-1)])],2)]),e("li",null,[e("a",{href:"/desistidos",class:U(["flex items-center gap-3 p-2 rounded-lg group",["text-slate-200 hover:bg-slate-800",u("/desistidos")?"bg-slate-800 border border-slate-700":""]])},[...x[7]||(x[7]=[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"},null,-1),e("span",{class:"whitespace-nowrap"},"Desistidos",-1)])],2)])],512),[[G,!$(i)&&n.value]])],544)])):A("",!0),H.value?(o(),c("li",es,[e("div",{class:"relative",ref_key:"inboxAnchor",ref:te,onMouseenter:ne,onMouseleave:de},[e("button",{type:"button",class:U(["w-full flex items-center p-2 rounded-lg group",[$(i)?"justify-center":"",u("/leads/whatsapp")||u("/leads/email")?"text-white bg-slate-800 border border-slate-700":"text-slate-200 hover:bg-slate-800"]]),onClick:ie},[(o(),c("svg",{class:U(["w-5 h-5",u("/leads/whatsapp")||u("/leads/email")?"text-white/90":"text-slate-300 group-hover:text-white"]),"aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[...x[8]||(x[8]=[e("path",{d:"M2 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4zm2 0 6 4 6-4H4zm14 2.2-8 5.3-8-5.3V16h16V6.2z"},null,-1)])],2)),z(e("span",ts,"Bandeja de entrada",512),[[G,!$(i)]]),z((o(),c("svg",{class:U(["w-4 h-4",ee.value?"rotate-180":""]),"aria-hidden":"true",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[...x[9]||(x[9]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2)),[[G,!$(i)]])],2),z(e("ul",ss,[M.value?(o(),c("li",as,[e("a",{href:"/leads/whatsapp",class:U(["flex items-center gap-3 p-2 rounded-lg group",["text-slate-200 hover:bg-slate-800",$(b)==="/leads/whatsapp"?"bg-slate-800 border border-slate-700":""]])},[...x[10]||(x[10]=[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"},null,-1),e("span",{class:"whitespace-nowrap"},"WhatsApp masivo",-1)])],2)])):A("",!0),R.value?(o(),c("li",ls,[e("a",{href:"/leads/email",class:U(["flex items-center gap-3 p-2 rounded-lg group",["text-slate-200 hover:bg-slate-800",$(b)==="/leads/email"?"bg-slate-800 border border-slate-700":""]])},[...x[11]||(x[11]=[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"},null,-1),e("span",{class:"whitespace-nowrap"},"Email masivo",-1)])],2)])):A("",!0)],512),[[G,!$(i)&&ee.value]])],544)])):A("",!0),m.value?(o(),c("li",rs,[e("a",{href:"/calendar",title:"Calendario",class:U(["flex items-center p-2 rounded-lg group",[$(i)?"justify-center":"",u("/calendar")?"text-white bg-slate-800 border border-slate-700":"text-slate-200 hover:bg-slate-800"]])},[(o(),c("svg",{class:U(["w-5 h-5",u("/calendar")?"text-white/90":"text-slate-300 group-hover:text-white"]),"aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[...x[12]||(x[12]=[e("path",{d:"M6 2a1 1 0 1 0 0 2h8a1 1 0 1 0 0-2H6Z"},null,-1),e("path",{"fill-rule":"evenodd",d:"M4 5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V5Zm3 4a1 1 0 0 0 0 2h6a1 1 0 1 0 0-2H7Zm0 4a1 1 0 1 0 0 2h4a1 1 0 1 0 0-2H7Z","clip-rule":"evenodd"},null,-1)])],2)),z(e("span",os,"Calendario",512),[[G,!$(i)]])],2)])):A("",!0),N.value?(o(),c("li",ns,[e("div",{class:"relative",ref_key:"postventaAnchor",ref:j,onMouseenter:s,onMouseleave:t},[e("button",{type:"button",class:U(["w-full flex items-center p-2 rounded-lg group",[$(i)?"justify-center":"",u("/incidencias")||u("/backlog")||u("/postventa")?"text-white bg-slate-800 border border-slate-700":"text-slate-200 hover:bg-slate-800"]]),onClick:a},[(o(),c("svg",{class:U(["w-5 h-5",u("/incidencias")||u("/backlog")||u("/postventa")?"text-white/90":"text-slate-300 group-hover:text-white"]),"aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[...x[13]||(x[13]=[e("path",{d:"M11.3 1.046a1 1 0 0 0-2.6 0l-.2.682a6.96 6.96 0 0 0-1.18.49l-.63-.35a1 1 0 0 0-1.24.22l-.9.9a1 1 0 0 0-.22 1.24l.35.63a6.96 6.96 0 0 0-.49 1.18l-.682.2a1 1 0 0 0 0 2.6l.682.2c.12.42.28.82.49 1.2l-.35.63a1 1 0 0 0 .22 1.24l.9.9a1 1 0 0 0 1.24.22l.63-.35c.38.2.78.37 1.2.49l.2.682a1 1 0 0 0 2.6 0l.2-.682c.42-.12.82-.28 1.2-.49l.63.35a1 1 0 0 0 1.24-.22l.9-.9a1 1 0 0 0 .22-1.24l-.35-.63c.2-.38.37-.78.49-1.2l.682-.2a1 1 0 0 0 0-2.6l-.682-.2a6.96 6.96 0 0 0-.49-1.18l.35-.63a1 1 0 0 0-.22-1.24l-.9-.9a1 1 0 0 0-1.24-.22l-.63.35c-.38-.2-.78-.37-1.2-.49l-.2-.682ZM10 13a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z"},null,-1)])],2)),z(e("span",ds,"Postventa",512),[[G,!$(i)]]),z((o(),c("svg",{class:U(["w-4 h-4",O.value?"rotate-180":""]),"aria-hidden":"true",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[...x[14]||(x[14]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2)),[[G,!$(i)]])],2),z(e("ul",is,[e("li",null,[e("a",{href:"/backlog",class:U(["flex items-center gap-3 p-2 rounded-lg group",["text-slate-200 hover:bg-slate-800",u("/incidencias")||u("/backlog")?"bg-slate-800 border border-slate-700":""]])},[...x[15]||(x[15]=[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"},null,-1),e("span",{class:"whitespace-nowrap"},"Incidencias",-1)])],2)]),e("li",null,[e("a",{href:"/postventa/clientes",class:U(["flex items-center gap-3 p-2 rounded-lg group",["text-slate-200 hover:bg-slate-800",u("/postventa/clientes")?"bg-slate-800 border border-slate-700":""]])},[...x[16]||(x[16]=[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"},null,-1),e("span",{class:"whitespace-nowrap"},"Clientes",-1)])],2)]),e("li",null,[e("a",{href:"/postventa/contadores",class:U(["flex items-center gap-3 p-2 rounded-lg group",["text-slate-200 hover:bg-slate-800",u("/postventa/contadores")?"bg-slate-800 border border-slate-700":""]])},[...x[17]||(x[17]=[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"},null,-1),e("span",{class:"whitespace-nowrap"},"Contadores",-1)])],2)]),e("li",null,[e("a",{href:"/postventa/certificados",class:U(["flex items-center gap-3 p-2 rounded-lg group",["text-slate-200 hover:bg-slate-800",u("/postventa/certificados")?"bg-slate-800 border border-slate-700":""]])},[...x[18]||(x[18]=[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"},null,-1),e("span",{class:"whitespace-nowrap"},"Certificados",-1)])],2)])],512),[[G,!$(i)&&O.value]])],544)])):A("",!0)])])]),(o(),W(Te,{to:"body"},[$(i)?z((o(),c("div",{key:0,class:"fixed z-[9999]",style:_e(L.value),onMouseenter:s,onMouseleave:t},[...x[19]||(x[19]=[e("div",{class:"min-w-56 bg-slate-900 border border-slate-800 rounded-lg shadow-sm overflow-hidden"},[e("div",{class:"px-4 py-3 flex items-center justify-between border-b border-slate-800"},[e("div",{class:"text-sm font-semibold text-slate-100"},"Postventa"),e("svg",{class:"w-4 h-4 text-slate-300","aria-hidden":"true",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])]),e("ul",{class:"py-2"},[e("li",null,[e("a",{href:"/backlog",class:"flex items-center gap-3 px-4 py-2 text-sm text-slate-200 hover:bg-slate-800"},[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"}),e("span",{class:"whitespace-nowrap"},"Incidencias")])]),e("li",null,[e("a",{href:"/postventa/clientes",class:"flex items-center gap-3 px-4 py-2 text-sm text-slate-200 hover:bg-slate-800"},[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"}),e("span",{class:"whitespace-nowrap"},"Clientes")])]),e("li",null,[e("a",{href:"/postventa/contadores",class:"flex items-center gap-3 px-4 py-2 text-sm text-slate-200 hover:bg-slate-800"},[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"}),e("span",{class:"whitespace-nowrap"},"Contadores")])]),e("li",null,[e("a",{href:"/postventa/certificados",class:"flex items-center gap-3 px-4 py-2 text-sm text-slate-200 hover:bg-slate-800"},[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"}),e("span",{class:"whitespace-nowrap"},"Certificados")])])])],-1)])],36)),[[G,V.value]]):A("",!0)])),(o(),W(Te,{to:"body"},[$(i)?z((o(),c("div",{key:0,class:"fixed z-[9999]",style:_e(P.value),onMouseenter:q,onMouseleave:Y},[...x[20]||(x[20]=[e("div",{class:"min-w-56 bg-slate-900 border border-slate-800 rounded-lg shadow-sm overflow-hidden"},[e("div",{class:"px-4 py-3 flex items-center justify-between border-b border-slate-800"},[e("div",{class:"text-sm font-semibold text-slate-100"},"Pipeline"),e("svg",{class:"w-4 h-4 text-slate-300","aria-hidden":"true",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])]),e("ul",{class:"py-2"},[e("li",null,[e("a",{href:"/leads",class:"flex items-center gap-3 px-4 py-2 text-sm text-slate-200 hover:bg-slate-800"},[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"}),e("span",{class:"whitespace-nowrap"},"Leads")])]),e("li",null,[e("a",{href:"/espera",class:"flex items-center gap-3 px-4 py-2 text-sm text-slate-200 hover:bg-slate-800"},[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"}),e("span",{class:"whitespace-nowrap"},"Zona de espera")])]),e("li",null,[e("a",{href:"/desistidos",class:"flex items-center gap-3 px-4 py-2 text-sm text-slate-200 hover:bg-slate-800"},[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"}),e("span",{class:"whitespace-nowrap"},"Desistidos")])])])],-1)])],36)),[[G,r.value]]):A("",!0)])),(o(),W(Te,{to:"body"},[$(i)?z((o(),c("div",{key:0,class:"fixed z-[9999]",style:_e(le.value),onMouseenter:ne,onMouseleave:de},[e("div",us,[x[23]||(x[23]=e("div",{class:"px-4 py-3 flex items-center justify-between border-b border-slate-800"},[e("div",{class:"text-sm font-semibold text-slate-100"},"Bandeja de entrada"),e("svg",{class:"w-4 h-4 text-slate-300","aria-hidden":"true",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1)),e("ul",cs,[M.value?(o(),c("li",bs,[...x[21]||(x[21]=[e("a",{href:"/leads/whatsapp",class:"flex items-center gap-3 px-4 py-2 text-sm text-slate-200 hover:bg-slate-800"},[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"}),e("span",{class:"whitespace-nowrap"},"WhatsApp masivo")],-1)])])):A("",!0),R.value?(o(),c("li",ms,[...x[22]||(x[22]=[e("a",{href:"/leads/email",class:"flex items-center gap-3 px-4 py-2 text-sm text-slate-200 hover:bg-slate-800"},[e("span",{class:"w-3 h-3 rounded-full border border-slate-400"}),e("span",{class:"whitespace-nowrap"},"Email masivo")],-1)])])):A("",!0)])])],36)),[[G,ae.value]]):A("",!0)]))],2))}},vs={class:"bg-white border-t border-gray-200 dark:bg-slate-950 dark:border-slate-800"},ps={class:"max-w-7xl mx-auto px-4 py-6"},xs={class:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"},fs={class:"text-sm text-gray-500 dark:text-slate-300"},hs={__name:"Footer",setup(l){const h=new Date().getFullYear();return(v,p)=>(o(),c("footer",vs,[e("div",ps,[e("div",xs,[e("span",fs,"© "+C($(h))+" CRM ATLANTIS",1),p[0]||(p[0]=e("div",{class:"flex gap-4"},[e("a",{href:"#",class:"text-sm text-gray-500 hover:text-gray-900 dark:text-slate-300 dark:hover:text-slate-100"},"Ayuda"),e("a",{href:"#",class:"text-sm text-gray-500 hover:text-gray-900 dark:text-slate-300 dark:hover:text-slate-100"},"Privacidad"),e("a",{href:"#",class:"text-sm text-gray-500 hover:text-gray-900 dark:text-slate-300 dark:hover:text-slate-100"},"Términos")],-1))])])]))}},ws={key:0,class:"absolute right-0 z-30 mt-2 w-64 rounded-lg border border-gray-200 bg-white p-2 shadow-lg dark:border-slate-800 dark:bg-slate-900"},ys={class:"mb-2 flex items-center justify-between px-2 pt-1"},ks={class:"max-h-72 overflow-y-auto pr-1"},_s=["checked","onChange"],$s={class:"truncate"},Cs={__name:"TableColumnsDropdown",props:{columns:{type:Array,default:()=>[]},visibleKeys:{type:Array,default:()=>[]}},emits:["toggle","reset"],setup(l){const h=l,v=T(null),p=T(!1),E=B(()=>(h.columns||[]).filter(u=>(u==null?void 0:u.key)&&(u==null?void 0:u.label))),b=u=>{var g;p.value&&((g=v.value)!=null&&g.contains(u.target)||(p.value=!1))};return ve(()=>{document.addEventListener("click",b)}),fe(()=>{document.removeEventListener("click",b)}),(u,g)=>E.value.length>1?(o(),c("div",{key:0,ref_key:"root",ref:v,class:"relative"},[e("button",{type:"button",class:"inline-flex items-center gap-2 rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-700 shadow-sm hover:bg-gray-50 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-200 dark:hover:bg-slate-800",onClick:g[0]||(g[0]=_=>p.value=!p.value)},[...g[2]||(g[2]=[e("span",null,"Columnas",-1),e("svg",{class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.51a.75.75 0 01-1.08 0l-4.25-4.51a.75.75 0 01.02-1.06z","clip-rule":"evenodd"})],-1)])]),p.value?(o(),c("div",ws,[e("div",ys,[g[3]||(g[3]=e("span",{class:"text-xs font-semibold uppercase text-gray-500 dark:text-slate-400"},"Mostrar columnas",-1)),e("button",{type:"button",class:"text-xs text-blue-600 hover:underline dark:text-blue-400",onClick:g[1]||(g[1]=_=>u.$emit("reset"))}," Restablecer ")]),e("div",ks,[(o(!0),c(ue,null,ce(E.value,_=>(o(),c("label",{key:_.key,class:"flex items-center gap-2 rounded-md px-2 py-1.5 text-sm text-gray-700 hover:bg-gray-50 dark:text-slate-200 dark:hover:bg-slate-800"},[e("input",{type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500",checked:l.visibleKeys.includes(_.key),onChange:i=>u.$emit("toggle",_.key)},null,40,_s),e("span",$s,C(_.label),1)]))),128))])])):A("",!0)],512)):A("",!0)}},Es="crm:table-columns",Ss=l=>{try{return JSON.parse(l)}catch{return null}},Is=({tableId:l,columns:h})=>{const v=T([]),p=T(!1),E=T(null),b=T(null),u=B(()=>($(h)||[]).filter(m=>(m==null?void 0:m.key)&&(m==null?void 0:m.label))),g=B(()=>u.value.map(m=>m.key)),_=B(()=>`${Es}:${l||"default"}`),i=()=>{if(typeof window>"u")return null;const m=window.localStorage.getItem(_.value),N=Ss(m);return Array.isArray(N)?N:null},y=m=>{typeof window>"u"||window.localStorage.setItem(_.value,JSON.stringify(m))};ke(g,m=>{if(m.length===0){v.value=[];return}if(!p.value){const V=(i()||[]).filter(j=>m.includes(j));v.value=V.length>0?V:[...m],p.value=!0;return}const N=v.value.filter(O=>m.includes(O));v.value=N.length>0?N:[...m]},{immediate:!0}),ke([v,_],([m])=>{p.value&&y(m)},{deep:!0});const k=B(()=>{const m=new Set(v.value);return u.value.filter(N=>m.has(N.key))}),w=()=>{const m=E.value;if(!m)return;const N=new Set(v.value),O=g.value,V=Math.max(1,O.filter(d=>N.has(d)).length);m.style.width="100%",m.style.tableLayout="auto";const j=m.querySelectorAll("colgroup col");O.forEach((d,s)=>{const t=j[s];if(!t)return;const a=N.has(d);t.style.display=a?"":"none",t.style.width="",t.style.minWidth="",t.style.maxWidth=""}),m.querySelectorAll("tr").forEach(d=>{const s=Array.from(d.children).filter(t=>{const a=t==null?void 0:t.tagName;return a==="TH"||a==="TD"});if(O.forEach((t,a)=>{const n=s[a];if(!n)return;const r=N.has(t);n.style.display=r?"":"none",n.style.width="",n.style.minWidth="",n.style.maxWidth="",n.style.overflow=""}),s.length===1){const t=s[0];(t.hasAttribute("colspan")||Number(t.colSpan)>1)&&(t.colSpan=V)}})};ke([v,g,E],async()=>{await Ce(),w()},{deep:!0,flush:"post"});const f=()=>{b.value&&(b.value.disconnect(),b.value=null)};return ke(E,async m=>{f(),!(!m||typeof MutationObserver>"u")&&(b.value=new MutationObserver(()=>{w()}),b.value.observe(m,{childList:!0,subtree:!0}),await Ce(),w())},{flush:"post"}),fe(()=>{f()}),{tableRef:E,visibleKeys:v,visibleColumns:k,isColumnVisible:m=>v.value.includes(m),toggleColumn:m=>{if(g.value.includes(m)){if(v.value.includes(m)){if(v.value.length===1)return;v.value=v.value.filter(N=>N!==m);return}v.value=[...v.value,m]}},resetColumns:()=>{v.value=[...g.value]},applyVisibilityToTable:w}};function Ts({tableRef:l}){const h=T(null),v=T(null),p=T(0),E=T(!1);let b=!1,u=null;const g=()=>{const w=h.value,f=v.value;!w||!f||b||(b=!0,f.scrollLeft=w.scrollLeft,b=!1)},_=()=>{const w=h.value,f=v.value;!w||!f||b||(b=!0,w.scrollLeft=f.scrollLeft,b=!1)},i=()=>{const w=h.value;if(!w)return;const f=w.scrollWidth>w.clientWidth+1,M=w.getBoundingClientRect(),R=M.bottom<=window.innerHeight&&M.bottom>=0;p.value=w.scrollWidth,E.value=f&&!R,f&&v.value&&(v.value.scrollLeft=w.scrollLeft)},y=()=>{const w=h.value,f=v.value;!w||!f||(w.addEventListener("scroll",g,{passive:!0}),f.addEventListener("scroll",_,{passive:!0}),typeof ResizeObserver<"u"&&(u=new ResizeObserver(()=>{i()}),u.observe(w),l!=null&&l.value&&u.observe(l.value)),window.addEventListener("resize",i),window.addEventListener("scroll",i,{passive:!0}),i())},k=()=>{const w=h.value,f=v.value;w&&w.removeEventListener("scroll",g),f&&f.removeEventListener("scroll",_),u&&(u.disconnect(),u=null),window.removeEventListener("resize",i),window.removeEventListener("scroll",i)};return ve(async()=>{await Ce(),y()}),fe(()=>{k()}),ke(l,async()=>{await Ce(),i()}),{tableScrollRef:h,stickyScrollRef:v,stickyScrollWidth:p,showStickyXScroll:E,refreshStickyScroll:i}}const Ms={key:0,class:"rounded-lg border border-slate-200 bg-white p-6 text-sm text-slate-600 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-300"},Ls={key:1,class:"rounded-lg border border-red-200 bg-white p-6 text-sm text-red-700 dark:border-red-900/40 dark:bg-slate-900 dark:text-red-300"},As={key:2,class:"space-y-6"},Bs={class:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-end"},Ns={class:"flex items-center gap-2"},Vs=["disabled"],Os={class:"grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-4"},Ps={key:0,href:"/leads",class:"block rounded-lg border border-slate-200 bg-white p-6 shadow-sm hover:bg-slate-50 dark:border-slate-800 dark:bg-slate-900 dark:hover:bg-slate-800"},Rs={class:"mt-3 text-3xl font-semibold text-slate-900 dark:text-slate-100"},js={class:"mt-2 text-sm text-slate-600 dark:text-slate-300"},Ds={key:1,href:"/postventa/clientes",class:"block rounded-lg border border-slate-200 bg-white p-6 shadow-sm hover:bg-slate-50 dark:border-slate-800 dark:bg-slate-900 dark:hover:bg-slate-800"},zs={class:"mt-3 text-3xl font-semibold text-slate-900 dark:text-slate-100"},Us={key:2,href:"/backlog",class:"block rounded-lg border border-slate-200 bg-white p-6 shadow-sm hover:bg-slate-50 dark:border-slate-800 dark:bg-slate-900 dark:hover:bg-slate-800"},Hs={class:"mt-3 text-3xl font-semibold text-slate-900 dark:text-slate-100"},Fs={class:"mt-2 text-sm text-slate-600 dark:text-slate-300"},Zs={key:3,href:"/postventa/certificados",class:"block rounded-lg border border-slate-200 bg-white p-6 shadow-sm hover:bg-slate-50 dark:border-slate-800 dark:bg-slate-900 dark:hover:bg-slate-800"},qs={class:"mt-3 text-3xl font-semibold text-slate-900 dark:text-slate-100"},Ws={class:"mt-2 text-sm text-slate-600 dark:text-slate-300"},Gs={key:4,href:"/postventa/contadores",class:"block rounded-lg border border-slate-200 bg-white p-6 shadow-sm hover:bg-slate-50 dark:border-slate-800 dark:bg-slate-900 dark:hover:bg-slate-800"},Ks={class:"mt-3 text-3xl font-semibold text-slate-900 dark:text-slate-100"},Qs={class:"mt-2 text-sm text-slate-600 dark:text-slate-300"},Js={key:5,href:"/calendar",class:"block rounded-lg border border-slate-200 bg-white p-6 shadow-sm hover:bg-slate-50 dark:border-slate-800 dark:bg-slate-900 dark:hover:bg-slate-800"},Ys={class:"mt-3 text-3xl font-semibold text-slate-900 dark:text-slate-100"},Xs={class:"grid grid-cols-1 gap-6 lg:grid-cols-3"},ea={class:"lg:col-span-2"},ta={class:"rounded-lg border border-slate-200 bg-white shadow-sm dark:border-slate-800 dark:bg-slate-900"},sa={class:"border-b border-slate-200 p-6 dark:border-slate-800"},aa={class:"flex items-center justify-between"},la={class:"flex items-center gap-2"},ra={key:0,href:"/postventa/certificados",class:"text-sm font-medium text-blue-600 hover:underline"},oa={class:"px-6 py-3 font-medium text-slate-900 dark:text-slate-100"},na={class:"px-6 py-3"},da={class:"px-6 py-3"},ia={class:"px-6 py-3"},ua={key:0},ca={class:"rounded-lg border border-slate-200 bg-white shadow-sm dark:border-slate-800 dark:bg-slate-900"},ba={class:"border-b border-slate-200 p-6 dark:border-slate-800"},ma={class:"flex items-center justify-between"},ga={key:0,href:"/calendar",class:"text-sm font-medium text-blue-600 hover:underline"},va={class:"p-6"},pa={key:0,class:"text-sm text-slate-500 dark:text-slate-300"},xa={key:1,class:"space-y-3"},fa={class:"text-sm font-semibold text-slate-900 dark:text-slate-100"},ha={class:"mt-1 text-xs text-slate-600 dark:text-slate-300"},wa={key:0},ya={class:"grid grid-cols-1 gap-6 lg:grid-cols-2"},ka={key:0,class:"rounded-lg border border-slate-200 bg-white shadow-sm dark:border-slate-800 dark:bg-slate-900"},_a={class:"divide-y divide-slate-200 dark:divide-slate-800"},$a={class:"flex items-center justify-between gap-3"},Ca={class:"text-sm font-semibold text-slate-900 dark:text-slate-100"},Ea={class:"mt-1 text-xs text-slate-600 dark:text-slate-300"},Sa={class:"text-right"},Ia={class:"text-sm font-medium text-slate-900 dark:text-slate-100"},Ta={class:"mt-1 text-xs text-slate-600 dark:text-slate-300"},Ma={key:0,class:"p-6 text-sm text-slate-500 dark:text-slate-300"},La={key:1,class:"rounded-lg border border-slate-200 bg-white shadow-sm dark:border-slate-800 dark:bg-slate-900"},Aa={class:"divide-y divide-slate-200 dark:divide-slate-800"},Ba={class:"text-sm font-semibold text-slate-900 dark:text-slate-100"},Na={class:"mt-1 text-xs text-slate-600 dark:text-slate-300"},Va={key:0,class:"p-6 text-sm text-slate-500 dark:text-slate-300"},Oa={__name:"DashboardView",setup(l){const h=[{key:"nombre",label:"Nombre"},{key:"ruc",label:"RUC"},{key:"tipo",label:"Tipo"},{key:"vence",label:"Vence"}],{tableRef:v,visibleKeys:p,isColumnVisible:E,toggleColumn:b,resetColumns:u}=Is({tableId:"dashboard-certificados-table",columns:h}),{tableScrollRef:g,stickyScrollRef:_,stickyScrollWidth:i,showStickyXScroll:y}=Ts({tableRef:v}),k=T(!0),w=T(""),f=T({}),M=T({certificados_por_vencer:[],upcoming_events:[],recent_leads:null,recent_incidences:null}),R=T(null),H=T(""),m=()=>{const L=R.value;L&&(L.focus(),typeof L.showPicker=="function"&&L.showPicker())},N=L=>{if(!L)return"—";try{const d=new Date(L);return new Intl.DateTimeFormat("es-PE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(d)}catch{return String(L)}},O=(L,d)=>{if(L==null||L==="")return"—";const s=Number(L);if(!Number.isFinite(s))return String(L);const t=d||"PEN";try{return new Intl.NumberFormat("es-PE",{style:"currency",currency:t,maximumFractionDigits:2}).format(s)}catch{return`${s.toFixed(2)} ${t}`}},V=async()=>{var L,d;k.value=!0,w.value="";try{const{data:s}=await oe.get("/dashboard/summary",{params:{month:H.value||void 0}});f.value=(s==null?void 0:s.cards)||{},M.value={...M.value,...(s==null?void 0:s.lists)||{}}}catch(s){w.value=((d=(L=s==null?void 0:s.response)==null?void 0:L.data)==null?void 0:d.message)??"No se pudo cargar el dashboard."}finally{k.value=!1}},j=()=>{V()};return ve(()=>{V()}),(L,d)=>{var s,t,a,n;return o(),c("div",null,[k.value?(o(),c("div",Ms," Cargando dashboard… ")):w.value?(o(),c("div",Ls,C(w.value),1)):(o(),c("div",As,[e("section",Bs,[e("div",Ns,[d[1]||(d[1]=e("label",{class:"text-sm text-slate-600 dark:text-slate-300"},"Mes",-1)),z(e("input",{ref_key:"monthInput",ref:R,"onUpdate:modelValue":d[0]||(d[0]=r=>H.value=r),type:"month",class:"rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 focus:border-sky-500 focus:ring-sky-500 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100",onClick:m},null,512),[[be,H.value]]),e("button",{type:"button",class:"rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 hover:bg-slate-50 disabled:opacity-50 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-200 dark:hover:bg-slate-800",disabled:k.value,onClick:j}," Ver ",8,Vs)])]),e("section",Os,[f.value.leads?(o(),c("a",Ps,[d[2]||(d[2]=e("div",{class:"flex items-center justify-between"},[e("span",{class:"text-sm font-medium text-slate-500 dark:text-slate-300"},"Leads"),e("span",{class:"inline-flex items-center rounded bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700 dark:bg-slate-800 dark:text-slate-200"},"Total")],-1)),e("div",Rs,C(f.value.leads.total),1),e("div",js," Abiertos: "+C(f.value.leads.open)+" · Archivados: "+C(f.value.leads.archived),1)])):A("",!0),f.value.customers?(o(),c("a",Ds,[d[3]||(d[3]=e("div",{class:"flex items-center justify-between"},[e("span",{class:"text-sm font-medium text-slate-500 dark:text-slate-300"},"Clientes"),e("span",{class:"inline-flex items-center rounded bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700 dark:bg-slate-800 dark:text-slate-200"},"Total")],-1)),e("div",zs,C(f.value.customers.total),1),d[4]||(d[4]=e("div",{class:"mt-2 text-sm text-slate-600 dark:text-slate-300"},"Clientes registrados",-1))])):A("",!0),f.value.incidencias?(o(),c("a",Us,[d[5]||(d[5]=e("div",{class:"flex items-center justify-between"},[e("span",{class:"text-sm font-medium text-slate-500 dark:text-slate-300"},"Incidencias"),e("span",{class:"inline-flex items-center rounded bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700 dark:bg-slate-800 dark:text-slate-200"},"Postventa")],-1)),e("div",Hs,C(f.value.incidencias.open),1),e("div",Fs,"Abiertas · Archivadas: "+C(f.value.incidencias.archived),1)])):A("",!0),f.value.certificados?(o(),c("a",Zs,[d[6]||(d[6]=e("div",{class:"flex items-center justify-between"},[e("span",{class:"text-sm font-medium text-slate-500 dark:text-slate-300"},"Certificados"),e("span",{class:"inline-flex items-center rounded bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700 dark:bg-slate-800 dark:text-slate-200"},"Activos")],-1)),e("div",qs,C(f.value.certificados.activos),1),e("div",Ws," Por vencer (30d): "+C(f.value.certificados.por_vencer_30d)+" · Vencidos: "+C(f.value.certificados.vencidos),1)])):A("",!0),f.value.contadores?(o(),c("a",Gs,[d[7]||(d[7]=e("div",{class:"flex items-center justify-between"},[e("span",{class:"text-sm font-medium text-slate-500 dark:text-slate-300"},"Contadores"),e("span",{class:"inline-flex items-center rounded bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700 dark:bg-slate-800 dark:text-slate-200"},"Total")],-1)),e("div",Ks,C(f.value.contadores.total),1),e("div",Qs," Asignados: "+C(f.value.contadores.assigned)+" · Sin asignar: "+C(f.value.contadores.unassigned),1)])):A("",!0),f.value.calendar?(o(),c("a",Js,[d[8]||(d[8]=e("div",{class:"flex items-center justify-between"},[e("span",{class:"text-sm font-medium text-slate-500 dark:text-slate-300"},"Calendario"),e("span",{class:"inline-flex items-center rounded bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700 dark:bg-slate-800 dark:text-slate-200"},"7 días")],-1)),e("div",Ys,C(f.value.calendar.upcoming_7d),1),d[9]||(d[9]=e("div",{class:"mt-2 text-sm text-slate-600 dark:text-slate-300"},"Eventos asignados próximos",-1))])):A("",!0)]),e("section",Xs,[e("div",ea,[e("div",ta,[e("div",sa,[e("div",aa,[d[10]||(d[10]=e("h2",{class:"text-lg font-semibold text-slate-900 dark:text-slate-100"},"Certificados por vencer",-1)),e("div",la,[me(Cs,{columns:h,"visible-keys":$(p),onToggle:$(b),onReset:$(u)},null,8,["visible-keys","onToggle","onReset"]),f.value.certificados?(o(),c("a",ra," Ver certificados ")):A("",!0)])]),d[11]||(d[11]=e("p",{class:"mt-1 text-sm text-slate-600 dark:text-slate-300"},"Próximos 30 días (máx. 5)",-1))]),e("div",{ref_key:"tableScrollRef",ref:g,class:"overflow-x-auto"},[e("table",{ref_key:"tableRef",ref:v,class:"min-w-full text-left text-sm text-slate-700 dark:text-slate-200"},[e("colgroup",null,[(o(),c(ue,null,ce(h,r=>e("col",{key:r.key,style:_e({display:$(E)(r.key)?"":"none"})},null,4)),64))]),d[13]||(d[13]=e("thead",{class:"bg-slate-50 text-xs uppercase text-slate-600 dark:bg-slate-800 dark:text-slate-200"},[e("tr",null,[e("th",{class:"px-6 py-3"},"Nombre"),e("th",{class:"px-6 py-3"},"RUC"),e("th",{class:"px-6 py-3"},"Tipo"),e("th",{class:"px-6 py-3"},"Vence")])],-1)),e("tbody",null,[(o(!0),c(ue,null,ce(M.value.certificados_por_vencer,r=>(o(),c("tr",{key:r.id,class:"border-t border-slate-200 hover:bg-slate-50 dark:border-slate-800 dark:hover:bg-slate-800"},[e("td",oa,C(r.nombre),1),e("td",na,C(r.ruc||"—"),1),e("td",da,C(r.tipo||"—"),1),e("td",ia,C(r.fecha_vencimiento||"—"),1)]))),128)),(s=M.value.certificados_por_vencer)!=null&&s.length?A("",!0):(o(),c("tr",ua,[...d[12]||(d[12]=[e("td",{class:"px-6 py-4 text-sm text-slate-500 dark:text-slate-300",colspan:"4"},"Sin vencimientos próximos.",-1)])]))])],512)],512),z(e("div",{ref_key:"stickyScrollRef",ref:_,class:"sticky bottom-0 z-20 mt-2 overflow-x-auto rounded-lg border border-slate-200 bg-white/95 dark:border-slate-700 dark:bg-slate-900/95"},[e("div",{style:_e({width:`${$(i)}px`,height:"1px"})},null,4)],512),[[G,$(y)]])])]),e("div",null,[e("div",ca,[e("div",ba,[e("div",ma,[d[14]||(d[14]=e("h2",{class:"text-lg font-semibold text-slate-900 dark:text-slate-100"},"Próximos eventos",-1)),f.value.calendar?(o(),c("a",ga,"Ver calendario")):A("",!0)]),d[15]||(d[15]=e("p",{class:"mt-1 text-sm text-slate-600 dark:text-slate-300"},"Asignados a ti (máx. 5)",-1))]),e("div",va,[(t=M.value.upcoming_events)!=null&&t.length?(o(),c("ul",xa,[(o(!0),c(ue,null,ce(M.value.upcoming_events,r=>(o(),c("li",{key:r.id,class:"rounded-lg border border-slate-200 p-3 dark:border-slate-800"},[e("div",fa,C(r.title),1),e("div",ha,[Be(C(N(r.start_at))+" ",1),r.location?(o(),c("span",wa,"· "+C(r.location),1)):A("",!0)])]))),128))])):(o(),c("div",pa,"Sin eventos próximos."))])])])]),e("section",ya,[M.value.recent_leads?(o(),c("div",ka,[d[16]||(d[16]=Fe('<div class="border-b border-slate-200 p-6 dark:border-slate-800"><div class="flex items-center justify-between"><h2 class="text-lg font-semibold text-slate-900 dark:text-slate-100">Últimos leads</h2><a href="/leads" class="text-sm font-medium text-blue-600 hover:underline">Ver leads</a></div><p class="mt-1 text-sm text-slate-600 dark:text-slate-300">Últimos 5 registros</p></div>',1)),e("div",_a,[(o(!0),c(ue,null,ce(M.value.recent_leads,r=>(o(),c("div",{key:r.id,class:"p-6"},[e("div",$a,[e("div",null,[e("div",Ca,C(r.name),1),e("div",Ea,C(r.company_name||"—"),1)]),e("div",Sa,[e("div",Ia,C(O(r.amount,r.currency)),1),e("div",Ta,C(N(r.created_at)),1)])])]))),128)),(a=M.value.recent_leads)!=null&&a.length?A("",!0):(o(),c("div",Ma,"Sin leads."))])])):A("",!0),M.value.recent_incidences?(o(),c("div",La,[d[17]||(d[17]=Fe('<div class="border-b border-slate-200 p-6 dark:border-slate-800"><div class="flex items-center justify-between"><h2 class="text-lg font-semibold text-slate-900 dark:text-slate-100">Últimas incidencias</h2><a href="/backlog" class="text-sm font-medium text-blue-600 hover:underline">Ver incidencias</a></div><p class="mt-1 text-sm text-slate-600 dark:text-slate-300">Últimos 5 registros</p></div>',1)),e("div",Aa,[(o(!0),c(ue,null,ce(M.value.recent_incidences,r=>(o(),c("div",{key:r.id,class:"p-6"},[e("div",Ba,C(r.correlative)+" · "+C(r.title),1),e("div",Na," Prioridad: "+C(r.priority||"—")+" · Fecha: "+C(r.date||"—")+" · "+C(N(r.created_at)),1)]))),128)),(n=M.value.recent_incidences)!=null&&n.length?A("",!0):(o(),c("div",Va,"Sin incidencias."))])])):A("",!0)])]))])}}},Pa={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},Ra={class:"relative w-full max-w-2xl rounded-xl bg-white shadow-xl dark:bg-slate-900"},ja={key:0,class:"mb-4 rounded-lg border border-red-200 bg-red-50 p-3 text-sm text-red-700 dark:border-red-900/40 dark:bg-red-950/30 dark:text-red-200"},Da={class:"grid grid-cols-1 gap-3 md:grid-cols-2"},za={class:"md:col-span-2"},Ua={class:"md:col-span-2"},Ha={class:"relative"},Fa={key:0,class:"absolute z-10 mt-1 w-full rounded-lg border border-gray-200 bg-white p-1 shadow-lg dark:border-slate-800 dark:bg-slate-950"},Za=["onClick"],qa={class:"truncate"},Wa={class:"ml-3 text-xs text-gray-500 dark:text-slate-400"},Ga={key:1,class:"mt-1 text-xs text-gray-600 dark:text-slate-300"},Ka={class:"md:col-span-2"},Qa={class:"mt-5 flex items-center justify-end gap-2"},Ja=["disabled"],Ya={__name:"IncidenceQuickModal",setup(l){const h=T(!1),v=T(!1),p=T(""),E=(()=>{if(typeof window>"u")return!1;const a=window.location.hostname;return a==="localhost"||a==="127.0.0.1"||a==="::1"})();let b=null;const u=async()=>E?(b||(b=Q(()=>import("./customerModalAutofill.local-CpHl0RE-.js"),[]).catch(()=>null)),b):null,g=T({title:"",date:"",priority:"media",notes:"",customer_id:null}),_=T(""),i=T(""),y=T([]),k=T(!1);let w=null;const f=()=>{const a=new Date,n=a.getFullYear(),r=String(a.getMonth()+1).padStart(2,"0"),S=String(a.getDate()).padStart(2,"0");return`${n}-${r}-${S}`},M=()=>{p.value="",g.value={title:"",date:f(),priority:"media",notes:"",customer_id:null},_.value="",i.value="",y.value=[],k.value=!1},R=()=>{h.value=!1,k.value=!1},H=()=>{g.value.customer_id=null,i.value=""},m=a=>{g.value.customer_id=Number(a.id),i.value=String(a.label||""),_.value=String(a.label||""),k.value=!1},N=async a=>{var n,r;try{const S=await oe.get("/related-lookup",{params:{type:"customer",id:a}}),P=(r=(n=S==null?void 0:S.data)==null?void 0:n.data)==null?void 0:r.label;P?(i.value=String(P),_.value=String(P)):(i.value=`#${a}`,_.value=`#${a}`)}catch{i.value=`#${a}`,_.value=`#${a}`}},O=async()=>{var n;const a=(_.value||"").trim();if(!a||a.length<2){y.value=[],k.value=!1;return}try{const r=await oe.get("/related-lookup",{params:{type:"customer",q:a,limit:8}}),S=((n=r==null?void 0:r.data)==null?void 0:n.data)??[];y.value=Array.isArray(S)?S:[],k.value=y.value.length>0}catch{y.value=[],k.value=!1}},V=()=>{g.value.customer_id=null,i.value="",w&&window.clearTimeout(w),w=window.setTimeout(()=>{O()},250)},j=a=>{var P,D,q;const n=(D=(P=a==null?void 0:a.response)==null?void 0:P.data)==null?void 0:D.errors;if(!n||typeof n!="object")return null;const r=Object.keys(n)[0],S=r?(q=n[r])==null?void 0:q[0]:null;return typeof S=="string"?S:null},L=async()=>{var n,r;v.value=!0,p.value="";const a={title:g.value.title,date:g.value.date||null,priority:g.value.priority||"media",notes:g.value.notes||null,customer_id:g.value.customer_id||null};try{await oe.post("/incidencias",a),Ie("Incidencia creada"),R(),window.dispatchEvent(new CustomEvent("incidencias:created"))}catch(S){p.value=j(S)??((r=(n=S==null?void 0:S.response)==null?void 0:n.data)==null?void 0:r.message)??"No se pudo crear la incidencia.",Le(p.value)}finally{v.value=!1}},d=async()=>{var n;const a=await u();(n=a==null?void 0:a.autofillIncidenceQuickForm)==null||n.call(a,g)},s=async(a={})=>{M(),h.value=!0;const n=(a==null?void 0:a.customer_id)??(a==null?void 0:a.customerId)??null,r=(a==null?void 0:a.customer_label)??(a==null?void 0:a.customerLabel)??null;n&&(g.value.customer_id=Number(n),r?(i.value=String(r),_.value=String(r)):await N(Number(n)))},t=a=>{s((a==null?void 0:a.detail)??{})};return ve(()=>{window.addEventListener("incidencias:create",t)}),fe(()=>{window.removeEventListener("incidencias:create",t),w&&window.clearTimeout(w)}),(a,n)=>(o(),W(Se,{name:"fade"},{default:Ee(()=>[h.value?(o(),c("div",Pa,[e("div",{class:"absolute inset-0 bg-black/50",onClick:R}),me(Se,{name:"pop"},{default:Ee(()=>[e("div",Ra,[n[11]||(n[11]=e("div",{class:"p-5 border-b border-gray-200 dark:border-slate-800"},[e("div",{class:"text-lg font-semibold text-gray-900 dark:text-slate-100"},"Nueva incidencia"),e("div",{class:"mt-1 text-sm text-gray-600 dark:text-slate-300"}," Registra una incidencia y asígnala a un cliente. ")],-1)),e("form",{class:"p-5",onSubmit:Ae(L,["prevent"])},[p.value?(o(),c("div",ja,C(p.value),1)):A("",!0),e("div",Da,[e("div",za,[n[5]||(n[5]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300"},"Nombre de la incidencia",-1)),z(e("input",{"onUpdate:modelValue":n[0]||(n[0]=r=>g.value.title=r),type:"text",required:"",class:"mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100"},null,512),[[be,g.value.title,void 0,{trim:!0}]])]),e("div",null,[n[6]||(n[6]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300"},"Fecha",-1)),z(e("input",{"onUpdate:modelValue":n[1]||(n[1]=r=>g.value.date=r),type:"date",class:"mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100"},null,512),[[be,g.value.date]])]),e("div",null,[n[8]||(n[8]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300"},"Prioridad",-1)),z(e("select",{"onUpdate:modelValue":n[2]||(n[2]=r=>g.value.priority=r),class:"mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100"},[...n[7]||(n[7]=[e("option",{value:"alta"},"Alta",-1),e("option",{value:"media"},"Media",-1),e("option",{value:"baja"},"Baja",-1)])],512),[[qe,g.value.priority]])]),e("div",Ua,[n[9]||(n[9]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300"},"Cliente",-1)),e("div",Ha,[z(e("input",{"onUpdate:modelValue":n[3]||(n[3]=r=>_.value=r),type:"text",class:"mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100",placeholder:"Buscar cliente…",onInput:V,onFocus:V},null,544),[[be,_.value,void 0,{trim:!0}]]),k.value&&y.value.length?(o(),c("div",Fa,[(o(!0),c(ue,null,ce(y.value,r=>(o(),c("button",{key:r.id,type:"button",class:"flex w-full items-center justify-between rounded-md px-2 py-2 text-left text-sm text-gray-800 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-200 dark:text-slate-100 dark:hover:bg-slate-900 dark:focus:ring-blue-500/30",onClick:S=>m(r)},[e("span",qa,C(r.label),1),e("span",Wa,"#"+C(r.id),1)],8,Za))),128))])):A("",!0),i.value?(o(),c("div",Ga,[Be(" Seleccionado: "+C(i.value)+" ",1),e("button",{type:"button",class:"ml-2 text-xs font-medium text-blue-600 hover:underline",onClick:H}," Quitar ")])):A("",!0)])]),e("div",Ka,[n[10]||(n[10]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300"},"Observaciones",-1)),z(e("textarea",{"onUpdate:modelValue":n[4]||(n[4]=r=>g.value.notes=r),rows:"4",class:"mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100",placeholder:"Detalle / notas…"},null,512),[[be,g.value.notes,void 0,{trim:!0}]])])]),e("div",Qa,[$(E)?(o(),c("button",{key:0,type:"button",class:"inline-flex items-center rounded-lg border border-amber-300 bg-amber-50 px-3 py-2 text-xs font-medium text-amber-800 hover:bg-amber-100 dark:border-amber-800/40 dark:bg-amber-950/20 dark:text-amber-300 dark:hover:bg-amber-900/30",onClick:d}," Rellenar test ")):A("",!0),e("button",{type:"button",class:"inline-flex items-center rounded-lg border border-gray-200 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-200 dark:hover:bg-slate-800",onClick:R}," Cancelar "),e("button",{type:"submit",class:"inline-flex items-center rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-blue-700 disabled:opacity-60",disabled:v.value},C(v.value?"Creando…":"Crear incidencia"),9,Ja)])],32)])]),_:1})])):A("",!0)]),_:1}))}},Xa=We(Ya,[["__scopeId","data-v-9b304425"]]),el={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},tl={class:"relative w-full max-w-2xl rounded-xl bg-white shadow-xl dark:bg-slate-900"},sl={key:0,class:"mb-4 rounded-lg border border-red-200 bg-red-50 p-3 text-sm text-red-700 dark:border-red-900/40 dark:bg-red-950/30 dark:text-red-200"},al={class:"grid grid-cols-1 gap-3 md:grid-cols-2"},ll={class:"md:col-span-2"},rl={class:"md:col-span-2"},ol={class:"relative"},nl={key:0,class:"absolute z-10 mt-1 w-full rounded-lg border border-gray-200 bg-white p-1 shadow-lg dark:border-slate-800 dark:bg-slate-950"},dl=["onClick"],il={class:"truncate"},ul={class:"ml-3 text-xs text-gray-500 dark:text-slate-400"},cl={key:1,class:"mt-1 text-xs text-gray-600 dark:text-slate-300"},bl={class:"md:col-span-2"},ml={class:"mt-5 flex items-center justify-between gap-2"},gl=["disabled"],vl={class:"ml-auto flex items-center gap-2"},pl=["disabled"],xl={__name:"IncidenceEditModal",setup(l){const h=T(!1),v=T(!1),p=T(!1),E=T(""),b=T({id:null,title:"",date:"",priority:"media",notes:"",customer_id:null}),u=T(""),g=T(""),_=T([]),i=T(!1);let y=null;const k=()=>{E.value="",p.value=!1,b.value={id:null,title:"",date:"",priority:"media",notes:"",customer_id:null},u.value="",g.value="",_.value=[],i.value=!1},w=()=>{h.value=!1,i.value=!1},f=()=>{b.value.customer_id=null,g.value=""},M=s=>{b.value.customer_id=Number(s.id),g.value=String(s.label||""),u.value=String(s.label||""),i.value=!1},R=async s=>{var t,a;try{const n=await oe.get("/related-lookup",{params:{type:"customer",id:s}}),r=(a=(t=n==null?void 0:n.data)==null?void 0:t.data)==null?void 0:a.label;r?(g.value=String(r),u.value=String(r)):(g.value=`#${s}`,u.value=`#${s}`)}catch{g.value=`#${s}`,u.value=`#${s}`}},H=async()=>{var t;const s=(u.value||"").trim();if(!s||s.length<2){_.value=[],i.value=!1;return}try{const a=await oe.get("/related-lookup",{params:{type:"customer",q:s,limit:8}}),n=((t=a==null?void 0:a.data)==null?void 0:t.data)??[];_.value=Array.isArray(n)?n:[],i.value=_.value.length>0}catch{_.value=[],i.value=!1}},m=()=>{b.value.customer_id=null,g.value="",y&&window.clearTimeout(y),y=window.setTimeout(()=>{H()},250)},N=s=>{var r,S,P;const t=(S=(r=s==null?void 0:s.response)==null?void 0:r.data)==null?void 0:S.errors;if(!t||typeof t!="object")return null;const a=Object.keys(t)[0],n=a?(P=t[a])==null?void 0:P[0]:null;return typeof n=="string"?n:null},O=s=>{if(!s)return"";try{const t=String(s);if(/^\d{4}-\d{2}-\d{2}$/.test(t))return t;const a=new Date(t);if(Number.isNaN(a.getTime()))return"";const n=a.getFullYear(),r=String(a.getMonth()+1).padStart(2,"0"),S=String(a.getDate()).padStart(2,"0");return`${n}-${r}-${S}`}catch{return""}},V=async(s={})=>{var S,P;k();const t=(s==null?void 0:s.incidence)??(s==null?void 0:s.item)??s,a=(t==null?void 0:t.id)??(s==null?void 0:s.id)??null;if(!a)return;b.value.id=Number(a),b.value.title=String((t==null?void 0:t.title)??""),b.value.date=O((t==null?void 0:t.date)??""),b.value.priority=String((t==null?void 0:t.priority)??"media")||"media",b.value.notes=String((t==null?void 0:t.notes)??"");const n=(t==null?void 0:t.customer_id)??(s==null?void 0:s.customer_id)??null;b.value.customer_id=n?Number(n):null,h.value=!0;const r=((S=t==null?void 0:t.customer)==null?void 0:S.company_name)||((P=t==null?void 0:t.customer)==null?void 0:P.name)||(s==null?void 0:s.customer_label)||null;b.value.customer_id&&(r?(g.value=String(r),u.value=String(r)):await R(b.value.customer_id))},j=async()=>{var t,a,n;if(!b.value.id)return;v.value=!0,E.value="";const s={title:b.value.title,date:b.value.date||null,priority:b.value.priority||"media",notes:b.value.notes||null,customer_id:b.value.customer_id||null};try{const r=await oe.put(`/incidencias/${b.value.id}`,s),S=(t=r==null?void 0:r.data)==null?void 0:t.data;Ie("Incidencia actualizada"),w(),window.dispatchEvent(new CustomEvent("incidencias:updated",{detail:{incidence:S}}))}catch(r){E.value=N(r)??((n=(a=r==null?void 0:r.response)==null?void 0:a.data)==null?void 0:n.message)??"No se pudo actualizar la incidencia.",Le(E.value)}finally{v.value=!1}},L=async()=>{var t,a;if(!(!b.value.id||!await et({title:"¿Seguro que quieres eliminar la incidencia?",text:"Esta acción no se puede deshacer.",icon:"warning",confirmText:"Eliminar",cancelText:"Cancelar"}))){p.value=!0,E.value="";try{await oe.delete(`/incidencias/${b.value.id}`),Ie("Incidencia eliminada correctamente"),w(),window.dispatchEvent(new CustomEvent("incidencias:deleted",{detail:{id:b.value.id}}))}catch(n){E.value=((a=(t=n==null?void 0:n.response)==null?void 0:t.data)==null?void 0:a.message)??"No se pudo eliminar la incidencia.",Le(E.value)}finally{p.value=!1}}},d=s=>{V((s==null?void 0:s.detail)??{})};return ve(()=>{window.addEventListener("incidencias:edit",d)}),fe(()=>{window.removeEventListener("incidencias:edit",d),y&&window.clearTimeout(y)}),(s,t)=>(o(),W(Se,{name:"fade"},{default:Ee(()=>[h.value?(o(),c("div",el,[e("div",{class:"absolute inset-0 bg-black/50",onClick:w}),me(Se,{name:"pop"},{default:Ee(()=>[e("div",tl,[t[11]||(t[11]=e("div",{class:"p-5 border-b border-gray-200 dark:border-slate-800"},[e("div",{class:"text-lg font-semibold text-gray-900 dark:text-slate-100"},"Editar incidencia"),e("div",{class:"mt-1 text-sm text-gray-600 dark:text-slate-300"}," Actualiza título, cliente, prioridad, fecha y notas. ")],-1)),e("form",{class:"p-5",onSubmit:Ae(j,["prevent"])},[E.value?(o(),c("div",sl,C(E.value),1)):A("",!0),e("div",al,[e("div",ll,[t[5]||(t[5]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300"},"Nombre de la incidencia",-1)),z(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>b.value.title=a),type:"text",required:"",class:"mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100"},null,512),[[be,b.value.title,void 0,{trim:!0}]])]),e("div",null,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300"},"Fecha",-1)),z(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>b.value.date=a),type:"date",class:"mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100"},null,512),[[be,b.value.date]])]),e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300"},"Prioridad",-1)),z(e("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>b.value.priority=a),class:"mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100"},[...t[7]||(t[7]=[e("option",{value:"alta"},"Alta",-1),e("option",{value:"media"},"Media",-1),e("option",{value:"baja"},"Baja",-1)])],512),[[qe,b.value.priority]])]),e("div",rl,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300"},"Cliente",-1)),e("div",ol,[z(e("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>u.value=a),type:"text",class:"mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100",placeholder:"Buscar cliente…",onInput:m,onFocus:m},null,544),[[be,u.value,void 0,{trim:!0}]]),i.value&&_.value.length?(o(),c("div",nl,[(o(!0),c(ue,null,ce(_.value,a=>(o(),c("button",{key:a.id,type:"button",class:"flex w-full items-center justify-between rounded-md px-2 py-2 text-left text-sm text-gray-800 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-200 dark:text-slate-100 dark:hover:bg-slate-900 dark:focus:ring-blue-500/30",onClick:n=>M(a)},[e("span",il,C(a.label),1),e("span",ul,"#"+C(a.id),1)],8,dl))),128))])):A("",!0),g.value?(o(),c("div",cl,[Be(" Seleccionado: "+C(g.value)+" ",1),e("button",{type:"button",class:"ml-2 text-xs font-medium text-blue-600 hover:underline",onClick:f}," Quitar ")])):A("",!0)])]),e("div",bl,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300"},"Observaciones",-1)),z(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=a=>b.value.notes=a),rows:"4",class:"mt-1 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-100",placeholder:"Detalle / notas…"},null,512),[[be,b.value.notes,void 0,{trim:!0}]])])]),e("div",ml,[b.value.id?(o(),c("button",{key:0,type:"button",class:"inline-flex items-center rounded-lg border border-red-200 bg-red-50 px-4 py-2 text-sm font-medium text-red-700 shadow-sm hover:bg-red-100 disabled:opacity-60 dark:border-red-700 dark:bg-red-900/20 dark:text-red-400 dark:hover:bg-red-900/30",disabled:v.value||p.value,onClick:L},C(p.value?"Eliminando…":"Eliminar"),9,gl)):A("",!0),e("div",vl,[e("button",{type:"button",class:"inline-flex items-center rounded-lg border border-gray-200 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-200 dark:hover:bg-slate-800",onClick:w}," Cancelar "),e("button",{type:"submit",class:"inline-flex items-center rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-blue-700 disabled:opacity-60",disabled:v.value||p.value||!b.value.id},C(v.value?"Guardando…":"Guardar cambios"),9,pl)])])],32)])]),_:1})])):A("",!0)]),_:1}))}},fl=We(xl,[["__scopeId","data-v-cbeecece"]]),hl={class:"min-h-screen flex flex-col bg-gradient-to-br from-blue-50/60 via-gray-50 to-gray-50 dark:from-slate-950 dark:via-slate-950 dark:to-slate-900"},wl={class:"flex-1 p-4 pt-20"},yl={class:"max-w-7xl mx-auto w-full"},kl={class:"flex items-center justify-between mb-6"},_l={class:"border-l-4 border-blue-600 pl-4"},$l={class:"text-2xl font-semibold text-gray-900 dark:text-slate-100"},Cl={class:"mt-1 text-sm text-gray-600 dark:text-slate-300"},El={__name:"App",setup(l){const h=J(()=>Q(()=>import("./UsersTable-BxmTUpZf.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),v=J(()=>Q(()=>import("./RolesTable-CfF1PJb1.js"),__vite__mapDeps([7,1,2,3,4,6]))),p=J(()=>Q(()=>import("./LeadsBoard-Bbf3Zos7.js"),__vite__mapDeps([8,1,2,3,4,6]))),E=J(()=>Q(()=>import("./LeadsTable-c1cmg-j5.js"),__vite__mapDeps([9,3,2,4,1,6]))),b=J(()=>Q(()=>import("./LeadsWhatsAppCampaign-CB9LY_8d.js"),__vite__mapDeps([10,3,2]))),u=J(()=>Q(()=>import("./LeadsEmailCampaign-DeXcPzbf.js"),__vite__mapDeps([11,3,2]))),g=J(()=>Q(()=>import("./CalendarView-BlRPCQQt.js"),__vite__mapDeps([12,1,2,3,4,13,14,6,15]))),_=J(()=>Q(()=>import("./IncidenciasTable-B_pMhko8.js"),__vite__mapDeps([16,3,2,1,4,6]))),i=J(()=>Q(()=>import("./IncidenciasBoard-D_mHyYbN.js"),__vite__mapDeps([17,3,2,4,5]))),y=J(()=>Q(()=>import("./BacklogBoard-C2E7MHqB.js"),__vite__mapDeps([18,3,2,1,4,6]))),k=J(()=>Q(()=>import("./PostventaCustomersTable-B_Ba0k-Q.js"),__vite__mapDeps([19,3,2,6,1,4,20]))),w=J(()=>Q(()=>import("./ContadoresTable-Csmk7lke.js"),__vite__mapDeps([21,3,2,1,4,6]))),f=J(()=>Q(()=>import("./CertificadosTable-MIWHc-zx.js"),__vite__mapDeps([22,3,2,1,4,6]))),M=J(()=>Q(()=>import("./LostLeadsList-CvfxIebB.js"),__vite__mapDeps([23,3,2,1,4,6]))),R=J(()=>Q(()=>import("./WaitingLeadsList-C7uS49gk.js"),__vite__mapDeps([24,3,2,1,4,6]))),H=J(()=>Q(()=>import("./SettingsView-BY--BNwm.js"),__vite__mapDeps([25,3,6,26]))),m=window.location.pathname.replace(/\/+$/,"")||"/",N=B(()=>m.startsWith("/users")),O=B(()=>m.startsWith("/roles")),V=B(()=>m==="/leads"),j=B(()=>m==="/leads/list"),L=B(()=>m==="/leads/whatsapp"),d=B(()=>m==="/leads/email"),s=B(()=>m.startsWith("/leads")),t=B(()=>m.startsWith("/customers")),a=B(()=>m.startsWith("/calendar")),n=B(()=>m.startsWith("/incidencias")),r=B(()=>n.value&&m==="/incidencias/board"?"board":"table"),S=B(()=>m.startsWith("/backlog")),P=B(()=>m==="/postventa/clientes"),D=B(()=>m==="/postventa/contadores"),q=B(()=>m==="/postventa/certificados"),Y=B(()=>m.startsWith("/configuracion")),X=B(()=>n.value||S.value),ee=B(()=>N.value?"Usuarios":O.value?"Roles":Y.value?"Configuración":L.value?"WhatsApp":d.value?"Email":s.value?"Leads":m==="/desistidos"?"Desistidos":m==="/espera"?"Zona de espera":t.value?"Clientes":a.value?"Calendario":X.value?"Incidencias":P.value?"Clientes":D.value?"Contadores":q.value?"Certificados":"Dashboard"),ae=B(()=>N.value?"Gestión de usuarios del sistema":O.value?"Crea roles y asigna permisos":Y.value?"Personalización del sistema":L.value?"Campañas manuales asistidas (sin API)":d.value?"Campañas informativas por correo (con baja automática)":V.value?"Pipeline de oportunidades":j.value?"Gestión de leads por etapas":m==="/desistidos"?"Leads marcados como desistidos":m==="/espera"?"Leads enviados a zona de espera":t.value?"Listado de clientes":a.value?"Agenda y recordatorios":n.value?`Registro y seguimiento de incidencias (vista ${r.value==="board"?"kanban":"lista"})`:S.value?"Registro y seguimiento de incidencias (vista backlog)":P.value?"Clientes (postventa)":D.value?"Gestión de contadores":q.value?"Gestión de certificados":"Resumen general del sistema");B(()=>X.value||P.value||D.value||q.value);const te=B(()=>m==="/desistidos"),le=B(()=>m==="/espera"),se=()=>{s.value&&window.location.assign(V.value?"/leads/list":"/leads")},ne=()=>{S.value?window.location.assign("/incidencias"):n.value&&(r.value==="table"?window.location.assign("/incidencias/board"):window.location.assign("/backlog"))},de=()=>{window.dispatchEvent(new CustomEvent("roles:create"))},ie=()=>{window.dispatchEvent(new CustomEvent("leads:create-quick"))},F=()=>{window.dispatchEvent(new CustomEvent("incidencias:create"))},x=()=>{window.dispatchEvent(new CustomEvent("contadores:create"))},K=()=>{window.dispatchEvent(new CustomEvent("certificados:create"))},re=T(!0),ge=()=>{re.value=!re.value};return ve(()=>{}),(pe,xe)=>(o(),c("div",hl,[me(Ot,{"sidebar-collapsed":re.value,onToggleSidebar:ge},null,8,["sidebar-collapsed"]),me(gs,{collapsed:re.value},null,8,["collapsed"]),e("main",{class:U(["transition-[margin] duration-200 flex-1 flex flex-col",re.value?"sm:ml-20":"sm:ml-64"])},[e("div",wl,[e("div",yl,[e("div",kl,[e("div",_l,[e("h1",$l,C(ee.value),1),e("p",Cl,C(ae.value),1)]),O.value?(o(),c("button",{key:0,type:"button",class:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg shadow-sm hover:bg-blue-700 hover:shadow focus:outline-none focus:ring-4 focus:ring-blue-300",onClick:de}," Crear rol ")):V.value||j.value?(o(),c("button",{key:1,type:"button",class:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg shadow-sm hover:bg-blue-700 hover:shadow focus:outline-none focus:ring-4 focus:ring-blue-300",onClick:ie}," Lead rápido ")):A("",!0),V.value||j.value?(o(),c("button",{key:2,type:"button",class:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-200 rounded-lg shadow-sm hover:bg-blue-50 hover:border-blue-200 hover:text-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 dark:text-slate-200 dark:bg-slate-900 dark:border-slate-800 dark:hover:bg-slate-800",onClick:se},C(V.value?"Vista lista":"Vista pipeline"),1)):X.value?(o(),c("button",{key:3,type:"button",class:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-200 rounded-lg shadow-sm hover:bg-blue-50 hover:border-blue-200 hover:text-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 dark:text-slate-200 dark:bg-slate-900 dark:border-slate-800 dark:hover:bg-slate-800",onClick:ne},C(S.value?"Vista lista":"Vista backlog"),1)):A("",!0),X.value||P.value?(o(),c("button",{key:5,type:"button",class:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg shadow-sm hover:bg-blue-700 hover:shadow focus:outline-none focus:ring-4 focus:ring-blue-300",onClick:F}," Nueva incidencia ")):D.value?(o(),c("button",{key:6,type:"button",class:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg shadow-sm hover:bg-blue-700 hover:shadow focus:outline-none focus:ring-4 focus:ring-blue-300",onClick:x}," Nuevo contador ")):q.value?(o(),c("button",{key:7,type:"button",class:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg shadow-sm hover:bg-blue-700 hover:shadow focus:outline-none focus:ring-4 focus:ring-blue-300",onClick:K}," Nuevo certificado ")):A("",!0)]),N.value?(o(),W($(h),{key:0})):O.value?(o(),W($(v),{key:1})):V.value?(o(),W($(p),{key:2})):j.value?(o(),W($(E),{key:3})):L.value?(o(),W($(b),{key:4})):d.value?(o(),W($(u),{key:5})):n.value&&r.value==="table"?(o(),W($(_),{key:6})):n.value&&r.value==="board"?(o(),W($(i),{key:7})):S.value?(o(),W($(y),{key:8})):P.value||t.value?(o(),W($(k),{key:9})):D.value?(o(),W($(w),{key:10})):q.value?(o(),W($(f),{key:11})):te.value?(o(),W($(M),{key:12})):le.value?(o(),W($(R),{key:13})):Y.value?(o(),W($(H),{key:14})):a.value?(o(),W($(g),{key:15})):(o(),W(Oa,{key:16}))])]),me(hs,{class:"mt-auto w-full"})],2),me(Xa),me(fl)]))}},Ol=Object.freeze(Object.defineProperty({__proto__:null,default:El},Symbol.toStringTag,{value:"Module"}));export{Ol as A,Cs as _,Ts as a,Ie as b,et as c,Al as d,Nl as e,at as f,Vl as g,lt as h,Bl as p,Le as t,Is as u};
