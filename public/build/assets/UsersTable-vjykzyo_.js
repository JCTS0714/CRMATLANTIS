import{e as U,g as u,i as d,k,j as e,E as j,t as v,n as re,q as he,A as $,F as Z,m as se,z as I,B as M,r as D,G as de,H as be,I as pe,o as ve,u as A,l as xe,w as ue,x as fe}from"./vendor-vue-Db-AqoDh.js";import{S as L}from"./vendor-ui-DEm6YKEA.js";import{_ as K,c as ke,g as we,a as $e}from"./BaseModal-DiudK4Y3.js";import{a as G}from"./vendor-utils-Czy7fllw.js";const Ce={class:"bg-white border border-gray-200 rounded-lg shadow-sm dark:bg-slate-900 dark:border-slate-800"},Se={key:0,class:"p-4 border-b border-gray-200 dark:border-slate-800"},Be={class:"flex items-center justify-between"},Ae={class:"text-sm font-semibold text-gray-900 dark:text-slate-100"},Pe={key:0,class:"mt-1 text-xs text-gray-600 dark:text-slate-300"},_e={key:1,class:"p-4 border-t border-gray-200 dark:border-slate-800"},Ee={__name:"BaseCard",props:{title:{type:String,default:""},subtitle:{type:String,default:""},padding:{type:Boolean,default:!0},noPadding:{type:Boolean,default:!1}},setup(a){const t=a,l=U(()=>t.noPadding||!t.padding?"":"p-4");return(i,o)=>(d(),u("div",Ce,[i.$slots.header||a.title?(d(),u("div",Se,[j(i.$slots,"header",{},()=>[e("div",Be,[e("div",null,[e("h3",Ae,v(a.title),1),a.subtitle?(d(),u("p",Pe,v(a.subtitle),1)):k("",!0)]),j(i.$slots,"headerActions")])])])):k("",!0),e("div",{class:re(l.value)},[j(i.$slots,"default")],2),i.$slots.footer?(d(),u("div",_e,[j(i.$slots,"footer")])):k("",!0)]))}},Te={class:"flex items-center justify-between"},De={class:"text-sm font-semibold text-gray-900 dark:text-slate-100"},je={key:0,class:"mt-1 text-xs text-gray-600 dark:text-slate-300"},Ie={class:"flex items-center gap-3"},ze={key:0,class:"text-xs text-gray-600 dark:text-slate-300"},Fe={key:0,class:"p-4 border-b border-gray-200 dark:border-slate-800"},Me={class:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},Ue={key:0,class:"flex-1"},qe=["for"],Ve=["id","value","placeholder"],Oe={class:"flex items-center gap-2"},Qe=["value"],Ge=["value"],Le={key:0,class:"mt-4"},Ke={key:1,class:"p-4 border-b border-red-200 bg-red-50 dark:border-red-900/40 dark:bg-red-950/30"},Re={class:"text-sm text-red-700 dark:text-red-200"},He={class:"overflow-x-auto"},Je={class:"text-xs uppercase bg-gray-50 text-gray-700 dark:bg-slate-800 dark:text-slate-200"},Ne={class:"flex items-center gap-2"},We=["onClick"],Xe={key:0},Ye=["colspan"],Ze={key:1},et=["colspan"],tt={key:2,class:"p-4 border-t border-gray-200 dark:border-slate-800"},at={class:"flex items-center justify-between gap-3"},st={class:"text-xs text-gray-600 dark:text-slate-300"},rt={__name:"GenericTable",props:{tableId:{type:String,default:()=>`table-${Date.now()}`},title:{type:String,required:!0},subtitle:{type:String,default:""},columns:{type:Array,required:!0,validator:a=>a.every(t=>t.key&&t.label)},items:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},error:{type:String,default:null},pagination:{type:Object,default:()=>({current_page:1,last_page:1,total:0,from:null,to:null})},showPagination:{type:Boolean,default:!0},paginationInfo:{type:String,default:""},searchable:{type:Boolean,default:!0},searchQuery:{type:String,default:""},searchPlaceholder:{type:String,default:"Buscar..."},sortable:{type:Boolean,default:!1},showFilters:{type:Boolean,default:!0},showPerPageSelector:{type:Boolean,default:!0},perPage:{type:Number,default:25},perPageOptions:{type:Array,default:()=>[10,15,25,50]},tableClass:{type:String,default:""},emptyMessage:{type:String,default:"No hay datos para mostrar"},rowKey:{type:[String,Function],default:"id"}},emits:["search","sort","page-change","per-page-change"],setup(a){const t=a,l=U(()=>!t.loading&&t.items.length===0),i=(o,s)=>typeof t.rowKey=="function"?t.rowKey(o,s):o[t.rowKey]||s;return(o,s)=>(d(),he(Ee,{title:a.title,subtitle:a.subtitle,"no-padding":""},{header:$(()=>[e("div",Te,[e("div",null,[e("h3",De,v(a.title),1),a.paginationInfo?(d(),u("p",je,v(a.paginationInfo),1)):k("",!0)]),e("div",Ie,[j(o.$slots,"headerActions"),a.loading?(d(),u("div",ze,"Cargando…")):k("",!0)])])]),default:$(()=>[a.showFilters?(d(),u("div",Fe,[e("div",Me,[a.searchable?(d(),u("div",Ue,[e("label",{class:"sr-only",for:`${a.tableId}-search`},"Buscar",8,qe),e("input",{id:`${a.tableId}-search`,value:a.searchQuery,type:"search",placeholder:a.searchPlaceholder,class:"w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 placeholder:text-gray-400 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-100 dark:placeholder:text-slate-500",onInput:s[0]||(s[0]=c=>o.$emit("search",c.target.value))},null,40,Ve)])):k("",!0),e("div",Oe,[j(o.$slots,"filters"),a.showPerPageSelector?(d(),u("select",{key:0,value:a.perPage,class:"rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:ring-4 focus:ring-blue-100 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-100",onChange:s[1]||(s[1]=c=>o.$emit("per-page-change",Number(c.target.value)))},[(d(!0),u(Z,null,se(a.perPageOptions,c=>(d(),u("option",{key:c,value:c},v(c),9,Ge))),128))],40,Qe)):k("",!0)])]),o.$slots.secondaryFilters?(d(),u("div",Le,[j(o.$slots,"secondaryFilters")])):k("",!0)])):k("",!0),a.error?(d(),u("div",Ke,[e("div",Re,v(a.error),1)])):k("",!0),e("div",He,[e("table",{class:re(["w-full text-sm text-left text-gray-700 dark:text-slate-200",a.tableClass])},[e("thead",Je,[e("tr",null,[(d(!0),u(Z,null,se(a.columns,c=>(d(),u("th",{key:c.key,class:re(["px-4 py-3",c.headerClass])},[e("div",Ne,[I(v(c.label)+" ",1),c.sortable&&a.sortable?(d(),u("button",{key:0,type:"button",class:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-300",onClick:C=>o.$emit("sort",c.key)},[...s[4]||(s[4]=[e("svg",{class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M5 12l5 5 5-5H5z"})],-1)])],8,We)):k("",!0)])],2))),128))])]),e("tbody",null,[(d(!0),u(Z,null,se(a.items,(c,C)=>j(o.$slots,"row",{key:i(c,C),item:c,index:C,columns:a.columns})),128)),l.value?(d(),u("tr",Xe,[e("td",{colspan:a.columns.length,class:"px-4 py-10 text-center text-sm text-gray-600 dark:text-slate-300"},[j(o.$slots,"empty",{},()=>[I(v(a.emptyMessage),1)])],8,Ye)])):k("",!0),a.loading&&a.items.length===0?(d(),u("tr",Ze,[e("td",{colspan:a.columns.length,class:"px-4 py-10 text-center text-sm text-gray-600 dark:text-slate-300"},[...s[5]||(s[5]=[e("div",{class:"flex items-center justify-center gap-2"},[e("svg",{class:"animate-spin w-4 h-4",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),I(" Cargando… ")],-1)])],8,et)])):k("",!0)])],2)]),a.showPagination&&a.pagination&&a.pagination.last_page>1?(d(),u("div",tt,[e("div",at,[M(K,{variant:"secondary",size:"sm",disabled:a.loading||a.pagination.current_page<=1,onClick:s[2]||(s[2]=c=>o.$emit("page-change",a.pagination.current_page-1))},{default:$(()=>[...s[6]||(s[6]=[I(" Anterior ",-1)])]),_:1},8,["disabled"]),e("div",st,[j(o.$slots,"paginationInfo",{},()=>[I(" Página "+v(a.pagination.current_page)+" / "+v(a.pagination.last_page),1)])]),M(K,{variant:"secondary",size:"sm",disabled:a.loading||a.pagination.current_page>=a.pagination.last_page,onClick:s[3]||(s[3]=c=>o.$emit("page-change",a.pagination.current_page+1))},{default:$(()=>[...s[7]||(s[7]=[I(" Siguiente ",-1)])]),_:1},8,["disabled"])])])):k("",!0)]),_:3},8,["title","subtitle"]))}},ot={__name:"BaseBadge",props:{variant:{type:String,default:"secondary",validator:a=>["primary","secondary","success","warning","danger","info"].includes(a)},size:{type:String,default:"sm",validator:a=>["xs","sm","md"].includes(a)},rounded:{type:Boolean,default:!1}},setup(a){const t=a,l=U(()=>{const i={xs:"px-1.5 py-0.5 text-xs",sm:"px-2 py-1 text-xs",md:"px-2.5 py-1.5 text-sm"};return ke("inline-flex items-center font-medium",t.rounded?"rounded-full":"rounded-md",i[t.size],we("badge",t.variant))});return(i,o)=>(d(),u("span",{class:re(l.value)},[j(i.$slots,"default")],2))}};function lt(a={}){const{endpoint:t,columns:l=[],defaultFilters:i={},actions:o={},defaultPerPage:s=25,searchDebounce:c=300,transformData:C=null,onError:O=null}=a,R=D(!1),H=D(null),S=D([]),P=D([]),F=de({current_page:1,last_page:1,per_page:s,total:0,from:null,to:null}),Q=de({q:"",page:1,per_page:s,sort_by:null,sort_direction:"asc",...i}),x=de({sortColumn:null,sortDirection:"asc",searchQuery:"",processing:new Set}),J=U(()=>S.value.length>0),w=U(()=>!R.value&&S.value.length===0),N=U(()=>F.total||0),Y=U(()=>{if(!F.total)return"";const n=F.from||0,h=F.to||0,q=F.total||0;return`${n}-${h} de ${q}`}),W=U(()=>P.value.length>0),p=U(()=>J.value&&S.value.every(n=>P.value.includes(n.id))),E=async(n={})=>{var h,q,V;if(!t){console.error("useGenericTable: endpoint is required");return}R.value=!0,H.value=null;try{const B={...Q,...n},y=await G.get(t,{params:B});let m=((h=y.data)==null?void 0:h.data)||y.data;C&&typeof C=="function"&&(m=C(m)),S.value=(m==null?void 0:m.items)||m||[],m!=null&&m.pagination&&Object.assign(F,m.pagination)}catch(B){const y=((V=(q=B.response)==null?void 0:q.data)==null?void 0:V.message)||"Error al cargar los datos";H.value=y,O&&typeof O=="function"?O(B,y):console.error("Table fetch error:",B)}finally{R.value=!1}},_=async(n={})=>{Object.assign(Q,n),await E()},oe=async n=>{await _({page:n})},le=async n=>{await _({per_page:n,page:1})},ee=async n=>{x.searchQuery=n,await _({q:n,page:1})},te=async n=>{let h="asc";x.sortColumn===n&&(h=x.sortDirection==="asc"?"desc":"asc"),x.sortColumn=n,x.sortDirection=h,await _({sort_by:n,sort_direction:h,page:1})},ae=async()=>{await E()},ne=async()=>{Object.assign(Q,{q:"",page:1,per_page:s,sort_by:null,sort_direction:"asc",...i}),x.sortColumn=null,x.sortDirection="asc",x.searchQuery="",await E()},f=n=>{P.value.includes(n)||P.value.push(n)},r=n=>{const h=P.value.indexOf(n);h>-1&&P.value.splice(h,1)},g=n=>{P.value.includes(n)?r(n):f(n)},z=()=>{P.value=S.value.map(n=>n.id)},b=()=>{P.value=[]},T=()=>{p.value?b():z()},X=async(n,h,q=null)=>{var V,B;if(!o[n])return console.error(`Action '${n}' is not defined`),!1;x.processing.add(h);try{const y=await o[n](h,q);if(n==="delete"){const m=S.value.findIndex(ce=>ce.id===h);m>-1&&S.value.splice(m,1),r(h)}else if(y!=null&&y.data){const m=S.value.findIndex(ce=>ce.id===h);m>-1&&(S.value[m]={...S.value[m],...y.data})}return y}catch(y){const m=((B=(V=y.response)==null?void 0:V.data)==null?void 0:B.message)||`Error en acción ${n}`;throw H.value=m,y}finally{x.processing.delete(h)}},ie=async(n,h,q=null)=>{const V=[],B=[];for(const y of h)try{const m=await X(n,y,q);V.push({id:y,result:m})}catch(m){B.push({id:y,error:m})}return B.length>0&&console.error("Bulk action errors:",B),{results:V,errors:B}},ye=n=>x.processing.has(n);let ge;const me=n=>{clearTimeout(ge),ge=setTimeout(()=>{ee(n)},c)};return be(()=>x.searchQuery,(n,h)=>{n!==h&&me(n)}),{loading:R,error:H,items:S,pagination:F,filters:Q,tableState:x,selectedItems:P,hasData:J,isEmpty:w,totalCount:N,paginationInfo:Y,hasSelectedItems:W,allItemsSelected:p,fetchData:E,applyFilters:_,changePage:oe,changePerPage:le,handleSearch:ee,handleSort:te,refresh:ae,reset:ne,selectItem:f,unselectItem:r,toggleSelection:g,selectAll:z,unselectAll:b,toggleSelectAll:T,performAction:X,bulkAction:ie,isProcessing:ye,debouncedSearch:me}}class nt{constructor(t){this.baseEndpoint=t}async create(t){try{const l=t instanceof FormData?{headers:{"Content-Type":"multipart/form-data"}}:{};return(await G.post(this.baseEndpoint,t,l)).data}catch(l){throw l}}async update(t,l){var i;try{const o=l instanceof FormData?{headers:{"Content-Type":"multipart/form-data"}}:{};try{return(await G.put(`${this.baseEndpoint}/${t}`,l,o)).data}catch(s){const c=(i=s==null?void 0:s.response)==null?void 0:i.status;if(c===404||c===405)return(await G.patch(`${this.baseEndpoint}/${t}`,l,o)).data;throw s}}catch(o){throw o}}async delete(t){try{return(await G.delete(`${this.baseEndpoint}/${t}`)).data}catch(l){throw l}}async archive(t){try{return(await G.patch(`${this.baseEndpoint}/${t}/archive`)).data}catch(l){throw l}}async restore(t){try{return(await G.patch(`${this.baseEndpoint}/${t}/restore`)).data}catch(l){throw l}}getSweetAlertTheme(){return document.documentElement.classList.contains("dark")?{background:"#0f172a",color:"#f1f5f9",confirmButtonColor:"#ef4444",cancelButtonColor:"#64748b"}:{background:"#ffffff",color:"#1e293b",confirmButtonColor:"#ef4444",cancelButtonColor:"#6b7280"}}async confirmDelete(t,l=null){const i=l||`Se eliminará permanentemente "${t}"`,o=this.getSweetAlertTheme();return(await L.fire({title:"¿Eliminar elemento?",text:i,icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar",confirmButtonColor:o.confirmButtonColor,cancelButtonColor:o.cancelButtonColor,background:o.background,color:o.color,reverseButtons:!0})).isConfirmed}async confirmArchive(t,l=null){const i=l||`Se archivará "${t}"`,o=this.getSweetAlertTheme();return(await L.fire({title:"¿Archivar elemento?",text:i,icon:"question",showCancelButton:!0,confirmButtonText:"Sí, archivar",cancelButtonText:"Cancelar",confirmButtonColor:"#f59e0b",cancelButtonColor:o.cancelButtonColor,background:o.background,color:o.color,reverseButtons:!0})).isConfirmed}async confirmBulkAction(t,l){const i=this.getSweetAlertTheme(),s={delete:{title:"¿Eliminar elementos?",text:`Se eliminarán ${l} elementos permanentemente`,confirmText:"Sí, eliminar todos",color:"#ef4444"},archive:{title:"¿Archivar elementos?",text:`Se archivarán ${l} elementos`,confirmText:"Sí, archivar todos",color:"#f59e0b"}}[t];return s?(await L.fire({title:s.title,text:s.text,icon:"warning",showCancelButton:!0,confirmButtonText:s.confirmText,cancelButtonText:"Cancelar",confirmButtonColor:s.color,cancelButtonColor:i.cancelButtonColor,background:i.background,color:i.color,reverseButtons:!0})).isConfirmed:!1}showSuccess(t,l="¡Éxito!"){const i=this.getSweetAlertTheme();L.fire({title:l,text:t,icon:"success",timer:2e3,showConfirmButton:!1,background:i.background,color:i.color})}showError(t,l="Error"){const i=this.getSweetAlertTheme();L.fire({title:l,text:t,icon:"error",background:i.background,color:i.color})}async bulkDelete(t){try{const l=t.map(c=>this.delete(c)),i=await Promise.allSettled(l),o=i.filter(c=>c.status==="fulfilled").length,s=i.filter(c=>c.status==="rejected").length;return s===0?this.showSuccess(`${o} elementos eliminados correctamente`):this.showError(`${o} elementos eliminados, ${s} fallaron`),{successful:o,failed:s}}catch(l){throw l}}async bulkArchive(t){try{const l=t.map(c=>this.archive(c)),i=await Promise.allSettled(l),o=i.filter(c=>c.status==="fulfilled").length,s=i.filter(c=>c.status==="rejected").length;return s===0?this.showSuccess(`${o} elementos archivados correctamente`):this.showError(`${o} elementos archivados, ${s} fallaron`),{successful:o,failed:s}}catch(l){throw l}}}function it(a){return new nt(a)}function ct(a){const t=it(a);return{actions:t,performAction:async(o,s,c=null,C="")=>{switch(o){case"delete":return await t.confirmDelete(C)?(await t.delete(s),t.showSuccess("Elemento eliminado correctamente"),!0):!1;case"archive":return await t.confirmArchive(C)?(await t.archive(s),t.showSuccess("Elemento archivado correctamente"),!0):!1;case"update":return await t.update(s,c),t.showSuccess("Elemento actualizado correctamente"),!0;case"create":const O=await t.create(c);return t.showSuccess("Elemento creado correctamente"),O;default:throw new Error(`Action '${o}' not supported`)}},performBulkAction:async(o,s)=>{if(!s.length||!await t.confirmBulkAction(o,s.length))return!1;switch(o){case"delete":return await t.bulkDelete(s);case"archive":return await t.bulkArchive(s);default:throw new Error(`Bulk action '${o}' not supported`)}}}}const dt={class:"border-b border-gray-100 bg-white hover:bg-blue-50/40 transition-colors dark:border-slate-800 dark:bg-slate-900 dark:hover:bg-slate-800/60"},ut={class:"px-4 py-3 font-medium text-gray-900 dark:text-slate-100"},ft={class:"px-4 py-3"},gt={class:"flex items-center gap-3"},mt={class:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center dark:bg-blue-900"},pt={class:"text-sm font-medium text-blue-600 dark:text-blue-300"},ht={class:"font-medium text-gray-900 dark:text-slate-100"},bt={class:"text-sm text-gray-500 dark:text-slate-400"},yt={class:"px-4 py-3"},vt={class:"flex flex-wrap gap-1"},xt={class:"px-4 py-3 text-sm text-gray-500 dark:text-slate-400"},kt={class:"px-4 py-3"},wt={class:"flex items-center gap-2"},$t={class:"py-2"},Ct={class:"grid grid-cols-1 gap-5"},St={class:"space-y-5"},Bt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},At={class:"space-y-3"},Pt={class:"flex items-center gap-4"},_t={class:"w-16 h-16 rounded-full overflow-hidden bg-gray-100 dark:bg-slate-800 flex items-center justify-center"},Et=["src"],Tt={key:1,class:"text-sm text-gray-500 dark:text-slate-400"},Dt={class:"flex-1"},jt={key:0,class:"space-y-3"},It={class:"flex items-center justify-between pt-4"},zt={class:"flex items-center gap-3"},Ft={class:"flex items-center justify-center"},Mt={key:0,class:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Qt={__name:"UsersTable",setup(a){const t=[{key:"id",label:"ID",sortable:!0},{key:"name",label:"Usuario",sortable:!0},{key:"roles",label:"Roles"},{key:"created_at",label:"Creado",sortable:!0},{key:"actions",label:"Acciones"}],{loading:l,error:i,items:o,pagination:s,filters:c,tableState:C,paginationInfo:O,fetchData:R,changePage:H,changePerPage:S,handleSearch:P,handleSort:F,isProcessing:Q,refresh:x}=lt({endpoint:"/users/data",defaultFilters:{},actions:{},defaultPerPage:25}),{performAction:J}=ct("/users"),w=D(null),N=D(!1),Y=D(!1),W=D(null),p=D({name:"",email:"",password:""}),E=D(null),_=D(null),oe=f=>f?new Date(f).toLocaleString("es-ES"):"",le=f=>{var r;w.value=f,p.value={name:f.name,email:f.email,password:""},_.value=f.profile_photo_url||f.profile_photo_path||null,E.value=null,(r=W.value)==null||r.open()},ee=async f=>{await J("delete",f.id,null,f.name)&&x()},te=async()=>{var f,r,g,z;N.value=!0;try{let b=null;if(E.value){const T=new FormData;T.append("name",p.value.name),T.append("email",p.value.email),w.value||(T.append("password",p.value.password),T.append("password_confirmation",p.value.password)),T.append("photo",E.value),b=T}else b={...p.value},!w.value&&p.value.password&&(b.password_confirmation=p.value.password);w.value?await J("update",w.value.id,b):await J("create",null,b),ae(),x()}catch(b){console.error("Error saving user:",b);const T=((r=(f=b==null?void 0:b.response)==null?void 0:f.data)==null?void 0:r.message)||"No se pudo guardar el usuario.",X=(z=(g=b==null?void 0:b.response)==null?void 0:g.data)==null?void 0:z.errors;if(X&&typeof X=="object"){const ie=Object.values(X).flat().filter(Boolean).join("<br>");L.fire({title:"Validación fallida",html:ie||T,icon:"error"})}else L.fire({title:"Error",text:T,icon:"error"})}finally{N.value=!1}},ae=()=>{var f;w.value=null,p.value={name:"",email:"",password:""},E.value=null,_.value=null,(f=W.value)==null||f.close(),pe(()=>{Y.value=!1})};be(()=>Y.value,f=>{f&&(p.value={name:"",email:"",password:""},w.value=null,E.value=null,_.value=null,pe(()=>{var r;(r=W.value)==null||r.open()}))});const ne=f=>{const r=f.target.files&&f.target.files[0];if(!r)return;E.value=r;const g=new FileReader;g.onload=z=>{_.value=z.target.result},g.readAsDataURL(r)};return ve(async()=>{await R()}),(f,r)=>(d(),u(Z,null,[M(rt,{"table-id":"users-table",title:"Usuarios",columns:t,items:A(o),loading:A(l),error:A(i),pagination:A(s),"pagination-info":A(O),"search-query":A(C).searchQuery,"search-placeholder":"Buscar por nombre o email","per-page":A(c).per_page,"per-page-options":[10,25,50,100],sortable:"",onSearch:A(P),onSort:A(F),onPageChange:A(H),onPerPageChange:A(S)},{headerActions:$(()=>[M(K,{variant:"primary",onClick:r[0]||(r[0]=g=>Y.value=!0)},{default:$(()=>[...r[4]||(r[4]=[I(" Crear Usuario ",-1)])]),_:1})]),row:$(({item:g})=>{var z;return[e("tr",dt,[e("td",ut,v(g.id),1),e("td",ft,[e("div",gt,[e("div",mt,[e("span",pt,v((z=g.name)==null?void 0:z.charAt(0).toUpperCase()),1)]),e("div",null,[e("div",ht,v(g.name),1),e("div",bt,v(g.email),1)])])]),e("td",yt,[e("div",vt,[(d(!0),u(Z,null,se(g.roles,b=>(d(),he(ot,{key:b.id,variant:"primary",size:"xs",rounded:""},{default:$(()=>[I(v(b.name),1)]),_:2},1024))),128))])]),e("td",xt,v(oe(g.created_at)),1),e("td",kt,[e("div",wt,[M(K,{variant:"ghost",size:"sm",loading:A(Q)(g.id),onClick:b=>le(g)},{default:$(()=>[...r[5]||(r[5]=[I(" Editar ",-1)])]),_:1},8,["loading","onClick"]),M(K,{variant:"ghost",size:"sm",loading:A(Q)(g.id),onClick:b=>ee(g)},{default:$(()=>[...r[6]||(r[6]=[I(" Eliminar ",-1)])]),_:1},8,["loading","onClick"])])])])]}),_:1},8,["items","loading","error","pagination","pagination-info","search-query","per-page","onSearch","onSort","onPageChange","onPerPageChange"]),M($e,{ref_key:"userModal",ref:W,title:w.value?"Editar Usuario":"Crear Usuario",subtitle:w.value?`Modificar datos de ${w.value.name}`:"Agregar nuevo usuario al sistema","max-width":"xl","close-on-backdrop":""},{footer:$(()=>[e("div",It,[r[17]||(r[17]=e("div",{class:"text-xs text-gray-500 dark:text-slate-400"}," * Campos obligatorios ",-1)),e("div",zt,[M(K,{variant:"secondary",size:"sm",onClick:ae},{default:$(()=>[...r[15]||(r[15]=[I(" Cancelar ",-1)])]),_:1}),M(K,{variant:"primary",size:"sm",loading:N.value,disabled:!p.value.name||!p.value.email||!w.value&&!p.value.password,onClick:te},{default:$(()=>[e("div",Ft,[N.value?k("",!0):(d(),u("svg",Mt,[...r[16]||(r[16]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])),e("span",null,v(w.value?"Actualizar":"Crear"),1)])]),_:1},8,["loading","disabled"])])])]),default:$(()=>[e("div",$t,[e("form",{onSubmit:xe(te,["prevent"])},[e("div",Ct,[e("div",St,[r[14]||(r[14]=e("div",{class:"border-b border-gray-200 dark:border-slate-700 pb-3"},[e("h4",{class:"text-base font-semibold text-gray-900 dark:text-slate-100"},"Información Personal"),e("p",{class:"text-sm text-gray-600 dark:text-slate-400"},"Datos básicos del usuario")],-1)),e("div",Bt,[e("div",null,[r[7]||(r[7]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-2"}," Nombre completo * ",-1)),ue(e("input",{"onUpdate:modelValue":r[1]||(r[1]=g=>p.value.name=g),type:"text",required:"",placeholder:"Ej: Juan Carlos Pérez",class:"block w-full rounded-lg border border-gray-300 px-3 py-2.5 text-sm shadow-sm transition-colors focus:border-blue-500 focus:ring-2 focus:ring-blue-100 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100 dark:placeholder:text-slate-400 dark:focus:border-blue-500 dark:focus:ring-blue-500/20"},null,512),[[fe,p.value.name]])]),e("div",null,[r[8]||(r[8]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-2"}," Correo electrónico * ",-1)),ue(e("input",{"onUpdate:modelValue":r[2]||(r[2]=g=>p.value.email=g),type:"email",required:"",placeholder:"usuario@empresa.com",class:"block w-full rounded-lg border border-gray-300 px-3 py-2.5 text-sm shadow-sm transition-colors focus:border-blue-500 focus:ring-2 focus:ring-blue-100 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100 dark:placeholder:text-slate-400 dark:focus:border-blue-500 dark:focus:ring-blue-500/20"},null,512),[[fe,p.value.email]])])]),e("div",At,[r[10]||(r[10]=e("div",{class:"border-b border-gray-200 dark:border-slate-700 pb-3"},[e("h4",{class:"text-base font-semibold text-gray-900 dark:text-slate-100"},"Foto de perfil"),e("p",{class:"text-sm text-gray-600 dark:text-slate-400"},"Sube una foto para el usuario (opcional)")],-1)),e("div",Pt,[e("div",_t,[_.value?(d(),u("img",{key:0,src:_.value,alt:"Preview",class:"w-full h-full object-cover"},null,8,Et)):(d(),u("div",Tt,"Sin foto"))]),e("div",Dt,[e("input",{type:"file",accept:"image/*",onChange:ne,class:"block w-full text-sm text-gray-500 file:bg-white file:border file:rounded file:px-3 file:py-1 file:mr-3 file:border-gray-300 file:text-sm file:cursor-pointer dark:file:bg-slate-800"},null,32),r[9]||(r[9]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-slate-400"},"Formatos: JPG, PNG. Tamaño recomendado: 300x300px",-1))])])]),w.value?k("",!0):(d(),u("div",jt,[r[13]||(r[13]=e("div",{class:"border-b border-gray-200 dark:border-slate-700 pb-3"},[e("h4",{class:"text-base font-semibold text-gray-900 dark:text-slate-100"},"Configuración de Acceso"),e("p",{class:"text-sm text-gray-600 dark:text-slate-400"},"Contraseña para el nuevo usuario")],-1)),e("div",null,[r[11]||(r[11]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-2"}," Contraseña * ",-1)),ue(e("input",{"onUpdate:modelValue":r[3]||(r[3]=g=>p.value.password=g),type:"password",required:"",placeholder:"Mínimo 8 caracteres",class:"block w-full rounded-lg border border-gray-300 px-3 py-2.5 text-sm shadow-sm transition-colors focus:border-blue-500 focus:ring-2 focus:ring-blue-100 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100 dark:placeholder:text-slate-400 dark:focus:border-blue-500 dark:focus:ring-blue-500/20"},null,512),[[fe,p.value.password]]),r[12]||(r[12]=e("p",{class:"mt-2 text-xs text-gray-500 dark:text-slate-400"}," La contraseña debe tener al menos 8 caracteres ",-1))])]))])])],32)])]),_:1},8,["title","subtitle"])],64))}};export{Qt as default};
